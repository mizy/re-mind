(self["webpackChunk_tntx_remind"] = self["webpackChunk_tntx_remind"] || []).push([["vendors-node_modules_rc-o"],{

/***/ "./node_modules/rc-overflow/es/Item.js":
/*!*********************************************!*\
  !*** ./node_modules/rc-overflow/es/Item.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ "./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ "./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var rc_resize_observer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rc-resize-observer */ "./node_modules/rc-resize-observer/es/index.js");





 // Use shared variable to save bundle size

var UNDEFINED = undefined;

function InternalItem(props, ref) {
  var prefixCls = props.prefixCls,
      invalidate = props.invalidate,
      item = props.item,
      renderItem = props.renderItem,
      responsive = props.responsive,
      registerSize = props.registerSize,
      itemKey = props.itemKey,
      className = props.className,
      style = props.style,
      children = props.children,
      display = props.display,
      order = props.order,
      _props$component = props.component,
      Component = _props$component === void 0 ? 'div' : _props$component,
      restProps = (0,_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__.default)(props, ["prefixCls", "invalidate", "item", "renderItem", "responsive", "registerSize", "itemKey", "className", "style", "children", "display", "order", "component"]);

  var mergedHidden = responsive && !display; // ================================ Effect ================================

  function internalRegisterSize(width) {
    registerSize(itemKey, width);
  }

  react__WEBPACK_IMPORTED_MODULE_3__.useEffect(function () {
    return function () {
      internalRegisterSize(null);
    };
  }, []); // ================================ Render ================================

  var childNode = renderItem && item !== UNDEFINED ? renderItem(item) : children;
  var overflowStyle;

  if (!invalidate) {
    overflowStyle = {
      opacity: mergedHidden ? 0 : 1,
      height: mergedHidden ? 0 : UNDEFINED,
      overflowY: mergedHidden ? 'hidden' : UNDEFINED,
      order: responsive ? order : UNDEFINED,
      pointerEvents: mergedHidden ? 'none' : UNDEFINED,
      position: mergedHidden ? 'absolute' : UNDEFINED
    };
  }

  var overflowProps = {};

  if (mergedHidden) {
    overflowProps['aria-hidden'] = true;
  }

  var itemNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(Component, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({
    className: classnames__WEBPACK_IMPORTED_MODULE_4___default()(!invalidate && prefixCls, className),
    style: (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.default)({}, overflowStyle), style)
  }, overflowProps, restProps, {
    ref: ref
  }), childNode);

  if (responsive) {
    itemNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(rc_resize_observer__WEBPACK_IMPORTED_MODULE_5__.default, {
      onResize: function onResize(_ref) {
        var offsetWidth = _ref.offsetWidth;
        internalRegisterSize(offsetWidth);
      }
    }, itemNode);
  }

  return itemNode;
}

var Item = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.forwardRef(InternalItem);
Item.displayName = 'Item';
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Item);

/***/ }),

/***/ "./node_modules/rc-overflow/es/Overflow.js":
/*!*************************************************!*\
  !*** ./node_modules/rc-overflow/es/Overflow.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "OverflowContext": () => (/* binding */ OverflowContext),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ "./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ "./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var rc_resize_observer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rc-resize-observer */ "./node_modules/rc-resize-observer/es/index.js");
/* harmony import */ var _Item__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Item */ "./node_modules/rc-overflow/es/Item.js");
/* harmony import */ var _hooks_useBatchFrameState__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./hooks/useBatchFrameState */ "./node_modules/rc-overflow/es/hooks/useBatchFrameState.js");
/* harmony import */ var _RawItem__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./RawItem */ "./node_modules/rc-overflow/es/RawItem.js");











var OverflowContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createContext(null);
var RESPONSIVE = 'responsive';
var INVALIDATE = 'invalidate';

function defaultRenderRest(omittedItems) {
  return "+ ".concat(omittedItems.length, " ...");
}

function Overflow(props, ref) {
  var _props$prefixCls = props.prefixCls,
      prefixCls = _props$prefixCls === void 0 ? 'rc-overflow' : _props$prefixCls,
      _props$data = props.data,
      data = _props$data === void 0 ? [] : _props$data,
      renderItem = props.renderItem,
      renderRawItem = props.renderRawItem,
      itemKey = props.itemKey,
      _props$itemWidth = props.itemWidth,
      itemWidth = _props$itemWidth === void 0 ? 10 : _props$itemWidth,
      ssr = props.ssr,
      style = props.style,
      className = props.className,
      maxCount = props.maxCount,
      renderRest = props.renderRest,
      renderRawRest = props.renderRawRest,
      suffix = props.suffix,
      _props$component = props.component,
      Component = _props$component === void 0 ? 'div' : _props$component,
      itemComponent = props.itemComponent,
      onVisibleChange = props.onVisibleChange,
      restProps = (0,_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_3__.default)(props, ["prefixCls", "data", "renderItem", "renderRawItem", "itemKey", "itemWidth", "ssr", "style", "className", "maxCount", "renderRest", "renderRawRest", "suffix", "component", "itemComponent", "onVisibleChange"]);

  var createUseState = (0,_hooks_useBatchFrameState__WEBPACK_IMPORTED_MODULE_8__.useBatchFrameState)();
  var fullySSR = ssr === 'full';

  var _createUseState = createUseState(null),
      _createUseState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.default)(_createUseState, 2),
      containerWidth = _createUseState2[0],
      setContainerWidth = _createUseState2[1];

  var mergedContainerWidth = containerWidth || 0;

  var _createUseState3 = createUseState(new Map()),
      _createUseState4 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.default)(_createUseState3, 2),
      itemWidths = _createUseState4[0],
      setItemWidths = _createUseState4[1];

  var _createUseState5 = createUseState(0),
      _createUseState6 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.default)(_createUseState5, 2),
      prevRestWidth = _createUseState6[0],
      setPrevRestWidth = _createUseState6[1];

  var _createUseState7 = createUseState(0),
      _createUseState8 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.default)(_createUseState7, 2),
      restWidth = _createUseState8[0],
      setRestWidth = _createUseState8[1];

  var _createUseState9 = createUseState(0),
      _createUseState10 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.default)(_createUseState9, 2),
      suffixWidth = _createUseState10[0],
      setSuffixWidth = _createUseState10[1];

  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(null),
      _useState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.default)(_useState, 2),
      suffixFixedStart = _useState2[0],
      setSuffixFixedStart = _useState2[1];

  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(null),
      _useState4 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.default)(_useState3, 2),
      displayCount = _useState4[0],
      setDisplayCount = _useState4[1];

  var mergedDisplayCount = react__WEBPACK_IMPORTED_MODULE_4__.useMemo(function () {
    if (displayCount === null && fullySSR) {
      return Number.MAX_SAFE_INTEGER;
    }

    return displayCount || 0;
  }, [displayCount, containerWidth]);

  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false),
      _useState6 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.default)(_useState5, 2),
      restReady = _useState6[0],
      setRestReady = _useState6[1];

  var itemPrefixCls = "".concat(prefixCls, "-item"); // Always use the max width to avoid blink

  var mergedRestWidth = Math.max(prevRestWidth, restWidth); // ================================= Data =================================

  var isResponsive = data.length && maxCount === RESPONSIVE;
  var invalidate = maxCount === INVALIDATE;
  /**
   * When is `responsive`, we will always render rest node to get the real width of it for calculation
   */

  var showRest = isResponsive || typeof maxCount === 'number' && data.length > maxCount;
  var mergedData = (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(function () {
    var items = data;

    if (isResponsive) {
      if (containerWidth === null && fullySSR) {
        items = data;
      } else {
        items = data.slice(0, Math.min(data.length, mergedContainerWidth / itemWidth));
      }
    } else if (typeof maxCount === 'number') {
      items = data.slice(0, maxCount);
    }

    return items;
  }, [data, itemWidth, containerWidth, maxCount, isResponsive]);
  var omittedItems = (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(function () {
    if (isResponsive) {
      return data.slice(mergedDisplayCount + 1);
    }

    return data.slice(mergedData.length);
  }, [data, mergedData, isResponsive, mergedDisplayCount]); // ================================= Item =================================

  var getKey = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(function (item, index) {
    var _ref;

    if (typeof itemKey === 'function') {
      return itemKey(item);
    }

    return (_ref = itemKey && (item === null || item === void 0 ? void 0 : item[itemKey])) !== null && _ref !== void 0 ? _ref : index;
  }, [itemKey]);
  var mergedRenderItem = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(renderItem || function (item) {
    return item;
  }, [renderItem]);

  function updateDisplayCount(count, notReady) {
    setDisplayCount(count);

    if (!notReady) {
      setRestReady(count < data.length - 1);
      onVisibleChange === null || onVisibleChange === void 0 ? void 0 : onVisibleChange(count);
    }
  } // ================================= Size =================================


  function onOverflowResize(_, element) {
    setContainerWidth(element.clientWidth);
  }

  function registerSize(key, width) {
    setItemWidths(function (origin) {
      var clone = new Map(origin);

      if (width === null) {
        clone.delete(key);
      } else {
        clone.set(key, width);
      }

      return clone;
    });
  }

  function registerOverflowSize(_, width) {
    setRestWidth(width);
    setPrevRestWidth(restWidth);
  }

  function registerSuffixSize(_, width) {
    setSuffixWidth(width);
  } // ================================ Effect ================================


  function getItemWidth(index) {
    return itemWidths.get(getKey(mergedData[index], index));
  }

  react__WEBPACK_IMPORTED_MODULE_4__.useLayoutEffect(function () {
    if (mergedContainerWidth && mergedRestWidth && mergedData) {
      var totalWidth = suffixWidth;
      var len = mergedData.length;
      var lastIndex = len - 1; // When data count change to 0, reset this since not loop will reach

      if (!len) {
        updateDisplayCount(0);
        setSuffixFixedStart(null);
        return;
      }

      for (var i = 0; i < len; i += 1) {
        var currentItemWidth = getItemWidth(i); // Break since data not ready

        if (currentItemWidth === undefined) {
          updateDisplayCount(i - 1, true);
          break;
        } // Find best match


        totalWidth += currentItemWidth;

        if ( // Only one means `totalWidth` is the final width
        lastIndex === 0 && totalWidth <= mergedContainerWidth || // Last two width will be the final width
        i === lastIndex - 1 && totalWidth + getItemWidth(lastIndex) <= mergedContainerWidth) {
          // Additional check if match the end
          updateDisplayCount(lastIndex);
          setSuffixFixedStart(null);
          break;
        } else if (totalWidth + mergedRestWidth > mergedContainerWidth) {
          // Can not hold all the content to show rest
          updateDisplayCount(i - 1);
          setSuffixFixedStart(totalWidth - currentItemWidth - suffixWidth + restWidth);
          break;
        }
      }

      if (suffix && getItemWidth(0) + suffixWidth > mergedContainerWidth) {
        setSuffixFixedStart(null);
      }
    }
  }, [mergedContainerWidth, itemWidths, restWidth, suffixWidth, getKey, mergedData]); // ================================ Render ================================

  var displayRest = restReady && !!omittedItems.length;
  var suffixStyle = {};

  if (suffixFixedStart !== null && isResponsive) {
    suffixStyle = {
      position: 'absolute',
      left: suffixFixedStart,
      top: 0
    };
  }

  var itemSharedProps = {
    prefixCls: itemPrefixCls,
    responsive: isResponsive,
    component: itemComponent,
    invalidate: invalidate
  }; // >>>>> Choice render fun by `renderRawItem`

  var internalRenderItemNode = renderRawItem ? function (item, index) {
    var key = getKey(item, index);
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement(OverflowContext.Provider, {
      key: key,
      value: (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.default)({}, itemSharedProps), {}, {
        order: index,
        item: item,
        itemKey: key,
        registerSize: registerSize,
        display: index <= mergedDisplayCount
      })
    }, renderRawItem(item, index));
  } : function (item, index) {
    var key = getKey(item, index);
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement(_Item__WEBPACK_IMPORTED_MODULE_7__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, itemSharedProps, {
      order: index,
      key: key,
      item: item,
      renderItem: mergedRenderItem,
      itemKey: key,
      registerSize: registerSize,
      display: index <= mergedDisplayCount
    }));
  }; // >>>>> Rest node

  var restNode;
  var restContextProps = {
    order: displayRest ? mergedDisplayCount : Number.MAX_SAFE_INTEGER,
    className: "".concat(itemPrefixCls, "-rest"),
    registerSize: registerOverflowSize,
    display: displayRest
  };

  if (!renderRawRest) {
    var mergedRenderRest = renderRest || defaultRenderRest;
    restNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement(_Item__WEBPACK_IMPORTED_MODULE_7__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, itemSharedProps, restContextProps), typeof mergedRenderRest === 'function' ? mergedRenderRest(omittedItems) : mergedRenderRest);
  } else if (renderRawRest) {
    restNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement(OverflowContext.Provider, {
      value: (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.default)({}, itemSharedProps), restContextProps)
    }, renderRawRest(omittedItems));
  }

  var overflowNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement(Component, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({
    className: classnames__WEBPACK_IMPORTED_MODULE_5___default()(!invalidate && prefixCls, className),
    style: style,
    ref: ref
  }, restProps), mergedData.map(internalRenderItemNode), showRest ? restNode : null, suffix && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement(_Item__WEBPACK_IMPORTED_MODULE_7__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, itemSharedProps, {
    order: mergedDisplayCount,
    className: "".concat(itemPrefixCls, "-suffix"),
    registerSize: registerSuffixSize,
    display: true,
    style: suffixStyle
  }), suffix));

  if (isResponsive) {
    overflowNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement(rc_resize_observer__WEBPACK_IMPORTED_MODULE_6__.default, {
      onResize: onOverflowResize
    }, overflowNode);
  }

  return overflowNode;
}

var ForwardOverflow = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.forwardRef(Overflow);
ForwardOverflow.displayName = 'Overflow';
ForwardOverflow.Item = _RawItem__WEBPACK_IMPORTED_MODULE_9__.default;
ForwardOverflow.RESPONSIVE = RESPONSIVE;
ForwardOverflow.INVALIDATE = INVALIDATE; // Convert to generic type

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ForwardOverflow);

/***/ }),

/***/ "./node_modules/rc-overflow/es/RawItem.js":
/*!************************************************!*\
  !*** ./node_modules/rc-overflow/es/RawItem.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ "./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Item__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Item */ "./node_modules/rc-overflow/es/Item.js");
/* harmony import */ var _Overflow__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Overflow */ "./node_modules/rc-overflow/es/Overflow.js");







var InternalRawItem = function InternalRawItem(props, ref) {
  var context = react__WEBPACK_IMPORTED_MODULE_2__.useContext(_Overflow__WEBPACK_IMPORTED_MODULE_5__.OverflowContext); // Render directly when context not provided

  if (!context) {
    var _props$component = props.component,
        Component = _props$component === void 0 ? 'div' : _props$component,
        _restProps = (0,_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__.default)(props, ["component"]);

    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(Component, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, _restProps, {
      ref: ref
    }));
  }

  var contextClassName = context.className,
      restContext = (0,_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__.default)(context, ["className"]);

  var className = props.className,
      restProps = (0,_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__.default)(props, ["className"]); // Do not pass context to sub item to avoid multiple measure


  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_Overflow__WEBPACK_IMPORTED_MODULE_5__.OverflowContext.Provider, {
    value: null
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_Item__WEBPACK_IMPORTED_MODULE_4__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({
    ref: ref,
    className: classnames__WEBPACK_IMPORTED_MODULE_3___default()(contextClassName, className)
  }, restContext, restProps)));
};

var RawItem = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.forwardRef(InternalRawItem);
RawItem.displayName = 'RawItem';
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RawItem);

/***/ }),

/***/ "./node_modules/rc-overflow/es/hooks/useBatchFrameState.js":
/*!*****************************************************************!*\
  !*** ./node_modules/rc-overflow/es/hooks/useBatchFrameState.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "useBatchFrameState": () => (/* binding */ useBatchFrameState)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var rc_util_es_raf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rc-util/es/raf */ "./node_modules/rc-util/es/raf.js");



/**
 * State generate. Return a `setState` but it will flush all state with one render to save perf.
 * This is not a realization of `unstable_batchedUpdates`.
 */

function useBatchFrameState() {
  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),
      _useState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.default)(_useState, 2),
      forceUpdate = _useState2[1];

  var statesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);
  var destroyRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);
  var walkingIndex = 0;
  var beforeFrameId = 0;
  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {
    return function () {
      destroyRef.current = true;
    };
  }, []);

  function createState(defaultValue) {
    var myIndex = walkingIndex;
    walkingIndex += 1; // Fill value if not exist yet

    if (statesRef.current.length < myIndex + 1) {
      statesRef.current[myIndex] = defaultValue;
    } // Return filled as `setState`


    var value = statesRef.current[myIndex];

    function setValue(val) {
      statesRef.current[myIndex] = typeof val === 'function' ? val(statesRef.current[myIndex]) : val;
      rc_util_es_raf__WEBPACK_IMPORTED_MODULE_2__.default.cancel(beforeFrameId); // Flush with batch

      beforeFrameId = (0,rc_util_es_raf__WEBPACK_IMPORTED_MODULE_2__.default)(function () {
        if (!destroyRef.current) {
          forceUpdate({});
        }
      });
    }

    return [value, setValue];
  }

  return createState;
}

/***/ }),

/***/ "./node_modules/rc-overflow/es/index.js":
/*!**********************************************!*\
  !*** ./node_modules/rc-overflow/es/index.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Overflow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Overflow */ "./node_modules/rc-overflow/es/Overflow.js");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_Overflow__WEBPACK_IMPORTED_MODULE_0__.default);

/***/ }),

/***/ "./node_modules/rc-pagination/es/KeyCode.js":
/*!**************************************************!*\
  !*** ./node_modules/rc-pagination/es/KeyCode.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  ZERO: 48,
  NINE: 57,
  NUMPAD_ZERO: 96,
  NUMPAD_NINE: 105,
  BACKSPACE: 8,
  DELETE: 46,
  ENTER: 13,
  ARROW_UP: 38,
  ARROW_DOWN: 40
});

/***/ }),

/***/ "./node_modules/rc-pagination/es/Options.js":
/*!**************************************************!*\
  !*** ./node_modules/rc-pagination/es/Options.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createSuper */ "./node_modules/@babel/runtime/helpers/esm/createSuper.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _KeyCode__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./KeyCode */ "./node_modules/rc-pagination/es/KeyCode.js");





/* eslint react/prop-types: 0 */



var Options = /*#__PURE__*/function (_React$Component) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__.default)(Options, _React$Component);

  var _super = (0,_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__.default)(Options);

  function Options() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.default)(this, Options);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    _this.state = {
      goInputText: ''
    };

    _this.buildOptionText = function (value) {
      return "".concat(value, " ").concat(_this.props.locale.items_per_page);
    };

    _this.changeSize = function (value) {
      _this.props.changeSize(Number(value));
    };

    _this.handleChange = function (e) {
      _this.setState({
        goInputText: e.target.value
      });
    };

    _this.handleBlur = function (e) {
      var _this$props = _this.props,
          goButton = _this$props.goButton,
          quickGo = _this$props.quickGo,
          rootPrefixCls = _this$props.rootPrefixCls;
      var goInputText = _this.state.goInputText;

      if (goButton || goInputText === '') {
        return;
      }

      _this.setState({
        goInputText: ''
      });

      if (e.relatedTarget && (e.relatedTarget.className.indexOf("".concat(rootPrefixCls, "-item-link")) >= 0 || e.relatedTarget.className.indexOf("".concat(rootPrefixCls, "-item")) >= 0)) {
        return;
      }

      quickGo(_this.getValidValue());
    };

    _this.go = function (e) {
      var goInputText = _this.state.goInputText;

      if (goInputText === '') {
        return;
      }

      if (e.keyCode === _KeyCode__WEBPACK_IMPORTED_MODULE_5__.default.ENTER || e.type === 'click') {
        _this.setState({
          goInputText: ''
        });

        _this.props.quickGo(_this.getValidValue());
      }
    };

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.default)(Options, [{
    key: "getValidValue",
    value: function getValidValue() {
      var goInputText = this.state.goInputText; // eslint-disable-next-line no-restricted-globals

      return !goInputText || isNaN(goInputText) ? undefined : Number(goInputText);
    }
  }, {
    key: "getPageSizeOptions",
    value: function getPageSizeOptions() {
      var _this$props2 = this.props,
          pageSize = _this$props2.pageSize,
          pageSizeOptions = _this$props2.pageSizeOptions;

      if (pageSizeOptions.some(function (option) {
        return option.toString() === pageSize.toString();
      })) {
        return pageSizeOptions;
      }

      return pageSizeOptions.concat([pageSize.toString()]).sort(function (a, b) {
        // eslint-disable-next-line no-restricted-globals
        var numberA = isNaN(Number(a)) ? 0 : Number(a); // eslint-disable-next-line no-restricted-globals

        var numberB = isNaN(Number(b)) ? 0 : Number(b);
        return numberA - numberB;
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props3 = this.props,
          pageSize = _this$props3.pageSize,
          locale = _this$props3.locale,
          rootPrefixCls = _this$props3.rootPrefixCls,
          changeSize = _this$props3.changeSize,
          quickGo = _this$props3.quickGo,
          goButton = _this$props3.goButton,
          selectComponentClass = _this$props3.selectComponentClass,
          buildOptionText = _this$props3.buildOptionText,
          selectPrefixCls = _this$props3.selectPrefixCls,
          disabled = _this$props3.disabled;
      var goInputText = this.state.goInputText;
      var prefixCls = "".concat(rootPrefixCls, "-options");
      var Select = selectComponentClass;
      var changeSelect = null;
      var goInput = null;
      var gotoButton = null;

      if (!changeSize && !quickGo) {
        return null;
      }

      var pageSizeOptions = this.getPageSizeOptions();

      if (changeSize && Select) {
        var options = pageSizeOptions.map(function (opt, i) {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement(Select.Option, {
            key: i,
            value: opt.toString()
          }, (buildOptionText || _this2.buildOptionText)(opt));
        });
        changeSelect = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement(Select, {
          disabled: disabled,
          prefixCls: selectPrefixCls,
          showSearch: false,
          className: "".concat(prefixCls, "-size-changer"),
          optionLabelProp: "children",
          dropdownMatchSelectWidth: false,
          value: (pageSize || pageSizeOptions[0]).toString(),
          onChange: this.changeSize,
          getPopupContainer: function getPopupContainer(triggerNode) {
            return triggerNode.parentNode;
          }
        }, options);
      }

      if (quickGo) {
        if (goButton) {
          gotoButton = typeof goButton === 'boolean' ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement("button", {
            type: "button",
            onClick: this.go,
            onKeyUp: this.go,
            disabled: disabled,
            className: "".concat(prefixCls, "-quick-jumper-button")
          }, locale.jump_to_confirm) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement("span", {
            onClick: this.go,
            onKeyUp: this.go
          }, goButton);
        }

        goInput = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement("div", {
          className: "".concat(prefixCls, "-quick-jumper")
        }, locale.jump_to, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement("input", {
          disabled: disabled,
          type: "text",
          value: goInputText,
          onChange: this.handleChange,
          onKeyUp: this.go,
          onBlur: this.handleBlur
        }), locale.page, gotoButton);
      }

      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4__.createElement("li", {
        className: "".concat(prefixCls)
      }, changeSelect, goInput);
    }
  }]);

  return Options;
}(react__WEBPACK_IMPORTED_MODULE_4__.Component);

Options.defaultProps = {
  pageSizeOptions: ['10', '20', '50', '100']
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Options);

/***/ }),

/***/ "./node_modules/rc-pagination/es/Pager.js":
/*!************************************************!*\
  !*** ./node_modules/rc-pagination/es/Pager.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);


/* eslint react/prop-types: 0 */



var Pager = function Pager(props) {
  var _classNames;

  var prefixCls = "".concat(props.rootPrefixCls, "-item");
  var cls = classnames__WEBPACK_IMPORTED_MODULE_2___default()(prefixCls, "".concat(prefixCls, "-").concat(props.page), (_classNames = {}, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_classNames, "".concat(prefixCls, "-active"), props.active), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_classNames, props.className, !!props.className), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_classNames, "".concat(prefixCls, "-disabled"), !props.page), _classNames));

  var handleClick = function handleClick() {
    props.onClick(props.page);
  };

  var handleKeyPress = function handleKeyPress(e) {
    props.onKeyPress(e, props.onClick, props.page);
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("li", {
    title: props.showTitle ? props.page : null,
    className: cls,
    onClick: handleClick,
    onKeyPress: handleKeyPress,
    tabIndex: "0"
  }, props.itemRender(props.page, 'page', /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("a", {
    rel: "nofollow"
  }, props.page)));
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Pager);

/***/ }),

/***/ "./node_modules/rc-pagination/es/Pagination.js":
/*!*****************************************************!*\
  !*** ./node_modules/rc-pagination/es/Pagination.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ "./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createSuper */ "./node_modules/@babel/runtime/helpers/esm/createSuper.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Pager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Pager */ "./node_modules/rc-pagination/es/Pager.js");
/* harmony import */ var _Options__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Options */ "./node_modules/rc-pagination/es/Options.js");
/* harmony import */ var _KeyCode__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./KeyCode */ "./node_modules/rc-pagination/es/KeyCode.js");
/* harmony import */ var _locale_zh_CN__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./locale/zh_CN */ "./node_modules/rc-pagination/es/locale/zh_CN.js");








/* eslint react/prop-types: 0 */







function noop() {}

function isInteger(value) {
  return (// eslint-disable-next-line no-restricted-globals
    typeof value === 'number' && isFinite(value) && Math.floor(value) === value
  );
}

function defaultItemRender(page, type, element) {
  return element;
}

function calculatePage(p, state, props) {
  var pageSize = typeof p === 'undefined' ? state.pageSize : p;
  return Math.floor((props.total - 1) / pageSize) + 1;
}

var Pagination = /*#__PURE__*/function (_React$Component) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.default)(Pagination, _React$Component);

  var _super = (0,_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_6__.default)(Pagination);

  function Pagination(props) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.default)(this, Pagination);

    _this = _super.call(this, props);

    _this.getJumpPrevPage = function () {
      return Math.max(1, _this.state.current - (_this.props.showLessItems ? 3 : 5));
    };

    _this.getJumpNextPage = function () {
      return Math.min(calculatePage(undefined, _this.state, _this.props), _this.state.current + (_this.props.showLessItems ? 3 : 5));
    };

    _this.getItemIcon = function (icon, label) {
      var prefixCls = _this.props.prefixCls;
      var iconNode = icon || /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("button", {
        type: "button",
        "aria-label": label,
        className: "".concat(prefixCls, "-item-link")
      });

      if (typeof icon === 'function') {
        iconNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement(icon, (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__.default)({}, _this.props));
      }

      return iconNode;
    };

    _this.savePaginationNode = function (node) {
      _this.paginationNode = node;
    };

    _this.isValid = function (page) {
      return isInteger(page) && page !== _this.state.current;
    };

    _this.shouldDisplayQuickJumper = function () {
      var _this$props = _this.props,
          showQuickJumper = _this$props.showQuickJumper,
          pageSize = _this$props.pageSize,
          total = _this$props.total;

      if (total <= pageSize) {
        return false;
      }

      return showQuickJumper;
    };

    _this.handleKeyDown = function (e) {
      if (e.keyCode === _KeyCode__WEBPACK_IMPORTED_MODULE_11__.default.ARROW_UP || e.keyCode === _KeyCode__WEBPACK_IMPORTED_MODULE_11__.default.ARROW_DOWN) {
        e.preventDefault();
      }
    };

    _this.handleKeyUp = function (e) {
      var value = _this.getValidValue(e);

      var currentInputValue = _this.state.currentInputValue;

      if (value !== currentInputValue) {
        _this.setState({
          currentInputValue: value
        });
      }

      if (e.keyCode === _KeyCode__WEBPACK_IMPORTED_MODULE_11__.default.ENTER) {
        _this.handleChange(value);
      } else if (e.keyCode === _KeyCode__WEBPACK_IMPORTED_MODULE_11__.default.ARROW_UP) {
        _this.handleChange(value - 1);
      } else if (e.keyCode === _KeyCode__WEBPACK_IMPORTED_MODULE_11__.default.ARROW_DOWN) {
        _this.handleChange(value + 1);
      }
    };

    _this.changePageSize = function (size) {
      var current = _this.state.current;
      var newCurrent = calculatePage(size, _this.state, _this.props);
      current = current > newCurrent ? newCurrent : current; // fix the issue:
      // Once 'total' is 0, 'current' in 'onShowSizeChange' is 0, which is not correct.

      if (newCurrent === 0) {
        // eslint-disable-next-line prefer-destructuring
        current = _this.state.current;
      }

      if (typeof size === 'number') {
        if (!('pageSize' in _this.props)) {
          _this.setState({
            pageSize: size
          });
        }

        if (!('current' in _this.props)) {
          _this.setState({
            current: current,
            currentInputValue: current
          });
        }
      }

      _this.props.onShowSizeChange(current, size);

      if ('onChange' in _this.props && _this.props.onChange) {
        _this.props.onChange(current, size);
      }
    };

    _this.handleChange = function (p) {
      var disabled = _this.props.disabled;
      var page = p;

      if (_this.isValid(page) && !disabled) {
        var currentPage = calculatePage(undefined, _this.state, _this.props);

        if (page > currentPage) {
          page = currentPage;
        } else if (page < 1) {
          page = 1;
        }

        if (!('current' in _this.props)) {
          _this.setState({
            current: page,
            currentInputValue: page
          });
        }

        var pageSize = _this.state.pageSize;

        _this.props.onChange(page, pageSize);

        return page;
      }

      return _this.state.current;
    };

    _this.prev = function () {
      if (_this.hasPrev()) {
        _this.handleChange(_this.state.current - 1);
      }
    };

    _this.next = function () {
      if (_this.hasNext()) {
        _this.handleChange(_this.state.current + 1);
      }
    };

    _this.jumpPrev = function () {
      _this.handleChange(_this.getJumpPrevPage());
    };

    _this.jumpNext = function () {
      _this.handleChange(_this.getJumpNextPage());
    };

    _this.hasPrev = function () {
      return _this.state.current > 1;
    };

    _this.hasNext = function () {
      return _this.state.current < calculatePage(undefined, _this.state, _this.props);
    };

    _this.runIfEnter = function (event, callback) {
      if (event.key === 'Enter' || event.charCode === 13) {
        for (var _len = arguments.length, restParams = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
          restParams[_key - 2] = arguments[_key];
        }

        callback.apply(void 0, restParams);
      }
    };

    _this.runIfEnterPrev = function (e) {
      _this.runIfEnter(e, _this.prev);
    };

    _this.runIfEnterNext = function (e) {
      _this.runIfEnter(e, _this.next);
    };

    _this.runIfEnterJumpPrev = function (e) {
      _this.runIfEnter(e, _this.jumpPrev);
    };

    _this.runIfEnterJumpNext = function (e) {
      _this.runIfEnter(e, _this.jumpNext);
    };

    _this.handleGoTO = function (e) {
      if (e.keyCode === _KeyCode__WEBPACK_IMPORTED_MODULE_11__.default.ENTER || e.type === 'click') {
        _this.handleChange(_this.state.currentInputValue);
      }
    };

    var hasOnChange = props.onChange !== noop;
    var hasCurrent = ('current' in props);

    if (hasCurrent && !hasOnChange) {
      // eslint-disable-next-line no-console
      console.warn('Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.');
    }

    var _current = props.defaultCurrent;

    if ('current' in props) {
      // eslint-disable-next-line prefer-destructuring
      _current = props.current;
    }

    var _pageSize = props.defaultPageSize;

    if ('pageSize' in props) {
      // eslint-disable-next-line prefer-destructuring
      _pageSize = props.pageSize;
    }

    _current = Math.min(_current, calculatePage(_pageSize, undefined, props));
    _this.state = {
      current: _current,
      currentInputValue: _current,
      pageSize: _pageSize
    };
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.default)(Pagination, [{
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps, prevState) {
      // When current page change, fix focused style of prev item
      // A hacky solution of https://github.com/ant-design/ant-design/issues/8948
      var prefixCls = this.props.prefixCls;

      if (prevState.current !== this.state.current && this.paginationNode) {
        var lastCurrentNode = this.paginationNode.querySelector(".".concat(prefixCls, "-item-").concat(prevState.current));

        if (lastCurrentNode && document.activeElement === lastCurrentNode) {
          lastCurrentNode.blur();
        }
      }
    }
  }, {
    key: "getValidValue",
    value: function getValidValue(e) {
      var inputValue = e.target.value;
      var allPages = calculatePage(undefined, this.state, this.props);
      var currentInputValue = this.state.currentInputValue;
      var value;

      if (inputValue === '') {
        value = inputValue; // eslint-disable-next-line no-restricted-globals
      } else if (isNaN(Number(inputValue))) {
        value = currentInputValue;
      } else if (inputValue >= allPages) {
        value = allPages;
      } else {
        value = Number(inputValue);
      }

      return value;
    }
  }, {
    key: "getShowSizeChanger",
    value: function getShowSizeChanger() {
      var _this$props2 = this.props,
          showSizeChanger = _this$props2.showSizeChanger,
          total = _this$props2.total,
          totalBoundaryShowSizeChanger = _this$props2.totalBoundaryShowSizeChanger;

      if (typeof showSizeChanger !== 'undefined') {
        return showSizeChanger;
      }

      return total > totalBoundaryShowSizeChanger;
    }
  }, {
    key: "renderPrev",
    value: function renderPrev(prevPage) {
      var _this$props3 = this.props,
          prevIcon = _this$props3.prevIcon,
          itemRender = _this$props3.itemRender;
      var prevButton = itemRender(prevPage, 'prev', this.getItemIcon(prevIcon, 'prev page'));
      var disabled = !this.hasPrev();
      return /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_7__.isValidElement)(prevButton) ? /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_7__.cloneElement)(prevButton, {
        disabled: disabled
      }) : prevButton;
    }
  }, {
    key: "renderNext",
    value: function renderNext(nextPage) {
      var _this$props4 = this.props,
          nextIcon = _this$props4.nextIcon,
          itemRender = _this$props4.itemRender;
      var nextButton = itemRender(nextPage, 'next', this.getItemIcon(nextIcon, 'next page'));
      var disabled = !this.hasNext();
      return /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_7__.isValidElement)(nextButton) ? /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_7__.cloneElement)(nextButton, {
        disabled: disabled
      }) : nextButton;
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props5 = this.props,
          prefixCls = _this$props5.prefixCls,
          className = _this$props5.className,
          style = _this$props5.style,
          disabled = _this$props5.disabled,
          hideOnSinglePage = _this$props5.hideOnSinglePage,
          total = _this$props5.total,
          locale = _this$props5.locale,
          showQuickJumper = _this$props5.showQuickJumper,
          showLessItems = _this$props5.showLessItems,
          showTitle = _this$props5.showTitle,
          showTotal = _this$props5.showTotal,
          simple = _this$props5.simple,
          itemRender = _this$props5.itemRender,
          showPrevNextJumpers = _this$props5.showPrevNextJumpers,
          jumpPrevIcon = _this$props5.jumpPrevIcon,
          jumpNextIcon = _this$props5.jumpNextIcon,
          selectComponentClass = _this$props5.selectComponentClass,
          selectPrefixCls = _this$props5.selectPrefixCls,
          pageSizeOptions = _this$props5.pageSizeOptions;
      var _this$state = this.state,
          current = _this$state.current,
          pageSize = _this$state.pageSize,
          currentInputValue = _this$state.currentInputValue; // When hideOnSinglePage is true and there is only 1 page, hide the pager

      if (hideOnSinglePage === true && total <= pageSize) {
        return null;
      }

      var allPages = calculatePage(undefined, this.state, this.props);
      var pagerList = [];
      var jumpPrev = null;
      var jumpNext = null;
      var firstPager = null;
      var lastPager = null;
      var gotoButton = null;
      var goButton = showQuickJumper && showQuickJumper.goButton;
      var pageBufferSize = showLessItems ? 1 : 2;
      var prevPage = current - 1 > 0 ? current - 1 : 0;
      var nextPage = current + 1 < allPages ? current + 1 : allPages;
      var dataOrAriaAttributeProps = Object.keys(this.props).reduce(function (prev, key) {
        if (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role') {
          // eslint-disable-next-line no-param-reassign
          prev[key] = _this2.props[key];
        }

        return prev;
      }, {});

      if (simple) {
        if (goButton) {
          if (typeof goButton === 'boolean') {
            gotoButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("button", {
              type: "button",
              onClick: this.handleGoTO,
              onKeyUp: this.handleGoTO
            }, locale.jump_to_confirm);
          } else {
            gotoButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("span", {
              onClick: this.handleGoTO,
              onKeyUp: this.handleGoTO
            }, goButton);
          }

          gotoButton = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("li", {
            title: showTitle ? "".concat(locale.jump_to).concat(current, "/").concat(allPages) : null,
            className: "".concat(prefixCls, "-simple-pager")
          }, gotoButton);
        }

        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("ul", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({
          className: classnames__WEBPACK_IMPORTED_MODULE_8___default()(prefixCls, "".concat(prefixCls, "-simple"), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)({}, "".concat(prefixCls, "-disabled"), disabled), className),
          style: style,
          ref: this.savePaginationNode
        }, dataOrAriaAttributeProps), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("li", {
          title: showTitle ? locale.prev_page : null,
          onClick: this.prev,
          tabIndex: this.hasPrev() ? 0 : null,
          onKeyPress: this.runIfEnterPrev,
          className: classnames__WEBPACK_IMPORTED_MODULE_8___default()("".concat(prefixCls, "-prev"), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)({}, "".concat(prefixCls, "-disabled"), !this.hasPrev())),
          "aria-disabled": !this.hasPrev()
        }, this.renderPrev(prevPage)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("li", {
          title: showTitle ? "".concat(current, "/").concat(allPages) : null,
          className: "".concat(prefixCls, "-simple-pager")
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("input", {
          type: "text",
          value: currentInputValue,
          disabled: disabled,
          onKeyDown: this.handleKeyDown,
          onKeyUp: this.handleKeyUp,
          onChange: this.handleKeyUp,
          size: "3"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("span", {
          className: "".concat(prefixCls, "-slash")
        }, "/"), allPages), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("li", {
          title: showTitle ? locale.next_page : null,
          onClick: this.next,
          tabIndex: this.hasPrev() ? 0 : null,
          onKeyPress: this.runIfEnterNext,
          className: classnames__WEBPACK_IMPORTED_MODULE_8___default()("".concat(prefixCls, "-next"), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)({}, "".concat(prefixCls, "-disabled"), !this.hasNext())),
          "aria-disabled": !this.hasNext()
        }, this.renderNext(nextPage)), gotoButton);
      }

      if (allPages <= 3 + pageBufferSize * 2) {
        var pagerProps = {
          locale: locale,
          rootPrefixCls: prefixCls,
          onClick: this.handleChange,
          onKeyPress: this.runIfEnter,
          showTitle: showTitle,
          itemRender: itemRender
        };

        if (!allPages) {
          pagerList.push( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement(_Pager__WEBPACK_IMPORTED_MODULE_9__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, pagerProps, {
            key: "noPager",
            page: allPages,
            className: "".concat(prefixCls, "-disabled")
          })));
        }

        for (var i = 1; i <= allPages; i += 1) {
          var active = current === i;
          pagerList.push( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement(_Pager__WEBPACK_IMPORTED_MODULE_9__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, pagerProps, {
            key: i,
            page: i,
            active: active
          })));
        }
      } else {
        var prevItemTitle = showLessItems ? locale.prev_3 : locale.prev_5;
        var nextItemTitle = showLessItems ? locale.next_3 : locale.next_5;

        if (showPrevNextJumpers) {
          jumpPrev = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("li", {
            title: showTitle ? prevItemTitle : null,
            key: "prev",
            onClick: this.jumpPrev,
            tabIndex: "0",
            onKeyPress: this.runIfEnterJumpPrev,
            className: classnames__WEBPACK_IMPORTED_MODULE_8___default()("".concat(prefixCls, "-jump-prev"), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)({}, "".concat(prefixCls, "-jump-prev-custom-icon"), !!jumpPrevIcon))
          }, itemRender(this.getJumpPrevPage(), 'jump-prev', this.getItemIcon(jumpPrevIcon, 'prev page')));
          jumpNext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("li", {
            title: showTitle ? nextItemTitle : null,
            key: "next",
            tabIndex: "0",
            onClick: this.jumpNext,
            onKeyPress: this.runIfEnterJumpNext,
            className: classnames__WEBPACK_IMPORTED_MODULE_8___default()("".concat(prefixCls, "-jump-next"), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)({}, "".concat(prefixCls, "-jump-next-custom-icon"), !!jumpNextIcon))
          }, itemRender(this.getJumpNextPage(), 'jump-next', this.getItemIcon(jumpNextIcon, 'next page')));
        }

        lastPager = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement(_Pager__WEBPACK_IMPORTED_MODULE_9__.default, {
          locale: locale,
          last: true,
          rootPrefixCls: prefixCls,
          onClick: this.handleChange,
          onKeyPress: this.runIfEnter,
          key: allPages,
          page: allPages,
          active: false,
          showTitle: showTitle,
          itemRender: itemRender
        });
        firstPager = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement(_Pager__WEBPACK_IMPORTED_MODULE_9__.default, {
          locale: locale,
          rootPrefixCls: prefixCls,
          onClick: this.handleChange,
          onKeyPress: this.runIfEnter,
          key: 1,
          page: 1,
          active: false,
          showTitle: showTitle,
          itemRender: itemRender
        });
        var left = Math.max(1, current - pageBufferSize);
        var right = Math.min(current + pageBufferSize, allPages);

        if (current - 1 <= pageBufferSize) {
          right = 1 + pageBufferSize * 2;
        }

        if (allPages - current <= pageBufferSize) {
          left = allPages - pageBufferSize * 2;
        }

        for (var _i = left; _i <= right; _i += 1) {
          var _active = current === _i;

          pagerList.push( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement(_Pager__WEBPACK_IMPORTED_MODULE_9__.default, {
            locale: locale,
            rootPrefixCls: prefixCls,
            onClick: this.handleChange,
            onKeyPress: this.runIfEnter,
            key: _i,
            page: _i,
            active: _active,
            showTitle: showTitle,
            itemRender: itemRender
          }));
        }

        if (current - 1 >= pageBufferSize * 2 && current !== 1 + 2) {
          pagerList[0] = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_7__.cloneElement)(pagerList[0], {
            className: "".concat(prefixCls, "-item-after-jump-prev")
          });
          pagerList.unshift(jumpPrev);
        }

        if (allPages - current >= pageBufferSize * 2 && current !== allPages - 2) {
          pagerList[pagerList.length - 1] = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_7__.cloneElement)(pagerList[pagerList.length - 1], {
            className: "".concat(prefixCls, "-item-before-jump-next")
          });
          pagerList.push(jumpNext);
        }

        if (left !== 1) {
          pagerList.unshift(firstPager);
        }

        if (right !== allPages) {
          pagerList.push(lastPager);
        }
      }

      var totalText = null;

      if (showTotal) {
        totalText = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("li", {
          className: "".concat(prefixCls, "-total-text")
        }, showTotal(total, [total === 0 ? 0 : (current - 1) * pageSize + 1, current * pageSize > total ? total : current * pageSize]));
      }

      var prevDisabled = !this.hasPrev() || !allPages;
      var nextDisabled = !this.hasNext() || !allPages;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("ul", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({
        className: classnames__WEBPACK_IMPORTED_MODULE_8___default()(prefixCls, className, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)({}, "".concat(prefixCls, "-disabled"), disabled)),
        style: style,
        unselectable: "unselectable",
        ref: this.savePaginationNode
      }, dataOrAriaAttributeProps), totalText, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("li", {
        title: showTitle ? locale.prev_page : null,
        onClick: this.prev,
        tabIndex: prevDisabled ? null : 0,
        onKeyPress: this.runIfEnterPrev,
        className: classnames__WEBPACK_IMPORTED_MODULE_8___default()("".concat(prefixCls, "-prev"), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)({}, "".concat(prefixCls, "-disabled"), prevDisabled)),
        "aria-disabled": prevDisabled
      }, this.renderPrev(prevPage)), pagerList, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement("li", {
        title: showTitle ? locale.next_page : null,
        onClick: this.next,
        tabIndex: nextDisabled ? null : 0,
        onKeyPress: this.runIfEnterNext,
        className: classnames__WEBPACK_IMPORTED_MODULE_8___default()("".concat(prefixCls, "-next"), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)({}, "".concat(prefixCls, "-disabled"), nextDisabled)),
        "aria-disabled": nextDisabled
      }, this.renderNext(nextPage)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7__.createElement(_Options__WEBPACK_IMPORTED_MODULE_10__.default, {
        disabled: disabled,
        locale: locale,
        rootPrefixCls: prefixCls,
        selectComponentClass: selectComponentClass,
        selectPrefixCls: selectPrefixCls,
        changeSize: this.getShowSizeChanger() ? this.changePageSize : null,
        current: current,
        pageSize: pageSize,
        pageSizeOptions: pageSizeOptions,
        quickGo: this.shouldDisplayQuickJumper() ? this.handleChange : null,
        goButton: goButton
      }));
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(props, prevState) {
      var newState = {};

      if ('current' in props) {
        newState.current = props.current;

        if (props.current !== prevState.current) {
          newState.currentInputValue = newState.current;
        }
      }

      if ('pageSize' in props && props.pageSize !== prevState.pageSize) {
        var current = prevState.current;
        var newCurrent = calculatePage(props.pageSize, prevState, props);
        current = current > newCurrent ? newCurrent : current;

        if (!('current' in props)) {
          newState.current = current;
          newState.currentInputValue = current;
        }

        newState.pageSize = props.pageSize;
      }

      return newState;
    }
  }]);

  return Pagination;
}(react__WEBPACK_IMPORTED_MODULE_7__.Component);

Pagination.defaultProps = {
  defaultCurrent: 1,
  total: 0,
  defaultPageSize: 10,
  onChange: noop,
  className: '',
  selectPrefixCls: 'rc-select',
  prefixCls: 'rc-pagination',
  selectComponentClass: null,
  hideOnSinglePage: false,
  showPrevNextJumpers: true,
  showQuickJumper: false,
  showLessItems: false,
  showTitle: true,
  onShowSizeChange: noop,
  locale: _locale_zh_CN__WEBPACK_IMPORTED_MODULE_12__.default,
  style: {},
  itemRender: defaultItemRender,
  totalBoundaryShowSizeChanger: 50
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Pagination);

/***/ }),

/***/ "./node_modules/rc-pagination/es/index.js":
/*!************************************************!*\
  !*** ./node_modules/rc-pagination/es/index.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _Pagination__WEBPACK_IMPORTED_MODULE_0__.default)
/* harmony export */ });
/* harmony import */ var _Pagination__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Pagination */ "./node_modules/rc-pagination/es/Pagination.js");


/***/ }),

/***/ "./node_modules/rc-pagination/es/locale/en_US.js":
/*!*******************************************************!*\
  !*** ./node_modules/rc-pagination/es/locale/en_US.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  // Options.jsx
  items_per_page: '/ page',
  jump_to: 'Go to',
  jump_to_confirm: 'confirm',
  page: '',
  // Pagination.jsx
  prev_page: 'Previous Page',
  next_page: 'Next Page',
  prev_5: 'Previous 5 Pages',
  next_5: 'Next 5 Pages',
  prev_3: 'Previous 3 Pages',
  next_3: 'Next 3 Pages'
});

/***/ }),

/***/ "./node_modules/rc-pagination/es/locale/zh_CN.js":
/*!*******************************************************!*\
  !*** ./node_modules/rc-pagination/es/locale/zh_CN.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  // Options.jsx
  items_per_page: '条/页',
  jump_to: '跳至',
  jump_to_confirm: '确定',
  page: '页',
  // Pagination.jsx
  prev_page: '上一页',
  next_page: '下一页',
  prev_5: '向前 5 页',
  next_5: '向后 5 页',
  prev_3: '向前 3 页',
  next_3: '向后 3 页'
});

/***/ }),

/***/ "./node_modules/rc-picker/es/PanelContext.js":
/*!***************************************************!*\
  !*** ./node_modules/rc-picker/es/PanelContext.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");

var PanelContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createContext({});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PanelContext);

/***/ }),

/***/ "./node_modules/rc-picker/es/Picker.js":
/*!*********************************************!*\
  !*** ./node_modules/rc-picker/es/Picker.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createSuper */ "./node_modules/@babel/runtime/helpers/esm/createSuper.js");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ "./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var rc_util_es_warning__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rc-util/es/warning */ "./node_modules/rc-util/es/warning.js");
/* harmony import */ var rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rc-util/es/hooks/useMergedState */ "./node_modules/rc-util/es/hooks/useMergedState.js");
/* harmony import */ var _PickerPanel__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./PickerPanel */ "./node_modules/rc-picker/es/PickerPanel.js");
/* harmony import */ var _PickerTrigger__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./PickerTrigger */ "./node_modules/rc-picker/es/PickerTrigger.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");
/* harmony import */ var _utils_miscUtil__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./utils/miscUtil */ "./node_modules/rc-picker/es/utils/miscUtil.js");
/* harmony import */ var _PanelContext__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./PanelContext */ "./node_modules/rc-picker/es/PanelContext.js");
/* harmony import */ var _utils_uiUtil__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./utils/uiUtil */ "./node_modules/rc-picker/es/utils/uiUtil.js");
/* harmony import */ var _hooks_usePickerInput__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./hooks/usePickerInput */ "./node_modules/rc-picker/es/hooks/usePickerInput.js");
/* harmony import */ var _hooks_useTextValueMapping__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./hooks/useTextValueMapping */ "./node_modules/rc-picker/es/hooks/useTextValueMapping.js");
/* harmony import */ var _hooks_useValueTexts__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./hooks/useValueTexts */ "./node_modules/rc-picker/es/hooks/useValueTexts.js");
/* harmony import */ var _hooks_useHoverValue__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./hooks/useHoverValue */ "./node_modules/rc-picker/es/hooks/useHoverValue.js");









/**
 * Removed:
 *  - getCalendarContainer: use `getPopupContainer` instead
 *  - onOk
 *
 * New Feature:
 *  - picker
 *  - allowEmpty
 *  - selectable
 *
 * Tips: Should add faq about `datetime` mode with `defaultValue`
 */















function InnerPicker(props) {
  var _classNames2;

  var _props$prefixCls = props.prefixCls,
      prefixCls = _props$prefixCls === void 0 ? 'rc-picker' : _props$prefixCls,
      id = props.id,
      tabIndex = props.tabIndex,
      style = props.style,
      className = props.className,
      dropdownClassName = props.dropdownClassName,
      dropdownAlign = props.dropdownAlign,
      popupStyle = props.popupStyle,
      transitionName = props.transitionName,
      generateConfig = props.generateConfig,
      locale = props.locale,
      inputReadOnly = props.inputReadOnly,
      allowClear = props.allowClear,
      autoFocus = props.autoFocus,
      showTime = props.showTime,
      _props$picker = props.picker,
      picker = _props$picker === void 0 ? 'date' : _props$picker,
      format = props.format,
      use12Hours = props.use12Hours,
      value = props.value,
      defaultValue = props.defaultValue,
      open = props.open,
      defaultOpen = props.defaultOpen,
      defaultOpenValue = props.defaultOpenValue,
      suffixIcon = props.suffixIcon,
      clearIcon = props.clearIcon,
      disabled = props.disabled,
      disabledDate = props.disabledDate,
      placeholder = props.placeholder,
      getPopupContainer = props.getPopupContainer,
      pickerRef = props.pickerRef,
      panelRender = props.panelRender,
      onChange = props.onChange,
      onOpenChange = props.onOpenChange,
      onFocus = props.onFocus,
      onBlur = props.onBlur,
      onMouseDown = props.onMouseDown,
      onMouseUp = props.onMouseUp,
      onMouseEnter = props.onMouseEnter,
      onMouseLeave = props.onMouseLeave,
      onContextMenu = props.onContextMenu,
      onClick = props.onClick,
      _onKeyDown = props.onKeyDown,
      _onSelect = props.onSelect,
      direction = props.direction,
      _props$autoComplete = props.autoComplete,
      autoComplete = _props$autoComplete === void 0 ? 'off' : _props$autoComplete;
  var inputRef = react__WEBPACK_IMPORTED_MODULE_8__.useRef(null);
  var needConfirmButton = picker === 'date' && !!showTime || picker === 'time'; // ============================= State =============================

  var formatList = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_15__.toArray)((0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_17__.getDefaultFormat)(format, picker, showTime, use12Hours)); // Panel ref

  var panelDivRef = react__WEBPACK_IMPORTED_MODULE_8__.useRef(null);
  var inputDivRef = react__WEBPACK_IMPORTED_MODULE_8__.useRef(null); // Real value

  var _useMergedState = (0,rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_11__.default)(null, {
    value: value,
    defaultValue: defaultValue
  }),
      _useMergedState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.default)(_useMergedState, 2),
      mergedValue = _useMergedState2[0],
      setInnerValue = _useMergedState2[1]; // Selected value


  var _React$useState = react__WEBPACK_IMPORTED_MODULE_8__.useState(mergedValue),
      _React$useState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.default)(_React$useState, 2),
      selectedValue = _React$useState2[0],
      setSelectedValue = _React$useState2[1]; // Operation ref


  var operationRef = react__WEBPACK_IMPORTED_MODULE_8__.useRef(null); // Open

  var _useMergedState3 = (0,rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_11__.default)(false, {
    value: open,
    defaultValue: defaultOpen,
    postState: function postState(postOpen) {
      return disabled ? false : postOpen;
    },
    onChange: function onChange(newOpen) {
      if (onOpenChange) {
        onOpenChange(newOpen);
      }

      if (!newOpen && operationRef.current && operationRef.current.onClose) {
        operationRef.current.onClose();
      }
    }
  }),
      _useMergedState4 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.default)(_useMergedState3, 2),
      mergedOpen = _useMergedState4[0],
      triggerInnerOpen = _useMergedState4[1]; // ============================= Text ==============================


  var _useValueTexts = (0,_hooks_useValueTexts__WEBPACK_IMPORTED_MODULE_20__.default)(selectedValue, {
    formatList: formatList,
    generateConfig: generateConfig,
    locale: locale
  }),
      _useValueTexts2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.default)(_useValueTexts, 2),
      valueTexts = _useValueTexts2[0],
      firstValueText = _useValueTexts2[1];

  var _useTextValueMapping = (0,_hooks_useTextValueMapping__WEBPACK_IMPORTED_MODULE_19__.default)({
    valueTexts: valueTexts,
    onTextChange: function onTextChange(newText) {
      var inputDate = (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_14__.parseValue)(newText, {
        locale: locale,
        formatList: formatList,
        generateConfig: generateConfig
      });

      if (inputDate && (!disabledDate || !disabledDate(inputDate))) {
        setSelectedValue(inputDate);
      }
    }
  }),
      _useTextValueMapping2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.default)(_useTextValueMapping, 3),
      text = _useTextValueMapping2[0],
      triggerTextChange = _useTextValueMapping2[1],
      resetText = _useTextValueMapping2[2]; // ============================ Trigger ============================


  var triggerChange = function triggerChange(newValue) {
    setSelectedValue(newValue);
    setInnerValue(newValue);

    if (onChange && !(0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_14__.isEqual)(generateConfig, mergedValue, newValue)) {
      onChange(newValue, newValue ? (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_14__.formatValue)(newValue, {
        generateConfig: generateConfig,
        locale: locale,
        format: formatList[0]
      }) : '');
    }
  };

  var triggerOpen = function triggerOpen(newOpen) {
    if (disabled && newOpen) {
      return;
    }

    triggerInnerOpen(newOpen);
  };

  var forwardKeyDown = function forwardKeyDown(e) {
    if (mergedOpen && operationRef.current && operationRef.current.onKeyDown) {
      // Let popup panel handle keyboard
      return operationRef.current.onKeyDown(e);
    }
    /* istanbul ignore next */

    /* eslint-disable no-lone-blocks */


    {
      (0,rc_util_es_warning__WEBPACK_IMPORTED_MODULE_10__.default)(false, 'Picker not correct forward KeyDown operation. Please help to fire issue about this.');
      return false;
    }
  };

  var onInternalMouseUp = function onInternalMouseUp() {
    if (onMouseUp) {
      onMouseUp.apply(void 0, arguments);
    }

    if (inputRef.current) {
      inputRef.current.focus();
      triggerOpen(true);
    }
  }; // ============================= Input =============================


  var _usePickerInput = (0,_hooks_usePickerInput__WEBPACK_IMPORTED_MODULE_18__.default)({
    blurToCancel: needConfirmButton,
    open: mergedOpen,
    value: text,
    triggerOpen: triggerOpen,
    forwardKeyDown: forwardKeyDown,
    isClickOutside: function isClickOutside(target) {
      return !(0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_17__.elementsContains)([panelDivRef.current, inputDivRef.current], target);
    },
    onSubmit: function onSubmit() {
      if (disabledDate && disabledDate(selectedValue)) {
        return false;
      }

      triggerChange(selectedValue);
      triggerOpen(false);
      resetText();
      return true;
    },
    onCancel: function onCancel() {
      triggerOpen(false);
      setSelectedValue(mergedValue);
      resetText();
    },
    onKeyDown: function onKeyDown(e, preventDefault) {
      _onKeyDown === null || _onKeyDown === void 0 ? void 0 : _onKeyDown(e, preventDefault);
    },
    onFocus: onFocus,
    onBlur: onBlur
  }),
      _usePickerInput2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.default)(_usePickerInput, 2),
      inputProps = _usePickerInput2[0],
      _usePickerInput2$ = _usePickerInput2[1],
      focused = _usePickerInput2$.focused,
      typing = _usePickerInput2$.typing; // ============================= Sync ==============================
  // Close should sync back with text value


  react__WEBPACK_IMPORTED_MODULE_8__.useEffect(function () {
    if (!mergedOpen) {
      setSelectedValue(mergedValue);

      if (!valueTexts.length || valueTexts[0] === '') {
        triggerTextChange('');
      } else if (firstValueText !== text) {
        resetText();
      }
    }
  }, [mergedOpen, valueTexts]); // Change picker should sync back with text value

  react__WEBPACK_IMPORTED_MODULE_8__.useEffect(function () {
    if (!mergedOpen) {
      resetText();
    }
  }, [picker]); // Sync innerValue with control mode

  react__WEBPACK_IMPORTED_MODULE_8__.useEffect(function () {
    // Sync select value
    setSelectedValue(mergedValue);
  }, [mergedValue]); // ============================ Private ============================

  if (pickerRef) {
    pickerRef.current = {
      focus: function focus() {
        if (inputRef.current) {
          inputRef.current.focus();
        }
      },
      blur: function blur() {
        if (inputRef.current) {
          inputRef.current.blur();
        }
      }
    };
  }

  var _useHoverValue = (0,_hooks_useHoverValue__WEBPACK_IMPORTED_MODULE_21__.default)(text, {
    formatList: formatList,
    generateConfig: generateConfig,
    locale: locale
  }),
      _useHoverValue2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.default)(_useHoverValue, 3),
      hoverValue = _useHoverValue2[0],
      onEnter = _useHoverValue2[1],
      onLeave = _useHoverValue2[2]; // ============================= Panel =============================


  var panelProps = (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__.default)({}, props), {}, {
    className: undefined,
    style: undefined,
    pickerValue: undefined,
    onPickerValueChange: undefined,
    onChange: null
  });

  var panelNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement(_PickerPanel__WEBPACK_IMPORTED_MODULE_12__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.default)({}, panelProps, {
    generateConfig: generateConfig,
    className: classnames__WEBPACK_IMPORTED_MODULE_9___default()((0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__.default)({}, "".concat(prefixCls, "-panel-focused"), !typing)),
    value: selectedValue,
    locale: locale,
    tabIndex: -1,
    onSelect: function onSelect(date) {
      _onSelect === null || _onSelect === void 0 ? void 0 : _onSelect(date);
      setSelectedValue(date);
    },
    direction: direction,
    onPanelChange: function onPanelChange(viewDate, mode) {
      var onPanelChange = props.onPanelChange;
      onLeave(true);
      onPanelChange === null || onPanelChange === void 0 ? void 0 : onPanelChange(viewDate, mode);
    }
  }));

  if (panelRender) {
    panelNode = panelRender(panelNode);
  }

  var panel = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement("div", {
    className: "".concat(prefixCls, "-panel-container"),
    onMouseDown: function onMouseDown(e) {
      e.preventDefault();
    }
  }, panelNode);
  var suffixNode;

  if (suffixIcon) {
    suffixNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement("span", {
      className: "".concat(prefixCls, "-suffix")
    }, suffixIcon);
  }

  var clearNode;

  if (allowClear && mergedValue && !disabled) {
    clearNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement("span", {
      onMouseDown: function onMouseDown(e) {
        e.preventDefault();
        e.stopPropagation();
      },
      onMouseUp: function onMouseUp(e) {
        e.preventDefault();
        e.stopPropagation();
        triggerChange(null);
        triggerOpen(false);
      },
      className: "".concat(prefixCls, "-clear"),
      role: "button"
    }, clearIcon || /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement("span", {
      className: "".concat(prefixCls, "-clear-btn")
    }));
  } // ============================ Warning ============================


  if (true) {
    (0,rc_util_es_warning__WEBPACK_IMPORTED_MODULE_10__.default)(!defaultOpenValue, '`defaultOpenValue` may confuse user for the current value status. Please use `defaultValue` instead.');
  } // ============================ Return =============================


  var onContextSelect = function onContextSelect(date, type) {
    if (type === 'submit' || type !== 'key' && !needConfirmButton) {
      // triggerChange will also update selected values
      triggerChange(date);
      triggerOpen(false);
    }
  };

  var popupPlacement = direction === 'rtl' ? 'bottomRight' : 'bottomLeft';
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement(_PanelContext__WEBPACK_IMPORTED_MODULE_16__.default.Provider, {
    value: {
      operationRef: operationRef,
      hideHeader: picker === 'time',
      panelRef: panelDivRef,
      onSelect: onContextSelect,
      open: mergedOpen,
      defaultOpenValue: defaultOpenValue,
      onDateMouseEnter: onEnter,
      onDateMouseLeave: onLeave
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement(_PickerTrigger__WEBPACK_IMPORTED_MODULE_13__.default, {
    visible: mergedOpen,
    popupElement: panel,
    popupStyle: popupStyle,
    prefixCls: prefixCls,
    dropdownClassName: dropdownClassName,
    dropdownAlign: dropdownAlign,
    getPopupContainer: getPopupContainer,
    transitionName: transitionName,
    popupPlacement: popupPlacement,
    direction: direction
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement("div", {
    className: classnames__WEBPACK_IMPORTED_MODULE_9___default()(prefixCls, className, (_classNames2 = {}, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__.default)(_classNames2, "".concat(prefixCls, "-disabled"), disabled), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__.default)(_classNames2, "".concat(prefixCls, "-focused"), focused), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__.default)(_classNames2, "".concat(prefixCls, "-rtl"), direction === 'rtl'), _classNames2)),
    style: style,
    onMouseDown: onMouseDown,
    onMouseUp: onInternalMouseUp,
    onMouseEnter: onMouseEnter,
    onMouseLeave: onMouseLeave,
    onContextMenu: onContextMenu,
    onClick: onClick
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement("div", {
    className: classnames__WEBPACK_IMPORTED_MODULE_9___default()("".concat(prefixCls, "-input"), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__.default)({}, "".concat(prefixCls, "-input-placeholder"), !!hoverValue)),
    ref: inputDivRef
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement("input", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.default)({
    id: id,
    tabIndex: tabIndex,
    disabled: disabled,
    readOnly: inputReadOnly || typeof formatList[0] === 'function' || !typing,
    value: hoverValue || text,
    onChange: function onChange(e) {
      triggerTextChange(e.target.value);
    },
    autoFocus: autoFocus,
    placeholder: placeholder,
    ref: inputRef,
    title: text
  }, inputProps, {
    size: (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_17__.getInputSize)(picker, formatList[0], generateConfig)
  }, (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_15__.default)(props), {
    autoComplete: autoComplete
  })), suffixNode, clearNode))));
} // Wrap with class component to enable pass generic with instance method


var Picker = /*#__PURE__*/function (_React$Component) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__.default)(Picker, _React$Component);

  var _super = (0,_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__.default)(Picker);

  function Picker() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.default)(this, Picker);

    _this = _super.apply(this, arguments);
    _this.pickerRef = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createRef();

    _this.focus = function () {
      if (_this.pickerRef.current) {
        _this.pickerRef.current.focus();
      }
    };

    _this.blur = function () {
      if (_this.pickerRef.current) {
        _this.pickerRef.current.blur();
      }
    };

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.default)(Picker, [{
    key: "render",
    value: function render() {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement(InnerPicker, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.default)({}, this.props, {
        pickerRef: this.pickerRef
      }));
    }
  }]);

  return Picker;
}(react__WEBPACK_IMPORTED_MODULE_8__.Component);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Picker);

/***/ }),

/***/ "./node_modules/rc-picker/es/PickerPanel.js":
/*!**************************************************!*\
  !*** ./node_modules/rc-picker/es/PickerPanel.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ "./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/typeof */ "./node_modules/@babel/runtime/helpers/esm/typeof.js");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rc-util/es/KeyCode */ "./node_modules/rc-util/es/KeyCode.js");
/* harmony import */ var rc_util_es_warning__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rc-util/es/warning */ "./node_modules/rc-util/es/warning.js");
/* harmony import */ var rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rc-util/es/hooks/useMergedState */ "./node_modules/rc-util/es/hooks/useMergedState.js");
/* harmony import */ var _panels_TimePanel__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./panels/TimePanel */ "./node_modules/rc-picker/es/panels/TimePanel/index.js");
/* harmony import */ var _panels_DatetimePanel__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./panels/DatetimePanel */ "./node_modules/rc-picker/es/panels/DatetimePanel/index.js");
/* harmony import */ var _panels_DatePanel__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./panels/DatePanel */ "./node_modules/rc-picker/es/panels/DatePanel/index.js");
/* harmony import */ var _panels_WeekPanel__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./panels/WeekPanel */ "./node_modules/rc-picker/es/panels/WeekPanel/index.js");
/* harmony import */ var _panels_MonthPanel__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./panels/MonthPanel */ "./node_modules/rc-picker/es/panels/MonthPanel/index.js");
/* harmony import */ var _panels_QuarterPanel__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./panels/QuarterPanel */ "./node_modules/rc-picker/es/panels/QuarterPanel/index.js");
/* harmony import */ var _panels_YearPanel__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./panels/YearPanel */ "./node_modules/rc-picker/es/panels/YearPanel/index.js");
/* harmony import */ var _panels_DecadePanel__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./panels/DecadePanel */ "./node_modules/rc-picker/es/panels/DecadePanel/index.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");
/* harmony import */ var _PanelContext__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./PanelContext */ "./node_modules/rc-picker/es/PanelContext.js");
/* harmony import */ var _utils_uiUtil__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./utils/uiUtil */ "./node_modules/rc-picker/es/utils/uiUtil.js");
/* harmony import */ var _RangeContext__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./RangeContext */ "./node_modules/rc-picker/es/RangeContext.js");
/* harmony import */ var _utils_getExtraFooter__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./utils/getExtraFooter */ "./node_modules/rc-picker/es/utils/getExtraFooter.js");
/* harmony import */ var _utils_getRanges__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./utils/getRanges */ "./node_modules/rc-picker/es/utils/getRanges.js");
/* harmony import */ var _utils_timeUtil__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./utils/timeUtil */ "./node_modules/rc-picker/es/utils/timeUtil.js");






/**
 * Logic:
 *  When `mode` === `picker`,
 *  click will trigger `onSelect` (if value changed trigger `onChange` also).
 *  Panel change will not trigger `onSelect` but trigger `onPanelChange`
 */





















function PickerPanel(props) {
  var _classNames;

  var _props$prefixCls = props.prefixCls,
      prefixCls = _props$prefixCls === void 0 ? 'rc-picker' : _props$prefixCls,
      className = props.className,
      style = props.style,
      locale = props.locale,
      generateConfig = props.generateConfig,
      value = props.value,
      defaultValue = props.defaultValue,
      pickerValue = props.pickerValue,
      defaultPickerValue = props.defaultPickerValue,
      disabledDate = props.disabledDate,
      mode = props.mode,
      _props$picker = props.picker,
      picker = _props$picker === void 0 ? 'date' : _props$picker,
      _props$tabIndex = props.tabIndex,
      tabIndex = _props$tabIndex === void 0 ? 0 : _props$tabIndex,
      showNow = props.showNow,
      showTime = props.showTime,
      showToday = props.showToday,
      renderExtraFooter = props.renderExtraFooter,
      hideHeader = props.hideHeader,
      onSelect = props.onSelect,
      onChange = props.onChange,
      onPanelChange = props.onPanelChange,
      onMouseDown = props.onMouseDown,
      onPickerValueChange = props.onPickerValueChange,
      _onOk = props.onOk,
      components = props.components,
      direction = props.direction,
      _props$hourStep = props.hourStep,
      hourStep = _props$hourStep === void 0 ? 1 : _props$hourStep,
      _props$minuteStep = props.minuteStep,
      minuteStep = _props$minuteStep === void 0 ? 1 : _props$minuteStep,
      _props$secondStep = props.secondStep,
      secondStep = _props$secondStep === void 0 ? 1 : _props$secondStep;
  var needConfirmButton = picker === 'date' && !!showTime || picker === 'time';
  var isHourStepValid = 24 % hourStep === 0;
  var isMinuteStepValid = 60 % minuteStep === 0;
  var isSecondStepValid = 60 % secondStep === 0;

  if (true) {
    (0,rc_util_es_warning__WEBPACK_IMPORTED_MODULE_8__.default)(!value || generateConfig.isValidate(value), 'Invalidate date pass to `value`.');
    (0,rc_util_es_warning__WEBPACK_IMPORTED_MODULE_8__.default)(!value || generateConfig.isValidate(value), 'Invalidate date pass to `defaultValue`.');
    (0,rc_util_es_warning__WEBPACK_IMPORTED_MODULE_8__.default)(isHourStepValid, "`hourStep` ".concat(hourStep, " is invalid. It should be a factor of 24."));
    (0,rc_util_es_warning__WEBPACK_IMPORTED_MODULE_8__.default)(isMinuteStepValid, "`minuteStep` ".concat(minuteStep, " is invalid. It should be a factor of 60."));
    (0,rc_util_es_warning__WEBPACK_IMPORTED_MODULE_8__.default)(isSecondStepValid, "`secondStep` ".concat(secondStep, " is invalid. It should be a factor of 60."));
  } // ============================ State =============================


  var panelContext = react__WEBPACK_IMPORTED_MODULE_5__.useContext(_PanelContext__WEBPACK_IMPORTED_MODULE_19__.default);
  var operationRef = panelContext.operationRef,
      panelDivRef = panelContext.panelRef,
      onContextSelect = panelContext.onSelect,
      hideRanges = panelContext.hideRanges,
      defaultOpenValue = panelContext.defaultOpenValue;

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_5__.useContext(_RangeContext__WEBPACK_IMPORTED_MODULE_21__.default),
      inRange = _React$useContext.inRange,
      panelPosition = _React$useContext.panelPosition,
      rangedValue = _React$useContext.rangedValue,
      hoverRangedValue = _React$useContext.hoverRangedValue;

  var panelRef = react__WEBPACK_IMPORTED_MODULE_5__.useRef({}); // Handle init logic

  var initRef = react__WEBPACK_IMPORTED_MODULE_5__.useRef(true); // Value

  var _useMergedState = (0,rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_9__.default)(null, {
    value: value,
    defaultValue: defaultValue,
    postState: function postState(val) {
      if (!val && defaultOpenValue && picker === 'time') {
        return defaultOpenValue;
      }

      return val;
    }
  }),
      _useMergedState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.default)(_useMergedState, 2),
      mergedValue = _useMergedState2[0],
      setInnerValue = _useMergedState2[1]; // View date control


  var _useMergedState3 = (0,rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_9__.default)(null, {
    value: pickerValue,
    defaultValue: defaultPickerValue || mergedValue,
    postState: function postState(date) {
      var now = generateConfig.getNow();
      if (!date) return now; // When value is null and set showTime

      if (!mergedValue && showTime) {
        if ((0,_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_3__.default)(showTime) === 'object') {
          return (0,_utils_timeUtil__WEBPACK_IMPORTED_MODULE_24__.setDateTime)(generateConfig, date, showTime.defaultValue || now);
        }

        if (defaultValue) {
          return (0,_utils_timeUtil__WEBPACK_IMPORTED_MODULE_24__.setDateTime)(generateConfig, date, defaultValue);
        }

        return (0,_utils_timeUtil__WEBPACK_IMPORTED_MODULE_24__.setDateTime)(generateConfig, date, now);
      }

      return date;
    }
  }),
      _useMergedState4 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.default)(_useMergedState3, 2),
      viewDate = _useMergedState4[0],
      setInnerViewDate = _useMergedState4[1];

  var setViewDate = function setViewDate(date) {
    setInnerViewDate(date);

    if (onPickerValueChange) {
      onPickerValueChange(date);
    }
  }; // Panel control


  var getInternalNextMode = function getInternalNextMode(nextMode) {
    var getNextMode = _utils_uiUtil__WEBPACK_IMPORTED_MODULE_20__.PickerModeMap[picker];

    if (getNextMode) {
      return getNextMode(nextMode);
    }

    return nextMode;
  }; // Save panel is changed from which panel


  var _useMergedState5 = (0,rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_9__.default)(function () {
    if (picker === 'time') {
      return 'time';
    }

    return getInternalNextMode('date');
  }, {
    value: mode
  }),
      _useMergedState6 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.default)(_useMergedState5, 2),
      mergedMode = _useMergedState6[0],
      setInnerMode = _useMergedState6[1];

  react__WEBPACK_IMPORTED_MODULE_5__.useEffect(function () {
    setInnerMode(picker);
  }, [picker]);

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_5__.useState(function () {
    return mergedMode;
  }),
      _React$useState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.default)(_React$useState, 2),
      sourceMode = _React$useState2[0],
      setSourceMode = _React$useState2[1];

  var onInternalPanelChange = function onInternalPanelChange(newMode, viewValue) {
    var nextMode = getInternalNextMode(newMode || mergedMode);
    setSourceMode(mergedMode);
    setInnerMode(nextMode);

    if (onPanelChange && (mergedMode !== nextMode || (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_18__.isEqual)(generateConfig, viewDate, viewDate))) {
      onPanelChange(viewValue, nextMode);
    }
  };

  var triggerSelect = function triggerSelect(date, type) {
    var forceTriggerSelect = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

    if (mergedMode === picker || forceTriggerSelect) {
      setInnerValue(date);

      if (onSelect) {
        onSelect(date);
      }

      if (onContextSelect) {
        onContextSelect(date, type);
      }

      if (onChange && !(0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_18__.isEqual)(generateConfig, date, mergedValue) && !(disabledDate === null || disabledDate === void 0 ? void 0 : disabledDate(date))) {
        onChange(date);
      }
    }
  }; // ========================= Interactive ==========================


  var onInternalKeyDown = function onInternalKeyDown(e) {
    if (panelRef.current && panelRef.current.onKeyDown) {
      if ([rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__.default.LEFT, rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__.default.RIGHT, rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__.default.UP, rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__.default.DOWN, rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__.default.PAGE_UP, rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__.default.PAGE_DOWN, rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__.default.ENTER].includes(e.which)) {
        e.preventDefault();
      }

      return panelRef.current.onKeyDown(e);
    }
    /* istanbul ignore next */

    /* eslint-disable no-lone-blocks */


    {
      (0,rc_util_es_warning__WEBPACK_IMPORTED_MODULE_8__.default)(false, 'Panel not correct handle keyDown event. Please help to fire issue about this.');
      return false;
    }
    /* eslint-enable no-lone-blocks */
  };

  var onInternalBlur = function onInternalBlur(e) {
    if (panelRef.current && panelRef.current.onBlur) {
      panelRef.current.onBlur(e);
    }
  };

  if (operationRef && panelPosition !== 'right') {
    operationRef.current = {
      onKeyDown: onInternalKeyDown,
      onClose: function onClose() {
        if (panelRef.current && panelRef.current.onClose) {
          panelRef.current.onClose();
        }
      }
    };
  } // ============================ Effect ============================


  react__WEBPACK_IMPORTED_MODULE_5__.useEffect(function () {
    if (value && !initRef.current) {
      setInnerViewDate(value);
    }
  }, [value]);
  react__WEBPACK_IMPORTED_MODULE_5__.useEffect(function () {
    initRef.current = false;
  }, []); // ============================ Panels ============================

  var panelNode;

  var pickerProps = (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__.default)({}, props), {}, {
    operationRef: panelRef,
    prefixCls: prefixCls,
    viewDate: viewDate,
    value: mergedValue,
    onViewDateChange: setViewDate,
    sourceMode: sourceMode,
    onPanelChange: onInternalPanelChange,
    disabledDate: disabledDate
  });

  delete pickerProps.onChange;
  delete pickerProps.onSelect;

  switch (mergedMode) {
    case 'decade':
      panelNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement(_panels_DecadePanel__WEBPACK_IMPORTED_MODULE_17__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__.default)({}, pickerProps, {
        onSelect: function onSelect(date, type) {
          setViewDate(date);
          triggerSelect(date, type);
        }
      }));
      break;

    case 'year':
      panelNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement(_panels_YearPanel__WEBPACK_IMPORTED_MODULE_16__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__.default)({}, pickerProps, {
        onSelect: function onSelect(date, type) {
          setViewDate(date);
          triggerSelect(date, type);
        }
      }));
      break;

    case 'month':
      panelNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement(_panels_MonthPanel__WEBPACK_IMPORTED_MODULE_14__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__.default)({}, pickerProps, {
        onSelect: function onSelect(date, type) {
          setViewDate(date);
          triggerSelect(date, type);
        }
      }));
      break;

    case 'quarter':
      panelNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement(_panels_QuarterPanel__WEBPACK_IMPORTED_MODULE_15__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__.default)({}, pickerProps, {
        onSelect: function onSelect(date, type) {
          setViewDate(date);
          triggerSelect(date, type);
        }
      }));
      break;

    case 'week':
      panelNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement(_panels_WeekPanel__WEBPACK_IMPORTED_MODULE_13__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__.default)({}, pickerProps, {
        onSelect: function onSelect(date, type) {
          setViewDate(date);
          triggerSelect(date, type);
        }
      }));
      break;

    case 'time':
      delete pickerProps.showTime;
      panelNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement(_panels_TimePanel__WEBPACK_IMPORTED_MODULE_10__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__.default)({}, pickerProps, (0,_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_3__.default)(showTime) === 'object' ? showTime : null, {
        onSelect: function onSelect(date, type) {
          setViewDate(date);
          triggerSelect(date, type);
        }
      }));
      break;

    default:
      if (showTime) {
        panelNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement(_panels_DatetimePanel__WEBPACK_IMPORTED_MODULE_11__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__.default)({}, pickerProps, {
          onSelect: function onSelect(date, type) {
            setViewDate(date);
            triggerSelect(date, type);
          }
        }));
      } else {
        panelNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement(_panels_DatePanel__WEBPACK_IMPORTED_MODULE_12__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__.default)({}, pickerProps, {
          onSelect: function onSelect(date, type) {
            setViewDate(date);
            triggerSelect(date, type);
          }
        }));
      }

  } // ============================ Footer ============================


  var extraFooter;
  var rangesNode;

  var onNow = function onNow() {
    var now = generateConfig.getNow();
    var lowerBoundTime = (0,_utils_timeUtil__WEBPACK_IMPORTED_MODULE_24__.getLowerBoundTime)(generateConfig.getHour(now), generateConfig.getMinute(now), generateConfig.getSecond(now), isHourStepValid ? hourStep : 1, isMinuteStepValid ? minuteStep : 1, isSecondStepValid ? secondStep : 1);
    var adjustedNow = (0,_utils_timeUtil__WEBPACK_IMPORTED_MODULE_24__.setTime)(generateConfig, now, lowerBoundTime[0], // hour
    lowerBoundTime[1], // minute
    lowerBoundTime[2]);
    triggerSelect(adjustedNow, 'submit');
  };

  if (!hideRanges) {
    extraFooter = (0,_utils_getExtraFooter__WEBPACK_IMPORTED_MODULE_22__.default)(prefixCls, mergedMode, renderExtraFooter);
    rangesNode = (0,_utils_getRanges__WEBPACK_IMPORTED_MODULE_23__.default)({
      prefixCls: prefixCls,
      components: components,
      needConfirmButton: needConfirmButton,
      okDisabled: !mergedValue || disabledDate && disabledDate(mergedValue),
      locale: locale,
      showNow: showNow,
      onNow: needConfirmButton && onNow,
      onOk: function onOk() {
        if (mergedValue) {
          triggerSelect(mergedValue, 'submit', true);

          if (_onOk) {
            _onOk(mergedValue);
          }
        }
      }
    });
  }

  var todayNode;

  if (showToday && mergedMode === 'date' && picker === 'date' && !showTime) {
    var now = generateConfig.getNow();
    var todayCls = "".concat(prefixCls, "-today-btn");
    var disabled = disabledDate && disabledDate(now);
    todayNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement("a", {
      className: classnames__WEBPACK_IMPORTED_MODULE_6___default()(todayCls, disabled && "".concat(todayCls, "-disabled")),
      "aria-disabled": disabled,
      onClick: function onClick() {
        if (!disabled) {
          triggerSelect(now, 'mouse', true);
        }
      }
    }, locale.today);
  }

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement(_PanelContext__WEBPACK_IMPORTED_MODULE_19__.default.Provider, {
    value: (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__.default)({}, panelContext), {}, {
      mode: mergedMode,
      hideHeader: 'hideHeader' in props ? hideHeader : panelContext.hideHeader,
      hidePrevBtn: inRange && panelPosition === 'right',
      hideNextBtn: inRange && panelPosition === 'left'
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement("div", {
    tabIndex: tabIndex,
    className: classnames__WEBPACK_IMPORTED_MODULE_6___default()("".concat(prefixCls, "-panel"), className, (_classNames = {}, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_classNames, "".concat(prefixCls, "-panel-has-range"), rangedValue && rangedValue[0] && rangedValue[1]), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_classNames, "".concat(prefixCls, "-panel-has-range-hover"), hoverRangedValue && hoverRangedValue[0] && hoverRangedValue[1]), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_classNames, "".concat(prefixCls, "-panel-rtl"), direction === 'rtl'), _classNames)),
    style: style,
    onKeyDown: onInternalKeyDown,
    onBlur: onInternalBlur,
    onMouseDown: onMouseDown,
    ref: panelDivRef
  }, panelNode, extraFooter || rangesNode || todayNode ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement("div", {
    className: "".concat(prefixCls, "-footer")
  }, extraFooter, rangesNode, todayNode) : null));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PickerPanel);
/* eslint-enable */

/***/ }),

/***/ "./node_modules/rc-picker/es/PickerTrigger.js":
/*!****************************************************!*\
  !*** ./node_modules/rc-picker/es/PickerTrigger.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var rc_trigger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rc-trigger */ "./node_modules/rc-trigger/es/index.js");




var BUILT_IN_PLACEMENTS = {
  bottomLeft: {
    points: ['tl', 'bl'],
    offset: [0, 4],
    overflow: {
      adjustX: 1,
      adjustY: 1
    }
  },
  bottomRight: {
    points: ['tr', 'br'],
    offset: [0, 4],
    overflow: {
      adjustX: 1,
      adjustY: 1
    }
  },
  topLeft: {
    points: ['bl', 'tl'],
    offset: [0, -4],
    overflow: {
      adjustX: 0,
      adjustY: 1
    }
  },
  topRight: {
    points: ['br', 'tr'],
    offset: [0, -4],
    overflow: {
      adjustX: 0,
      adjustY: 1
    }
  }
};

function PickerTrigger(_ref) {
  var _classNames;

  var prefixCls = _ref.prefixCls,
      popupElement = _ref.popupElement,
      popupStyle = _ref.popupStyle,
      visible = _ref.visible,
      dropdownClassName = _ref.dropdownClassName,
      dropdownAlign = _ref.dropdownAlign,
      transitionName = _ref.transitionName,
      getPopupContainer = _ref.getPopupContainer,
      children = _ref.children,
      range = _ref.range,
      popupPlacement = _ref.popupPlacement,
      direction = _ref.direction;
  var dropdownPrefixCls = "".concat(prefixCls, "-dropdown");

  var getPopupPlacement = function getPopupPlacement() {
    if (popupPlacement !== undefined) {
      return popupPlacement;
    }

    return direction === 'rtl' ? 'bottomRight' : 'bottomLeft';
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(rc_trigger__WEBPACK_IMPORTED_MODULE_3__.default, {
    showAction: [],
    hideAction: [],
    popupPlacement: getPopupPlacement(),
    builtinPlacements: BUILT_IN_PLACEMENTS,
    prefixCls: dropdownPrefixCls,
    popupTransitionName: transitionName,
    popup: popupElement,
    popupAlign: dropdownAlign,
    popupVisible: visible,
    popupClassName: classnames__WEBPACK_IMPORTED_MODULE_2___default()(dropdownClassName, (_classNames = {}, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_classNames, "".concat(dropdownPrefixCls, "-range"), range), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_classNames, "".concat(dropdownPrefixCls, "-rtl"), direction === 'rtl'), _classNames)),
    popupStyle: popupStyle,
    getPopupContainer: getPopupContainer
  }, children);
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PickerTrigger);

/***/ }),

/***/ "./node_modules/rc-picker/es/RangeContext.js":
/*!***************************************************!*\
  !*** ./node_modules/rc-picker/es/RangeContext.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");

var RangeContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createContext({});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RangeContext);

/***/ }),

/***/ "./node_modules/rc-picker/es/RangePicker.js":
/*!**************************************************!*\
  !*** ./node_modules/rc-picker/es/RangePicker.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createSuper */ "./node_modules/@babel/runtime/helpers/esm/createSuper.js");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/typeof */ "./node_modules/@babel/runtime/helpers/esm/typeof.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ "./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var rc_util_es_warning__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rc-util/es/warning */ "./node_modules/rc-util/es/warning.js");
/* harmony import */ var rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rc-util/es/hooks/useMergedState */ "./node_modules/rc-util/es/hooks/useMergedState.js");
/* harmony import */ var _PickerTrigger__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./PickerTrigger */ "./node_modules/rc-picker/es/PickerTrigger.js");
/* harmony import */ var _PickerPanel__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./PickerPanel */ "./node_modules/rc-picker/es/PickerPanel.js");
/* harmony import */ var _hooks_usePickerInput__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./hooks/usePickerInput */ "./node_modules/rc-picker/es/hooks/usePickerInput.js");
/* harmony import */ var _utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils/miscUtil */ "./node_modules/rc-picker/es/utils/miscUtil.js");
/* harmony import */ var _utils_uiUtil__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./utils/uiUtil */ "./node_modules/rc-picker/es/utils/uiUtil.js");
/* harmony import */ var _PanelContext__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./PanelContext */ "./node_modules/rc-picker/es/PanelContext.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");
/* harmony import */ var _hooks_useValueTexts__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./hooks/useValueTexts */ "./node_modules/rc-picker/es/hooks/useValueTexts.js");
/* harmony import */ var _hooks_useTextValueMapping__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./hooks/useTextValueMapping */ "./node_modules/rc-picker/es/hooks/useTextValueMapping.js");
/* harmony import */ var _RangeContext__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./RangeContext */ "./node_modules/rc-picker/es/RangeContext.js");
/* harmony import */ var _hooks_useRangeDisabled__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./hooks/useRangeDisabled */ "./node_modules/rc-picker/es/hooks/useRangeDisabled.js");
/* harmony import */ var _utils_getExtraFooter__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./utils/getExtraFooter */ "./node_modules/rc-picker/es/utils/getExtraFooter.js");
/* harmony import */ var _utils_getRanges__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./utils/getRanges */ "./node_modules/rc-picker/es/utils/getRanges.js");
/* harmony import */ var _hooks_useRangeViewDates__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./hooks/useRangeViewDates */ "./node_modules/rc-picker/es/hooks/useRangeViewDates.js");
/* harmony import */ var _hooks_useHoverValue__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./hooks/useHoverValue */ "./node_modules/rc-picker/es/hooks/useHoverValue.js");






























function reorderValues(values, generateConfig) {
  if (values && values[0] && values[1] && generateConfig.isAfter(values[0], values[1])) {
    return [values[1], values[0]];
  }

  return values;
}

function canValueTrigger(value, index, disabled, allowEmpty) {
  if (value) {
    return true;
  }

  if (allowEmpty && allowEmpty[index]) {
    return true;
  }

  if (disabled[(index + 1) % 2]) {
    return true;
  }

  return false;
}

function InnerRangePicker(props) {
  var _classNames2, _classNames3, _classNames4;

  var _props$prefixCls = props.prefixCls,
      prefixCls = _props$prefixCls === void 0 ? 'rc-picker' : _props$prefixCls,
      id = props.id,
      style = props.style,
      className = props.className,
      popupStyle = props.popupStyle,
      dropdownClassName = props.dropdownClassName,
      transitionName = props.transitionName,
      dropdownAlign = props.dropdownAlign,
      getPopupContainer = props.getPopupContainer,
      generateConfig = props.generateConfig,
      locale = props.locale,
      placeholder = props.placeholder,
      autoFocus = props.autoFocus,
      disabled = props.disabled,
      format = props.format,
      _props$picker = props.picker,
      picker = _props$picker === void 0 ? 'date' : _props$picker,
      showTime = props.showTime,
      use12Hours = props.use12Hours,
      _props$separator = props.separator,
      separator = _props$separator === void 0 ? '~' : _props$separator,
      value = props.value,
      defaultValue = props.defaultValue,
      defaultPickerValue = props.defaultPickerValue,
      open = props.open,
      defaultOpen = props.defaultOpen,
      disabledDate = props.disabledDate,
      _disabledTime = props.disabledTime,
      dateRender = props.dateRender,
      panelRender = props.panelRender,
      ranges = props.ranges,
      allowEmpty = props.allowEmpty,
      allowClear = props.allowClear,
      suffixIcon = props.suffixIcon,
      clearIcon = props.clearIcon,
      pickerRef = props.pickerRef,
      inputReadOnly = props.inputReadOnly,
      mode = props.mode,
      renderExtraFooter = props.renderExtraFooter,
      onChange = props.onChange,
      onOpenChange = props.onOpenChange,
      onPanelChange = props.onPanelChange,
      onCalendarChange = props.onCalendarChange,
      _onFocus = props.onFocus,
      onBlur = props.onBlur,
      onMouseEnter = props.onMouseEnter,
      onMouseLeave = props.onMouseLeave,
      _onOk = props.onOk,
      _onKeyDown = props.onKeyDown,
      components = props.components,
      order = props.order,
      direction = props.direction,
      activePickerIndex = props.activePickerIndex,
      _props$autoComplete = props.autoComplete,
      autoComplete = _props$autoComplete === void 0 ? 'off' : _props$autoComplete;
  var needConfirmButton = picker === 'date' && !!showTime || picker === 'time'; // We record opened status here in case repeat open with picker

  var openRecordsRef = (0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)({});
  var containerRef = (0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)(null);
  var panelDivRef = (0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)(null);
  var startInputDivRef = (0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)(null);
  var endInputDivRef = (0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)(null);
  var separatorRef = (0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)(null);
  var startInputRef = (0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)(null);
  var endInputRef = (0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)(null); // ============================= Misc ==============================

  var formatList = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.toArray)((0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_17__.getDefaultFormat)(format, picker, showTime, use12Hours)); // Active picker

  var _useMergedState = (0,rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_12__.default)(0, {
    value: activePickerIndex
  }),
      _useMergedState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useMergedState, 2),
      mergedActivePickerIndex = _useMergedState2[0],
      setMergedActivePickerIndex = _useMergedState2[1]; // Operation ref


  var operationRef = (0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)(null);
  var mergedDisabled = react__WEBPACK_IMPORTED_MODULE_9__.useMemo(function () {
    if (Array.isArray(disabled)) {
      return disabled;
    }

    return [disabled || false, disabled || false];
  }, [disabled]); // ============================= Value =============================

  var _useMergedState3 = (0,rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_12__.default)(null, {
    value: value,
    defaultValue: defaultValue,
    postState: function postState(values) {
      return picker === 'time' && !order ? values : reorderValues(values, generateConfig);
    }
  }),
      _useMergedState4 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useMergedState3, 2),
      mergedValue = _useMergedState4[0],
      setInnerValue = _useMergedState4[1]; // =========================== View Date ===========================
  // Config view panel


  var _useRangeViewDates = (0,_hooks_useRangeViewDates__WEBPACK_IMPORTED_MODULE_26__.default)({
    values: mergedValue,
    picker: picker,
    defaultDates: defaultPickerValue,
    generateConfig: generateConfig
  }),
      _useRangeViewDates2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useRangeViewDates, 2),
      getViewDate = _useRangeViewDates2[0],
      setViewDate = _useRangeViewDates2[1]; // ========================= Select Values =========================


  var _useMergedState5 = (0,rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_12__.default)(mergedValue, {
    postState: function postState(values) {
      var postValues = values;

      if (mergedDisabled[0] && mergedDisabled[1]) {
        return postValues;
      } // Fill disabled unit


      for (var i = 0; i < 2; i += 1) {
        if (mergedDisabled[i] && !(0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(postValues, i) && !(0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(allowEmpty, i)) {
          postValues = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.updateValues)(postValues, generateConfig.getNow(), i);
        }
      }

      return postValues;
    }
  }),
      _useMergedState6 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useMergedState5, 2),
      selectedValue = _useMergedState6[0],
      setSelectedValue = _useMergedState6[1]; // ============================= Modes =============================


  var _useMergedState7 = (0,rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_12__.default)([picker, picker], {
    value: mode
  }),
      _useMergedState8 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useMergedState7, 2),
      mergedModes = _useMergedState8[0],
      setInnerModes = _useMergedState8[1];

  (0,react__WEBPACK_IMPORTED_MODULE_9__.useEffect)(function () {
    setInnerModes([picker, picker]);
  }, [picker]);

  var triggerModesChange = function triggerModesChange(modes, values) {
    setInnerModes(modes);

    if (onPanelChange) {
      onPanelChange(values, modes);
    }
  }; // ========================= Disable Date ==========================


  var _useRangeDisabled = (0,_hooks_useRangeDisabled__WEBPACK_IMPORTED_MODULE_23__.default)({
    picker: picker,
    selectedValue: selectedValue,
    locale: locale,
    disabled: mergedDisabled,
    disabledDate: disabledDate,
    generateConfig: generateConfig
  }, openRecordsRef.current[1], openRecordsRef.current[0]),
      _useRangeDisabled2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useRangeDisabled, 2),
      disabledStartDate = _useRangeDisabled2[0],
      disabledEndDate = _useRangeDisabled2[1]; // ============================= Open ==============================


  var _useMergedState9 = (0,rc_util_es_hooks_useMergedState__WEBPACK_IMPORTED_MODULE_12__.default)(false, {
    value: open,
    defaultValue: defaultOpen,
    postState: function postState(postOpen) {
      return mergedDisabled[mergedActivePickerIndex] ? false : postOpen;
    },
    onChange: function onChange(newOpen) {
      if (onOpenChange) {
        onOpenChange(newOpen);
      }

      if (!newOpen && operationRef.current && operationRef.current.onClose) {
        operationRef.current.onClose();
      }
    }
  }),
      _useMergedState10 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useMergedState9, 2),
      mergedOpen = _useMergedState10[0],
      triggerInnerOpen = _useMergedState10[1];

  var startOpen = mergedOpen && mergedActivePickerIndex === 0;
  var endOpen = mergedOpen && mergedActivePickerIndex === 1; // ============================= Popup =============================
  // Popup min width

  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_9__.useState)(0),
      _useState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useState, 2),
      popupMinWidth = _useState2[0],
      setPopupMinWidth = _useState2[1];

  (0,react__WEBPACK_IMPORTED_MODULE_9__.useEffect)(function () {
    if (!mergedOpen && containerRef.current) {
      setPopupMinWidth(containerRef.current.offsetWidth);
    }
  }, [mergedOpen]); // ============================ Trigger ============================

  var triggerRef = react__WEBPACK_IMPORTED_MODULE_9__.useRef();

  function _triggerOpen(newOpen, index) {
    if (newOpen) {
      clearTimeout(triggerRef.current);
      openRecordsRef.current[index] = true;
      setMergedActivePickerIndex(index);
      triggerInnerOpen(newOpen); // Open to reset view date

      if (!mergedOpen) {
        setViewDate(null, index);
      }
    } else if (mergedActivePickerIndex === index) {
      triggerInnerOpen(newOpen); // Clean up async
      // This makes ref not quick refresh in case user open another input with blur trigger

      var openRecords = openRecordsRef.current;
      triggerRef.current = setTimeout(function () {
        if (openRecords === openRecordsRef.current) {
          openRecordsRef.current = {};
        }
      });
    }
  }

  function triggerOpenAndFocus(index) {
    _triggerOpen(true, index); // Use setTimeout to make sure panel DOM exists


    setTimeout(function () {
      var inputRef = [startInputRef, endInputRef][index];

      if (inputRef.current) {
        inputRef.current.focus();
      }
    }, 0);
  }

  function triggerChange(newValue, sourceIndex) {
    var values = newValue;
    var startValue = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(values, 0);
    var endValue = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(values, 1); // >>>>> Format start & end values

    if (startValue && endValue && generateConfig.isAfter(startValue, endValue)) {
      if ( // WeekPicker only compare week
      picker === 'week' && !(0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.isSameWeek)(generateConfig, locale.locale, startValue, endValue) || // QuotaPicker only compare week
      picker === 'quarter' && !(0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.isSameQuarter)(generateConfig, startValue, endValue) || // Other non-TimePicker compare date
      picker !== 'week' && picker !== 'quarter' && picker !== 'time' && !(0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.isSameDate)(generateConfig, startValue, endValue)) {
        // Clean up end date when start date is after end date
        if (sourceIndex === 0) {
          values = [startValue, null];
          endValue = null;
        } else {
          startValue = null;
          values = [null, endValue];
        } // Clean up cache since invalidate


        openRecordsRef.current = (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__.default)({}, sourceIndex, true);
      } else if (picker !== 'time' || order !== false) {
        // Reorder when in same date
        values = reorderValues(values, generateConfig);
      }
    }

    setSelectedValue(values);
    var startStr = values && values[0] ? (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.formatValue)(values[0], {
      generateConfig: generateConfig,
      locale: locale,
      format: formatList[0]
    }) : '';
    var endStr = values && values[1] ? (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.formatValue)(values[1], {
      generateConfig: generateConfig,
      locale: locale,
      format: formatList[0]
    }) : '';

    if (onCalendarChange) {
      var info = {
        range: sourceIndex === 0 ? 'start' : 'end'
      };
      onCalendarChange(values, [startStr, endStr], info);
    } // >>>>> Trigger `onChange` event


    var canStartValueTrigger = canValueTrigger(startValue, 0, mergedDisabled, allowEmpty);
    var canEndValueTrigger = canValueTrigger(endValue, 1, mergedDisabled, allowEmpty);
    var canTrigger = values === null || canStartValueTrigger && canEndValueTrigger;

    if (canTrigger) {
      // Trigger onChange only when value is validate
      setInnerValue(values);

      if (onChange && (!(0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.isEqual)(generateConfig, (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(mergedValue, 0), startValue) || !(0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.isEqual)(generateConfig, (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(mergedValue, 1), endValue))) {
        onChange(values, [startStr, endStr]);
      }
    } // >>>>> Open picker when
    // Always open another picker if possible


    var nextOpenIndex = null;

    if (sourceIndex === 0 && !mergedDisabled[1]) {
      nextOpenIndex = 1;
    } else if (sourceIndex === 1 && !mergedDisabled[0]) {
      nextOpenIndex = 0;
    }

    if (nextOpenIndex !== null && nextOpenIndex !== mergedActivePickerIndex && (!openRecordsRef.current[nextOpenIndex] || !(0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(values, nextOpenIndex)) && (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(values, sourceIndex)) {
      // Delay to focus to avoid input blur trigger expired selectedValues
      triggerOpenAndFocus(nextOpenIndex);
    } else {
      _triggerOpen(false, sourceIndex);
    }
  }

  var forwardKeyDown = function forwardKeyDown(e) {
    if (mergedOpen && operationRef.current && operationRef.current.onKeyDown) {
      // Let popup panel handle keyboard
      return operationRef.current.onKeyDown(e);
    }
    /* istanbul ignore next */

    /* eslint-disable no-lone-blocks */


    {
      (0,rc_util_es_warning__WEBPACK_IMPORTED_MODULE_11__.default)(false, 'Picker not correct forward KeyDown operation. Please help to fire issue about this.');
      return false;
    }
  }; // ============================= Text ==============================


  var sharedTextHooksProps = {
    formatList: formatList,
    generateConfig: generateConfig,
    locale: locale
  };

  var _useValueTexts = (0,_hooks_useValueTexts__WEBPACK_IMPORTED_MODULE_20__.default)((0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(selectedValue, 0), sharedTextHooksProps),
      _useValueTexts2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useValueTexts, 2),
      startValueTexts = _useValueTexts2[0],
      firstStartValueText = _useValueTexts2[1];

  var _useValueTexts3 = (0,_hooks_useValueTexts__WEBPACK_IMPORTED_MODULE_20__.default)((0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(selectedValue, 1), sharedTextHooksProps),
      _useValueTexts4 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useValueTexts3, 2),
      endValueTexts = _useValueTexts4[0],
      firstEndValueText = _useValueTexts4[1];

  var _onTextChange = function onTextChange(newText, index) {
    var inputDate = (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.parseValue)(newText, {
      locale: locale,
      formatList: formatList,
      generateConfig: generateConfig
    });
    var disabledFunc = index === 0 ? disabledStartDate : disabledEndDate;

    if (inputDate && !disabledFunc(inputDate)) {
      setSelectedValue((0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.updateValues)(selectedValue, inputDate, index));
      setViewDate(inputDate, index);
    }
  };

  var _useTextValueMapping = (0,_hooks_useTextValueMapping__WEBPACK_IMPORTED_MODULE_21__.default)({
    valueTexts: startValueTexts,
    onTextChange: function onTextChange(newText) {
      return _onTextChange(newText, 0);
    }
  }),
      _useTextValueMapping2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useTextValueMapping, 3),
      startText = _useTextValueMapping2[0],
      triggerStartTextChange = _useTextValueMapping2[1],
      resetStartText = _useTextValueMapping2[2];

  var _useTextValueMapping3 = (0,_hooks_useTextValueMapping__WEBPACK_IMPORTED_MODULE_21__.default)({
    valueTexts: endValueTexts,
    onTextChange: function onTextChange(newText) {
      return _onTextChange(newText, 1);
    }
  }),
      _useTextValueMapping4 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useTextValueMapping3, 3),
      endText = _useTextValueMapping4[0],
      triggerEndTextChange = _useTextValueMapping4[1],
      resetEndText = _useTextValueMapping4[2];

  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_9__.useState)(null),
      _useState4 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useState3, 2),
      rangeHoverValue = _useState4[0],
      setRangeHoverValue = _useState4[1]; // ========================== Hover Range ==========================


  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_9__.useState)(null),
      _useState6 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useState5, 2),
      hoverRangedValue = _useState6[0],
      setHoverRangedValue = _useState6[1];

  var _useHoverValue = (0,_hooks_useHoverValue__WEBPACK_IMPORTED_MODULE_27__.default)(startText, {
    formatList: formatList,
    generateConfig: generateConfig,
    locale: locale
  }),
      _useHoverValue2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useHoverValue, 3),
      startHoverValue = _useHoverValue2[0],
      onStartEnter = _useHoverValue2[1],
      onStartLeave = _useHoverValue2[2];

  var _useHoverValue3 = (0,_hooks_useHoverValue__WEBPACK_IMPORTED_MODULE_27__.default)(endText, {
    formatList: formatList,
    generateConfig: generateConfig,
    locale: locale
  }),
      _useHoverValue4 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_useHoverValue3, 3),
      endHoverValue = _useHoverValue4[0],
      onEndEnter = _useHoverValue4[1],
      onEndLeave = _useHoverValue4[2];

  var onDateMouseEnter = function onDateMouseEnter(date) {
    setHoverRangedValue((0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.updateValues)(selectedValue, date, mergedActivePickerIndex));

    if (mergedActivePickerIndex === 0) {
      onStartEnter(date);
    } else {
      onEndEnter(date);
    }
  };

  var onDateMouseLeave = function onDateMouseLeave() {
    setHoverRangedValue((0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.updateValues)(selectedValue, null, mergedActivePickerIndex));

    if (mergedActivePickerIndex === 0) {
      onStartLeave();
    } else {
      onEndLeave();
    }
  }; // ============================= Input =============================


  var getSharedInputHookProps = function getSharedInputHookProps(index, resetText) {
    return {
      blurToCancel: needConfirmButton,
      forwardKeyDown: forwardKeyDown,
      onBlur: onBlur,
      isClickOutside: function isClickOutside(target) {
        return !(0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_17__.elementsContains)([panelDivRef.current, startInputDivRef.current, endInputDivRef.current], target);
      },
      onFocus: function onFocus(e) {
        setMergedActivePickerIndex(index);

        if (_onFocus) {
          _onFocus(e);
        }
      },
      triggerOpen: function triggerOpen(newOpen) {
        _triggerOpen(newOpen, index);
      },
      onSubmit: function onSubmit() {
        triggerChange(selectedValue, index);
        resetText();
      },
      onCancel: function onCancel() {
        _triggerOpen(false, index);

        setSelectedValue(mergedValue);
        resetText();
      }
    };
  };

  var _usePickerInput = (0,_hooks_usePickerInput__WEBPACK_IMPORTED_MODULE_15__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__.default)({}, getSharedInputHookProps(0, resetStartText)), {}, {
    open: startOpen,
    value: startText,
    onKeyDown: function onKeyDown(e, preventDefault) {
      _onKeyDown === null || _onKeyDown === void 0 ? void 0 : _onKeyDown(e, preventDefault);
    }
  })),
      _usePickerInput2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_usePickerInput, 2),
      startInputProps = _usePickerInput2[0],
      _usePickerInput2$ = _usePickerInput2[1],
      startFocused = _usePickerInput2$.focused,
      startTyping = _usePickerInput2$.typing;

  var _usePickerInput3 = (0,_hooks_usePickerInput__WEBPACK_IMPORTED_MODULE_15__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__.default)({}, getSharedInputHookProps(1, resetEndText)), {}, {
    open: endOpen,
    value: endText,
    onKeyDown: function onKeyDown(e, preventDefault) {
      _onKeyDown === null || _onKeyDown === void 0 ? void 0 : _onKeyDown(e, preventDefault);
    }
  })),
      _usePickerInput4 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_8__.default)(_usePickerInput3, 2),
      endInputProps = _usePickerInput4[0],
      _usePickerInput4$ = _usePickerInput4[1],
      endFocused = _usePickerInput4$.focused,
      endTyping = _usePickerInput4$.typing; // ========================== Click Picker ==========================


  var onPickerClick = function onPickerClick(e) {
    // When click inside the picker & outside the picker's input elements
    // the panel should still be opened
    if (!mergedOpen && !startInputRef.current.contains(e.target) && !endInputRef.current.contains(e.target)) {
      if (!mergedDisabled[0]) {
        triggerOpenAndFocus(0);
      } else if (!mergedDisabled[1]) {
        triggerOpenAndFocus(1);
      }
    }
  };

  var onPickerMouseDown = function onPickerMouseDown(e) {
    // shouldn't affect input elements if picker is active
    if (mergedOpen && (startFocused || endFocused) && !startInputRef.current.contains(e.target) && !endInputRef.current.contains(e.target)) {
      e.preventDefault();
    }
  }; // ============================= Sync ==============================
  // Close should sync back with text value


  var startStr = mergedValue && mergedValue[0] ? (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.formatValue)(mergedValue[0], {
    locale: locale,
    format: 'YYYYMMDDHHmmss',
    generateConfig: generateConfig
  }) : '';
  var endStr = mergedValue && mergedValue[1] ? (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.formatValue)(mergedValue[1], {
    locale: locale,
    format: 'YYYYMMDDHHmmss',
    generateConfig: generateConfig
  }) : '';
  (0,react__WEBPACK_IMPORTED_MODULE_9__.useEffect)(function () {
    if (!mergedOpen) {
      setSelectedValue(mergedValue);

      if (!startValueTexts.length || startValueTexts[0] === '') {
        triggerStartTextChange('');
      } else if (firstStartValueText !== startText) {
        resetStartText();
      }

      if (!endValueTexts.length || endValueTexts[0] === '') {
        triggerEndTextChange('');
      } else if (firstEndValueText !== endText) {
        resetEndText();
      }
    }
  }, [mergedOpen, startValueTexts, endValueTexts]); // Sync innerValue with control mode

  (0,react__WEBPACK_IMPORTED_MODULE_9__.useEffect)(function () {
    setSelectedValue(mergedValue);
  }, [startStr, endStr]); // ============================ Warning ============================

  if (true) {
    if (value && Array.isArray(disabled) && ((0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(disabled, 0) && !(0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(value, 0) || (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(disabled, 1) && !(0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(value, 1))) {
      (0,rc_util_es_warning__WEBPACK_IMPORTED_MODULE_11__.default)(false, '`disabled` should not set with empty `value`. You should set `allowEmpty` or `value` instead.');
    }
  } // ============================ Private ============================


  if (pickerRef) {
    pickerRef.current = {
      focus: function focus() {
        if (startInputRef.current) {
          startInputRef.current.focus();
        }
      },
      blur: function blur() {
        if (startInputRef.current) {
          startInputRef.current.blur();
        }

        if (endInputRef.current) {
          endInputRef.current.blur();
        }
      }
    };
  } // ============================ Ranges =============================


  var rangeLabels = Object.keys(ranges || {});
  var rangeList = rangeLabels.map(function (label) {
    var range = ranges[label];
    var newValues = typeof range === 'function' ? range() : range;
    return {
      label: label,
      onClick: function onClick() {
        triggerChange(newValues, null);

        _triggerOpen(false, mergedActivePickerIndex);
      },
      onMouseEnter: function onMouseEnter() {
        setRangeHoverValue(newValues);
      },
      onMouseLeave: function onMouseLeave() {
        setRangeHoverValue(null);
      }
    };
  }); // ============================= Panel =============================

  function renderPanel() {
    var panelPosition = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
    var panelProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var panelHoverRangedValue = null;

    if (mergedOpen && hoverRangedValue && hoverRangedValue[0] && hoverRangedValue[1] && generateConfig.isAfter(hoverRangedValue[1], hoverRangedValue[0])) {
      panelHoverRangedValue = hoverRangedValue;
    }

    var panelShowTime = showTime;

    if (showTime && (0,_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_5__.default)(showTime) === 'object' && showTime.defaultValue) {
      var timeDefaultValues = showTime.defaultValue;
      panelShowTime = (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__.default)({}, showTime), {}, {
        defaultValue: (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(timeDefaultValues, mergedActivePickerIndex) || undefined
      });
    }

    var panelDateRender = null;

    if (dateRender) {
      panelDateRender = function panelDateRender(date, today) {
        return dateRender(date, today, {
          range: mergedActivePickerIndex ? 'end' : 'start'
        });
      };
    }

    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement(_RangeContext__WEBPACK_IMPORTED_MODULE_22__.default.Provider, {
      value: {
        inRange: true,
        panelPosition: panelPosition,
        rangedValue: rangeHoverValue || selectedValue,
        hoverRangedValue: panelHoverRangedValue
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement(_PickerPanel__WEBPACK_IMPORTED_MODULE_14__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.default)({}, props, panelProps, {
      dateRender: panelDateRender,
      showTime: panelShowTime,
      mode: mergedModes[mergedActivePickerIndex],
      generateConfig: generateConfig,
      style: undefined,
      direction: direction,
      disabledDate: mergedActivePickerIndex === 0 ? disabledStartDate : disabledEndDate,
      disabledTime: function disabledTime(date) {
        if (_disabledTime) {
          return _disabledTime(date, mergedActivePickerIndex === 0 ? 'start' : 'end');
        }

        return false;
      },
      className: classnames__WEBPACK_IMPORTED_MODULE_10___default()((0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__.default)({}, "".concat(prefixCls, "-panel-focused"), mergedActivePickerIndex === 0 ? !startTyping : !endTyping)),
      value: (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(selectedValue, mergedActivePickerIndex),
      locale: locale,
      tabIndex: -1,
      onPanelChange: function onPanelChange(date, newMode) {
        // clear hover value when panel change
        if (mergedActivePickerIndex === 0) {
          onStartLeave(true);
        }

        if (mergedActivePickerIndex === 1) {
          onEndLeave(true);
        }

        triggerModesChange((0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.updateValues)(mergedModes, newMode, mergedActivePickerIndex), (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.updateValues)(selectedValue, date, mergedActivePickerIndex));
        var viewDate = date;

        if (panelPosition === 'right' && mergedModes[mergedActivePickerIndex] === newMode) {
          viewDate = (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.getClosingViewDate)(viewDate, newMode, generateConfig, -1);
        }

        setViewDate(viewDate, mergedActivePickerIndex);
      },
      onOk: null,
      onSelect: undefined,
      onChange: undefined,
      defaultValue: mergedActivePickerIndex === 0 ? (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(selectedValue, 1) : (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(selectedValue, 0),
      defaultPickerValue: undefined
    })));
  }

  var arrowLeft = 0;
  var panelLeft = 0;

  if (mergedActivePickerIndex && startInputDivRef.current && separatorRef.current && panelDivRef.current) {
    // Arrow offset
    arrowLeft = startInputDivRef.current.offsetWidth + separatorRef.current.offsetWidth;

    if (panelDivRef.current.offsetWidth && arrowLeft > panelDivRef.current.offsetWidth) {
      panelLeft = arrowLeft;
    }
  }

  var arrowPositionStyle = direction === 'rtl' ? {
    right: arrowLeft
  } : {
    left: arrowLeft
  };

  function renderPanels() {
    var panels;
    var extraNode = (0,_utils_getExtraFooter__WEBPACK_IMPORTED_MODULE_24__.default)(prefixCls, mergedModes[mergedActivePickerIndex], renderExtraFooter);
    var rangesNode = (0,_utils_getRanges__WEBPACK_IMPORTED_MODULE_25__.default)({
      prefixCls: prefixCls,
      components: components,
      needConfirmButton: needConfirmButton,
      okDisabled: !(0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(selectedValue, mergedActivePickerIndex) || disabledDate && disabledDate(selectedValue[mergedActivePickerIndex]),
      locale: locale,
      rangeList: rangeList,
      onOk: function onOk() {
        if ((0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(selectedValue, mergedActivePickerIndex)) {
          // triggerChangeOld(selectedValue);
          triggerChange(selectedValue, mergedActivePickerIndex);

          if (_onOk) {
            _onOk(selectedValue);
          }
        }
      }
    });

    if (picker !== 'time' && !showTime) {
      var viewDate = getViewDate(mergedActivePickerIndex);
      var nextViewDate = (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.getClosingViewDate)(viewDate, picker, generateConfig);
      var currentMode = mergedModes[mergedActivePickerIndex];
      var showDoublePanel = currentMode === picker;
      var leftPanel = renderPanel(showDoublePanel ? 'left' : false, {
        pickerValue: viewDate,
        onPickerValueChange: function onPickerValueChange(newViewDate) {
          setViewDate(newViewDate, mergedActivePickerIndex);
        }
      });
      var rightPanel = renderPanel('right', {
        pickerValue: nextViewDate,
        onPickerValueChange: function onPickerValueChange(newViewDate) {
          setViewDate((0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_19__.getClosingViewDate)(newViewDate, picker, generateConfig, -1), mergedActivePickerIndex);
        }
      });

      if (direction === 'rtl') {
        panels = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement(react__WEBPACK_IMPORTED_MODULE_9__.Fragment, null, rightPanel, showDoublePanel && leftPanel);
      } else {
        panels = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement(react__WEBPACK_IMPORTED_MODULE_9__.Fragment, null, leftPanel, showDoublePanel && rightPanel);
      }
    } else {
      panels = renderPanel();
    }

    var mergedNodes = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement(react__WEBPACK_IMPORTED_MODULE_9__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("div", {
      className: "".concat(prefixCls, "-panels")
    }, panels), (extraNode || rangesNode) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("div", {
      className: "".concat(prefixCls, "-footer")
    }, extraNode, rangesNode));

    if (panelRender) {
      mergedNodes = panelRender(mergedNodes);
    }

    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("div", {
      className: "".concat(prefixCls, "-panel-container"),
      style: {
        marginLeft: panelLeft
      },
      ref: panelDivRef,
      onMouseDown: function onMouseDown(e) {
        e.preventDefault();
      }
    }, mergedNodes);
  }

  var rangePanel = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("div", {
    className: classnames__WEBPACK_IMPORTED_MODULE_10___default()("".concat(prefixCls, "-range-wrapper"), "".concat(prefixCls, "-").concat(picker, "-range-wrapper")),
    style: {
      minWidth: popupMinWidth
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("div", {
    className: "".concat(prefixCls, "-range-arrow"),
    style: arrowPositionStyle
  }), renderPanels()); // ============================= Icons =============================

  var suffixNode;

  if (suffixIcon) {
    suffixNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("span", {
      className: "".concat(prefixCls, "-suffix")
    }, suffixIcon);
  }

  var clearNode;

  if (allowClear && ((0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(mergedValue, 0) && !mergedDisabled[0] || (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(mergedValue, 1) && !mergedDisabled[1])) {
    clearNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("span", {
      onMouseDown: function onMouseDown(e) {
        e.preventDefault();
        e.stopPropagation();
      },
      onMouseUp: function onMouseUp(e) {
        e.preventDefault();
        e.stopPropagation();
        var values = mergedValue;

        if (!mergedDisabled[0]) {
          values = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.updateValues)(values, null, 0);
        }

        if (!mergedDisabled[1]) {
          values = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.updateValues)(values, null, 1);
        }

        triggerChange(values, null);

        _triggerOpen(false, mergedActivePickerIndex);
      },
      className: "".concat(prefixCls, "-clear")
    }, clearIcon || /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("span", {
      className: "".concat(prefixCls, "-clear-btn")
    }));
  }

  var inputSharedProps = {
    size: (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_17__.getInputSize)(picker, formatList[0], generateConfig)
  };
  var activeBarLeft = 0;
  var activeBarWidth = 0;

  if (startInputDivRef.current && endInputDivRef.current && separatorRef.current) {
    if (mergedActivePickerIndex === 0) {
      activeBarWidth = startInputDivRef.current.offsetWidth;
    } else {
      activeBarLeft = arrowLeft;
      activeBarWidth = endInputDivRef.current.offsetWidth;
    }
  }

  var activeBarPositionStyle = direction === 'rtl' ? {
    right: activeBarLeft
  } : {
    left: activeBarLeft
  }; // ============================ Return =============================

  var onContextSelect = function onContextSelect(date, type) {
    var values = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.updateValues)(selectedValue, date, mergedActivePickerIndex);

    if (type === 'submit' || type !== 'key' && !needConfirmButton) {
      // triggerChange will also update selected values
      triggerChange(values, mergedActivePickerIndex); // clear hover value style

      if (mergedActivePickerIndex === 0) {
        onStartLeave();
      } else {
        onEndLeave();
      }
    } else {
      setSelectedValue(values);
    }
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement(_PanelContext__WEBPACK_IMPORTED_MODULE_18__.default.Provider, {
    value: {
      operationRef: operationRef,
      hideHeader: picker === 'time',
      onDateMouseEnter: onDateMouseEnter,
      onDateMouseLeave: onDateMouseLeave,
      hideRanges: true,
      onSelect: onContextSelect,
      open: mergedOpen
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement(_PickerTrigger__WEBPACK_IMPORTED_MODULE_13__.default, {
    visible: mergedOpen,
    popupElement: rangePanel,
    popupStyle: popupStyle,
    prefixCls: prefixCls,
    dropdownClassName: dropdownClassName,
    dropdownAlign: dropdownAlign,
    getPopupContainer: getPopupContainer,
    transitionName: transitionName,
    range: true,
    direction: direction
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("div", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.default)({
    ref: containerRef,
    className: classnames__WEBPACK_IMPORTED_MODULE_10___default()(prefixCls, "".concat(prefixCls, "-range"), className, (_classNames2 = {}, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__.default)(_classNames2, "".concat(prefixCls, "-disabled"), mergedDisabled[0] && mergedDisabled[1]), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__.default)(_classNames2, "".concat(prefixCls, "-focused"), mergedActivePickerIndex === 0 ? startFocused : endFocused), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__.default)(_classNames2, "".concat(prefixCls, "-rtl"), direction === 'rtl'), _classNames2)),
    style: style,
    onClick: onPickerClick,
    onMouseEnter: onMouseEnter,
    onMouseLeave: onMouseLeave,
    onMouseDown: onPickerMouseDown
  }, (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.default)(props)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("div", {
    className: classnames__WEBPACK_IMPORTED_MODULE_10___default()("".concat(prefixCls, "-input"), (_classNames3 = {}, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__.default)(_classNames3, "".concat(prefixCls, "-input-active"), mergedActivePickerIndex === 0), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__.default)(_classNames3, "".concat(prefixCls, "-input-placeholder"), !!startHoverValue), _classNames3)),
    ref: startInputDivRef
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("input", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.default)({
    id: id,
    disabled: mergedDisabled[0],
    readOnly: inputReadOnly || typeof formatList[0] === 'function' || !startTyping,
    value: startHoverValue || startText,
    onChange: function onChange(e) {
      triggerStartTextChange(e.target.value);
    },
    autoFocus: autoFocus,
    placeholder: (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(placeholder, 0) || '',
    ref: startInputRef
  }, startInputProps, inputSharedProps, {
    autoComplete: autoComplete
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("div", {
    className: "".concat(prefixCls, "-range-separator"),
    ref: separatorRef
  }, separator), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("div", {
    className: classnames__WEBPACK_IMPORTED_MODULE_10___default()("".concat(prefixCls, "-input"), (_classNames4 = {}, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__.default)(_classNames4, "".concat(prefixCls, "-input-active"), mergedActivePickerIndex === 1), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__.default)(_classNames4, "".concat(prefixCls, "-input-placeholder"), !!endHoverValue), _classNames4)),
    ref: endInputDivRef
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("input", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.default)({
    disabled: mergedDisabled[1],
    readOnly: inputReadOnly || typeof formatList[0] === 'function' || !endTyping,
    value: endHoverValue || endText,
    onChange: function onChange(e) {
      triggerEndTextChange(e.target.value);
    },
    placeholder: (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_16__.getValue)(placeholder, 1) || '',
    ref: endInputRef
  }, endInputProps, inputSharedProps, {
    autoComplete: autoComplete
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement("div", {
    className: "".concat(prefixCls, "-active-bar"),
    style: (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__.default)({}, activeBarPositionStyle), {}, {
      width: activeBarWidth,
      position: 'absolute'
    })
  }), suffixNode, clearNode)));
} // Wrap with class component to enable pass generic with instance method


var RangePicker = /*#__PURE__*/function (_React$Component) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__.default)(RangePicker, _React$Component);

  var _super = (0,_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__.default)(RangePicker);

  function RangePicker() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.default)(this, RangePicker);

    _this = _super.apply(this, arguments);
    _this.pickerRef = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createRef();

    _this.focus = function () {
      if (_this.pickerRef.current) {
        _this.pickerRef.current.focus();
      }
    };

    _this.blur = function () {
      if (_this.pickerRef.current) {
        _this.pickerRef.current.blur();
      }
    };

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.default)(RangePicker, [{
    key: "render",
    value: function render() {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9__.createElement(InnerRangePicker, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.default)({}, this.props, {
        pickerRef: this.pickerRef
      }));
    }
  }]);

  return RangePicker;
}(react__WEBPACK_IMPORTED_MODULE_9__.Component);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RangePicker);

/***/ }),

/***/ "./node_modules/rc-picker/es/generate/moment.js":
/*!******************************************************!*\
  !*** ./node_modules/rc-picker/es/generate/moment.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var rc_util_es_warning__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rc-util/es/warning */ "./node_modules/rc-util/es/warning.js");


var generateConfig = {
  // get
  getNow: function getNow() {
    return moment__WEBPACK_IMPORTED_MODULE_0___default()();
  },
  getFixedDate: function getFixedDate(string) {
    return moment__WEBPACK_IMPORTED_MODULE_0___default()(string, 'YYYY-MM-DD');
  },
  getEndDate: function getEndDate(date) {
    var clone = date.clone();
    return clone.endOf('month');
  },
  getWeekDay: function getWeekDay(date) {
    var clone = date.clone().locale('en_US');
    return clone.weekday() + clone.localeData().firstDayOfWeek();
  },
  getYear: function getYear(date) {
    return date.year();
  },
  getMonth: function getMonth(date) {
    return date.month();
  },
  getDate: function getDate(date) {
    return date.date();
  },
  getHour: function getHour(date) {
    return date.hour();
  },
  getMinute: function getMinute(date) {
    return date.minute();
  },
  getSecond: function getSecond(date) {
    return date.second();
  },
  // set
  addYear: function addYear(date, diff) {
    var clone = date.clone();
    return clone.add(diff, 'year');
  },
  addMonth: function addMonth(date, diff) {
    var clone = date.clone();
    return clone.add(diff, 'month');
  },
  addDate: function addDate(date, diff) {
    var clone = date.clone();
    return clone.add(diff, 'day');
  },
  setYear: function setYear(date, year) {
    var clone = date.clone();
    return clone.year(year);
  },
  setMonth: function setMonth(date, month) {
    var clone = date.clone();
    return clone.month(month);
  },
  setDate: function setDate(date, num) {
    var clone = date.clone();
    return clone.date(num);
  },
  setHour: function setHour(date, hour) {
    var clone = date.clone();
    return clone.hour(hour);
  },
  setMinute: function setMinute(date, minute) {
    var clone = date.clone();
    return clone.minute(minute);
  },
  setSecond: function setSecond(date, second) {
    var clone = date.clone();
    return clone.second(second);
  },
  // Compare
  isAfter: function isAfter(date1, date2) {
    return date1.isAfter(date2);
  },
  isValidate: function isValidate(date) {
    return date.isValid();
  },
  locale: {
    getWeekFirstDay: function getWeekFirstDay(locale) {
      var date = moment__WEBPACK_IMPORTED_MODULE_0___default()().locale(locale);
      return date.localeData().firstDayOfWeek();
    },
    getWeekFirstDate: function getWeekFirstDate(locale, date) {
      var clone = date.clone();
      var result = clone.locale(locale);
      return result.weekday(0);
    },
    getWeek: function getWeek(locale, date) {
      var clone = date.clone();
      var result = clone.locale(locale);
      return result.week();
    },
    getShortWeekDays: function getShortWeekDays(locale) {
      var date = moment__WEBPACK_IMPORTED_MODULE_0___default()().locale(locale);
      return date.localeData().weekdaysMin();
    },
    getShortMonths: function getShortMonths(locale) {
      var date = moment__WEBPACK_IMPORTED_MODULE_0___default()().locale(locale);
      return date.localeData().monthsShort();
    },
    format: function format(locale, date, _format) {
      var clone = date.clone();
      var result = clone.locale(locale);
      return result.format(_format);
    },
    parse: function parse(locale, text, formats) {
      var fallbackFormatList = [];

      for (var i = 0; i < formats.length; i += 1) {
        var format = formats[i];
        var formatText = text;

        if (format.includes('wo') || format.includes('Wo')) {
          format = format.replace(/wo/g, 'w').replace(/Wo/g, 'W');
          var matchFormat = format.match(/[-YyMmDdHhSsWwGg]+/g);
          var matchText = formatText.match(/[-\d]+/g);

          if (matchFormat && matchText) {
            format = matchFormat.join('');
            formatText = matchText.join('');
          } else {
            fallbackFormatList.push(format.replace(/o/g, ''));
          }
        }

        var date = moment__WEBPACK_IMPORTED_MODULE_0___default()(formatText, format, locale, true);

        if (date.isValid()) {
          return date;
        }
      } // Fallback to fuzzy matching, this should always not reach match or need fire a issue


      for (var _i = 0; _i < fallbackFormatList.length; _i += 1) {
        var _date = moment__WEBPACK_IMPORTED_MODULE_0___default()(text, fallbackFormatList[_i], locale, false);
        /* istanbul ignore next */


        if (_date.isValid()) {
          (0,rc_util_es_warning__WEBPACK_IMPORTED_MODULE_1__.noteOnce)(false, 'Not match any format strictly and fallback to fuzzy match. Please help to fire a issue about this.');
          return _date;
        }
      }

      return null;
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (generateConfig);

/***/ }),

/***/ "./node_modules/rc-picker/es/hooks/useCellClassName.js":
/*!*************************************************************!*\
  !*** ./node_modules/rc-picker/es/hooks/useCellClassName.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ useCellClassName)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");
/* harmony import */ var _utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/miscUtil */ "./node_modules/rc-picker/es/utils/miscUtil.js");



function useCellClassName(_ref) {
  var cellPrefixCls = _ref.cellPrefixCls,
      generateConfig = _ref.generateConfig,
      rangedValue = _ref.rangedValue,
      hoverRangedValue = _ref.hoverRangedValue,
      isInView = _ref.isInView,
      isSameCell = _ref.isSameCell,
      offsetCell = _ref.offsetCell,
      today = _ref.today,
      value = _ref.value;

  function getClassName(currentDate) {
    var _ref2;

    var prevDate = offsetCell(currentDate, -1);
    var nextDate = offsetCell(currentDate, 1);
    var rangeStart = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.getValue)(rangedValue, 0);
    var rangeEnd = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.getValue)(rangedValue, 1);
    var hoverStart = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.getValue)(hoverRangedValue, 0);
    var hoverEnd = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.getValue)(hoverRangedValue, 1);
    var isRangeHovered = (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_1__.isInRange)(generateConfig, hoverStart, hoverEnd, currentDate);

    function isRangeStart(date) {
      return isSameCell(rangeStart, date);
    }

    function isRangeEnd(date) {
      return isSameCell(rangeEnd, date);
    }

    var isHoverStart = isSameCell(hoverStart, currentDate);
    var isHoverEnd = isSameCell(hoverEnd, currentDate);
    var isHoverEdgeStart = (isRangeHovered || isHoverEnd) && (!isInView(prevDate) || isRangeEnd(prevDate));
    var isHoverEdgeEnd = (isRangeHovered || isHoverStart) && (!isInView(nextDate) || isRangeStart(nextDate));
    return _ref2 = {}, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-in-view"), isInView(currentDate)), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-in-range"), (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_1__.isInRange)(generateConfig, rangeStart, rangeEnd, currentDate)), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-start"), isRangeStart(currentDate)), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-end"), isRangeEnd(currentDate)), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-start-single"), isRangeStart(currentDate) && !rangeEnd), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-end-single"), isRangeEnd(currentDate) && !rangeStart), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-start-near-hover"), isRangeStart(currentDate) && (isSameCell(prevDate, hoverStart) || (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_1__.isInRange)(generateConfig, hoverStart, hoverEnd, prevDate))), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-end-near-hover"), isRangeEnd(currentDate) && (isSameCell(nextDate, hoverEnd) || (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_1__.isInRange)(generateConfig, hoverStart, hoverEnd, nextDate))), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-hover"), isRangeHovered), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-hover-start"), isHoverStart), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-hover-end"), isHoverEnd), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-hover-edge-start"), isHoverEdgeStart), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-hover-edge-end"), isHoverEdgeEnd), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-hover-edge-start-near-range"), isHoverEdgeStart && isSameCell(prevDate, rangeEnd)), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-range-hover-edge-end-near-range"), isHoverEdgeEnd && isSameCell(nextDate, rangeStart)), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-today"), isSameCell(today, currentDate)), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_ref2, "".concat(cellPrefixCls, "-selected"), isSameCell(value, currentDate)), _ref2;
  }

  return getClassName;
}

/***/ }),

/***/ "./node_modules/rc-picker/es/hooks/useHoverValue.js":
/*!**********************************************************!*\
  !*** ./node_modules/rc-picker/es/hooks/useHoverValue.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ useHoverValue)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _useValueTexts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useValueTexts */ "./node_modules/rc-picker/es/hooks/useValueTexts.js");



function useHoverValue(valueText, _ref) {
  var formatList = _ref.formatList,
      generateConfig = _ref.generateConfig,
      locale = _ref.locale;

  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),
      _useState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.default)(_useState, 2),
      value = _useState2[0],
      internalSetValue = _useState2[1];

  var raf = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);

  function setValue(val) {
    var immediately = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    cancelAnimationFrame(raf.current);

    if (immediately) {
      internalSetValue(val);
      return;
    }

    raf.current = requestAnimationFrame(function () {
      internalSetValue(val);
    });
  }

  var _useValueTexts = (0,_useValueTexts__WEBPACK_IMPORTED_MODULE_2__.default)(value, {
    formatList: formatList,
    generateConfig: generateConfig,
    locale: locale
  }),
      _useValueTexts2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.default)(_useValueTexts, 2),
      firstText = _useValueTexts2[1];

  function onEnter(date) {
    setValue(date);
  }

  function onLeave() {
    var immediately = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
    setValue(null, immediately);
  }

  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {
    onLeave(true);
  }, [valueText]);
  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {
    return function () {
      return cancelAnimationFrame(raf.current);
    };
  }, []);
  return [firstText, onEnter, onLeave];
}

/***/ }),

/***/ "./node_modules/rc-picker/es/hooks/usePickerInput.js":
/*!***********************************************************!*\
  !*** ./node_modules/rc-picker/es/hooks/usePickerInput.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ usePickerInput)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rc-util/es/KeyCode */ "./node_modules/rc-util/es/KeyCode.js");
/* harmony import */ var _utils_uiUtil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/uiUtil */ "./node_modules/rc-picker/es/utils/uiUtil.js");




function usePickerInput(_ref) {
  var open = _ref.open,
      value = _ref.value,
      isClickOutside = _ref.isClickOutside,
      triggerOpen = _ref.triggerOpen,
      forwardKeyDown = _ref.forwardKeyDown,
      _onKeyDown = _ref.onKeyDown,
      blurToCancel = _ref.blurToCancel,
      onSubmit = _ref.onSubmit,
      onCancel = _ref.onCancel,
      _onFocus = _ref.onFocus,
      _onBlur = _ref.onBlur;

  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false),
      _useState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.default)(_useState, 2),
      typing = _useState2[0],
      setTyping = _useState2[1];

  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false),
      _useState4 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.default)(_useState3, 2),
      focused = _useState4[0],
      setFocused = _useState4[1];
  /**
   * We will prevent blur to handle open event when user click outside,
   * since this will repeat trigger `onOpenChange` event.
   */


  var preventBlurRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);
  var valueChangedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);
  var preventDefaultRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);
  var inputProps = {
    onMouseDown: function onMouseDown() {
      setTyping(true);
      triggerOpen(true);
    },
    onKeyDown: function onKeyDown(e) {
      var preventDefault = function preventDefault() {
        preventDefaultRef.current = true;
      };

      _onKeyDown(e, preventDefault);

      if (preventDefaultRef.current) return;

      switch (e.which) {
        case rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_2__.default.ENTER:
          {
            if (!open) {
              triggerOpen(true);
            } else if (onSubmit() !== false) {
              setTyping(true);
            }

            e.preventDefault();
            return;
          }

        case rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_2__.default.TAB:
          {
            if (typing && open && !e.shiftKey) {
              setTyping(false);
              e.preventDefault();
            } else if (!typing && open) {
              if (!forwardKeyDown(e) && e.shiftKey) {
                setTyping(true);
                e.preventDefault();
              }
            }

            return;
          }

        case rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_2__.default.ESC:
          {
            setTyping(true);
            onCancel();
            return;
          }
      }

      if (!open && ![rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_2__.default.SHIFT].includes(e.which)) {
        triggerOpen(true);
      } else if (!typing) {
        // Let popup panel handle keyboard
        forwardKeyDown(e);
      }
    },
    onFocus: function onFocus(e) {
      setTyping(true);
      setFocused(true);

      if (_onFocus) {
        _onFocus(e);
      }
    },
    onBlur: function onBlur(e) {
      if (preventBlurRef.current || !isClickOutside(document.activeElement)) {
        preventBlurRef.current = false;
        return;
      }

      if (blurToCancel) {
        setTimeout(function () {
          var _document = document,
              activeElement = _document.activeElement;

          while (activeElement && activeElement.shadowRoot) {
            activeElement = activeElement.shadowRoot.activeElement;
          }

          if (isClickOutside(activeElement)) {
            onCancel();
          }
        }, 0);
      } else if (open) {
        triggerOpen(false);

        if (valueChangedRef.current) {
          onSubmit();
        }
      }

      setFocused(false);

      if (_onBlur) {
        _onBlur(e);
      }
    }
  }; // check if value changed

  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {
    valueChangedRef.current = false;
  }, [open]);
  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {
    valueChangedRef.current = true;
  }, [value]); // Global click handler

  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {
    return (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_3__.addGlobalMouseDownEvent)(function (e) {
      var target = (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_3__.getTargetFromEvent)(e);

      if (open) {
        var clickedOutside = isClickOutside(target);

        if (!clickedOutside) {
          preventBlurRef.current = true; // Always set back in case `onBlur` prevented by user

          requestAnimationFrame(function () {
            preventBlurRef.current = false;
          });
        } else if (!focused || clickedOutside) {
          triggerOpen(false);
        }
      }
    });
  });
  return [inputProps, {
    focused: focused,
    typing: typing
  }];
}

/***/ }),

/***/ "./node_modules/rc-picker/es/hooks/useRangeDisabled.js":
/*!*************************************************************!*\
  !*** ./node_modules/rc-picker/es/hooks/useRangeDisabled.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ useRangeDisabled)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _utils_miscUtil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/miscUtil */ "./node_modules/rc-picker/es/utils/miscUtil.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");



function useRangeDisabled(_ref, disabledStart, disabledEnd) {
  var picker = _ref.picker,
      locale = _ref.locale,
      selectedValue = _ref.selectedValue,
      disabledDate = _ref.disabledDate,
      disabled = _ref.disabled,
      generateConfig = _ref.generateConfig;
  var startDate = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_1__.getValue)(selectedValue, 0);
  var endDate = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_1__.getValue)(selectedValue, 1);

  function weekFirstDate(date) {
    return generateConfig.locale.getWeekFirstDate(locale.locale, date);
  }

  function monthNumber(date) {
    var year = generateConfig.getYear(date);
    var month = generateConfig.getMonth(date);
    return year * 100 + month;
  }

  function quarterNumber(date) {
    var year = generateConfig.getYear(date);
    var quarter = (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.getQuarter)(generateConfig, date);
    return year * 10 + quarter;
  }

  var disabledStartDate = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(function (date) {
    if (disabledDate && disabledDate(date)) {
      return true;
    } // Disabled range


    if (disabled[1] && endDate) {
      return !(0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.isSameDate)(generateConfig, date, endDate) && generateConfig.isAfter(date, endDate);
    } // Disabled part


    if (disabledStart && endDate) {
      switch (picker) {
        case 'quarter':
          return quarterNumber(date) > quarterNumber(endDate);

        case 'month':
          return monthNumber(date) > monthNumber(endDate);

        case 'week':
          return weekFirstDate(date) > weekFirstDate(endDate);

        default:
          return !(0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.isSameDate)(generateConfig, date, endDate) && generateConfig.isAfter(date, endDate);
      }
    }

    return false;
  }, [disabledDate, disabled[1], endDate, disabledStart]);
  var disabledEndDate = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(function (date) {
    if (disabledDate && disabledDate(date)) {
      return true;
    } // Disabled range


    if (disabled[0] && startDate) {
      return !(0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.isSameDate)(generateConfig, date, endDate) && generateConfig.isAfter(startDate, date);
    } // Disabled part


    if (disabledEnd && startDate) {
      switch (picker) {
        case 'quarter':
          return quarterNumber(date) < quarterNumber(startDate);

        case 'month':
          return monthNumber(date) < monthNumber(startDate);

        case 'week':
          return weekFirstDate(date) < weekFirstDate(startDate);

        default:
          return !(0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.isSameDate)(generateConfig, date, startDate) && generateConfig.isAfter(startDate, date);
      }
    }

    return false;
  }, [disabledDate, disabled[0], startDate, disabledEnd]);
  return [disabledStartDate, disabledEndDate];
}

/***/ }),

/***/ "./node_modules/rc-picker/es/hooks/useRangeViewDates.js":
/*!**************************************************************!*\
  !*** ./node_modules/rc-picker/es/hooks/useRangeViewDates.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ useRangeViewDates)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/miscUtil */ "./node_modules/rc-picker/es/utils/miscUtil.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");





function getStartEndDistance(startDate, endDate, picker, generateConfig) {
  var startNext = (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_3__.getClosingViewDate)(startDate, picker, generateConfig, 1);

  function getDistance(compareFunc) {
    if (compareFunc(startDate, endDate)) {
      return 'same';
    }

    if (compareFunc(startNext, endDate)) {
      return 'closing';
    }

    return 'far';
  }

  switch (picker) {
    case 'year':
      return getDistance(function (start, end) {
        return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_3__.isSameDecade)(generateConfig, start, end);
      });

    case 'quarter':
    case 'month':
      return getDistance(function (start, end) {
        return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_3__.isSameYear)(generateConfig, start, end);
      });

    default:
      return getDistance(function (start, end) {
        return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_3__.isSameMonth)(generateConfig, start, end);
      });
  }
}

function getRangeViewDate(values, index, picker, generateConfig) {
  var startDate = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.getValue)(values, 0);
  var endDate = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.getValue)(values, 1);

  if (index === 0) {
    return startDate;
  }

  if (startDate && endDate) {
    var distance = getStartEndDistance(startDate, endDate, picker, generateConfig);

    switch (distance) {
      case 'same':
        return startDate;

      case 'closing':
        return startDate;

      default:
        return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_3__.getClosingViewDate)(endDate, picker, generateConfig, -1);
    }
  }

  return startDate;
}

function useRangeViewDates(_ref) {
  var values = _ref.values,
      picker = _ref.picker,
      defaultDates = _ref.defaultDates,
      generateConfig = _ref.generateConfig;

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_1__.useState(function () {
    return [(0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.getValue)(defaultDates, 0), (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.getValue)(defaultDates, 1)];
  }),
      _React$useState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.default)(_React$useState, 2),
      defaultViewDates = _React$useState2[0],
      setDefaultViewDates = _React$useState2[1];

  var _React$useState3 = react__WEBPACK_IMPORTED_MODULE_1__.useState(null),
      _React$useState4 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.default)(_React$useState3, 2),
      viewDates = _React$useState4[0],
      setInternalViewDates = _React$useState4[1];

  var startDate = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.getValue)(values, 0);
  var endDate = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.getValue)(values, 1);

  function getViewDate(index) {
    // If set default view date, use it
    if (defaultViewDates[index]) {
      return defaultViewDates[index];
    }

    return (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.getValue)(viewDates, index) || getRangeViewDate(values, index, picker, generateConfig) || startDate || endDate || generateConfig.getNow();
  }

  function setViewDate(viewDate, index) {
    if (viewDate) {
      var newViewDates = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.updateValues)(viewDates, viewDate, index); // Set view date will clean up default one

      setDefaultViewDates( // Should always be an array
      (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.updateValues)(defaultViewDates, null, index) || [null, null]); // Reset another one when not have value

      var anotherIndex = (index + 1) % 2;

      if (!(0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.getValue)(values, anotherIndex)) {
        newViewDates = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_2__.updateValues)(newViewDates, viewDate, anotherIndex);
      }

      setInternalViewDates(newViewDates);
    } else if (startDate || endDate) {
      // Reset all when has values when `viewDate` is `null` which means from open trigger
      setInternalViewDates(null);
    }
  }

  return [getViewDate, setViewDate];
}

/***/ }),

/***/ "./node_modules/rc-picker/es/hooks/useTextValueMapping.js":
/*!****************************************************************!*\
  !*** ./node_modules/rc-picker/es/hooks/useTextValueMapping.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ useTextValueMapping)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");


function useTextValueMapping(_ref) {
  var valueTexts = _ref.valueTexts,
      onTextChange = _ref.onTextChange;

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_1__.useState(''),
      _React$useState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.default)(_React$useState, 2),
      text = _React$useState2[0],
      setInnerText = _React$useState2[1];

  var valueTextsRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef([]);
  valueTextsRef.current = valueTexts;

  function triggerTextChange(value) {
    setInnerText(value);
    onTextChange(value);
  }

  function resetText() {
    setInnerText(valueTextsRef.current[0]);
  }

  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(function () {
    if (valueTexts.every(function (valText) {
      return valText !== text;
    })) {
      resetText();
    }
  }, [valueTexts.join('||')]);
  return [text, triggerTextChange, resetText];
}

/***/ }),

/***/ "./node_modules/rc-picker/es/hooks/useValueTexts.js":
/*!**********************************************************!*\
  !*** ./node_modules/rc-picker/es/hooks/useValueTexts.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ useValueTexts)
/* harmony export */ });
/* harmony import */ var shallowequal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! shallowequal */ "./node_modules/shallowequal/index.js");
/* harmony import */ var shallowequal__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(shallowequal__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var rc_util_es_hooks_useMemo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rc-util/es/hooks/useMemo */ "./node_modules/rc-util/es/hooks/useMemo.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");



function useValueTexts(value, _ref) {
  var formatList = _ref.formatList,
      generateConfig = _ref.generateConfig,
      locale = _ref.locale;
  return (0,rc_util_es_hooks_useMemo__WEBPACK_IMPORTED_MODULE_1__.default)(function () {
    if (!value) {
      return [[''], ''];
    } // We will convert data format back to first format


    var firstValueText = '';
    var fullValueTexts = [];

    for (var i = 0; i < formatList.length; i += 1) {
      var format = formatList[i];
      var formatStr = (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.formatValue)(value, {
        generateConfig: generateConfig,
        locale: locale,
        format: format
      });
      fullValueTexts.push(formatStr);

      if (i === 0) {
        firstValueText = formatStr;
      }
    }

    return [fullValueTexts, firstValueText];
  }, [value, formatList], function (prev, next) {
    return prev[0] !== next[0] || !shallowequal__WEBPACK_IMPORTED_MODULE_0___default()(prev[1], next[1]);
  });
}

/***/ }),

/***/ "./node_modules/rc-picker/es/index.js":
/*!********************************************!*\
  !*** ./node_modules/rc-picker/es/index.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PickerPanel": () => (/* reexport safe */ _PickerPanel__WEBPACK_IMPORTED_MODULE_1__.default),
/* harmony export */   "RangePicker": () => (/* reexport safe */ _RangePicker__WEBPACK_IMPORTED_MODULE_2__.default),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Picker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Picker */ "./node_modules/rc-picker/es/Picker.js");
/* harmony import */ var _PickerPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PickerPanel */ "./node_modules/rc-picker/es/PickerPanel.js");
/* harmony import */ var _RangePicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RangePicker */ "./node_modules/rc-picker/es/RangePicker.js");




/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_Picker__WEBPACK_IMPORTED_MODULE_0__.default);

/***/ }),

/***/ "./node_modules/rc-picker/es/locale/en_US.js":
/*!***************************************************!*\
  !*** ./node_modules/rc-picker/es/locale/en_US.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var locale = {
  locale: 'en_US',
  today: 'Today',
  now: 'Now',
  backToToday: 'Back to today',
  ok: 'Ok',
  clear: 'Clear',
  month: 'Month',
  year: 'Year',
  timeSelect: 'select time',
  dateSelect: 'select date',
  weekSelect: 'Choose a week',
  monthSelect: 'Choose a month',
  yearSelect: 'Choose a year',
  decadeSelect: 'Choose a decade',
  yearFormat: 'YYYY',
  dateFormat: 'M/D/YYYY',
  dayFormat: 'D',
  dateTimeFormat: 'M/D/YYYY HH:mm:ss',
  monthBeforeYear: true,
  previousMonth: 'Previous month (PageUp)',
  nextMonth: 'Next month (PageDown)',
  previousYear: 'Last year (Control + left)',
  nextYear: 'Next year (Control + right)',
  previousDecade: 'Last decade',
  nextDecade: 'Next decade',
  previousCentury: 'Last century',
  nextCentury: 'Next century'
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (locale);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/DatePanel/DateBody.js":
/*!****************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/DatePanel/DateBody.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");
/* harmony import */ var _RangeContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../RangeContext */ "./node_modules/rc-picker/es/RangeContext.js");
/* harmony import */ var _hooks_useCellClassName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks/useCellClassName */ "./node_modules/rc-picker/es/hooks/useCellClassName.js");
/* harmony import */ var _PanelBody__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../PanelBody */ "./node_modules/rc-picker/es/panels/PanelBody.js");







function DateBody(props) {
  var prefixCls = props.prefixCls,
      generateConfig = props.generateConfig,
      prefixColumn = props.prefixColumn,
      locale = props.locale,
      rowCount = props.rowCount,
      viewDate = props.viewDate,
      value = props.value,
      dateRender = props.dateRender;

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_1__.useContext(_RangeContext__WEBPACK_IMPORTED_MODULE_3__.default),
      rangedValue = _React$useContext.rangedValue,
      hoverRangedValue = _React$useContext.hoverRangedValue;

  var baseDate = (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.getWeekStartDate)(locale.locale, generateConfig, viewDate);
  var cellPrefixCls = "".concat(prefixCls, "-cell");
  var weekFirstDay = generateConfig.locale.getWeekFirstDay(locale.locale);
  var today = generateConfig.getNow(); // ============================== Header ==============================

  var headerCells = [];
  var weekDaysLocale = locale.shortWeekDays || (generateConfig.locale.getShortWeekDays ? generateConfig.locale.getShortWeekDays(locale.locale) : []);

  if (prefixColumn) {
    headerCells.push( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("th", {
      key: "empty",
      "aria-label": "empty cell"
    }));
  }

  for (var i = 0; i < _utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.WEEK_DAY_COUNT; i += 1) {
    headerCells.push( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("th", {
      key: i
    }, weekDaysLocale[(i + weekFirstDay) % _utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.WEEK_DAY_COUNT]));
  } // =============================== Body ===============================


  var getCellClassName = (0,_hooks_useCellClassName__WEBPACK_IMPORTED_MODULE_4__.default)({
    cellPrefixCls: cellPrefixCls,
    today: today,
    value: value,
    generateConfig: generateConfig,
    rangedValue: prefixColumn ? null : rangedValue,
    hoverRangedValue: prefixColumn ? null : hoverRangedValue,
    isSameCell: function isSameCell(current, target) {
      return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.isSameDate)(generateConfig, current, target);
    },
    isInView: function isInView(date) {
      return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.isSameMonth)(generateConfig, date, viewDate);
    },
    offsetCell: function offsetCell(date, offset) {
      return generateConfig.addDate(date, offset);
    }
  });
  var getCellNode = dateRender ? function (date) {
    return dateRender(date, today);
  } : undefined;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_PanelBody__WEBPACK_IMPORTED_MODULE_5__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    rowNum: rowCount,
    colNum: _utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.WEEK_DAY_COUNT,
    baseDate: baseDate,
    getCellNode: getCellNode,
    getCellText: generateConfig.getDate,
    getCellClassName: getCellClassName,
    getCellDate: generateConfig.addDate,
    titleCell: function titleCell(date) {
      return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.formatValue)(date, {
        locale: locale,
        format: 'YYYY-MM-DD',
        generateConfig: generateConfig
      });
    },
    headerCells: headerCells
  }));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DateBody);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/DatePanel/DateHeader.js":
/*!******************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/DatePanel/DateHeader.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Header */ "./node_modules/rc-picker/es/panels/Header.js");
/* harmony import */ var _PanelContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../PanelContext */ "./node_modules/rc-picker/es/PanelContext.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");






function DateHeader(props) {
  var prefixCls = props.prefixCls,
      generateConfig = props.generateConfig,
      locale = props.locale,
      viewDate = props.viewDate,
      onNextMonth = props.onNextMonth,
      onPrevMonth = props.onPrevMonth,
      onNextYear = props.onNextYear,
      onPrevYear = props.onPrevYear,
      onYearClick = props.onYearClick,
      onMonthClick = props.onMonthClick;

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_1__.useContext(_PanelContext__WEBPACK_IMPORTED_MODULE_3__.default),
      hideHeader = _React$useContext.hideHeader;

  if (hideHeader) {
    return null;
  }

  var headerPrefixCls = "".concat(prefixCls, "-header");
  var monthsLocale = locale.shortMonths || (generateConfig.locale.getShortMonths ? generateConfig.locale.getShortMonths(locale.locale) : []);
  var month = generateConfig.getMonth(viewDate); // =================== Month & Year ===================

  var yearNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("button", {
    type: "button",
    key: "year",
    onClick: onYearClick,
    tabIndex: -1,
    className: "".concat(prefixCls, "-year-btn")
  }, (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_4__.formatValue)(viewDate, {
    locale: locale,
    format: locale.yearFormat,
    generateConfig: generateConfig
  }));
  var monthNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("button", {
    type: "button",
    key: "month",
    onClick: onMonthClick,
    tabIndex: -1,
    className: "".concat(prefixCls, "-month-btn")
  }, locale.monthFormat ? (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_4__.formatValue)(viewDate, {
    locale: locale,
    format: locale.monthFormat,
    generateConfig: generateConfig
  }) : monthsLocale[month]);
  var monthYearNodes = locale.monthBeforeYear ? [monthNode, yearNode] : [yearNode, monthNode];
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_Header__WEBPACK_IMPORTED_MODULE_2__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: headerPrefixCls,
    onSuperPrev: onPrevYear,
    onPrev: onPrevMonth,
    onNext: onNextMonth,
    onSuperNext: onNextYear
  }), monthYearNodes);
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DateHeader);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/DatePanel/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/DatePanel/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ "./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _DateBody__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DateBody */ "./node_modules/rc-picker/es/panels/DatePanel/DateBody.js");
/* harmony import */ var _DateHeader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./DateHeader */ "./node_modules/rc-picker/es/panels/DatePanel/DateHeader.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");
/* harmony import */ var _utils_uiUtil__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/uiUtil */ "./node_modules/rc-picker/es/utils/uiUtil.js");









var DATE_ROW_COUNT = 6;

function DatePanel(props) {
  var prefixCls = props.prefixCls,
      _props$panelName = props.panelName,
      panelName = _props$panelName === void 0 ? 'date' : _props$panelName,
      keyboardConfig = props.keyboardConfig,
      active = props.active,
      operationRef = props.operationRef,
      generateConfig = props.generateConfig,
      value = props.value,
      viewDate = props.viewDate,
      onViewDateChange = props.onViewDateChange,
      onPanelChange = props.onPanelChange,
      _onSelect = props.onSelect;
  var panelPrefixCls = "".concat(prefixCls, "-").concat(panelName, "-panel"); // ======================= Keyboard =======================

  operationRef.current = {
    onKeyDown: function onKeyDown(event) {
      return (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_8__.createKeyDownHandler)(event, (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__.default)({
        onLeftRight: function onLeftRight(diff) {
          _onSelect(generateConfig.addDate(value || viewDate, diff), 'key');
        },
        onCtrlLeftRight: function onCtrlLeftRight(diff) {
          _onSelect(generateConfig.addYear(value || viewDate, diff), 'key');
        },
        onUpDown: function onUpDown(diff) {
          _onSelect(generateConfig.addDate(value || viewDate, diff * _utils_dateUtil__WEBPACK_IMPORTED_MODULE_7__.WEEK_DAY_COUNT), 'key');
        },
        onPageUpDown: function onPageUpDown(diff) {
          _onSelect(generateConfig.addMonth(value || viewDate, diff), 'key');
        }
      }, keyboardConfig));
    }
  }; // ==================== View Operation ====================

  var onYearChange = function onYearChange(diff) {
    var newDate = generateConfig.addYear(viewDate, diff);
    onViewDateChange(newDate);
    onPanelChange(null, newDate);
  };

  var onMonthChange = function onMonthChange(diff) {
    var newDate = generateConfig.addMonth(viewDate, diff);
    onViewDateChange(newDate);
    onPanelChange(null, newDate);
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {
    className: classnames__WEBPACK_IMPORTED_MODULE_4___default()(panelPrefixCls, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)({}, "".concat(panelPrefixCls, "-active"), active))
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_DateHeader__WEBPACK_IMPORTED_MODULE_6__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: prefixCls,
    value: value,
    viewDate: viewDate // View Operation
    ,
    onPrevYear: function onPrevYear() {
      onYearChange(-1);
    },
    onNextYear: function onNextYear() {
      onYearChange(1);
    },
    onPrevMonth: function onPrevMonth() {
      onMonthChange(-1);
    },
    onNextMonth: function onNextMonth() {
      onMonthChange(1);
    },
    onMonthClick: function onMonthClick() {
      onPanelChange('month', viewDate);
    },
    onYearClick: function onYearClick() {
      onPanelChange('year', viewDate);
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_DateBody__WEBPACK_IMPORTED_MODULE_5__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    onSelect: function onSelect(date) {
      return _onSelect(date, 'mouse');
    },
    prefixCls: prefixCls,
    value: value,
    viewDate: viewDate,
    rowCount: DATE_ROW_COUNT
  })));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DatePanel);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/DatetimePanel/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/DatetimePanel/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ "./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/typeof */ "./node_modules/@babel/runtime/helpers/esm/typeof.js");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rc-util/es/KeyCode */ "./node_modules/rc-util/es/KeyCode.js");
/* harmony import */ var _DatePanel__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../DatePanel */ "./node_modules/rc-picker/es/panels/DatePanel/index.js");
/* harmony import */ var _TimePanel__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../TimePanel */ "./node_modules/rc-picker/es/panels/TimePanel/index.js");
/* harmony import */ var _utils_miscUtil__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../utils/miscUtil */ "./node_modules/rc-picker/es/utils/miscUtil.js");
/* harmony import */ var _utils_timeUtil__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../utils/timeUtil */ "./node_modules/rc-picker/es/utils/timeUtil.js");












var ACTIVE_PANEL = (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_10__.tuple)('date', 'time');

function DatetimePanel(props) {
  var prefixCls = props.prefixCls,
      operationRef = props.operationRef,
      generateConfig = props.generateConfig,
      value = props.value,
      defaultValue = props.defaultValue,
      disabledTime = props.disabledTime,
      showTime = props.showTime,
      onSelect = props.onSelect;
  var panelPrefixCls = "".concat(prefixCls, "-datetime-panel");

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_5__.useState(null),
      _React$useState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.default)(_React$useState, 2),
      activePanel = _React$useState2[0],
      setActivePanel = _React$useState2[1];

  var dateOperationRef = react__WEBPACK_IMPORTED_MODULE_5__.useRef({});
  var timeOperationRef = react__WEBPACK_IMPORTED_MODULE_5__.useRef({});
  var timeProps = (0,_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_3__.default)(showTime) === 'object' ? (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__.default)({}, showTime) : {}; // ======================= Keyboard =======================

  function getNextActive(offset) {
    var activeIndex = ACTIVE_PANEL.indexOf(activePanel) + offset;
    var nextActivePanel = ACTIVE_PANEL[activeIndex] || null;
    return nextActivePanel;
  }

  var onBlur = function onBlur(e) {
    if (timeOperationRef.current.onBlur) {
      timeOperationRef.current.onBlur(e);
    }

    setActivePanel(null);
  };

  operationRef.current = {
    onKeyDown: function onKeyDown(event) {
      // Switch active panel
      if (event.which === rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__.default.TAB) {
        var nextActivePanel = getNextActive(event.shiftKey ? -1 : 1);
        setActivePanel(nextActivePanel);

        if (nextActivePanel) {
          event.preventDefault();
        }

        return true;
      } // Operate on current active panel


      if (activePanel) {
        var ref = activePanel === 'date' ? dateOperationRef : timeOperationRef;

        if (ref.current && ref.current.onKeyDown) {
          ref.current.onKeyDown(event);
        }

        return true;
      } // Switch first active panel if operate without panel


      if ([rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__.default.LEFT, rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__.default.RIGHT, rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__.default.UP, rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_7__.default.DOWN].includes(event.which)) {
        setActivePanel('date');
        return true;
      }

      return false;
    },
    onBlur: onBlur,
    onClose: onBlur
  }; // ======================== Events ========================

  var onInternalSelect = function onInternalSelect(date, source) {
    var selectedDate = date;

    if (source === 'date' && !value && timeProps.defaultValue) {
      // Date with time defaultValue
      selectedDate = generateConfig.setHour(selectedDate, generateConfig.getHour(timeProps.defaultValue));
      selectedDate = generateConfig.setMinute(selectedDate, generateConfig.getMinute(timeProps.defaultValue));
      selectedDate = generateConfig.setSecond(selectedDate, generateConfig.getSecond(timeProps.defaultValue));
    } else if (source === 'time' && !value && defaultValue) {
      selectedDate = generateConfig.setYear(selectedDate, generateConfig.getYear(defaultValue));
      selectedDate = generateConfig.setMonth(selectedDate, generateConfig.getMonth(defaultValue));
      selectedDate = generateConfig.setDate(selectedDate, generateConfig.getDate(defaultValue));
    }

    if (onSelect) {
      onSelect(selectedDate, 'mouse');
    }
  }; // ======================== Render ========================


  var disabledTimes = disabledTime ? disabledTime(value || null) : {};
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement("div", {
    className: classnames__WEBPACK_IMPORTED_MODULE_6___default()(panelPrefixCls, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)({}, "".concat(panelPrefixCls, "-active"), activePanel))
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement(_DatePanel__WEBPACK_IMPORTED_MODULE_8__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    operationRef: dateOperationRef,
    active: activePanel === 'date',
    onSelect: function onSelect(date) {
      onInternalSelect((0,_utils_timeUtil__WEBPACK_IMPORTED_MODULE_11__.setDateTime)(generateConfig, date, showTime && (0,_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_3__.default)(showTime) === 'object' ? showTime.defaultValue : null), 'date');
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5__.createElement(_TimePanel__WEBPACK_IMPORTED_MODULE_9__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    format: undefined
  }, timeProps, disabledTimes, {
    defaultValue: undefined,
    operationRef: timeOperationRef,
    active: activePanel === 'time',
    onSelect: function onSelect(date) {
      onInternalSelect(date, 'time');
    }
  })));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DatetimePanel);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/DecadePanel/DecadeBody.js":
/*!********************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/DecadePanel/DecadeBody.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DECADE_COL_COUNT": () => (/* binding */ DECADE_COL_COUNT),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! . */ "./node_modules/rc-picker/es/panels/DecadePanel/index.js");
/* harmony import */ var _PanelBody__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../PanelBody */ "./node_modules/rc-picker/es/panels/PanelBody.js");





var DECADE_COL_COUNT = 3;
var DECADE_ROW_COUNT = 4;

function DecadeBody(props) {
  var DECADE_UNIT_DIFF_DES = ___WEBPACK_IMPORTED_MODULE_3__.DECADE_UNIT_DIFF - 1;
  var prefixCls = props.prefixCls,
      viewDate = props.viewDate,
      generateConfig = props.generateConfig;
  var cellPrefixCls = "".concat(prefixCls, "-cell");
  var yearNumber = generateConfig.getYear(viewDate);
  var decadeYearNumber = Math.floor(yearNumber / ___WEBPACK_IMPORTED_MODULE_3__.DECADE_UNIT_DIFF) * ___WEBPACK_IMPORTED_MODULE_3__.DECADE_UNIT_DIFF;
  var startDecadeYear = Math.floor(yearNumber / ___WEBPACK_IMPORTED_MODULE_3__.DECADE_DISTANCE_COUNT) * ___WEBPACK_IMPORTED_MODULE_3__.DECADE_DISTANCE_COUNT;
  var endDecadeYear = startDecadeYear + ___WEBPACK_IMPORTED_MODULE_3__.DECADE_DISTANCE_COUNT - 1;
  var baseDecadeYear = generateConfig.setYear(viewDate, startDecadeYear - Math.ceil((DECADE_COL_COUNT * DECADE_ROW_COUNT * ___WEBPACK_IMPORTED_MODULE_3__.DECADE_UNIT_DIFF - ___WEBPACK_IMPORTED_MODULE_3__.DECADE_DISTANCE_COUNT) / 2));

  var getCellClassName = function getCellClassName(date) {
    var _ref;

    var startDecadeNumber = generateConfig.getYear(date);
    var endDecadeNumber = startDecadeNumber + DECADE_UNIT_DIFF_DES;
    return _ref = {}, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)(_ref, "".concat(cellPrefixCls, "-in-view"), startDecadeYear <= startDecadeNumber && endDecadeNumber <= endDecadeYear), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)(_ref, "".concat(cellPrefixCls, "-selected"), startDecadeNumber === decadeYearNumber), _ref;
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_PanelBody__WEBPACK_IMPORTED_MODULE_4__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    rowNum: DECADE_ROW_COUNT,
    colNum: DECADE_COL_COUNT,
    baseDate: baseDecadeYear,
    getCellText: function getCellText(date) {
      var startDecadeNumber = generateConfig.getYear(date);
      return "".concat(startDecadeNumber, "-").concat(startDecadeNumber + DECADE_UNIT_DIFF_DES);
    },
    getCellClassName: getCellClassName,
    getCellDate: function getCellDate(date, offset) {
      return generateConfig.addYear(date, offset * ___WEBPACK_IMPORTED_MODULE_3__.DECADE_UNIT_DIFF);
    }
  }));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DecadeBody);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/DecadePanel/DecadeHeader.js":
/*!**********************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/DecadePanel/DecadeHeader.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Header */ "./node_modules/rc-picker/es/panels/Header.js");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! . */ "./node_modules/rc-picker/es/panels/DecadePanel/index.js");
/* harmony import */ var _PanelContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../PanelContext */ "./node_modules/rc-picker/es/PanelContext.js");






function DecadeHeader(props) {
  var prefixCls = props.prefixCls,
      generateConfig = props.generateConfig,
      viewDate = props.viewDate,
      onPrevDecades = props.onPrevDecades,
      onNextDecades = props.onNextDecades;

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_1__.useContext(_PanelContext__WEBPACK_IMPORTED_MODULE_4__.default),
      hideHeader = _React$useContext.hideHeader;

  if (hideHeader) {
    return null;
  }

  var headerPrefixCls = "".concat(prefixCls, "-header");
  var yearNumber = generateConfig.getYear(viewDate);
  var startYear = Math.floor(yearNumber / ___WEBPACK_IMPORTED_MODULE_3__.DECADE_DISTANCE_COUNT) * ___WEBPACK_IMPORTED_MODULE_3__.DECADE_DISTANCE_COUNT;
  var endYear = startYear + ___WEBPACK_IMPORTED_MODULE_3__.DECADE_DISTANCE_COUNT - 1;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_Header__WEBPACK_IMPORTED_MODULE_2__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: headerPrefixCls,
    onSuperPrev: onPrevDecades,
    onSuperNext: onNextDecades
  }), startYear, "-", endYear);
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DecadeHeader);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/DecadePanel/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/DecadePanel/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DECADE_UNIT_DIFF": () => (/* binding */ DECADE_UNIT_DIFF),
/* harmony export */   "DECADE_DISTANCE_COUNT": () => (/* binding */ DECADE_DISTANCE_COUNT),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _DecadeHeader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DecadeHeader */ "./node_modules/rc-picker/es/panels/DecadePanel/DecadeHeader.js");
/* harmony import */ var _DecadeBody__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DecadeBody */ "./node_modules/rc-picker/es/panels/DecadePanel/DecadeBody.js");
/* harmony import */ var _utils_uiUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/uiUtil */ "./node_modules/rc-picker/es/utils/uiUtil.js");





var DECADE_UNIT_DIFF = 10;
var DECADE_DISTANCE_COUNT = DECADE_UNIT_DIFF * 10;

function DecadePanel(props) {
  var prefixCls = props.prefixCls,
      onViewDateChange = props.onViewDateChange,
      generateConfig = props.generateConfig,
      viewDate = props.viewDate,
      operationRef = props.operationRef,
      onSelect = props.onSelect,
      onPanelChange = props.onPanelChange;
  var panelPrefixCls = "".concat(prefixCls, "-decade-panel"); // ======================= Keyboard =======================

  operationRef.current = {
    onKeyDown: function onKeyDown(event) {
      return (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_4__.createKeyDownHandler)(event, {
        onLeftRight: function onLeftRight(diff) {
          onSelect(generateConfig.addYear(viewDate, diff * DECADE_UNIT_DIFF), 'key');
        },
        onCtrlLeftRight: function onCtrlLeftRight(diff) {
          onSelect(generateConfig.addYear(viewDate, diff * DECADE_DISTANCE_COUNT), 'key');
        },
        onUpDown: function onUpDown(diff) {
          onSelect(generateConfig.addYear(viewDate, diff * DECADE_UNIT_DIFF * _DecadeBody__WEBPACK_IMPORTED_MODULE_3__.DECADE_COL_COUNT), 'key');
        },
        onEnter: function onEnter() {
          onPanelChange('year', viewDate);
        }
      });
    }
  }; // ==================== View Operation ====================

  var onDecadesChange = function onDecadesChange(diff) {
    var newDate = generateConfig.addYear(viewDate, diff * DECADE_DISTANCE_COUNT);
    onViewDateChange(newDate);
    onPanelChange(null, newDate);
  };

  var onInternalSelect = function onInternalSelect(date) {
    onSelect(date, 'mouse');
    onPanelChange('year', date);
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {
    className: panelPrefixCls
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_DecadeHeader__WEBPACK_IMPORTED_MODULE_2__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: prefixCls,
    onPrevDecades: function onPrevDecades() {
      onDecadesChange(-1);
    },
    onNextDecades: function onNextDecades() {
      onDecadesChange(1);
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_DecadeBody__WEBPACK_IMPORTED_MODULE_3__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: prefixCls,
    onSelect: onInternalSelect
  })));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DecadePanel);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/Header.js":
/*!****************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/Header.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _PanelContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../PanelContext */ "./node_modules/rc-picker/es/PanelContext.js");


var HIDDEN_STYLE = {
  visibility: 'hidden'
};

function Header(_ref) {
  var prefixCls = _ref.prefixCls,
      _ref$prevIcon = _ref.prevIcon,
      prevIcon = _ref$prevIcon === void 0 ? "\u2039" : _ref$prevIcon,
      _ref$nextIcon = _ref.nextIcon,
      nextIcon = _ref$nextIcon === void 0 ? "\u203A" : _ref$nextIcon,
      _ref$superPrevIcon = _ref.superPrevIcon,
      superPrevIcon = _ref$superPrevIcon === void 0 ? "\xAB" : _ref$superPrevIcon,
      _ref$superNextIcon = _ref.superNextIcon,
      superNextIcon = _ref$superNextIcon === void 0 ? "\xBB" : _ref$superNextIcon,
      onSuperPrev = _ref.onSuperPrev,
      onSuperNext = _ref.onSuperNext,
      onPrev = _ref.onPrev,
      onNext = _ref.onNext,
      children = _ref.children;

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_0__.useContext(_PanelContext__WEBPACK_IMPORTED_MODULE_1__.default),
      hideNextBtn = _React$useContext.hideNextBtn,
      hidePrevBtn = _React$useContext.hidePrevBtn;

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
    className: prefixCls
  }, onSuperPrev && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {
    type: "button",
    onClick: onSuperPrev,
    tabIndex: -1,
    className: "".concat(prefixCls, "-super-prev-btn"),
    style: hidePrevBtn ? HIDDEN_STYLE : {}
  }, superPrevIcon), onPrev && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {
    type: "button",
    onClick: onPrev,
    tabIndex: -1,
    className: "".concat(prefixCls, "-prev-btn"),
    style: hidePrevBtn ? HIDDEN_STYLE : {}
  }, prevIcon), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
    className: "".concat(prefixCls, "-view")
  }, children), onNext && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {
    type: "button",
    onClick: onNext,
    tabIndex: -1,
    className: "".concat(prefixCls, "-next-btn"),
    style: hideNextBtn ? HIDDEN_STYLE : {}
  }, nextIcon), onSuperNext && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {
    type: "button",
    onClick: onSuperNext,
    tabIndex: -1,
    className: "".concat(prefixCls, "-super-next-btn"),
    style: hideNextBtn ? HIDDEN_STYLE : {}
  }, superNextIcon));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Header);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/MonthPanel/MonthBody.js":
/*!******************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/MonthPanel/MonthBody.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MONTH_COL_COUNT": () => (/* binding */ MONTH_COL_COUNT),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");
/* harmony import */ var _RangeContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../RangeContext */ "./node_modules/rc-picker/es/RangeContext.js");
/* harmony import */ var _hooks_useCellClassName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks/useCellClassName */ "./node_modules/rc-picker/es/hooks/useCellClassName.js");
/* harmony import */ var _PanelBody__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../PanelBody */ "./node_modules/rc-picker/es/panels/PanelBody.js");






var MONTH_COL_COUNT = 3;
var MONTH_ROW_COUNT = 4;

function MonthBody(props) {
  var prefixCls = props.prefixCls,
      locale = props.locale,
      value = props.value,
      viewDate = props.viewDate,
      generateConfig = props.generateConfig,
      monthCellRender = props.monthCellRender;

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_1__.useContext(_RangeContext__WEBPACK_IMPORTED_MODULE_3__.default),
      rangedValue = _React$useContext.rangedValue,
      hoverRangedValue = _React$useContext.hoverRangedValue;

  var cellPrefixCls = "".concat(prefixCls, "-cell");
  var getCellClassName = (0,_hooks_useCellClassName__WEBPACK_IMPORTED_MODULE_4__.default)({
    cellPrefixCls: cellPrefixCls,
    value: value,
    generateConfig: generateConfig,
    rangedValue: rangedValue,
    hoverRangedValue: hoverRangedValue,
    isSameCell: function isSameCell(current, target) {
      return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.isSameMonth)(generateConfig, current, target);
    },
    isInView: function isInView() {
      return true;
    },
    offsetCell: function offsetCell(date, offset) {
      return generateConfig.addMonth(date, offset);
    }
  });
  var monthsLocale = locale.shortMonths || (generateConfig.locale.getShortMonths ? generateConfig.locale.getShortMonths(locale.locale) : []);
  var baseMonth = generateConfig.setMonth(viewDate, 0);
  var getCellNode = monthCellRender ? function (date) {
    return monthCellRender(date, locale);
  } : undefined;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_PanelBody__WEBPACK_IMPORTED_MODULE_5__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    rowNum: MONTH_ROW_COUNT,
    colNum: MONTH_COL_COUNT,
    baseDate: baseMonth,
    getCellNode: getCellNode,
    getCellText: function getCellText(date) {
      return locale.monthFormat ? (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.formatValue)(date, {
        locale: locale,
        format: locale.monthFormat,
        generateConfig: generateConfig
      }) : monthsLocale[generateConfig.getMonth(date)];
    },
    getCellClassName: getCellClassName,
    getCellDate: generateConfig.addMonth,
    titleCell: function titleCell(date) {
      return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.formatValue)(date, {
        locale: locale,
        format: 'YYYY-MM',
        generateConfig: generateConfig
      });
    }
  }));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MonthBody);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/MonthPanel/MonthHeader.js":
/*!********************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/MonthPanel/MonthHeader.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Header */ "./node_modules/rc-picker/es/panels/Header.js");
/* harmony import */ var _PanelContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../PanelContext */ "./node_modules/rc-picker/es/PanelContext.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");






function MonthHeader(props) {
  var prefixCls = props.prefixCls,
      generateConfig = props.generateConfig,
      locale = props.locale,
      viewDate = props.viewDate,
      onNextYear = props.onNextYear,
      onPrevYear = props.onPrevYear,
      onYearClick = props.onYearClick;

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_1__.useContext(_PanelContext__WEBPACK_IMPORTED_MODULE_3__.default),
      hideHeader = _React$useContext.hideHeader;

  if (hideHeader) {
    return null;
  }

  var headerPrefixCls = "".concat(prefixCls, "-header");
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_Header__WEBPACK_IMPORTED_MODULE_2__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: headerPrefixCls,
    onSuperPrev: onPrevYear,
    onSuperNext: onNextYear
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("button", {
    type: "button",
    onClick: onYearClick,
    className: "".concat(prefixCls, "-year-btn")
  }, (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_4__.formatValue)(viewDate, {
    locale: locale,
    format: locale.yearFormat,
    generateConfig: generateConfig
  })));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MonthHeader);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/MonthPanel/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/MonthPanel/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _MonthHeader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MonthHeader */ "./node_modules/rc-picker/es/panels/MonthPanel/MonthHeader.js");
/* harmony import */ var _MonthBody__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MonthBody */ "./node_modules/rc-picker/es/panels/MonthPanel/MonthBody.js");
/* harmony import */ var _utils_uiUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/uiUtil */ "./node_modules/rc-picker/es/utils/uiUtil.js");






function MonthPanel(props) {
  var prefixCls = props.prefixCls,
      operationRef = props.operationRef,
      onViewDateChange = props.onViewDateChange,
      generateConfig = props.generateConfig,
      value = props.value,
      viewDate = props.viewDate,
      onPanelChange = props.onPanelChange,
      _onSelect = props.onSelect;
  var panelPrefixCls = "".concat(prefixCls, "-month-panel"); // ======================= Keyboard =======================

  operationRef.current = {
    onKeyDown: function onKeyDown(event) {
      return (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_4__.createKeyDownHandler)(event, {
        onLeftRight: function onLeftRight(diff) {
          _onSelect(generateConfig.addMonth(value || viewDate, diff), 'key');
        },
        onCtrlLeftRight: function onCtrlLeftRight(diff) {
          _onSelect(generateConfig.addYear(value || viewDate, diff), 'key');
        },
        onUpDown: function onUpDown(diff) {
          _onSelect(generateConfig.addMonth(value || viewDate, diff * _MonthBody__WEBPACK_IMPORTED_MODULE_3__.MONTH_COL_COUNT), 'key');
        },
        onEnter: function onEnter() {
          onPanelChange('date', value || viewDate);
        }
      });
    }
  }; // ==================== View Operation ====================

  var onYearChange = function onYearChange(diff) {
    var newDate = generateConfig.addYear(viewDate, diff);
    onViewDateChange(newDate);
    onPanelChange(null, newDate);
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {
    className: panelPrefixCls
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_MonthHeader__WEBPACK_IMPORTED_MODULE_2__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: prefixCls,
    onPrevYear: function onPrevYear() {
      onYearChange(-1);
    },
    onNextYear: function onNextYear() {
      onYearChange(1);
    },
    onYearClick: function onYearClick() {
      onPanelChange('year', viewDate);
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_MonthBody__WEBPACK_IMPORTED_MODULE_3__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: prefixCls,
    onSelect: function onSelect(date) {
      _onSelect(date, 'mouse');

      onPanelChange('date', date);
    }
  })));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MonthPanel);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/PanelBody.js":
/*!*******************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/PanelBody.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PanelBody)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ "./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _PanelContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../PanelContext */ "./node_modules/rc-picker/es/PanelContext.js");
/* harmony import */ var _utils_timeUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/timeUtil */ "./node_modules/rc-picker/es/utils/timeUtil.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");







function PanelBody(_ref) {
  var prefixCls = _ref.prefixCls,
      disabledDate = _ref.disabledDate,
      onSelect = _ref.onSelect,
      picker = _ref.picker,
      rowNum = _ref.rowNum,
      colNum = _ref.colNum,
      prefixColumn = _ref.prefixColumn,
      rowClassName = _ref.rowClassName,
      baseDate = _ref.baseDate,
      getCellClassName = _ref.getCellClassName,
      getCellText = _ref.getCellText,
      getCellNode = _ref.getCellNode,
      getCellDate = _ref.getCellDate,
      generateConfig = _ref.generateConfig,
      titleCell = _ref.titleCell,
      headerCells = _ref.headerCells;

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_2__.useContext(_PanelContext__WEBPACK_IMPORTED_MODULE_4__.default),
      onDateMouseEnter = _React$useContext.onDateMouseEnter,
      onDateMouseLeave = _React$useContext.onDateMouseLeave,
      mode = _React$useContext.mode;

  var cellPrefixCls = "".concat(prefixCls, "-cell"); // =============================== Body ===============================

  var rows = [];

  for (var i = 0; i < rowNum; i += 1) {
    var row = [];
    var rowStartDate = void 0;

    var _loop = function _loop(j) {
      var _objectSpread2;

      var offset = i * colNum + j;
      var currentDate = getCellDate(baseDate, offset);
      var disabled = (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_6__.getCellDateDisabled)({
        cellDate: currentDate,
        mode: mode,
        disabledDate: disabledDate,
        generateConfig: generateConfig
      });

      if (j === 0) {
        rowStartDate = currentDate;

        if (prefixColumn) {
          row.push(prefixColumn(rowStartDate));
        }
      }

      var title = titleCell && titleCell(currentDate);
      row.push( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("td", {
        key: j,
        title: title,
        className: classnames__WEBPACK_IMPORTED_MODULE_3___default()(cellPrefixCls, (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.default)((_objectSpread2 = {}, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_objectSpread2, "".concat(cellPrefixCls, "-disabled"), disabled), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_objectSpread2, "".concat(cellPrefixCls, "-start"), getCellText(currentDate) === 1 || picker === 'year' && Number(title) % 10 === 0), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_objectSpread2, "".concat(cellPrefixCls, "-end"), title === (0,_utils_timeUtil__WEBPACK_IMPORTED_MODULE_5__.getLastDay)(generateConfig, currentDate) || picker === 'year' && Number(title) % 10 === 9), _objectSpread2), getCellClassName(currentDate))),
        onClick: function onClick() {
          if (!disabled) {
            onSelect(currentDate);
          }
        },
        onMouseEnter: function onMouseEnter() {
          if (!disabled && onDateMouseEnter) {
            onDateMouseEnter(currentDate);
          }
        },
        onMouseLeave: function onMouseLeave() {
          if (!disabled && onDateMouseLeave) {
            onDateMouseLeave(currentDate);
          }
        }
      }, getCellNode ? getCellNode(currentDate) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("div", {
        className: "".concat(cellPrefixCls, "-inner")
      }, getCellText(currentDate))));
    };

    for (var j = 0; j < colNum; j += 1) {
      _loop(j);
    }

    rows.push( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("tr", {
      key: i,
      className: rowClassName && rowClassName(rowStartDate)
    }, row));
  }

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("div", {
    className: "".concat(prefixCls, "-body")
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("table", {
    className: "".concat(prefixCls, "-content")
  }, headerCells && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("tr", null, headerCells)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("tbody", null, rows)));
}

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/QuarterPanel/QuarterBody.js":
/*!**********************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/QuarterPanel/QuarterBody.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "QUARTER_COL_COUNT": () => (/* binding */ QUARTER_COL_COUNT),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");
/* harmony import */ var _RangeContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../RangeContext */ "./node_modules/rc-picker/es/RangeContext.js");
/* harmony import */ var _hooks_useCellClassName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks/useCellClassName */ "./node_modules/rc-picker/es/hooks/useCellClassName.js");
/* harmony import */ var _PanelBody__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../PanelBody */ "./node_modules/rc-picker/es/panels/PanelBody.js");






var QUARTER_COL_COUNT = 4;
var QUARTER_ROW_COUNT = 1;

function QuarterBody(props) {
  var prefixCls = props.prefixCls,
      locale = props.locale,
      value = props.value,
      viewDate = props.viewDate,
      generateConfig = props.generateConfig;

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_1__.useContext(_RangeContext__WEBPACK_IMPORTED_MODULE_3__.default),
      rangedValue = _React$useContext.rangedValue,
      hoverRangedValue = _React$useContext.hoverRangedValue;

  var cellPrefixCls = "".concat(prefixCls, "-cell");
  var getCellClassName = (0,_hooks_useCellClassName__WEBPACK_IMPORTED_MODULE_4__.default)({
    cellPrefixCls: cellPrefixCls,
    value: value,
    generateConfig: generateConfig,
    rangedValue: rangedValue,
    hoverRangedValue: hoverRangedValue,
    isSameCell: function isSameCell(current, target) {
      return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.isSameQuarter)(generateConfig, current, target);
    },
    isInView: function isInView() {
      return true;
    },
    offsetCell: function offsetCell(date, offset) {
      return generateConfig.addMonth(date, offset * 3);
    }
  });
  var baseQuarter = generateConfig.setDate(generateConfig.setMonth(viewDate, 0), 1);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_PanelBody__WEBPACK_IMPORTED_MODULE_5__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    rowNum: QUARTER_ROW_COUNT,
    colNum: QUARTER_COL_COUNT,
    baseDate: baseQuarter,
    getCellText: function getCellText(date) {
      return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.formatValue)(date, {
        locale: locale,
        format: locale.quarterFormat || '[Q]Q',
        generateConfig: generateConfig
      });
    },
    getCellClassName: getCellClassName,
    getCellDate: function getCellDate(date, offset) {
      return generateConfig.addMonth(date, offset * 3);
    },
    titleCell: function titleCell(date) {
      return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_2__.formatValue)(date, {
        locale: locale,
        format: 'YYYY-[Q]Q',
        generateConfig: generateConfig
      });
    }
  }));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (QuarterBody);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/QuarterPanel/QuarterHeader.js":
/*!************************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/QuarterPanel/QuarterHeader.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Header */ "./node_modules/rc-picker/es/panels/Header.js");
/* harmony import */ var _PanelContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../PanelContext */ "./node_modules/rc-picker/es/PanelContext.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");






function QuarterHeader(props) {
  var prefixCls = props.prefixCls,
      generateConfig = props.generateConfig,
      locale = props.locale,
      viewDate = props.viewDate,
      onNextYear = props.onNextYear,
      onPrevYear = props.onPrevYear,
      onYearClick = props.onYearClick;

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_1__.useContext(_PanelContext__WEBPACK_IMPORTED_MODULE_3__.default),
      hideHeader = _React$useContext.hideHeader;

  if (hideHeader) {
    return null;
  }

  var headerPrefixCls = "".concat(prefixCls, "-header");
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_Header__WEBPACK_IMPORTED_MODULE_2__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: headerPrefixCls,
    onSuperPrev: onPrevYear,
    onSuperNext: onNextYear
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("button", {
    type: "button",
    onClick: onYearClick,
    className: "".concat(prefixCls, "-year-btn")
  }, (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_4__.formatValue)(viewDate, {
    locale: locale,
    format: locale.yearFormat,
    generateConfig: generateConfig
  })));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (QuarterHeader);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/QuarterPanel/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/QuarterPanel/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _QuarterHeader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./QuarterHeader */ "./node_modules/rc-picker/es/panels/QuarterPanel/QuarterHeader.js");
/* harmony import */ var _QuarterBody__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./QuarterBody */ "./node_modules/rc-picker/es/panels/QuarterPanel/QuarterBody.js");
/* harmony import */ var _utils_uiUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/uiUtil */ "./node_modules/rc-picker/es/utils/uiUtil.js");






function QuarterPanel(props) {
  var prefixCls = props.prefixCls,
      operationRef = props.operationRef,
      onViewDateChange = props.onViewDateChange,
      generateConfig = props.generateConfig,
      value = props.value,
      viewDate = props.viewDate,
      onPanelChange = props.onPanelChange,
      _onSelect = props.onSelect;
  var panelPrefixCls = "".concat(prefixCls, "-quarter-panel"); // ======================= Keyboard =======================

  operationRef.current = {
    onKeyDown: function onKeyDown(event) {
      return (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_4__.createKeyDownHandler)(event, {
        onLeftRight: function onLeftRight(diff) {
          _onSelect(generateConfig.addMonth(value || viewDate, diff * 3), 'key');
        },
        onCtrlLeftRight: function onCtrlLeftRight(diff) {
          _onSelect(generateConfig.addYear(value || viewDate, diff), 'key');
        },
        onUpDown: function onUpDown(diff) {
          _onSelect(generateConfig.addYear(value || viewDate, diff), 'key');
        }
      });
    }
  }; // ==================== View Operation ====================

  var onYearChange = function onYearChange(diff) {
    var newDate = generateConfig.addYear(viewDate, diff);
    onViewDateChange(newDate);
    onPanelChange(null, newDate);
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {
    className: panelPrefixCls
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_QuarterHeader__WEBPACK_IMPORTED_MODULE_2__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: prefixCls,
    onPrevYear: function onPrevYear() {
      onYearChange(-1);
    },
    onNextYear: function onNextYear() {
      onYearChange(1);
    },
    onYearClick: function onYearClick() {
      onPanelChange('year', viewDate);
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_QuarterBody__WEBPACK_IMPORTED_MODULE_3__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: prefixCls,
    onSelect: function onSelect(date) {
      _onSelect(date, 'mouse');
    }
  })));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (QuarterPanel);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/TimePanel/TimeBody.js":
/*!****************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/TimePanel/TimeBody.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectSpread2 */ "./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var rc_util_es_hooks_useMemo__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rc-util/es/hooks/useMemo */ "./node_modules/rc-util/es/hooks/useMemo.js");
/* harmony import */ var _TimeUnitColumn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TimeUnitColumn */ "./node_modules/rc-picker/es/panels/TimePanel/TimeUnitColumn.js");
/* harmony import */ var _utils_miscUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/miscUtil */ "./node_modules/rc-picker/es/utils/miscUtil.js");
/* harmony import */ var _utils_timeUtil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/timeUtil */ "./node_modules/rc-picker/es/utils/timeUtil.js");








function shouldUnitsUpdate(prevUnits, nextUnits) {
  if (prevUnits.length !== nextUnits.length) return true; // if any unit's disabled status is different, the units should be re-evaluted

  for (var i = 0; i < prevUnits.length; i += 1) {
    if (prevUnits[i].disabled !== nextUnits[i].disabled) return true;
  }

  return false;
}

function generateUnits(start, end, step, disabledUnits) {
  var units = [];

  for (var i = start; i <= end; i += step) {
    units.push({
      label: (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_5__.leftPad)(i, 2),
      value: i,
      disabled: (disabledUnits || []).includes(i)
    });
  }

  return units;
}

function TimeBody(props) {
  var generateConfig = props.generateConfig,
      prefixCls = props.prefixCls,
      operationRef = props.operationRef,
      activeColumnIndex = props.activeColumnIndex,
      value = props.value,
      showHour = props.showHour,
      showMinute = props.showMinute,
      showSecond = props.showSecond,
      use12Hours = props.use12Hours,
      _props$hourStep = props.hourStep,
      hourStep = _props$hourStep === void 0 ? 1 : _props$hourStep,
      _props$minuteStep = props.minuteStep,
      minuteStep = _props$minuteStep === void 0 ? 1 : _props$minuteStep,
      _props$secondStep = props.secondStep,
      secondStep = _props$secondStep === void 0 ? 1 : _props$secondStep,
      disabledHours = props.disabledHours,
      disabledMinutes = props.disabledMinutes,
      disabledSeconds = props.disabledSeconds,
      hideDisabledOptions = props.hideDisabledOptions,
      onSelect = props.onSelect;
  var columns = [];
  var contentPrefixCls = "".concat(prefixCls, "-content");
  var columnPrefixCls = "".concat(prefixCls, "-time-panel");
  var isPM;
  var originHour = value ? generateConfig.getHour(value) : -1;
  var hour = originHour;
  var minute = value ? generateConfig.getMinute(value) : -1;
  var second = value ? generateConfig.getSecond(value) : -1;

  var setTime = function setTime(isNewPM, newHour, newMinute, newSecond) {
    var newDate = value || generateConfig.getNow();
    var mergedHour = Math.max(0, newHour);
    var mergedMinute = Math.max(0, newMinute);
    var mergedSecond = Math.max(0, newSecond);
    newDate = (0,_utils_timeUtil__WEBPACK_IMPORTED_MODULE_6__.setTime)(generateConfig, newDate, !use12Hours || !isNewPM ? mergedHour : mergedHour + 12, mergedMinute, mergedSecond);
    return newDate;
  }; // ========================= Unit =========================


  var rawHours = generateUnits(0, 23, hourStep, disabledHours && disabledHours());
  var memorizedRawHours = (0,rc_util_es_hooks_useMemo__WEBPACK_IMPORTED_MODULE_3__.default)(function () {
    return rawHours;
  }, rawHours, shouldUnitsUpdate); // Should additional logic to handle 12 hours

  if (use12Hours) {
    isPM = hour >= 12; // -1 means should display AM

    hour %= 12;
  }

  var _React$useMemo = react__WEBPACK_IMPORTED_MODULE_2__.useMemo(function () {
    if (!use12Hours) {
      return [false, false];
    }

    var AMPMDisabled = [true, true];
    memorizedRawHours.forEach(function (_ref) {
      var disabled = _ref.disabled,
          hourValue = _ref.value;
      if (disabled) return;

      if (hourValue >= 12) {
        AMPMDisabled[1] = false;
      } else {
        AMPMDisabled[0] = false;
      }
    });
    return AMPMDisabled;
  }, [use12Hours, memorizedRawHours]),
      _React$useMemo2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.default)(_React$useMemo, 2),
      AMDisabled = _React$useMemo2[0],
      PMDisabled = _React$useMemo2[1];

  var hours = react__WEBPACK_IMPORTED_MODULE_2__.useMemo(function () {
    if (!use12Hours) return memorizedRawHours;
    return memorizedRawHours.filter(isPM ? function (hourMeta) {
      return hourMeta.value >= 12;
    } : function (hourMeta) {
      return hourMeta.value < 12;
    }).map(function (hourMeta) {
      var hourValue = hourMeta.value % 12;
      var hourLabel = hourValue === 0 ? '12' : (0,_utils_miscUtil__WEBPACK_IMPORTED_MODULE_5__.leftPad)(hourValue, 2);
      return (0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.default)((0,_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.default)({}, hourMeta), {}, {
        label: hourLabel,
        value: hourValue
      });
    });
  }, [use12Hours, isPM, memorizedRawHours]);
  var minutes = generateUnits(0, 59, minuteStep, disabledMinutes && disabledMinutes(originHour));
  var seconds = generateUnits(0, 59, secondStep, disabledSeconds && disabledSeconds(originHour, minute)); // ====================== Operations ======================

  operationRef.current = {
    onUpDown: function onUpDown(diff) {
      var column = columns[activeColumnIndex];

      if (column) {
        var valueIndex = column.units.findIndex(function (unit) {
          return unit.value === column.value;
        });
        var unitLen = column.units.length;

        for (var i = 1; i < unitLen; i += 1) {
          var nextUnit = column.units[(valueIndex + diff * i + unitLen) % unitLen];

          if (nextUnit.disabled !== true) {
            column.onSelect(nextUnit.value);
            break;
          }
        }
      }
    }
  }; // ======================== Render ========================

  function addColumnNode(condition, node, columnValue, units, onColumnSelect) {
    if (condition !== false) {
      columns.push({
        node: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.cloneElement(node, {
          prefixCls: columnPrefixCls,
          value: columnValue,
          active: activeColumnIndex === columns.length,
          onSelect: onColumnSelect,
          units: units,
          hideDisabledOptions: hideDisabledOptions
        }),
        onSelect: onColumnSelect,
        value: columnValue,
        units: units
      });
    }
  } // Hour


  addColumnNode(showHour, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_TimeUnitColumn__WEBPACK_IMPORTED_MODULE_4__.default, {
    key: "hour"
  }), hour, hours, function (num) {
    onSelect(setTime(isPM, num, minute, second), 'mouse');
  }); // Minute

  addColumnNode(showMinute, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_TimeUnitColumn__WEBPACK_IMPORTED_MODULE_4__.default, {
    key: "minute"
  }), minute, minutes, function (num) {
    onSelect(setTime(isPM, hour, num, second), 'mouse');
  }); // Second

  addColumnNode(showSecond, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_TimeUnitColumn__WEBPACK_IMPORTED_MODULE_4__.default, {
    key: "second"
  }), second, seconds, function (num) {
    onSelect(setTime(isPM, hour, minute, num), 'mouse');
  }); // 12 Hours

  var PMIndex = -1;

  if (typeof isPM === 'boolean') {
    PMIndex = isPM ? 1 : 0;
  }

  addColumnNode(use12Hours === true, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_TimeUnitColumn__WEBPACK_IMPORTED_MODULE_4__.default, {
    key: "12hours"
  }), PMIndex, [{
    label: 'AM',
    value: 0,
    disabled: AMDisabled
  }, {
    label: 'PM',
    value: 1,
    disabled: PMDisabled
  }], function (num) {
    onSelect(setTime(!!num, hour, minute, second), 'mouse');
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("div", {
    className: contentPrefixCls
  }, columns.map(function (_ref2) {
    var node = _ref2.node;
    return node;
  }));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TimeBody);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/TimePanel/TimeHeader.js":
/*!******************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/TimePanel/TimeHeader.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Header */ "./node_modules/rc-picker/es/panels/Header.js");
/* harmony import */ var _PanelContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../PanelContext */ "./node_modules/rc-picker/es/PanelContext.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");





function TimeHeader(props) {
  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_0__.useContext(_PanelContext__WEBPACK_IMPORTED_MODULE_2__.default),
      hideHeader = _React$useContext.hideHeader;

  if (hideHeader) {
    return null;
  }

  var prefixCls = props.prefixCls,
      generateConfig = props.generateConfig,
      locale = props.locale,
      value = props.value,
      format = props.format;
  var headerPrefixCls = "".concat(prefixCls, "-header");
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Header__WEBPACK_IMPORTED_MODULE_1__.default, {
    prefixCls: headerPrefixCls
  }, value ? (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_3__.formatValue)(value, {
    locale: locale,
    format: format,
    generateConfig: generateConfig
  }) : "\xA0");
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TimeHeader);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/TimePanel/TimeUnitColumn.js":
/*!**********************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/TimePanel/TimeUnitColumn.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _utils_uiUtil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/uiUtil */ "./node_modules/rc-picker/es/utils/uiUtil.js");
/* harmony import */ var _PanelContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../PanelContext */ "./node_modules/rc-picker/es/PanelContext.js");







function TimeUnitColumn(props) {
  var prefixCls = props.prefixCls,
      units = props.units,
      onSelect = props.onSelect,
      value = props.value,
      active = props.active,
      hideDisabledOptions = props.hideDisabledOptions;
  var cellPrefixCls = "".concat(prefixCls, "-cell");

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_1__.useContext(_PanelContext__WEBPACK_IMPORTED_MODULE_4__.default),
      open = _React$useContext.open;

  var ulRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);
  var liRefs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map());
  var scrollRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(); // `useLayoutEffect` here to avoid blink by duration is 0

  (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(function () {
    var li = liRefs.current.get(value);

    if (li && open !== false) {
      (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_3__.scrollTo)(ulRef.current, li.offsetTop, 120);
    }
  }, [value]);
  (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(function () {
    if (open) {
      var li = liRefs.current.get(value);

      if (li) {
        scrollRef.current = (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_3__.waitElementReady)(li, function () {
          (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_3__.scrollTo)(ulRef.current, li.offsetTop, 0);
        });
      }
    }

    return function () {
      var _scrollRef$current;

      (_scrollRef$current = scrollRef.current) === null || _scrollRef$current === void 0 ? void 0 : _scrollRef$current.call(scrollRef);
    };
  }, [open]);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("ul", {
    className: classnames__WEBPACK_IMPORTED_MODULE_2___default()("".concat(prefixCls, "-column"), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)({}, "".concat(prefixCls, "-column-active"), active)),
    ref: ulRef,
    style: {
      position: 'relative'
    }
  }, units.map(function (unit) {
    var _classNames2;

    if (hideDisabledOptions && unit.disabled) {
      return null;
    }

    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("li", {
      key: unit.value,
      ref: function ref(element) {
        liRefs.current.set(unit.value, element);
      },
      className: classnames__WEBPACK_IMPORTED_MODULE_2___default()(cellPrefixCls, (_classNames2 = {}, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_classNames2, "".concat(cellPrefixCls, "-disabled"), unit.disabled), (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.default)(_classNames2, "".concat(cellPrefixCls, "-selected"), value === unit.value), _classNames2)),
      onClick: function onClick() {
        if (unit.disabled) {
          return;
        }

        onSelect(unit.value);
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {
      className: "".concat(cellPrefixCls, "-inner")
    }, unit.label));
  }));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TimeUnitColumn);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/TimePanel/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/TimePanel/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _TimeHeader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TimeHeader */ "./node_modules/rc-picker/es/panels/TimePanel/TimeHeader.js");
/* harmony import */ var _TimeBody__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./TimeBody */ "./node_modules/rc-picker/es/panels/TimePanel/TimeBody.js");
/* harmony import */ var _utils_uiUtil__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/uiUtil */ "./node_modules/rc-picker/es/utils/uiUtil.js");









var countBoolean = function countBoolean(boolList) {
  return boolList.filter(function (bool) {
    return bool !== false;
  }).length;
};

function TimePanel(props) {
  var generateConfig = props.generateConfig,
      _props$format = props.format,
      format = _props$format === void 0 ? 'HH:mm:ss' : _props$format,
      prefixCls = props.prefixCls,
      active = props.active,
      operationRef = props.operationRef,
      showHour = props.showHour,
      showMinute = props.showMinute,
      showSecond = props.showSecond,
      _props$use12Hours = props.use12Hours,
      use12Hours = _props$use12Hours === void 0 ? false : _props$use12Hours,
      onSelect = props.onSelect,
      value = props.value;
  var panelPrefixCls = "".concat(prefixCls, "-time-panel");
  var bodyOperationRef = react__WEBPACK_IMPORTED_MODULE_3__.useRef(); // ======================= Keyboard =======================

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_3__.useState(-1),
      _React$useState2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.default)(_React$useState, 2),
      activeColumnIndex = _React$useState2[0],
      setActiveColumnIndex = _React$useState2[1];

  var columnsCount = countBoolean([showHour, showMinute, showSecond, use12Hours]);
  operationRef.current = {
    onKeyDown: function onKeyDown(event) {
      return (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_7__.createKeyDownHandler)(event, {
        onLeftRight: function onLeftRight(diff) {
          setActiveColumnIndex((activeColumnIndex + diff + columnsCount) % columnsCount);
        },
        onUpDown: function onUpDown(diff) {
          if (activeColumnIndex === -1) {
            setActiveColumnIndex(0);
          } else if (bodyOperationRef.current) {
            bodyOperationRef.current.onUpDown(diff);
          }
        },
        onEnter: function onEnter() {
          onSelect(value || generateConfig.getNow(), 'key');
          setActiveColumnIndex(-1);
        }
      });
    },
    onBlur: function onBlur() {
      setActiveColumnIndex(-1);
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {
    className: classnames__WEBPACK_IMPORTED_MODULE_4___default()(panelPrefixCls, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)({}, "".concat(panelPrefixCls, "-active"), active))
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_TimeHeader__WEBPACK_IMPORTED_MODULE_5__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    format: format,
    prefixCls: prefixCls
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_TimeBody__WEBPACK_IMPORTED_MODULE_6__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: prefixCls,
    activeColumnIndex: activeColumnIndex,
    operationRef: bodyOperationRef
  })));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TimePanel);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/WeekPanel/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/WeekPanel/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _DatePanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../DatePanel */ "./node_modules/rc-picker/es/panels/DatePanel/index.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");







function WeekPanel(props) {
  var prefixCls = props.prefixCls,
      generateConfig = props.generateConfig,
      locale = props.locale,
      value = props.value; // Render additional column

  var cellPrefixCls = "".concat(prefixCls, "-cell");

  var prefixColumn = function prefixColumn(date) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("td", {
      key: "week",
      className: classnames__WEBPACK_IMPORTED_MODULE_3___default()(cellPrefixCls, "".concat(cellPrefixCls, "-week"))
    }, generateConfig.locale.getWeek(locale.locale, date));
  }; // Add row className


  var rowPrefixCls = "".concat(prefixCls, "-week-panel-row");

  var rowClassName = function rowClassName(date) {
    return classnames__WEBPACK_IMPORTED_MODULE_3___default()(rowPrefixCls, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.default)({}, "".concat(rowPrefixCls, "-selected"), (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_5__.isSameWeek)(generateConfig, locale.locale, value, date)));
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_DatePanel__WEBPACK_IMPORTED_MODULE_4__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    panelName: "week",
    prefixColumn: prefixColumn,
    rowClassName: rowClassName,
    keyboardConfig: {
      onLeftRight: null
    }
  }));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (WeekPanel);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/YearPanel/YearBody.js":
/*!****************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/YearPanel/YearBody.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "YEAR_COL_COUNT": () => (/* binding */ YEAR_COL_COUNT),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! . */ "./node_modules/rc-picker/es/panels/YearPanel/index.js");
/* harmony import */ var _hooks_useCellClassName__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks/useCellClassName */ "./node_modules/rc-picker/es/hooks/useCellClassName.js");
/* harmony import */ var _utils_dateUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/dateUtil */ "./node_modules/rc-picker/es/utils/dateUtil.js");
/* harmony import */ var _RangeContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../RangeContext */ "./node_modules/rc-picker/es/RangeContext.js");
/* harmony import */ var _PanelBody__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../PanelBody */ "./node_modules/rc-picker/es/panels/PanelBody.js");







var YEAR_COL_COUNT = 3;
var YEAR_ROW_COUNT = 4;

function YearBody(props) {
  var prefixCls = props.prefixCls,
      value = props.value,
      viewDate = props.viewDate,
      locale = props.locale,
      generateConfig = props.generateConfig;

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_1__.useContext(_RangeContext__WEBPACK_IMPORTED_MODULE_5__.default),
      rangedValue = _React$useContext.rangedValue,
      hoverRangedValue = _React$useContext.hoverRangedValue;

  var yearPrefixCls = "".concat(prefixCls, "-cell"); // =============================== Year ===============================

  var yearNumber = generateConfig.getYear(viewDate);
  var startYear = Math.floor(yearNumber / ___WEBPACK_IMPORTED_MODULE_2__.YEAR_DECADE_COUNT) * ___WEBPACK_IMPORTED_MODULE_2__.YEAR_DECADE_COUNT;
  var endYear = startYear + ___WEBPACK_IMPORTED_MODULE_2__.YEAR_DECADE_COUNT - 1;
  var baseYear = generateConfig.setYear(viewDate, startYear - Math.ceil((YEAR_COL_COUNT * YEAR_ROW_COUNT - ___WEBPACK_IMPORTED_MODULE_2__.YEAR_DECADE_COUNT) / 2));

  var isInView = function isInView(date) {
    var currentYearNumber = generateConfig.getYear(date);
    return startYear <= currentYearNumber && currentYearNumber <= endYear;
  };

  var getCellClassName = (0,_hooks_useCellClassName__WEBPACK_IMPORTED_MODULE_3__.default)({
    cellPrefixCls: yearPrefixCls,
    value: value,
    generateConfig: generateConfig,
    rangedValue: rangedValue,
    hoverRangedValue: hoverRangedValue,
    isSameCell: function isSameCell(current, target) {
      return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_4__.isSameYear)(generateConfig, current, target);
    },
    isInView: isInView,
    offsetCell: function offsetCell(date, offset) {
      return generateConfig.addYear(date, offset);
    }
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_PanelBody__WEBPACK_IMPORTED_MODULE_6__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    rowNum: YEAR_ROW_COUNT,
    colNum: YEAR_COL_COUNT,
    baseDate: baseYear,
    getCellText: generateConfig.getYear,
    getCellClassName: getCellClassName,
    getCellDate: generateConfig.addYear,
    titleCell: function titleCell(date) {
      return (0,_utils_dateUtil__WEBPACK_IMPORTED_MODULE_4__.formatValue)(date, {
        locale: locale,
        format: 'YYYY',
        generateConfig: generateConfig
      });
    }
  }));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (YearBody);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/YearPanel/YearHeader.js":
/*!******************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/YearPanel/YearHeader.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Header */ "./node_modules/rc-picker/es/panels/Header.js");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! . */ "./node_modules/rc-picker/es/panels/YearPanel/index.js");
/* harmony import */ var _PanelContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../PanelContext */ "./node_modules/rc-picker/es/PanelContext.js");






function YearHeader(props) {
  var prefixCls = props.prefixCls,
      generateConfig = props.generateConfig,
      viewDate = props.viewDate,
      onPrevDecade = props.onPrevDecade,
      onNextDecade = props.onNextDecade,
      onDecadeClick = props.onDecadeClick;

  var _React$useContext = react__WEBPACK_IMPORTED_MODULE_1__.useContext(_PanelContext__WEBPACK_IMPORTED_MODULE_4__.default),
      hideHeader = _React$useContext.hideHeader;

  if (hideHeader) {
    return null;
  }

  var headerPrefixCls = "".concat(prefixCls, "-header");
  var yearNumber = generateConfig.getYear(viewDate);
  var startYear = Math.floor(yearNumber / ___WEBPACK_IMPORTED_MODULE_3__.YEAR_DECADE_COUNT) * ___WEBPACK_IMPORTED_MODULE_3__.YEAR_DECADE_COUNT;
  var endYear = startYear + ___WEBPACK_IMPORTED_MODULE_3__.YEAR_DECADE_COUNT - 1;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_Header__WEBPACK_IMPORTED_MODULE_2__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: headerPrefixCls,
    onSuperPrev: onPrevDecade,
    onSuperNext: onNextDecade
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("button", {
    type: "button",
    onClick: onDecadeClick,
    className: "".concat(prefixCls, "-decade-btn")
  }, startYear, "-", endYear));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (YearHeader);

/***/ }),

/***/ "./node_modules/rc-picker/es/panels/YearPanel/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/rc-picker/es/panels/YearPanel/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "YEAR_DECADE_COUNT": () => (/* binding */ YEAR_DECADE_COUNT),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _YearHeader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./YearHeader */ "./node_modules/rc-picker/es/panels/YearPanel/YearHeader.js");
/* harmony import */ var _YearBody__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./YearBody */ "./node_modules/rc-picker/es/panels/YearPanel/YearBody.js");
/* harmony import */ var _utils_uiUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/uiUtil */ "./node_modules/rc-picker/es/utils/uiUtil.js");





var YEAR_DECADE_COUNT = 10;

function YearPanel(props) {
  var prefixCls = props.prefixCls,
      operationRef = props.operationRef,
      onViewDateChange = props.onViewDateChange,
      generateConfig = props.generateConfig,
      value = props.value,
      viewDate = props.viewDate,
      sourceMode = props.sourceMode,
      _onSelect = props.onSelect,
      onPanelChange = props.onPanelChange;
  var panelPrefixCls = "".concat(prefixCls, "-year-panel"); // ======================= Keyboard =======================

  operationRef.current = {
    onKeyDown: function onKeyDown(event) {
      return (0,_utils_uiUtil__WEBPACK_IMPORTED_MODULE_4__.createKeyDownHandler)(event, {
        onLeftRight: function onLeftRight(diff) {
          _onSelect(generateConfig.addYear(value || viewDate, diff), 'key');
        },
        onCtrlLeftRight: function onCtrlLeftRight(diff) {
          _onSelect(generateConfig.addYear(value || viewDate, diff * YEAR_DECADE_COUNT), 'key');
        },
        onUpDown: function onUpDown(diff) {
          _onSelect(generateConfig.addYear(value || viewDate, diff * _YearBody__WEBPACK_IMPORTED_MODULE_3__.YEAR_COL_COUNT), 'key');
        },
        onEnter: function onEnter() {
          onPanelChange(sourceMode === 'date' ? 'date' : 'month', value || viewDate);
        }
      });
    }
  }; // ==================== View Operation ====================

  var onDecadeChange = function onDecadeChange(diff) {
    var newDate = generateConfig.addYear(viewDate, diff * 10);
    onViewDateChange(newDate);
    onPanelChange(null, newDate);
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {
    className: panelPrefixCls
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_YearHeader__WEBPACK_IMPORTED_MODULE_2__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: prefixCls,
    onPrevDecade: function onPrevDecade() {
      onDecadeChange(-1);
    },
    onNextDecade: function onNextDecade() {
      onDecadeChange(1);
    },
    onDecadeClick: function onDecadeClick() {
      onPanelChange('decade', viewDate);
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_YearBody__WEBPACK_IMPORTED_MODULE_3__.default, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.default)({}, props, {
    prefixCls: prefixCls,
    onSelect: function onSelect(date) {
      onPanelChange(sourceMode === 'date' ? 'date' : 'month', date);

      _onSelect(date, 'mouse');
    }
  })));
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (YearPanel);

/***/ }),

/***/ "./node_modules/rc-picker/es/utils/dateUtil.js":
/*!*****************************************************!*\
  !*** ./node_modules/rc-picker/es/utils/dateUtil.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WEEK_DAY_COUNT": () => (/* binding */ WEEK_DAY_COUNT),
/* harmony export */   "isNullEqual": () => (/* binding */ isNullEqual),
/* harmony export */   "isSameDecade": () => (/* binding */ isSameDecade),
/* harmony export */   "isSameYear": () => (/* binding */ isSameYear),
/* harmony export */   "getQuarter": () => (/* binding */ getQuarter),
/* harmony export */   "isSameQuarter": () => (/* binding */ isSameQuarter),
/* harmony export */   "isSameMonth": () => (/* binding */ isSameMonth),
/* harmony export */   "isSameDate": () => (/* binding */ isSameDate),
/* harmony export */   "isSameTime": () => (/* binding */ isSameTime),
/* harmony export */   "isSameWeek": () => (/* binding */ isSameWeek),
/* harmony export */   "isEqual": () => (/* binding */ isEqual),
/* harmony export */   "isInRange": () => (/* binding */ isInRange),
/* harmony export */   "getWeekStartDate": () => (/* binding */ getWeekStartDate),
/* harmony export */   "getClosingViewDate": () => (/* binding */ getClosingViewDate),
/* harmony export */   "formatValue": () => (/* binding */ formatValue),
/* harmony export */   "parseValue": () => (/* binding */ parseValue),
/* harmony export */   "getCellDateDisabled": () => (/* binding */ getCellDateDisabled)
/* harmony export */ });
/* harmony import */ var _panels_DecadePanel_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../panels/DecadePanel/index */ "./node_modules/rc-picker/es/panels/DecadePanel/index.js");

var WEEK_DAY_COUNT = 7;
function isNullEqual(value1, value2) {
  if (!value1 && !value2) {
    return true;
  }

  if (!value1 || !value2) {
    return false;
  }

  return undefined;
}
function isSameDecade(generateConfig, decade1, decade2) {
  var equal = isNullEqual(decade1, decade2);

  if (typeof equal === 'boolean') {
    return equal;
  }

  var num1 = Math.floor(generateConfig.getYear(decade1) / 10);
  var num2 = Math.floor(generateConfig.getYear(decade2) / 10);
  return num1 === num2;
}
function isSameYear(generateConfig, year1, year2) {
  var equal = isNullEqual(year1, year2);

  if (typeof equal === 'boolean') {
    return equal;
  }

  return generateConfig.getYear(year1) === generateConfig.getYear(year2);
}
function getQuarter(generateConfig, date) {
  var quota = Math.floor(generateConfig.getMonth(date) / 3);
  return quota + 1;
}
function isSameQuarter(generateConfig, quarter1, quarter2) {
  var equal = isNullEqual(quarter1, quarter2);

  if (typeof equal === 'boolean') {
    return equal;
  }

  return isSameYear(generateConfig, quarter1, quarter2) && getQuarter(generateConfig, quarter1) === getQuarter(generateConfig, quarter2);
}
function isSameMonth(generateConfig, month1, month2) {
  var equal = isNullEqual(month1, month2);

  if (typeof equal === 'boolean') {
    return equal;
  }

  return isSameYear(generateConfig, month1, month2) && generateConfig.getMonth(month1) === generateConfig.getMonth(month2);
}
function isSameDate(generateConfig, date1, date2) {
  var equal = isNullEqual(date1, date2);

  if (typeof equal === 'boolean') {
    return equal;
  }

  return generateConfig.getYear(date1) === generateConfig.getYear(date2) && generateConfig.getMonth(date1) === generateConfig.getMonth(date2) && generateConfig.getDate(date1) === generateConfig.getDate(date2);
}
function isSameTime(generateConfig, time1, time2) {
  var equal = isNullEqual(time1, time2);

  if (typeof equal === 'boolean') {
    return equal;
  }

  return generateConfig.getHour(time1) === generateConfig.getHour(time2) && generateConfig.getMinute(time1) === generateConfig.getMinute(time2) && generateConfig.getSecond(time1) === generateConfig.getSecond(time2);
}
function isSameWeek(generateConfig, locale, date1, date2) {
  var equal = isNullEqual(date1, date2);

  if (typeof equal === 'boolean') {
    return equal;
  }

  return generateConfig.locale.getWeek(locale, date1) === generateConfig.locale.getWeek(locale, date2);
}
function isEqual(generateConfig, value1, value2) {
  return isSameDate(generateConfig, value1, value2) && isSameTime(generateConfig, value1, value2);
}
/** Between in date but not equal of date */

function isInRange(generateConfig, startDate, endDate, current) {
  if (!startDate || !endDate || !current) {
    return false;
  }

  return !isSameDate(generateConfig, startDate, current) && !isSameDate(generateConfig, endDate, current) && generateConfig.isAfter(current, startDate) && generateConfig.isAfter(endDate, current);
}
function getWeekStartDate(locale, generateConfig, value) {
  var weekFirstDay = generateConfig.locale.getWeekFirstDay(locale);
  var monthStartDate = generateConfig.setDate(value, 1);
  var startDateWeekDay = generateConfig.getWeekDay(monthStartDate);
  var alignStartDate = generateConfig.addDate(monthStartDate, weekFirstDay - startDateWeekDay);

  if (generateConfig.getMonth(alignStartDate) === generateConfig.getMonth(value) && generateConfig.getDate(alignStartDate) > 1) {
    alignStartDate = generateConfig.addDate(alignStartDate, -7);
  }

  return alignStartDate;
}
function getClosingViewDate(viewDate, picker, generateConfig) {
  var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;

  switch (picker) {
    case 'year':
      return generateConfig.addYear(viewDate, offset * 10);

    case 'quarter':
    case 'month':
      return generateConfig.addYear(viewDate, offset);

    default:
      return generateConfig.addMonth(viewDate, offset);
  }
}
function formatValue(value, _ref) {
  var generateConfig = _ref.generateConfig,
      locale = _ref.locale,
      format = _ref.format;
  return typeof format === 'function' ? format(value) : generateConfig.locale.format(locale.locale, value, format);
}
function parseValue(value, _ref2) {
  var generateConfig = _ref2.generateConfig,
      locale = _ref2.locale,
      formatList = _ref2.formatList;

  if (!value || typeof formatList[0] === 'function') {
    return null;
  }

  return generateConfig.locale.parse(locale.locale, value, formatList);
} // eslint-disable-next-line consistent-return

function getCellDateDisabled(_ref3) {
  var cellDate = _ref3.cellDate,
      mode = _ref3.mode,
      disabledDate = _ref3.disabledDate,
      generateConfig = _ref3.generateConfig;
  if (!disabledDate) return false; // Whether cellDate is disabled in range

  var getDisabledFromRange = function getDisabledFromRange(currentMode, start, end) {
    var current = start;

    while (current <= end) {
      var date = void 0;

      switch (currentMode) {
        case 'date':
          {
            date = generateConfig.setDate(cellDate, current);

            if (!disabledDate(date)) {
              return false;
            }

            break;
          }

        case 'month':
          {
            date = generateConfig.setMonth(cellDate, current);

            if (!getCellDateDisabled({
              cellDate: date,
              mode: 'month',
              generateConfig: generateConfig,
              disabledDate: disabledDate
            })) {
              return false;
            }

            break;
          }

        case 'year':
          {
            date = generateConfig.setYear(cellDate, current);

            if (!getCellDateDisabled({
              cellDate: date,
              mode: 'year',
              generateConfig: generateConfig,
              disabledDate: disabledDate
            })) {
              return false;
            }

            break;
          }
      }

      current += 1;
    }

    return true;
  };

  switch (mode) {
    case 'date':
    case 'week':
      {
        return disabledDate(cellDate);
      }

    case 'month':
      {
        var startDate = 1;
        var endDate = generateConfig.getDate(generateConfig.getEndDate(cellDate));
        return getDisabledFromRange('date', startDate, endDate);
      }

    case 'quarter':
      {
        var startMonth = Math.floor(generateConfig.getMonth(cellDate) / 3) * 3;
        var endMonth = startMonth + 2;
        return getDisabledFromRange('month', startMonth, endMonth);
      }

    case 'year':
      {
        return getDisabledFromRange('month', 0, 11);
      }

    case 'decade':
      {
        var year = generateConfig.getYear(cellDate);
        var startYear = Math.floor(year / _panels_DecadePanel_index__WEBPACK_IMPORTED_MODULE_0__.DECADE_UNIT_DIFF) * _panels_DecadePanel_index__WEBPACK_IMPORTED_MODULE_0__.DECADE_UNIT_DIFF;
        var endYear = startYear + _panels_DecadePanel_index__WEBPACK_IMPORTED_MODULE_0__.DECADE_UNIT_DIFF - 1;
        return getDisabledFromRange('year', startYear, endYear);
      }
  }
}

/***/ }),

/***/ "./node_modules/rc-picker/es/utils/getExtraFooter.js":
/*!***********************************************************!*\
  !*** ./node_modules/rc-picker/es/utils/getExtraFooter.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ getExtraFooter)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");

function getExtraFooter(prefixCls, mode, renderExtraFooter) {
  if (!renderExtraFooter) {
    return null;
  }

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
    className: "".concat(prefixCls, "-footer-extra")
  }, renderExtraFooter(mode));
}

/***/ }),

/***/ "./node_modules/rc-picker/es/utils/getRanges.js":
/*!******************************************************!*\
  !*** ./node_modules/rc-picker/es/utils/getRanges.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ getRanges)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");

function getRanges(_ref) {
  var prefixCls = _ref.prefixCls,
      _ref$rangeList = _ref.rangeList,
      rangeList = _ref$rangeList === void 0 ? [] : _ref$rangeList,
      _ref$components = _ref.components,
      components = _ref$components === void 0 ? {} : _ref$components,
      needConfirmButton = _ref.needConfirmButton,
      onNow = _ref.onNow,
      onOk = _ref.onOk,
      okDisabled = _ref.okDisabled,
      showNow = _ref.showNow,
      locale = _ref.locale;
  var presetNode;
  var okNode;

  if (rangeList.length) {
    var Item = components.rangeItem || 'span';
    presetNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, rangeList.map(function (_ref2) {
      var label = _ref2.label,
          onClick = _ref2.onClick,
          onMouseEnter = _ref2.onMouseEnter,
          onMouseLeave = _ref2.onMouseLeave;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {
        key: label,
        className: "".concat(prefixCls, "-preset")
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Item, {
        onClick: onClick,
        onMouseEnter: onMouseEnter,
        onMouseLeave: onMouseLeave
      }, label));
    }));
  }

  if (needConfirmButton) {
    var Button = components.button || 'button';

    if (onNow && !presetNode && showNow !== false) {
      presetNode = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {
        className: "".concat(prefixCls, "-now")
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
        className: "".concat(prefixCls, "-now-btn"),
        onClick: onNow
      }, locale.now));
    }

    okNode = needConfirmButton && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {
      className: "".concat(prefixCls, "-ok")
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Button, {
      disabled: okDisabled,
      onClick: onOk
    }, locale.ok));
  }

  if (!presetNode && !okNode) {
    return null;
  }

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul", {
    className: "".concat(prefixCls, "-ranges")
  }, presetNode, okNode);
}

/***/ }),

/***/ "./node_modules/rc-picker/es/utils/miscUtil.js":
/*!*****************************************************!*\
  !*** ./node_modules/rc-picker/es/utils/miscUtil.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "leftPad": () => (/* binding */ leftPad),
/* harmony export */   "tuple": () => (/* binding */ tuple),
/* harmony export */   "toArray": () => (/* binding */ toArray),
/* harmony export */   "default": () => (/* binding */ getDataOrAriaProps),
/* harmony export */   "getValue": () => (/* binding */ getValue),
/* harmony export */   "updateValues": () => (/* binding */ updateValues)
/* harmony export */ });
function leftPad(str, length) {
  var fill = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '0';
  var current = String(str);

  while (current.length < length) {
    current = "".concat(fill).concat(str);
  }

  return current;
}
var tuple = function tuple() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  return args;
};
function toArray(val) {
  if (val === null || val === undefined) {
    return [];
  }

  return Array.isArray(val) ? val : [val];
}
function getDataOrAriaProps(props) {
  var retProps = {};
  Object.keys(props).forEach(function (key) {
    if ((key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role' || key === 'name') && key.substr(0, 7) !== 'data-__') {
      retProps[key] = props[key];
    }
  });
  return retProps;
}
function getValue(values, index) {
  return values ? values[index] : null;
}
function updateValues(values, value, index) {
  var newValues = [getValue(values, 0), getValue(values, 1)];
  newValues[index] = typeof value === 'function' ? value(newValues[index]) : value;

  if (!newValues[0] && !newValues[1]) {
    return null;
  }

  return newValues;
}

/***/ }),

/***/ "./node_modules/rc-picker/es/utils/timeUtil.js":
/*!*****************************************************!*\
  !*** ./node_modules/rc-picker/es/utils/timeUtil.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setTime": () => (/* binding */ setTime),
/* harmony export */   "setDateTime": () => (/* binding */ setDateTime),
/* harmony export */   "getLowerBoundTime": () => (/* binding */ getLowerBoundTime),
/* harmony export */   "getLastDay": () => (/* binding */ getLastDay)
/* harmony export */ });
function setTime(generateConfig, date, hour, minute, second) {
  var nextTime = generateConfig.setHour(date, hour);
  nextTime = generateConfig.setMinute(nextTime, minute);
  nextTime = generateConfig.setSecond(nextTime, second);
  return nextTime;
}
function setDateTime(generateConfig, date, defaultDate) {
  if (!defaultDate) {
    return date;
  }

  var newDate = date;
  newDate = generateConfig.setHour(newDate, generateConfig.getHour(defaultDate));
  newDate = generateConfig.setMinute(newDate, generateConfig.getMinute(defaultDate));
  newDate = generateConfig.setSecond(newDate, generateConfig.getSecond(defaultDate));
  return newDate;
}
function getLowerBoundTime(hour, minute, second, hourStep, minuteStep, secondStep) {
  var lowerBoundHour = Math.floor(hour / hourStep) * hourStep;

  if (lowerBoundHour < hour) {
    return [lowerBoundHour, 60 - minuteStep, 60 - secondStep];
  }

  var lowerBoundMinute = Math.floor(minute / minuteStep) * minuteStep;

  if (lowerBoundMinute < minute) {
    return [lowerBoundHour, lowerBoundMinute, 60 - secondStep];
  }

  var lowerBoundSecond = Math.floor(second / secondStep) * secondStep;
  return [lowerBoundHour, lowerBoundMinute, lowerBoundSecond];
}
function getLastDay(generateConfig, date) {
  var year = generateConfig.getYear(date);
  var month = generateConfig.getMonth(date) + 1;
  var endDate = generateConfig.getEndDate(generateConfig.getFixedDate("".concat(year, "-").concat(month, "-01")));
  var lastDay = generateConfig.getDate(endDate);
  var monthShow = month < 10 ? "0".concat(month) : "".concat(month);
  return "".concat(year, "-").concat(monthShow, "-").concat(lastDay);
}

/***/ }),

/***/ "./node_modules/rc-picker/es/utils/uiUtil.js":
/*!***************************************************!*\
  !*** ./node_modules/rc-picker/es/utils/uiUtil.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "waitElementReady": () => (/* binding */ waitElementReady),
/* harmony export */   "scrollTo": () => (/* binding */ scrollTo),
/* harmony export */   "createKeyDownHandler": () => (/* binding */ createKeyDownHandler),
/* harmony export */   "getDefaultFormat": () => (/* binding */ getDefaultFormat),
/* harmony export */   "getInputSize": () => (/* binding */ getInputSize),
/* harmony export */   "addGlobalMouseDownEvent": () => (/* binding */ addGlobalMouseDownEvent),
/* harmony export */   "getTargetFromEvent": () => (/* binding */ getTargetFromEvent),
/* harmony export */   "PickerModeMap": () => (/* binding */ PickerModeMap),
/* harmony export */   "elementsContains": () => (/* binding */ elementsContains)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");
/* harmony import */ var rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rc-util/es/KeyCode */ "./node_modules/rc-util/es/KeyCode.js");
/* harmony import */ var rc_util_es_raf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rc-util/es/raf */ "./node_modules/rc-util/es/raf.js");
/* harmony import */ var rc_util_es_Dom_isVisible__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rc-util/es/Dom/isVisible */ "./node_modules/rc-util/es/Dom/isVisible.js");




var scrollIds = new Map();
/** Trigger when element is visible in view */

function waitElementReady(element, callback) {
  var id;

  function tryOrNextFrame() {
    if ((0,rc_util_es_Dom_isVisible__WEBPACK_IMPORTED_MODULE_3__.default)(element)) {
      callback();
    } else {
      id = (0,rc_util_es_raf__WEBPACK_IMPORTED_MODULE_2__.default)(function () {
        tryOrNextFrame();
      });
    }
  }

  tryOrNextFrame();
  return function () {
    rc_util_es_raf__WEBPACK_IMPORTED_MODULE_2__.default.cancel(id);
  };
}
/* eslint-disable no-param-reassign */

function scrollTo(element, to, duration) {
  if (scrollIds.get(element)) {
    cancelAnimationFrame(scrollIds.get(element));
  } // jump to target if duration zero


  if (duration <= 0) {
    scrollIds.set(element, requestAnimationFrame(function () {
      element.scrollTop = to;
    }));
    return;
  }

  var difference = to - element.scrollTop;
  var perTick = difference / duration * 10;
  scrollIds.set(element, requestAnimationFrame(function () {
    element.scrollTop += perTick;

    if (element.scrollTop !== to) {
      scrollTo(element, to, duration - 10);
    }
  }));
}
function createKeyDownHandler(event, _ref) {
  var onLeftRight = _ref.onLeftRight,
      onCtrlLeftRight = _ref.onCtrlLeftRight,
      onUpDown = _ref.onUpDown,
      onPageUpDown = _ref.onPageUpDown,
      onEnter = _ref.onEnter;
  var which = event.which,
      ctrlKey = event.ctrlKey,
      metaKey = event.metaKey;

  switch (which) {
    case rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_1__.default.LEFT:
      if (ctrlKey || metaKey) {
        if (onCtrlLeftRight) {
          onCtrlLeftRight(-1);
          return true;
        }
      } else if (onLeftRight) {
        onLeftRight(-1);
        return true;
      }
      /* istanbul ignore next */


      break;

    case rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_1__.default.RIGHT:
      if (ctrlKey || metaKey) {
        if (onCtrlLeftRight) {
          onCtrlLeftRight(1);
          return true;
        }
      } else if (onLeftRight) {
        onLeftRight(1);
        return true;
      }
      /* istanbul ignore next */


      break;

    case rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_1__.default.UP:
      if (onUpDown) {
        onUpDown(-1);
        return true;
      }
      /* istanbul ignore next */


      break;

    case rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_1__.default.DOWN:
      if (onUpDown) {
        onUpDown(1);
        return true;
      }
      /* istanbul ignore next */


      break;

    case rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_1__.default.PAGE_UP:
      if (onPageUpDown) {
        onPageUpDown(-1);
        return true;
      }
      /* istanbul ignore next */


      break;

    case rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_1__.default.PAGE_DOWN:
      if (onPageUpDown) {
        onPageUpDown(1);
        return true;
      }
      /* istanbul ignore next */


      break;

    case rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_1__.default.ENTER:
      if (onEnter) {
        onEnter();
        return true;
      }
      /* istanbul ignore next */


      break;
  }

  return false;
} // ===================== Format =====================

function getDefaultFormat(format, picker, showTime, use12Hours) {
  var mergedFormat = format;

  if (!mergedFormat) {
    switch (picker) {
      case 'time':
        mergedFormat = use12Hours ? 'hh:mm:ss a' : 'HH:mm:ss';
        break;

      case 'week':
        mergedFormat = 'gggg-wo';
        break;

      case 'month':
        mergedFormat = 'YYYY-MM';
        break;

      case 'quarter':
        mergedFormat = 'YYYY-[Q]Q';
        break;

      case 'year':
        mergedFormat = 'YYYY';
        break;

      default:
        mergedFormat = showTime ? 'YYYY-MM-DD HH:mm:ss' : 'YYYY-MM-DD';
    }
  }

  return mergedFormat;
}
function getInputSize(picker, format, generateConfig) {
  var defaultSize = picker === 'time' ? 8 : 10;
  var length = typeof format === 'function' ? format(generateConfig.getNow()).length : format.length;
  return Math.max(defaultSize, length) + 2;
}
var globalClickFunc = null;
var clickCallbacks = new Set();
function addGlobalMouseDownEvent(callback) {
  if (!globalClickFunc && typeof window !== 'undefined' && window.addEventListener) {
    globalClickFunc = function globalClickFunc(e) {
      // Clone a new list to avoid repeat trigger events
      (0,_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.default)(clickCallbacks).forEach(function (queueFunc) {
        queueFunc(e);
      });
    };

    window.addEventListener('mousedown', globalClickFunc);
  }

  clickCallbacks.add(callback);
  return function () {
    clickCallbacks.delete(callback);

    if (clickCallbacks.size === 0) {
      window.removeEventListener('mousedown', globalClickFunc);
      globalClickFunc = null;
    }
  };
}
function getTargetFromEvent(e) {
  var target = e.target; // get target if in shadow dom

  if (e.composed && target.shadowRoot) {
    var _e$composedPath;

    return ((_e$composedPath = e.composedPath) === null || _e$composedPath === void 0 ? void 0 : _e$composedPath.call(e)[0]) || target;
  }

  return target;
} // ====================== Mode ======================

var getYearNextMode = function getYearNextMode(next) {
  if (next === 'month' || next === 'date') {
    return 'year';
  }

  return next;
};

var getMonthNextMode = function getMonthNextMode(next) {
  if (next === 'date') {
    return 'month';
  }

  return next;
};

var getQuarterNextMode = function getQuarterNextMode(next) {
  if (next === 'month' || next === 'date') {
    return 'quarter';
  }

  return next;
};

var getWeekNextMode = function getWeekNextMode(next) {
  if (next === 'date') {
    return 'week';
  }

  return next;
};

var PickerModeMap = {
  year: getYearNextMode,
  month: getMonthNextMode,
  quarter: getQuarterNextMode,
  week: getWeekNextMode,
  time: null,
  date: null
};
function elementsContains(elements, target) {
  return elements.some(function (ele) {
    return ele && ele.contains(target);
  });
}

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtb3ZlcmZsb3cvZXMvSXRlbS5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtb3ZlcmZsb3cvZXMvT3ZlcmZsb3cuanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLW92ZXJmbG93L2VzL1Jhd0l0ZW0uanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLW92ZXJmbG93L2VzL2hvb2tzL3VzZUJhdGNoRnJhbWVTdGF0ZS5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtb3ZlcmZsb3cvZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBhZ2luYXRpb24vZXMvS2V5Q29kZS5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGFnaW5hdGlvbi9lcy9PcHRpb25zLmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1wYWdpbmF0aW9uL2VzL1BhZ2VyLmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1wYWdpbmF0aW9uL2VzL1BhZ2luYXRpb24uanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBhZ2luYXRpb24vZXMvbG9jYWxlL2VuX1VTLmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1wYWdpbmF0aW9uL2VzL2xvY2FsZS96aF9DTi5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL1BhbmVsQ29udGV4dC5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL1BpY2tlci5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL1BpY2tlclBhbmVsLmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvUGlja2VyVHJpZ2dlci5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL1JhbmdlQ29udGV4dC5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL1JhbmdlUGlja2VyLmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvZ2VuZXJhdGUvbW9tZW50LmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvaG9va3MvdXNlQ2VsbENsYXNzTmFtZS5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL2hvb2tzL3VzZUhvdmVyVmFsdWUuanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBpY2tlci9lcy9ob29rcy91c2VQaWNrZXJJbnB1dC5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL2hvb2tzL3VzZVJhbmdlRGlzYWJsZWQuanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBpY2tlci9lcy9ob29rcy91c2VSYW5nZVZpZXdEYXRlcy5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL2hvb2tzL3VzZVRleHRWYWx1ZU1hcHBpbmcuanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBpY2tlci9lcy9ob29rcy91c2VWYWx1ZVRleHRzLmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBpY2tlci9lcy9sb2NhbGUvZW5fVVMuanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBpY2tlci9lcy9wYW5lbHMvRGF0ZVBhbmVsL0RhdGVCb2R5LmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvcGFuZWxzL0RhdGVQYW5lbC9EYXRlSGVhZGVyLmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvcGFuZWxzL0RhdGVQYW5lbC9pbmRleC5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL3BhbmVscy9EYXRldGltZVBhbmVsL2luZGV4LmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvcGFuZWxzL0RlY2FkZVBhbmVsL0RlY2FkZUJvZHkuanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBpY2tlci9lcy9wYW5lbHMvRGVjYWRlUGFuZWwvRGVjYWRlSGVhZGVyLmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvcGFuZWxzL0RlY2FkZVBhbmVsL2luZGV4LmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvcGFuZWxzL0hlYWRlci5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL3BhbmVscy9Nb250aFBhbmVsL01vbnRoQm9keS5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL3BhbmVscy9Nb250aFBhbmVsL01vbnRoSGVhZGVyLmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvcGFuZWxzL01vbnRoUGFuZWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBpY2tlci9lcy9wYW5lbHMvUGFuZWxCb2R5LmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvcGFuZWxzL1F1YXJ0ZXJQYW5lbC9RdWFydGVyQm9keS5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL3BhbmVscy9RdWFydGVyUGFuZWwvUXVhcnRlckhlYWRlci5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL3BhbmVscy9RdWFydGVyUGFuZWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBpY2tlci9lcy9wYW5lbHMvVGltZVBhbmVsL1RpbWVCb2R5LmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvcGFuZWxzL1RpbWVQYW5lbC9UaW1lSGVhZGVyLmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvcGFuZWxzL1RpbWVQYW5lbC9UaW1lVW5pdENvbHVtbi5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL3BhbmVscy9UaW1lUGFuZWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBpY2tlci9lcy9wYW5lbHMvV2Vla1BhbmVsL2luZGV4LmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvcGFuZWxzL1llYXJQYW5lbC9ZZWFyQm9keS5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL3BhbmVscy9ZZWFyUGFuZWwvWWVhckhlYWRlci5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL3BhbmVscy9ZZWFyUGFuZWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBpY2tlci9lcy91dGlscy9kYXRlVXRpbC5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL3V0aWxzL2dldEV4dHJhRm9vdGVyLmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvdXRpbHMvZ2V0UmFuZ2VzLmpzIiwid2VicGFjazovL0B0bnR4L3JlbWluZC8uL25vZGVfbW9kdWxlcy9yYy1waWNrZXIvZXMvdXRpbHMvbWlzY1V0aWwuanMiLCJ3ZWJwYWNrOi8vQHRudHgvcmVtaW5kLy4vbm9kZV9tb2R1bGVzL3JjLXBpY2tlci9lcy91dGlscy90aW1lVXRpbC5qcyIsIndlYnBhY2s6Ly9AdG50eC9yZW1pbmQvLi9ub2RlX21vZHVsZXMvcmMtcGlja2VyL2VzL3V0aWxzL3VpVXRpbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwRDtBQUNXO0FBQ3FCO0FBQzNEO0FBQ0s7QUFDWTs7QUFFaEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDJGQUF3Qjs7QUFFMUMsNENBQTRDOztBQUU1QztBQUNBO0FBQ0E7O0FBRUEsRUFBRSw0Q0FBZTtBQUNq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QTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ087QUFDUDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDTztBQUNQOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ087QUFDUDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ087QUFDUDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDOztBQUVsQztBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7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QUFTLGlFQUFpQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQSxTQUFTLDZEQUFhO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDOztBQUVNO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxNQUFNLHFGQUFrQjtBQUN4QjtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHdCQUF3Qjs7QUFFeEI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQyIsImZpbGUiOiJ2ZW5kb3JzLW5vZGVfbW9kdWxlc19yYy1vLmM5NjA1YTQ0YjM0NTBmZTc1ZTg2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3JjLXJlc2l6ZS1vYnNlcnZlcic7IC8vIFVzZSBzaGFyZWQgdmFyaWFibGUgdG8gc2F2ZSBidW5kbGUgc2l6ZVxuXG52YXIgVU5ERUZJTkVEID0gdW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBJbnRlcm5hbEl0ZW0ocHJvcHMsIHJlZikge1xuICB2YXIgcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzLFxuICAgICAgaW52YWxpZGF0ZSA9IHByb3BzLmludmFsaWRhdGUsXG4gICAgICBpdGVtID0gcHJvcHMuaXRlbSxcbiAgICAgIHJlbmRlckl0ZW0gPSBwcm9wcy5yZW5kZXJJdGVtLFxuICAgICAgcmVzcG9uc2l2ZSA9IHByb3BzLnJlc3BvbnNpdmUsXG4gICAgICByZWdpc3RlclNpemUgPSBwcm9wcy5yZWdpc3RlclNpemUsXG4gICAgICBpdGVtS2V5ID0gcHJvcHMuaXRlbUtleSxcbiAgICAgIGNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSxcbiAgICAgIHN0eWxlID0gcHJvcHMuc3R5bGUsXG4gICAgICBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLFxuICAgICAgZGlzcGxheSA9IHByb3BzLmRpc3BsYXksXG4gICAgICBvcmRlciA9IHByb3BzLm9yZGVyLFxuICAgICAgX3Byb3BzJGNvbXBvbmVudCA9IHByb3BzLmNvbXBvbmVudCxcbiAgICAgIENvbXBvbmVudCA9IF9wcm9wcyRjb21wb25lbnQgPT09IHZvaWQgMCA/ICdkaXYnIDogX3Byb3BzJGNvbXBvbmVudCxcbiAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgW1wicHJlZml4Q2xzXCIsIFwiaW52YWxpZGF0ZVwiLCBcIml0ZW1cIiwgXCJyZW5kZXJJdGVtXCIsIFwicmVzcG9uc2l2ZVwiLCBcInJlZ2lzdGVyU2l6ZVwiLCBcIml0ZW1LZXlcIiwgXCJjbGFzc05hbWVcIiwgXCJzdHlsZVwiLCBcImNoaWxkcmVuXCIsIFwiZGlzcGxheVwiLCBcIm9yZGVyXCIsIFwiY29tcG9uZW50XCJdKTtcblxuICB2YXIgbWVyZ2VkSGlkZGVuID0gcmVzcG9uc2l2ZSAmJiAhZGlzcGxheTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gRWZmZWN0ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gaW50ZXJuYWxSZWdpc3RlclNpemUod2lkdGgpIHtcbiAgICByZWdpc3RlclNpemUoaXRlbUtleSwgd2lkdGgpO1xuICB9XG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaW50ZXJuYWxSZWdpc3RlclNpemUobnVsbCk7XG4gICAgfTtcbiAgfSwgW10pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgY2hpbGROb2RlID0gcmVuZGVySXRlbSAmJiBpdGVtICE9PSBVTkRFRklORUQgPyByZW5kZXJJdGVtKGl0ZW0pIDogY2hpbGRyZW47XG4gIHZhciBvdmVyZmxvd1N0eWxlO1xuXG4gIGlmICghaW52YWxpZGF0ZSkge1xuICAgIG92ZXJmbG93U3R5bGUgPSB7XG4gICAgICBvcGFjaXR5OiBtZXJnZWRIaWRkZW4gPyAwIDogMSxcbiAgICAgIGhlaWdodDogbWVyZ2VkSGlkZGVuID8gMCA6IFVOREVGSU5FRCxcbiAgICAgIG92ZXJmbG93WTogbWVyZ2VkSGlkZGVuID8gJ2hpZGRlbicgOiBVTkRFRklORUQsXG4gICAgICBvcmRlcjogcmVzcG9uc2l2ZSA/IG9yZGVyIDogVU5ERUZJTkVELFxuICAgICAgcG9pbnRlckV2ZW50czogbWVyZ2VkSGlkZGVuID8gJ25vbmUnIDogVU5ERUZJTkVELFxuICAgICAgcG9zaXRpb246IG1lcmdlZEhpZGRlbiA/ICdhYnNvbHV0ZScgOiBVTkRFRklORURcbiAgICB9O1xuICB9XG5cbiAgdmFyIG92ZXJmbG93UHJvcHMgPSB7fTtcblxuICBpZiAobWVyZ2VkSGlkZGVuKSB7XG4gICAgb3ZlcmZsb3dQcm9wc1snYXJpYS1oaWRkZW4nXSA9IHRydWU7XG4gIH1cblxuICB2YXIgaXRlbU5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHtcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoIWludmFsaWRhdGUgJiYgcHJlZml4Q2xzLCBjbGFzc05hbWUpLFxuICAgIHN0eWxlOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG92ZXJmbG93U3R5bGUpLCBzdHlsZSlcbiAgfSwgb3ZlcmZsb3dQcm9wcywgcmVzdFByb3BzLCB7XG4gICAgcmVmOiByZWZcbiAgfSksIGNoaWxkTm9kZSk7XG5cbiAgaWYgKHJlc3BvbnNpdmUpIHtcbiAgICBpdGVtTm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlc2l6ZU9ic2VydmVyLCB7XG4gICAgICBvblJlc2l6ZTogZnVuY3Rpb24gb25SZXNpemUoX3JlZikge1xuICAgICAgICB2YXIgb2Zmc2V0V2lkdGggPSBfcmVmLm9mZnNldFdpZHRoO1xuICAgICAgICBpbnRlcm5hbFJlZ2lzdGVyU2l6ZShvZmZzZXRXaWR0aCk7XG4gICAgICB9XG4gICAgfSwgaXRlbU5vZGUpO1xuICB9XG5cbiAgcmV0dXJuIGl0ZW1Ob2RlO1xufVxuXG52YXIgSXRlbSA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKEludGVybmFsSXRlbSk7XG5JdGVtLmRpc3BsYXlOYW1lID0gJ0l0ZW0nO1xuZXhwb3J0IGRlZmF1bHQgSXRlbTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlTWVtbywgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tICdyYy1yZXNpemUtb2JzZXJ2ZXInO1xuaW1wb3J0IEl0ZW0gZnJvbSAnLi9JdGVtJztcbmltcG9ydCB7IHVzZUJhdGNoRnJhbWVTdGF0ZSB9IGZyb20gJy4vaG9va3MvdXNlQmF0Y2hGcmFtZVN0YXRlJztcbmltcG9ydCBSYXdJdGVtIGZyb20gJy4vUmF3SXRlbSc7XG5leHBvcnQgdmFyIE92ZXJmbG93Q29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xudmFyIFJFU1BPTlNJVkUgPSAncmVzcG9uc2l2ZSc7XG52YXIgSU5WQUxJREFURSA9ICdpbnZhbGlkYXRlJztcblxuZnVuY3Rpb24gZGVmYXVsdFJlbmRlclJlc3Qob21pdHRlZEl0ZW1zKSB7XG4gIHJldHVybiBcIisgXCIuY29uY2F0KG9taXR0ZWRJdGVtcy5sZW5ndGgsIFwiIC4uLlwiKTtcbn1cblxuZnVuY3Rpb24gT3ZlcmZsb3cocHJvcHMsIHJlZikge1xuICB2YXIgX3Byb3BzJHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIHByZWZpeENscyA9IF9wcm9wcyRwcmVmaXhDbHMgPT09IHZvaWQgMCA/ICdyYy1vdmVyZmxvdycgOiBfcHJvcHMkcHJlZml4Q2xzLFxuICAgICAgX3Byb3BzJGRhdGEgPSBwcm9wcy5kYXRhLFxuICAgICAgZGF0YSA9IF9wcm9wcyRkYXRhID09PSB2b2lkIDAgPyBbXSA6IF9wcm9wcyRkYXRhLFxuICAgICAgcmVuZGVySXRlbSA9IHByb3BzLnJlbmRlckl0ZW0sXG4gICAgICByZW5kZXJSYXdJdGVtID0gcHJvcHMucmVuZGVyUmF3SXRlbSxcbiAgICAgIGl0ZW1LZXkgPSBwcm9wcy5pdGVtS2V5LFxuICAgICAgX3Byb3BzJGl0ZW1XaWR0aCA9IHByb3BzLml0ZW1XaWR0aCxcbiAgICAgIGl0ZW1XaWR0aCA9IF9wcm9wcyRpdGVtV2lkdGggPT09IHZvaWQgMCA/IDEwIDogX3Byb3BzJGl0ZW1XaWR0aCxcbiAgICAgIHNzciA9IHByb3BzLnNzcixcbiAgICAgIHN0eWxlID0gcHJvcHMuc3R5bGUsXG4gICAgICBjbGFzc05hbWUgPSBwcm9wcy5jbGFzc05hbWUsXG4gICAgICBtYXhDb3VudCA9IHByb3BzLm1heENvdW50LFxuICAgICAgcmVuZGVyUmVzdCA9IHByb3BzLnJlbmRlclJlc3QsXG4gICAgICByZW5kZXJSYXdSZXN0ID0gcHJvcHMucmVuZGVyUmF3UmVzdCxcbiAgICAgIHN1ZmZpeCA9IHByb3BzLnN1ZmZpeCxcbiAgICAgIF9wcm9wcyRjb21wb25lbnQgPSBwcm9wcy5jb21wb25lbnQsXG4gICAgICBDb21wb25lbnQgPSBfcHJvcHMkY29tcG9uZW50ID09PSB2b2lkIDAgPyAnZGl2JyA6IF9wcm9wcyRjb21wb25lbnQsXG4gICAgICBpdGVtQ29tcG9uZW50ID0gcHJvcHMuaXRlbUNvbXBvbmVudCxcbiAgICAgIG9uVmlzaWJsZUNoYW5nZSA9IHByb3BzLm9uVmlzaWJsZUNoYW5nZSxcbiAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgW1wicHJlZml4Q2xzXCIsIFwiZGF0YVwiLCBcInJlbmRlckl0ZW1cIiwgXCJyZW5kZXJSYXdJdGVtXCIsIFwiaXRlbUtleVwiLCBcIml0ZW1XaWR0aFwiLCBcInNzclwiLCBcInN0eWxlXCIsIFwiY2xhc3NOYW1lXCIsIFwibWF4Q291bnRcIiwgXCJyZW5kZXJSZXN0XCIsIFwicmVuZGVyUmF3UmVzdFwiLCBcInN1ZmZpeFwiLCBcImNvbXBvbmVudFwiLCBcIml0ZW1Db21wb25lbnRcIiwgXCJvblZpc2libGVDaGFuZ2VcIl0pO1xuXG4gIHZhciBjcmVhdGVVc2VTdGF0ZSA9IHVzZUJhdGNoRnJhbWVTdGF0ZSgpO1xuICB2YXIgZnVsbHlTU1IgPSBzc3IgPT09ICdmdWxsJztcblxuICB2YXIgX2NyZWF0ZVVzZVN0YXRlID0gY3JlYXRlVXNlU3RhdGUobnVsbCksXG4gICAgICBfY3JlYXRlVXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX2NyZWF0ZVVzZVN0YXRlLCAyKSxcbiAgICAgIGNvbnRhaW5lcldpZHRoID0gX2NyZWF0ZVVzZVN0YXRlMlswXSxcbiAgICAgIHNldENvbnRhaW5lcldpZHRoID0gX2NyZWF0ZVVzZVN0YXRlMlsxXTtcblxuICB2YXIgbWVyZ2VkQ29udGFpbmVyV2lkdGggPSBjb250YWluZXJXaWR0aCB8fCAwO1xuXG4gIHZhciBfY3JlYXRlVXNlU3RhdGUzID0gY3JlYXRlVXNlU3RhdGUobmV3IE1hcCgpKSxcbiAgICAgIF9jcmVhdGVVc2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfY3JlYXRlVXNlU3RhdGUzLCAyKSxcbiAgICAgIGl0ZW1XaWR0aHMgPSBfY3JlYXRlVXNlU3RhdGU0WzBdLFxuICAgICAgc2V0SXRlbVdpZHRocyA9IF9jcmVhdGVVc2VTdGF0ZTRbMV07XG5cbiAgdmFyIF9jcmVhdGVVc2VTdGF0ZTUgPSBjcmVhdGVVc2VTdGF0ZSgwKSxcbiAgICAgIF9jcmVhdGVVc2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfY3JlYXRlVXNlU3RhdGU1LCAyKSxcbiAgICAgIHByZXZSZXN0V2lkdGggPSBfY3JlYXRlVXNlU3RhdGU2WzBdLFxuICAgICAgc2V0UHJldlJlc3RXaWR0aCA9IF9jcmVhdGVVc2VTdGF0ZTZbMV07XG5cbiAgdmFyIF9jcmVhdGVVc2VTdGF0ZTcgPSBjcmVhdGVVc2VTdGF0ZSgwKSxcbiAgICAgIF9jcmVhdGVVc2VTdGF0ZTggPSBfc2xpY2VkVG9BcnJheShfY3JlYXRlVXNlU3RhdGU3LCAyKSxcbiAgICAgIHJlc3RXaWR0aCA9IF9jcmVhdGVVc2VTdGF0ZThbMF0sXG4gICAgICBzZXRSZXN0V2lkdGggPSBfY3JlYXRlVXNlU3RhdGU4WzFdO1xuXG4gIHZhciBfY3JlYXRlVXNlU3RhdGU5ID0gY3JlYXRlVXNlU3RhdGUoMCksXG4gICAgICBfY3JlYXRlVXNlU3RhdGUxMCA9IF9zbGljZWRUb0FycmF5KF9jcmVhdGVVc2VTdGF0ZTksIDIpLFxuICAgICAgc3VmZml4V2lkdGggPSBfY3JlYXRlVXNlU3RhdGUxMFswXSxcbiAgICAgIHNldFN1ZmZpeFdpZHRoID0gX2NyZWF0ZVVzZVN0YXRlMTBbMV07XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKG51bGwpLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICBzdWZmaXhGaXhlZFN0YXJ0ID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldFN1ZmZpeEZpeGVkU3RhcnQgPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUobnVsbCksXG4gICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgICBkaXNwbGF5Q291bnQgPSBfdXNlU3RhdGU0WzBdLFxuICAgICAgc2V0RGlzcGxheUNvdW50ID0gX3VzZVN0YXRlNFsxXTtcblxuICB2YXIgbWVyZ2VkRGlzcGxheUNvdW50ID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGRpc3BsYXlDb3VudCA9PT0gbnVsbCAmJiBmdWxseVNTUikge1xuICAgICAgcmV0dXJuIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuICAgIH1cblxuICAgIHJldHVybiBkaXNwbGF5Q291bnQgfHwgMDtcbiAgfSwgW2Rpc3BsYXlDb3VudCwgY29udGFpbmVyV2lkdGhdKTtcblxuICB2YXIgX3VzZVN0YXRlNSA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSxcbiAgICAgIHJlc3RSZWFkeSA9IF91c2VTdGF0ZTZbMF0sXG4gICAgICBzZXRSZXN0UmVhZHkgPSBfdXNlU3RhdGU2WzFdO1xuXG4gIHZhciBpdGVtUHJlZml4Q2xzID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1pdGVtXCIpOyAvLyBBbHdheXMgdXNlIHRoZSBtYXggd2lkdGggdG8gYXZvaWQgYmxpbmtcblxuICB2YXIgbWVyZ2VkUmVzdFdpZHRoID0gTWF0aC5tYXgocHJldlJlc3RXaWR0aCwgcmVzdFdpZHRoKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IERhdGEgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIGlzUmVzcG9uc2l2ZSA9IGRhdGEubGVuZ3RoICYmIG1heENvdW50ID09PSBSRVNQT05TSVZFO1xuICB2YXIgaW52YWxpZGF0ZSA9IG1heENvdW50ID09PSBJTlZBTElEQVRFO1xuICAvKipcbiAgICogV2hlbiBpcyBgcmVzcG9uc2l2ZWAsIHdlIHdpbGwgYWx3YXlzIHJlbmRlciByZXN0IG5vZGUgdG8gZ2V0IHRoZSByZWFsIHdpZHRoIG9mIGl0IGZvciBjYWxjdWxhdGlvblxuICAgKi9cblxuICB2YXIgc2hvd1Jlc3QgPSBpc1Jlc3BvbnNpdmUgfHwgdHlwZW9mIG1heENvdW50ID09PSAnbnVtYmVyJyAmJiBkYXRhLmxlbmd0aCA+IG1heENvdW50O1xuICB2YXIgbWVyZ2VkRGF0YSA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHZhciBpdGVtcyA9IGRhdGE7XG5cbiAgICBpZiAoaXNSZXNwb25zaXZlKSB7XG4gICAgICBpZiAoY29udGFpbmVyV2lkdGggPT09IG51bGwgJiYgZnVsbHlTU1IpIHtcbiAgICAgICAgaXRlbXMgPSBkYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbXMgPSBkYXRhLnNsaWNlKDAsIE1hdGgubWluKGRhdGEubGVuZ3RoLCBtZXJnZWRDb250YWluZXJXaWR0aCAvIGl0ZW1XaWR0aCkpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1heENvdW50ID09PSAnbnVtYmVyJykge1xuICAgICAgaXRlbXMgPSBkYXRhLnNsaWNlKDAsIG1heENvdW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXRlbXM7XG4gIH0sIFtkYXRhLCBpdGVtV2lkdGgsIGNvbnRhaW5lcldpZHRoLCBtYXhDb3VudCwgaXNSZXNwb25zaXZlXSk7XG4gIHZhciBvbWl0dGVkSXRlbXMgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaXNSZXNwb25zaXZlKSB7XG4gICAgICByZXR1cm4gZGF0YS5zbGljZShtZXJnZWREaXNwbGF5Q291bnQgKyAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YS5zbGljZShtZXJnZWREYXRhLmxlbmd0aCk7XG4gIH0sIFtkYXRhLCBtZXJnZWREYXRhLCBpc1Jlc3BvbnNpdmUsIG1lcmdlZERpc3BsYXlDb3VudF0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gSXRlbSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgZ2V0S2V5ID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICBpZiAodHlwZW9mIGl0ZW1LZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBpdGVtS2V5KGl0ZW0pO1xuICAgIH1cblxuICAgIHJldHVybiAoX3JlZiA9IGl0ZW1LZXkgJiYgKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbVtpdGVtS2V5XSkpICE9PSBudWxsICYmIF9yZWYgIT09IHZvaWQgMCA/IF9yZWYgOiBpbmRleDtcbiAgfSwgW2l0ZW1LZXldKTtcbiAgdmFyIG1lcmdlZFJlbmRlckl0ZW0gPSB1c2VDYWxsYmFjayhyZW5kZXJJdGVtIHx8IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW07XG4gIH0sIFtyZW5kZXJJdGVtXSk7XG5cbiAgZnVuY3Rpb24gdXBkYXRlRGlzcGxheUNvdW50KGNvdW50LCBub3RSZWFkeSkge1xuICAgIHNldERpc3BsYXlDb3VudChjb3VudCk7XG5cbiAgICBpZiAoIW5vdFJlYWR5KSB7XG4gICAgICBzZXRSZXN0UmVhZHkoY291bnQgPCBkYXRhLmxlbmd0aCAtIDEpO1xuICAgICAgb25WaXNpYmxlQ2hhbmdlID09PSBudWxsIHx8IG9uVmlzaWJsZUNoYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25WaXNpYmxlQ2hhbmdlKGNvdW50KTtcbiAgICB9XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFNpemUgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICBmdW5jdGlvbiBvbk92ZXJmbG93UmVzaXplKF8sIGVsZW1lbnQpIHtcbiAgICBzZXRDb250YWluZXJXaWR0aChlbGVtZW50LmNsaWVudFdpZHRoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyU2l6ZShrZXksIHdpZHRoKSB7XG4gICAgc2V0SXRlbVdpZHRocyhmdW5jdGlvbiAob3JpZ2luKSB7XG4gICAgICB2YXIgY2xvbmUgPSBuZXcgTWFwKG9yaWdpbik7XG5cbiAgICAgIGlmICh3aWR0aCA9PT0gbnVsbCkge1xuICAgICAgICBjbG9uZS5kZWxldGUoa2V5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsb25lLnNldChrZXksIHdpZHRoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXJPdmVyZmxvd1NpemUoXywgd2lkdGgpIHtcbiAgICBzZXRSZXN0V2lkdGgod2lkdGgpO1xuICAgIHNldFByZXZSZXN0V2lkdGgocmVzdFdpZHRoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyU3VmZml4U2l6ZShfLCB3aWR0aCkge1xuICAgIHNldFN1ZmZpeFdpZHRoKHdpZHRoKTtcbiAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBFZmZlY3QgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIGZ1bmN0aW9uIGdldEl0ZW1XaWR0aChpbmRleCkge1xuICAgIHJldHVybiBpdGVtV2lkdGhzLmdldChnZXRLZXkobWVyZ2VkRGF0YVtpbmRleF0sIGluZGV4KSk7XG4gIH1cblxuICBSZWFjdC51c2VMYXlvdXRFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChtZXJnZWRDb250YWluZXJXaWR0aCAmJiBtZXJnZWRSZXN0V2lkdGggJiYgbWVyZ2VkRGF0YSkge1xuICAgICAgdmFyIHRvdGFsV2lkdGggPSBzdWZmaXhXaWR0aDtcbiAgICAgIHZhciBsZW4gPSBtZXJnZWREYXRhLmxlbmd0aDtcbiAgICAgIHZhciBsYXN0SW5kZXggPSBsZW4gLSAxOyAvLyBXaGVuIGRhdGEgY291bnQgY2hhbmdlIHRvIDAsIHJlc2V0IHRoaXMgc2luY2Ugbm90IGxvb3Agd2lsbCByZWFjaFxuXG4gICAgICBpZiAoIWxlbikge1xuICAgICAgICB1cGRhdGVEaXNwbGF5Q291bnQoMCk7XG4gICAgICAgIHNldFN1ZmZpeEZpeGVkU3RhcnQobnVsbCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICB2YXIgY3VycmVudEl0ZW1XaWR0aCA9IGdldEl0ZW1XaWR0aChpKTsgLy8gQnJlYWsgc2luY2UgZGF0YSBub3QgcmVhZHlcblxuICAgICAgICBpZiAoY3VycmVudEl0ZW1XaWR0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdXBkYXRlRGlzcGxheUNvdW50KGkgLSAxLCB0cnVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSAvLyBGaW5kIGJlc3QgbWF0Y2hcblxuXG4gICAgICAgIHRvdGFsV2lkdGggKz0gY3VycmVudEl0ZW1XaWR0aDtcblxuICAgICAgICBpZiAoIC8vIE9ubHkgb25lIG1lYW5zIGB0b3RhbFdpZHRoYCBpcyB0aGUgZmluYWwgd2lkdGhcbiAgICAgICAgbGFzdEluZGV4ID09PSAwICYmIHRvdGFsV2lkdGggPD0gbWVyZ2VkQ29udGFpbmVyV2lkdGggfHwgLy8gTGFzdCB0d28gd2lkdGggd2lsbCBiZSB0aGUgZmluYWwgd2lkdGhcbiAgICAgICAgaSA9PT0gbGFzdEluZGV4IC0gMSAmJiB0b3RhbFdpZHRoICsgZ2V0SXRlbVdpZHRoKGxhc3RJbmRleCkgPD0gbWVyZ2VkQ29udGFpbmVyV2lkdGgpIHtcbiAgICAgICAgICAvLyBBZGRpdGlvbmFsIGNoZWNrIGlmIG1hdGNoIHRoZSBlbmRcbiAgICAgICAgICB1cGRhdGVEaXNwbGF5Q291bnQobGFzdEluZGV4KTtcbiAgICAgICAgICBzZXRTdWZmaXhGaXhlZFN0YXJ0KG51bGwpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2UgaWYgKHRvdGFsV2lkdGggKyBtZXJnZWRSZXN0V2lkdGggPiBtZXJnZWRDb250YWluZXJXaWR0aCkge1xuICAgICAgICAgIC8vIENhbiBub3QgaG9sZCBhbGwgdGhlIGNvbnRlbnQgdG8gc2hvdyByZXN0XG4gICAgICAgICAgdXBkYXRlRGlzcGxheUNvdW50KGkgLSAxKTtcbiAgICAgICAgICBzZXRTdWZmaXhGaXhlZFN0YXJ0KHRvdGFsV2lkdGggLSBjdXJyZW50SXRlbVdpZHRoIC0gc3VmZml4V2lkdGggKyByZXN0V2lkdGgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzdWZmaXggJiYgZ2V0SXRlbVdpZHRoKDApICsgc3VmZml4V2lkdGggPiBtZXJnZWRDb250YWluZXJXaWR0aCkge1xuICAgICAgICBzZXRTdWZmaXhGaXhlZFN0YXJ0KG51bGwpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW21lcmdlZENvbnRhaW5lcldpZHRoLCBpdGVtV2lkdGhzLCByZXN0V2lkdGgsIHN1ZmZpeFdpZHRoLCBnZXRLZXksIG1lcmdlZERhdGFdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIGRpc3BsYXlSZXN0ID0gcmVzdFJlYWR5ICYmICEhb21pdHRlZEl0ZW1zLmxlbmd0aDtcbiAgdmFyIHN1ZmZpeFN0eWxlID0ge307XG5cbiAgaWYgKHN1ZmZpeEZpeGVkU3RhcnQgIT09IG51bGwgJiYgaXNSZXNwb25zaXZlKSB7XG4gICAgc3VmZml4U3R5bGUgPSB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIGxlZnQ6IHN1ZmZpeEZpeGVkU3RhcnQsXG4gICAgICB0b3A6IDBcbiAgICB9O1xuICB9XG5cbiAgdmFyIGl0ZW1TaGFyZWRQcm9wcyA9IHtcbiAgICBwcmVmaXhDbHM6IGl0ZW1QcmVmaXhDbHMsXG4gICAgcmVzcG9uc2l2ZTogaXNSZXNwb25zaXZlLFxuICAgIGNvbXBvbmVudDogaXRlbUNvbXBvbmVudCxcbiAgICBpbnZhbGlkYXRlOiBpbnZhbGlkYXRlXG4gIH07IC8vID4+Pj4+IENob2ljZSByZW5kZXIgZnVuIGJ5IGByZW5kZXJSYXdJdGVtYFxuXG4gIHZhciBpbnRlcm5hbFJlbmRlckl0ZW1Ob2RlID0gcmVuZGVyUmF3SXRlbSA/IGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgIHZhciBrZXkgPSBnZXRLZXkoaXRlbSwgaW5kZXgpO1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChPdmVyZmxvd0NvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgIGtleToga2V5LFxuICAgICAgdmFsdWU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXRlbVNoYXJlZFByb3BzKSwge30sIHtcbiAgICAgICAgb3JkZXI6IGluZGV4LFxuICAgICAgICBpdGVtOiBpdGVtLFxuICAgICAgICBpdGVtS2V5OiBrZXksXG4gICAgICAgIHJlZ2lzdGVyU2l6ZTogcmVnaXN0ZXJTaXplLFxuICAgICAgICBkaXNwbGF5OiBpbmRleCA8PSBtZXJnZWREaXNwbGF5Q291bnRcbiAgICAgIH0pXG4gICAgfSwgcmVuZGVyUmF3SXRlbShpdGVtLCBpbmRleCkpO1xuICB9IDogZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgdmFyIGtleSA9IGdldEtleShpdGVtLCBpbmRleCk7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEl0ZW0sIF9leHRlbmRzKHt9LCBpdGVtU2hhcmVkUHJvcHMsIHtcbiAgICAgIG9yZGVyOiBpbmRleCxcbiAgICAgIGtleToga2V5LFxuICAgICAgaXRlbTogaXRlbSxcbiAgICAgIHJlbmRlckl0ZW06IG1lcmdlZFJlbmRlckl0ZW0sXG4gICAgICBpdGVtS2V5OiBrZXksXG4gICAgICByZWdpc3RlclNpemU6IHJlZ2lzdGVyU2l6ZSxcbiAgICAgIGRpc3BsYXk6IGluZGV4IDw9IG1lcmdlZERpc3BsYXlDb3VudFxuICAgIH0pKTtcbiAgfTsgLy8gPj4+Pj4gUmVzdCBub2RlXG5cbiAgdmFyIHJlc3ROb2RlO1xuICB2YXIgcmVzdENvbnRleHRQcm9wcyA9IHtcbiAgICBvcmRlcjogZGlzcGxheVJlc3QgPyBtZXJnZWREaXNwbGF5Q291bnQgOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KGl0ZW1QcmVmaXhDbHMsIFwiLXJlc3RcIiksXG4gICAgcmVnaXN0ZXJTaXplOiByZWdpc3Rlck92ZXJmbG93U2l6ZSxcbiAgICBkaXNwbGF5OiBkaXNwbGF5UmVzdFxuICB9O1xuXG4gIGlmICghcmVuZGVyUmF3UmVzdCkge1xuICAgIHZhciBtZXJnZWRSZW5kZXJSZXN0ID0gcmVuZGVyUmVzdCB8fCBkZWZhdWx0UmVuZGVyUmVzdDtcbiAgICByZXN0Tm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEl0ZW0sIF9leHRlbmRzKHt9LCBpdGVtU2hhcmVkUHJvcHMsIHJlc3RDb250ZXh0UHJvcHMpLCB0eXBlb2YgbWVyZ2VkUmVuZGVyUmVzdCA9PT0gJ2Z1bmN0aW9uJyA/IG1lcmdlZFJlbmRlclJlc3Qob21pdHRlZEl0ZW1zKSA6IG1lcmdlZFJlbmRlclJlc3QpO1xuICB9IGVsc2UgaWYgKHJlbmRlclJhd1Jlc3QpIHtcbiAgICByZXN0Tm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJmbG93Q29udGV4dC5Qcm92aWRlciwge1xuICAgICAgdmFsdWU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXRlbVNoYXJlZFByb3BzKSwgcmVzdENvbnRleHRQcm9wcylcbiAgICB9LCByZW5kZXJSYXdSZXN0KG9taXR0ZWRJdGVtcykpO1xuICB9XG5cbiAgdmFyIG92ZXJmbG93Tm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe1xuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyghaW52YWxpZGF0ZSAmJiBwcmVmaXhDbHMsIGNsYXNzTmFtZSksXG4gICAgc3R5bGU6IHN0eWxlLFxuICAgIHJlZjogcmVmXG4gIH0sIHJlc3RQcm9wcyksIG1lcmdlZERhdGEubWFwKGludGVybmFsUmVuZGVySXRlbU5vZGUpLCBzaG93UmVzdCA/IHJlc3ROb2RlIDogbnVsbCwgc3VmZml4ICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEl0ZW0sIF9leHRlbmRzKHt9LCBpdGVtU2hhcmVkUHJvcHMsIHtcbiAgICBvcmRlcjogbWVyZ2VkRGlzcGxheUNvdW50LFxuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQoaXRlbVByZWZpeENscywgXCItc3VmZml4XCIpLFxuICAgIHJlZ2lzdGVyU2l6ZTogcmVnaXN0ZXJTdWZmaXhTaXplLFxuICAgIGRpc3BsYXk6IHRydWUsXG4gICAgc3R5bGU6IHN1ZmZpeFN0eWxlXG4gIH0pLCBzdWZmaXgpKTtcblxuICBpZiAoaXNSZXNwb25zaXZlKSB7XG4gICAgb3ZlcmZsb3dOb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVzaXplT2JzZXJ2ZXIsIHtcbiAgICAgIG9uUmVzaXplOiBvbk92ZXJmbG93UmVzaXplXG4gICAgfSwgb3ZlcmZsb3dOb2RlKTtcbiAgfVxuXG4gIHJldHVybiBvdmVyZmxvd05vZGU7XG59XG5cbnZhciBGb3J3YXJkT3ZlcmZsb3cgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihPdmVyZmxvdyk7XG5Gb3J3YXJkT3ZlcmZsb3cuZGlzcGxheU5hbWUgPSAnT3ZlcmZsb3cnO1xuRm9yd2FyZE92ZXJmbG93Lkl0ZW0gPSBSYXdJdGVtO1xuRm9yd2FyZE92ZXJmbG93LlJFU1BPTlNJVkUgPSBSRVNQT05TSVZFO1xuRm9yd2FyZE92ZXJmbG93LklOVkFMSURBVEUgPSBJTlZBTElEQVRFOyAvLyBDb252ZXJ0IHRvIGdlbmVyaWMgdHlwZVxuXG5leHBvcnQgZGVmYXVsdCBGb3J3YXJkT3ZlcmZsb3c7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgSXRlbSBmcm9tICcuL0l0ZW0nO1xuaW1wb3J0IHsgT3ZlcmZsb3dDb250ZXh0IH0gZnJvbSAnLi9PdmVyZmxvdyc7XG5cbnZhciBJbnRlcm5hbFJhd0l0ZW0gPSBmdW5jdGlvbiBJbnRlcm5hbFJhd0l0ZW0ocHJvcHMsIHJlZikge1xuICB2YXIgY29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoT3ZlcmZsb3dDb250ZXh0KTsgLy8gUmVuZGVyIGRpcmVjdGx5IHdoZW4gY29udGV4dCBub3QgcHJvdmlkZWRcblxuICBpZiAoIWNvbnRleHQpIHtcbiAgICB2YXIgX3Byb3BzJGNvbXBvbmVudCA9IHByb3BzLmNvbXBvbmVudCxcbiAgICAgICAgQ29tcG9uZW50ID0gX3Byb3BzJGNvbXBvbmVudCA9PT0gdm9pZCAwID8gJ2RpdicgOiBfcHJvcHMkY29tcG9uZW50LFxuICAgICAgICBfcmVzdFByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHByb3BzLCBbXCJjb21wb25lbnRcIl0pO1xuXG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe30sIF9yZXN0UHJvcHMsIHtcbiAgICAgIHJlZjogcmVmXG4gICAgfSkpO1xuICB9XG5cbiAgdmFyIGNvbnRleHRDbGFzc05hbWUgPSBjb250ZXh0LmNsYXNzTmFtZSxcbiAgICAgIHJlc3RDb250ZXh0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKGNvbnRleHQsIFtcImNsYXNzTmFtZVwiXSk7XG5cbiAgdmFyIGNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSxcbiAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgW1wiY2xhc3NOYW1lXCJdKTsgLy8gRG8gbm90IHBhc3MgY29udGV4dCB0byBzdWIgaXRlbSB0byBhdm9pZCBtdWx0aXBsZSBtZWFzdXJlXG5cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoT3ZlcmZsb3dDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IG51bGxcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSXRlbSwgX2V4dGVuZHMoe1xuICAgIHJlZjogcmVmLFxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhjb250ZXh0Q2xhc3NOYW1lLCBjbGFzc05hbWUpXG4gIH0sIHJlc3RDb250ZXh0LCByZXN0UHJvcHMpKSk7XG59O1xuXG52YXIgUmF3SXRlbSA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKEludGVybmFsUmF3SXRlbSk7XG5SYXdJdGVtLmRpc3BsYXlOYW1lID0gJ1Jhd0l0ZW0nO1xuZXhwb3J0IGRlZmF1bHQgUmF3SXRlbTsiLCJpbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCB7IHVzZVJlZiwgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCByYWYgZnJvbSBcInJjLXV0aWwvZXMvcmFmXCI7XG4vKipcbiAqIFN0YXRlIGdlbmVyYXRlLiBSZXR1cm4gYSBgc2V0U3RhdGVgIGJ1dCBpdCB3aWxsIGZsdXNoIGFsbCBzdGF0ZSB3aXRoIG9uZSByZW5kZXIgdG8gc2F2ZSBwZXJmLlxuICogVGhpcyBpcyBub3QgYSByZWFsaXphdGlvbiBvZiBgdW5zdGFibGVfYmF0Y2hlZFVwZGF0ZXNgLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VCYXRjaEZyYW1lU3RhdGUoKSB7XG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZSh7fSksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIGZvcmNlVXBkYXRlID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgc3RhdGVzUmVmID0gdXNlUmVmKFtdKTtcbiAgdmFyIGRlc3Ryb3lSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICB2YXIgd2Fsa2luZ0luZGV4ID0gMDtcbiAgdmFyIGJlZm9yZUZyYW1lSWQgPSAwO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBkZXN0cm95UmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICBmdW5jdGlvbiBjcmVhdGVTdGF0ZShkZWZhdWx0VmFsdWUpIHtcbiAgICB2YXIgbXlJbmRleCA9IHdhbGtpbmdJbmRleDtcbiAgICB3YWxraW5nSW5kZXggKz0gMTsgLy8gRmlsbCB2YWx1ZSBpZiBub3QgZXhpc3QgeWV0XG5cbiAgICBpZiAoc3RhdGVzUmVmLmN1cnJlbnQubGVuZ3RoIDwgbXlJbmRleCArIDEpIHtcbiAgICAgIHN0YXRlc1JlZi5jdXJyZW50W215SW5kZXhdID0gZGVmYXVsdFZhbHVlO1xuICAgIH0gLy8gUmV0dXJuIGZpbGxlZCBhcyBgc2V0U3RhdGVgXG5cblxuICAgIHZhciB2YWx1ZSA9IHN0YXRlc1JlZi5jdXJyZW50W215SW5kZXhdO1xuXG4gICAgZnVuY3Rpb24gc2V0VmFsdWUodmFsKSB7XG4gICAgICBzdGF0ZXNSZWYuY3VycmVudFtteUluZGV4XSA9IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicgPyB2YWwoc3RhdGVzUmVmLmN1cnJlbnRbbXlJbmRleF0pIDogdmFsO1xuICAgICAgcmFmLmNhbmNlbChiZWZvcmVGcmFtZUlkKTsgLy8gRmx1c2ggd2l0aCBiYXRjaFxuXG4gICAgICBiZWZvcmVGcmFtZUlkID0gcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFkZXN0cm95UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBmb3JjZVVwZGF0ZSh7fSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBbdmFsdWUsIHNldFZhbHVlXTtcbiAgfVxuXG4gIHJldHVybiBjcmVhdGVTdGF0ZTtcbn0iLCJpbXBvcnQgT3ZlcmZsb3cgZnJvbSAnLi9PdmVyZmxvdyc7XG5leHBvcnQgZGVmYXVsdCBPdmVyZmxvdzsiLCJleHBvcnQgZGVmYXVsdCB7XG4gIFpFUk86IDQ4LFxuICBOSU5FOiA1NyxcbiAgTlVNUEFEX1pFUk86IDk2LFxuICBOVU1QQURfTklORTogMTA1LFxuICBCQUNLU1BBQ0U6IDgsXG4gIERFTEVURTogNDYsXG4gIEVOVEVSOiAxMyxcbiAgQVJST1dfVVA6IDM4LFxuICBBUlJPV19ET1dOOiA0MFxufTsiLCJpbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVja1wiO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3NcIjtcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzXCI7XG5pbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlclwiO1xuXG4vKiBlc2xpbnQgcmVhY3QvcHJvcC10eXBlczogMCAqL1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBLRVlDT0RFIGZyb20gJy4vS2V5Q29kZSc7XG5cbnZhciBPcHRpb25zID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhPcHRpb25zLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKE9wdGlvbnMpO1xuXG4gIGZ1bmN0aW9uIE9wdGlvbnMoKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwuYXBwbHkoX3N1cGVyLCBbdGhpc10uY29uY2F0KGFyZ3MpKTtcbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGdvSW5wdXRUZXh0OiAnJ1xuICAgIH07XG5cbiAgICBfdGhpcy5idWlsZE9wdGlvblRleHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdCh2YWx1ZSwgXCIgXCIpLmNvbmNhdChfdGhpcy5wcm9wcy5sb2NhbGUuaXRlbXNfcGVyX3BhZ2UpO1xuICAgIH07XG5cbiAgICBfdGhpcy5jaGFuZ2VTaXplID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBfdGhpcy5wcm9wcy5jaGFuZ2VTaXplKE51bWJlcih2YWx1ZSkpO1xuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVDaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBnb0lucHV0VGV4dDogZS50YXJnZXQudmFsdWVcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVCbHVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGdvQnV0dG9uID0gX3RoaXMkcHJvcHMuZ29CdXR0b24sXG4gICAgICAgICAgcXVpY2tHbyA9IF90aGlzJHByb3BzLnF1aWNrR28sXG4gICAgICAgICAgcm9vdFByZWZpeENscyA9IF90aGlzJHByb3BzLnJvb3RQcmVmaXhDbHM7XG4gICAgICB2YXIgZ29JbnB1dFRleHQgPSBfdGhpcy5zdGF0ZS5nb0lucHV0VGV4dDtcblxuICAgICAgaWYgKGdvQnV0dG9uIHx8IGdvSW5wdXRUZXh0ID09PSAnJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZ29JbnB1dFRleHQ6ICcnXG4gICAgICB9KTtcblxuICAgICAgaWYgKGUucmVsYXRlZFRhcmdldCAmJiAoZS5yZWxhdGVkVGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKFwiXCIuY29uY2F0KHJvb3RQcmVmaXhDbHMsIFwiLWl0ZW0tbGlua1wiKSkgPj0gMCB8fCBlLnJlbGF0ZWRUYXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoXCJcIi5jb25jYXQocm9vdFByZWZpeENscywgXCItaXRlbVwiKSkgPj0gMCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBxdWlja0dvKF90aGlzLmdldFZhbGlkVmFsdWUoKSk7XG4gICAgfTtcblxuICAgIF90aGlzLmdvID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBnb0lucHV0VGV4dCA9IF90aGlzLnN0YXRlLmdvSW5wdXRUZXh0O1xuXG4gICAgICBpZiAoZ29JbnB1dFRleHQgPT09ICcnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gS0VZQ09ERS5FTlRFUiB8fCBlLnR5cGUgPT09ICdjbGljaycpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGdvSW5wdXRUZXh0OiAnJ1xuICAgICAgICB9KTtcblxuICAgICAgICBfdGhpcy5wcm9wcy5xdWlja0dvKF90aGlzLmdldFZhbGlkVmFsdWUoKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhPcHRpb25zLCBbe1xuICAgIGtleTogXCJnZXRWYWxpZFZhbHVlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZhbGlkVmFsdWUoKSB7XG4gICAgICB2YXIgZ29JbnB1dFRleHQgPSB0aGlzLnN0YXRlLmdvSW5wdXRUZXh0OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG5cbiAgICAgIHJldHVybiAhZ29JbnB1dFRleHQgfHwgaXNOYU4oZ29JbnB1dFRleHQpID8gdW5kZWZpbmVkIDogTnVtYmVyKGdvSW5wdXRUZXh0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0UGFnZVNpemVPcHRpb25zXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhZ2VTaXplT3B0aW9ucygpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHBhZ2VTaXplID0gX3RoaXMkcHJvcHMyLnBhZ2VTaXplLFxuICAgICAgICAgIHBhZ2VTaXplT3B0aW9ucyA9IF90aGlzJHByb3BzMi5wYWdlU2l6ZU9wdGlvbnM7XG5cbiAgICAgIGlmIChwYWdlU2l6ZU9wdGlvbnMuc29tZShmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgIHJldHVybiBvcHRpb24udG9TdHJpbmcoKSA9PT0gcGFnZVNpemUudG9TdHJpbmcoKTtcbiAgICAgIH0pKSB7XG4gICAgICAgIHJldHVybiBwYWdlU2l6ZU9wdGlvbnM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwYWdlU2l6ZU9wdGlvbnMuY29uY2F0KFtwYWdlU2l6ZS50b1N0cmluZygpXSkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgICAgIHZhciBudW1iZXJBID0gaXNOYU4oTnVtYmVyKGEpKSA/IDAgOiBOdW1iZXIoYSk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcblxuICAgICAgICB2YXIgbnVtYmVyQiA9IGlzTmFOKE51bWJlcihiKSkgPyAwIDogTnVtYmVyKGIpO1xuICAgICAgICByZXR1cm4gbnVtYmVyQSAtIG51bWJlckI7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgX3RoaXMkcHJvcHMzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBwYWdlU2l6ZSA9IF90aGlzJHByb3BzMy5wYWdlU2l6ZSxcbiAgICAgICAgICBsb2NhbGUgPSBfdGhpcyRwcm9wczMubG9jYWxlLFxuICAgICAgICAgIHJvb3RQcmVmaXhDbHMgPSBfdGhpcyRwcm9wczMucm9vdFByZWZpeENscyxcbiAgICAgICAgICBjaGFuZ2VTaXplID0gX3RoaXMkcHJvcHMzLmNoYW5nZVNpemUsXG4gICAgICAgICAgcXVpY2tHbyA9IF90aGlzJHByb3BzMy5xdWlja0dvLFxuICAgICAgICAgIGdvQnV0dG9uID0gX3RoaXMkcHJvcHMzLmdvQnV0dG9uLFxuICAgICAgICAgIHNlbGVjdENvbXBvbmVudENsYXNzID0gX3RoaXMkcHJvcHMzLnNlbGVjdENvbXBvbmVudENsYXNzLFxuICAgICAgICAgIGJ1aWxkT3B0aW9uVGV4dCA9IF90aGlzJHByb3BzMy5idWlsZE9wdGlvblRleHQsXG4gICAgICAgICAgc2VsZWN0UHJlZml4Q2xzID0gX3RoaXMkcHJvcHMzLnNlbGVjdFByZWZpeENscyxcbiAgICAgICAgICBkaXNhYmxlZCA9IF90aGlzJHByb3BzMy5kaXNhYmxlZDtcbiAgICAgIHZhciBnb0lucHV0VGV4dCA9IHRoaXMuc3RhdGUuZ29JbnB1dFRleHQ7XG4gICAgICB2YXIgcHJlZml4Q2xzID0gXCJcIi5jb25jYXQocm9vdFByZWZpeENscywgXCItb3B0aW9uc1wiKTtcbiAgICAgIHZhciBTZWxlY3QgPSBzZWxlY3RDb21wb25lbnRDbGFzcztcbiAgICAgIHZhciBjaGFuZ2VTZWxlY3QgPSBudWxsO1xuICAgICAgdmFyIGdvSW5wdXQgPSBudWxsO1xuICAgICAgdmFyIGdvdG9CdXR0b24gPSBudWxsO1xuXG4gICAgICBpZiAoIWNoYW5nZVNpemUgJiYgIXF1aWNrR28pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciBwYWdlU2l6ZU9wdGlvbnMgPSB0aGlzLmdldFBhZ2VTaXplT3B0aW9ucygpO1xuXG4gICAgICBpZiAoY2hhbmdlU2l6ZSAmJiBTZWxlY3QpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBwYWdlU2l6ZU9wdGlvbnMubWFwKGZ1bmN0aW9uIChvcHQsIGkpIHtcbiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0Lk9wdGlvbiwge1xuICAgICAgICAgICAga2V5OiBpLFxuICAgICAgICAgICAgdmFsdWU6IG9wdC50b1N0cmluZygpXG4gICAgICAgICAgfSwgKGJ1aWxkT3B0aW9uVGV4dCB8fCBfdGhpczIuYnVpbGRPcHRpb25UZXh0KShvcHQpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNoYW5nZVNlbGVjdCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwge1xuICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgICBwcmVmaXhDbHM6IHNlbGVjdFByZWZpeENscyxcbiAgICAgICAgICBzaG93U2VhcmNoOiBmYWxzZSxcbiAgICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItc2l6ZS1jaGFuZ2VyXCIpLFxuICAgICAgICAgIG9wdGlvbkxhYmVsUHJvcDogXCJjaGlsZHJlblwiLFxuICAgICAgICAgIGRyb3Bkb3duTWF0Y2hTZWxlY3RXaWR0aDogZmFsc2UsXG4gICAgICAgICAgdmFsdWU6IChwYWdlU2l6ZSB8fCBwYWdlU2l6ZU9wdGlvbnNbMF0pLnRvU3RyaW5nKCksXG4gICAgICAgICAgb25DaGFuZ2U6IHRoaXMuY2hhbmdlU2l6ZSxcbiAgICAgICAgICBnZXRQb3B1cENvbnRhaW5lcjogZnVuY3Rpb24gZ2V0UG9wdXBDb250YWluZXIodHJpZ2dlck5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmlnZ2VyTm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChxdWlja0dvKSB7XG4gICAgICAgIGlmIChnb0J1dHRvbikge1xuICAgICAgICAgIGdvdG9CdXR0b24gPSB0eXBlb2YgZ29CdXR0b24gPT09ICdib29sZWFuJyA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmdvLFxuICAgICAgICAgICAgb25LZXlVcDogdGhpcy5nbyxcbiAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1xdWljay1qdW1wZXItYnV0dG9uXCIpXG4gICAgICAgICAgfSwgbG9jYWxlLmp1bXBfdG9fY29uZmlybSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgICAgb25DbGljazogdGhpcy5nbyxcbiAgICAgICAgICAgIG9uS2V5VXA6IHRoaXMuZ29cbiAgICAgICAgICB9LCBnb0J1dHRvbik7XG4gICAgICAgIH1cblxuICAgICAgICBnb0lucHV0ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1xdWljay1qdW1wZXJcIilcbiAgICAgICAgfSwgbG9jYWxlLmp1bXBfdG8sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICB2YWx1ZTogZ29JbnB1dFRleHQsXG4gICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQ2hhbmdlLFxuICAgICAgICAgIG9uS2V5VXA6IHRoaXMuZ28sXG4gICAgICAgICAgb25CbHVyOiB0aGlzLmhhbmRsZUJsdXJcbiAgICAgICAgfSksIGxvY2FsZS5wYWdlLCBnb3RvQnV0dG9uKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwibGlcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscylcbiAgICAgIH0sIGNoYW5nZVNlbGVjdCwgZ29JbnB1dCk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE9wdGlvbnM7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbk9wdGlvbnMuZGVmYXVsdFByb3BzID0ge1xuICBwYWdlU2l6ZU9wdGlvbnM6IFsnMTAnLCAnMjAnLCAnNTAnLCAnMTAwJ11cbn07XG5leHBvcnQgZGVmYXVsdCBPcHRpb25zOyIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5cbi8qIGVzbGludCByZWFjdC9wcm9wLXR5cGVzOiAwICovXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5cbnZhciBQYWdlciA9IGZ1bmN0aW9uIFBhZ2VyKHByb3BzKSB7XG4gIHZhciBfY2xhc3NOYW1lcztcblxuICB2YXIgcHJlZml4Q2xzID0gXCJcIi5jb25jYXQocHJvcHMucm9vdFByZWZpeENscywgXCItaXRlbVwiKTtcbiAgdmFyIGNscyA9IGNsYXNzTmFtZXMocHJlZml4Q2xzLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLVwiKS5jb25jYXQocHJvcHMucGFnZSksIChfY2xhc3NOYW1lcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItYWN0aXZlXCIpLCBwcm9wcy5hY3RpdmUpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIHByb3BzLmNsYXNzTmFtZSwgISFwcm9wcy5jbGFzc05hbWUpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItZGlzYWJsZWRcIiksICFwcm9wcy5wYWdlKSwgX2NsYXNzTmFtZXMpKTtcblxuICB2YXIgaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljaygpIHtcbiAgICBwcm9wcy5vbkNsaWNrKHByb3BzLnBhZ2UpO1xuICB9O1xuXG4gIHZhciBoYW5kbGVLZXlQcmVzcyA9IGZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGUpIHtcbiAgICBwcm9wcy5vbktleVByZXNzKGUsIHByb3BzLm9uQ2xpY2ssIHByb3BzLnBhZ2UpO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxpXCIsIHtcbiAgICB0aXRsZTogcHJvcHMuc2hvd1RpdGxlID8gcHJvcHMucGFnZSA6IG51bGwsXG4gICAgY2xhc3NOYW1lOiBjbHMsXG4gICAgb25DbGljazogaGFuZGxlQ2xpY2ssXG4gICAgb25LZXlQcmVzczogaGFuZGxlS2V5UHJlc3MsXG4gICAgdGFiSW5kZXg6IFwiMFwiXG4gIH0sIHByb3BzLml0ZW1SZW5kZXIocHJvcHMucGFnZSwgJ3BhZ2UnLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImFcIiwge1xuICAgIHJlbDogXCJub2ZvbGxvd1wiXG4gIH0sIHByb3BzLnBhZ2UpKSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQYWdlcjsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2tcIjtcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzXCI7XG5pbXBvcnQgX2luaGVyaXRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c1wiO1xuaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXJcIjtcblxuLyogZXNsaW50IHJlYWN0L3Byb3AtdHlwZXM6IDAgKi9cbmltcG9ydCBSZWFjdCwgeyBjbG9uZUVsZW1lbnQsIGlzVmFsaWRFbGVtZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUGFnZXIgZnJvbSAnLi9QYWdlcic7XG5pbXBvcnQgT3B0aW9ucyBmcm9tICcuL09wdGlvbnMnO1xuaW1wb3J0IEtFWUNPREUgZnJvbSAnLi9LZXlDb2RlJztcbmltcG9ydCBMT0NBTEUgZnJvbSAnLi9sb2NhbGUvemhfQ04nO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbHVlKSB7XG4gIHJldHVybiAoLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsdWUpICYmIE1hdGguZmxvb3IodmFsdWUpID09PSB2YWx1ZVxuICApO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0SXRlbVJlbmRlcihwYWdlLCB0eXBlLCBlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVQYWdlKHAsIHN0YXRlLCBwcm9wcykge1xuICB2YXIgcGFnZVNpemUgPSB0eXBlb2YgcCA9PT0gJ3VuZGVmaW5lZCcgPyBzdGF0ZS5wYWdlU2l6ZSA6IHA7XG4gIHJldHVybiBNYXRoLmZsb29yKChwcm9wcy50b3RhbCAtIDEpIC8gcGFnZVNpemUpICsgMTtcbn1cblxudmFyIFBhZ2luYXRpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFBhZ2luYXRpb24sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoUGFnaW5hdGlvbik7XG5cbiAgZnVuY3Rpb24gUGFnaW5hdGlvbihwcm9wcykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQYWdpbmF0aW9uKTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpO1xuXG4gICAgX3RoaXMuZ2V0SnVtcFByZXZQYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIE1hdGgubWF4KDEsIF90aGlzLnN0YXRlLmN1cnJlbnQgLSAoX3RoaXMucHJvcHMuc2hvd0xlc3NJdGVtcyA/IDMgOiA1KSk7XG4gICAgfTtcblxuICAgIF90aGlzLmdldEp1bXBOZXh0UGFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBNYXRoLm1pbihjYWxjdWxhdGVQYWdlKHVuZGVmaW5lZCwgX3RoaXMuc3RhdGUsIF90aGlzLnByb3BzKSwgX3RoaXMuc3RhdGUuY3VycmVudCArIChfdGhpcy5wcm9wcy5zaG93TGVzc0l0ZW1zID8gMyA6IDUpKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0SXRlbUljb24gPSBmdW5jdGlvbiAoaWNvbiwgbGFiZWwpIHtcbiAgICAgIHZhciBwcmVmaXhDbHMgPSBfdGhpcy5wcm9wcy5wcmVmaXhDbHM7XG4gICAgICB2YXIgaWNvbk5vZGUgPSBpY29uIHx8IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IGxhYmVsLFxuICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaXRlbS1saW5rXCIpXG4gICAgICB9KTtcblxuICAgICAgaWYgKHR5cGVvZiBpY29uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGljb25Ob2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoaWNvbiwgX29iamVjdFNwcmVhZCh7fSwgX3RoaXMucHJvcHMpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGljb25Ob2RlO1xuICAgIH07XG5cbiAgICBfdGhpcy5zYXZlUGFnaW5hdGlvbk5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgX3RoaXMucGFnaW5hdGlvbk5vZGUgPSBub2RlO1xuICAgIH07XG5cbiAgICBfdGhpcy5pc1ZhbGlkID0gZnVuY3Rpb24gKHBhZ2UpIHtcbiAgICAgIHJldHVybiBpc0ludGVnZXIocGFnZSkgJiYgcGFnZSAhPT0gX3RoaXMuc3RhdGUuY3VycmVudDtcbiAgICB9O1xuXG4gICAgX3RoaXMuc2hvdWxkRGlzcGxheVF1aWNrSnVtcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgc2hvd1F1aWNrSnVtcGVyID0gX3RoaXMkcHJvcHMuc2hvd1F1aWNrSnVtcGVyLFxuICAgICAgICAgIHBhZ2VTaXplID0gX3RoaXMkcHJvcHMucGFnZVNpemUsXG4gICAgICAgICAgdG90YWwgPSBfdGhpcyRwcm9wcy50b3RhbDtcblxuICAgICAgaWYgKHRvdGFsIDw9IHBhZ2VTaXplKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNob3dRdWlja0p1bXBlcjtcbiAgICB9O1xuXG4gICAgX3RoaXMuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS5rZXlDb2RlID09PSBLRVlDT0RFLkFSUk9XX1VQIHx8IGUua2V5Q29kZSA9PT0gS0VZQ09ERS5BUlJPV19ET1dOKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMuaGFuZGxlS2V5VXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHZhbHVlID0gX3RoaXMuZ2V0VmFsaWRWYWx1ZShlKTtcblxuICAgICAgdmFyIGN1cnJlbnRJbnB1dFZhbHVlID0gX3RoaXMuc3RhdGUuY3VycmVudElucHV0VmFsdWU7XG5cbiAgICAgIGlmICh2YWx1ZSAhPT0gY3VycmVudElucHV0VmFsdWUpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGN1cnJlbnRJbnB1dFZhbHVlOiB2YWx1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gS0VZQ09ERS5FTlRFUikge1xuICAgICAgICBfdGhpcy5oYW5kbGVDaGFuZ2UodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IEtFWUNPREUuQVJST1dfVVApIHtcbiAgICAgICAgX3RoaXMuaGFuZGxlQ2hhbmdlKHZhbHVlIC0gMSk7XG4gICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gS0VZQ09ERS5BUlJPV19ET1dOKSB7XG4gICAgICAgIF90aGlzLmhhbmRsZUNoYW5nZSh2YWx1ZSArIDEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5jaGFuZ2VQYWdlU2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICB2YXIgY3VycmVudCA9IF90aGlzLnN0YXRlLmN1cnJlbnQ7XG4gICAgICB2YXIgbmV3Q3VycmVudCA9IGNhbGN1bGF0ZVBhZ2Uoc2l6ZSwgX3RoaXMuc3RhdGUsIF90aGlzLnByb3BzKTtcbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50ID4gbmV3Q3VycmVudCA/IG5ld0N1cnJlbnQgOiBjdXJyZW50OyAvLyBmaXggdGhlIGlzc3VlOlxuICAgICAgLy8gT25jZSAndG90YWwnIGlzIDAsICdjdXJyZW50JyBpbiAnb25TaG93U2l6ZUNoYW5nZScgaXMgMCwgd2hpY2ggaXMgbm90IGNvcnJlY3QuXG5cbiAgICAgIGlmIChuZXdDdXJyZW50ID09PSAwKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgICBjdXJyZW50ID0gX3RoaXMuc3RhdGUuY3VycmVudDtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBzaXplID09PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAoISgncGFnZVNpemUnIGluIF90aGlzLnByb3BzKSkge1xuICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHBhZ2VTaXplOiBzaXplXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISgnY3VycmVudCcgaW4gX3RoaXMucHJvcHMpKSB7XG4gICAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgY3VycmVudDogY3VycmVudCxcbiAgICAgICAgICAgIGN1cnJlbnRJbnB1dFZhbHVlOiBjdXJyZW50XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgX3RoaXMucHJvcHMub25TaG93U2l6ZUNoYW5nZShjdXJyZW50LCBzaXplKTtcblxuICAgICAgaWYgKCdvbkNoYW5nZScgaW4gX3RoaXMucHJvcHMgJiYgX3RoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25DaGFuZ2UoY3VycmVudCwgc2l6ZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLmhhbmRsZUNoYW5nZSA9IGZ1bmN0aW9uIChwKSB7XG4gICAgICB2YXIgZGlzYWJsZWQgPSBfdGhpcy5wcm9wcy5kaXNhYmxlZDtcbiAgICAgIHZhciBwYWdlID0gcDtcblxuICAgICAgaWYgKF90aGlzLmlzVmFsaWQocGFnZSkgJiYgIWRpc2FibGVkKSB7XG4gICAgICAgIHZhciBjdXJyZW50UGFnZSA9IGNhbGN1bGF0ZVBhZ2UodW5kZWZpbmVkLCBfdGhpcy5zdGF0ZSwgX3RoaXMucHJvcHMpO1xuXG4gICAgICAgIGlmIChwYWdlID4gY3VycmVudFBhZ2UpIHtcbiAgICAgICAgICBwYWdlID0gY3VycmVudFBhZ2U7XG4gICAgICAgIH0gZWxzZSBpZiAocGFnZSA8IDEpIHtcbiAgICAgICAgICBwYWdlID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghKCdjdXJyZW50JyBpbiBfdGhpcy5wcm9wcykpIHtcbiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjdXJyZW50OiBwYWdlLFxuICAgICAgICAgICAgY3VycmVudElucHV0VmFsdWU6IHBhZ2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYWdlU2l6ZSA9IF90aGlzLnN0YXRlLnBhZ2VTaXplO1xuXG4gICAgICAgIF90aGlzLnByb3BzLm9uQ2hhbmdlKHBhZ2UsIHBhZ2VTaXplKTtcblxuICAgICAgICByZXR1cm4gcGFnZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzLnN0YXRlLmN1cnJlbnQ7XG4gICAgfTtcblxuICAgIF90aGlzLnByZXYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX3RoaXMuaGFzUHJldigpKSB7XG4gICAgICAgIF90aGlzLmhhbmRsZUNoYW5nZShfdGhpcy5zdGF0ZS5jdXJyZW50IC0gMSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX3RoaXMuaGFzTmV4dCgpKSB7XG4gICAgICAgIF90aGlzLmhhbmRsZUNoYW5nZShfdGhpcy5zdGF0ZS5jdXJyZW50ICsgMSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLmp1bXBQcmV2ID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuaGFuZGxlQ2hhbmdlKF90aGlzLmdldEp1bXBQcmV2UGFnZSgpKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuanVtcE5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5oYW5kbGVDaGFuZ2UoX3RoaXMuZ2V0SnVtcE5leHRQYWdlKCkpO1xuICAgIH07XG5cbiAgICBfdGhpcy5oYXNQcmV2ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLnN0YXRlLmN1cnJlbnQgPiAxO1xuICAgIH07XG5cbiAgICBfdGhpcy5oYXNOZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLnN0YXRlLmN1cnJlbnQgPCBjYWxjdWxhdGVQYWdlKHVuZGVmaW5lZCwgX3RoaXMuc3RhdGUsIF90aGlzLnByb3BzKTtcbiAgICB9O1xuXG4gICAgX3RoaXMucnVuSWZFbnRlciA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicgfHwgZXZlbnQuY2hhckNvZGUgPT09IDEzKSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZXN0UGFyYW1zID0gbmV3IEFycmF5KF9sZW4gPiAyID8gX2xlbiAtIDIgOiAwKSwgX2tleSA9IDI7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICByZXN0UGFyYW1zW19rZXkgLSAyXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhbGxiYWNrLmFwcGx5KHZvaWQgMCwgcmVzdFBhcmFtcyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLnJ1bklmRW50ZXJQcmV2ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLnJ1bklmRW50ZXIoZSwgX3RoaXMucHJldik7XG4gICAgfTtcblxuICAgIF90aGlzLnJ1bklmRW50ZXJOZXh0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLnJ1bklmRW50ZXIoZSwgX3RoaXMubmV4dCk7XG4gICAgfTtcblxuICAgIF90aGlzLnJ1bklmRW50ZXJKdW1wUHJldiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5ydW5JZkVudGVyKGUsIF90aGlzLmp1bXBQcmV2KTtcbiAgICB9O1xuXG4gICAgX3RoaXMucnVuSWZFbnRlckp1bXBOZXh0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLnJ1bklmRW50ZXIoZSwgX3RoaXMuanVtcE5leHQpO1xuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVHb1RPID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLmtleUNvZGUgPT09IEtFWUNPREUuRU5URVIgfHwgZS50eXBlID09PSAnY2xpY2snKSB7XG4gICAgICAgIF90aGlzLmhhbmRsZUNoYW5nZShfdGhpcy5zdGF0ZS5jdXJyZW50SW5wdXRWYWx1ZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBoYXNPbkNoYW5nZSA9IHByb3BzLm9uQ2hhbmdlICE9PSBub29wO1xuICAgIHZhciBoYXNDdXJyZW50ID0gKCdjdXJyZW50JyBpbiBwcm9wcyk7XG5cbiAgICBpZiAoaGFzQ3VycmVudCAmJiAhaGFzT25DaGFuZ2UpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oJ1dhcm5pbmc6IFlvdSBwcm92aWRlZCBhIGBjdXJyZW50YCBwcm9wIHRvIGEgUGFnaW5hdGlvbiBjb21wb25lbnQgd2l0aG91dCBhbiBgb25DaGFuZ2VgIGhhbmRsZXIuIFRoaXMgd2lsbCByZW5kZXIgYSByZWFkLW9ubHkgY29tcG9uZW50LicpO1xuICAgIH1cblxuICAgIHZhciBfY3VycmVudCA9IHByb3BzLmRlZmF1bHRDdXJyZW50O1xuXG4gICAgaWYgKCdjdXJyZW50JyBpbiBwcm9wcykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICBfY3VycmVudCA9IHByb3BzLmN1cnJlbnQ7XG4gICAgfVxuXG4gICAgdmFyIF9wYWdlU2l6ZSA9IHByb3BzLmRlZmF1bHRQYWdlU2l6ZTtcblxuICAgIGlmICgncGFnZVNpemUnIGluIHByb3BzKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgIF9wYWdlU2l6ZSA9IHByb3BzLnBhZ2VTaXplO1xuICAgIH1cblxuICAgIF9jdXJyZW50ID0gTWF0aC5taW4oX2N1cnJlbnQsIGNhbGN1bGF0ZVBhZ2UoX3BhZ2VTaXplLCB1bmRlZmluZWQsIHByb3BzKSk7XG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBjdXJyZW50OiBfY3VycmVudCxcbiAgICAgIGN1cnJlbnRJbnB1dFZhbHVlOiBfY3VycmVudCxcbiAgICAgIHBhZ2VTaXplOiBfcGFnZVNpemVcbiAgICB9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQYWdpbmF0aW9uLCBbe1xuICAgIGtleTogXCJjb21wb25lbnREaWRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAvLyBXaGVuIGN1cnJlbnQgcGFnZSBjaGFuZ2UsIGZpeCBmb2N1c2VkIHN0eWxlIG9mIHByZXYgaXRlbVxuICAgICAgLy8gQSBoYWNreSBzb2x1dGlvbiBvZiBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy84OTQ4XG4gICAgICB2YXIgcHJlZml4Q2xzID0gdGhpcy5wcm9wcy5wcmVmaXhDbHM7XG5cbiAgICAgIGlmIChwcmV2U3RhdGUuY3VycmVudCAhPT0gdGhpcy5zdGF0ZS5jdXJyZW50ICYmIHRoaXMucGFnaW5hdGlvbk5vZGUpIHtcbiAgICAgICAgdmFyIGxhc3RDdXJyZW50Tm9kZSA9IHRoaXMucGFnaW5hdGlvbk5vZGUucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQocHJlZml4Q2xzLCBcIi1pdGVtLVwiKS5jb25jYXQocHJldlN0YXRlLmN1cnJlbnQpKTtcblxuICAgICAgICBpZiAobGFzdEN1cnJlbnROb2RlICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGxhc3RDdXJyZW50Tm9kZSkge1xuICAgICAgICAgIGxhc3RDdXJyZW50Tm9kZS5ibHVyKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0VmFsaWRWYWx1ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYWxpZFZhbHVlKGUpIHtcbiAgICAgIHZhciBpbnB1dFZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICB2YXIgYWxsUGFnZXMgPSBjYWxjdWxhdGVQYWdlKHVuZGVmaW5lZCwgdGhpcy5zdGF0ZSwgdGhpcy5wcm9wcyk7XG4gICAgICB2YXIgY3VycmVudElucHV0VmFsdWUgPSB0aGlzLnN0YXRlLmN1cnJlbnRJbnB1dFZhbHVlO1xuICAgICAgdmFyIHZhbHVlO1xuXG4gICAgICBpZiAoaW5wdXRWYWx1ZSA9PT0gJycpIHtcbiAgICAgICAgdmFsdWUgPSBpbnB1dFZhbHVlOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgICB9IGVsc2UgaWYgKGlzTmFOKE51bWJlcihpbnB1dFZhbHVlKSkpIHtcbiAgICAgICAgdmFsdWUgPSBjdXJyZW50SW5wdXRWYWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRWYWx1ZSA+PSBhbGxQYWdlcykge1xuICAgICAgICB2YWx1ZSA9IGFsbFBhZ2VzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBOdW1iZXIoaW5wdXRWYWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U2hvd1NpemVDaGFuZ2VyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNob3dTaXplQ2hhbmdlcigpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHNob3dTaXplQ2hhbmdlciA9IF90aGlzJHByb3BzMi5zaG93U2l6ZUNoYW5nZXIsXG4gICAgICAgICAgdG90YWwgPSBfdGhpcyRwcm9wczIudG90YWwsXG4gICAgICAgICAgdG90YWxCb3VuZGFyeVNob3dTaXplQ2hhbmdlciA9IF90aGlzJHByb3BzMi50b3RhbEJvdW5kYXJ5U2hvd1NpemVDaGFuZ2VyO1xuXG4gICAgICBpZiAodHlwZW9mIHNob3dTaXplQ2hhbmdlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHNob3dTaXplQ2hhbmdlcjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRvdGFsID4gdG90YWxCb3VuZGFyeVNob3dTaXplQ2hhbmdlcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUHJldlwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcmV2KHByZXZQYWdlKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBwcmV2SWNvbiA9IF90aGlzJHByb3BzMy5wcmV2SWNvbixcbiAgICAgICAgICBpdGVtUmVuZGVyID0gX3RoaXMkcHJvcHMzLml0ZW1SZW5kZXI7XG4gICAgICB2YXIgcHJldkJ1dHRvbiA9IGl0ZW1SZW5kZXIocHJldlBhZ2UsICdwcmV2JywgdGhpcy5nZXRJdGVtSWNvbihwcmV2SWNvbiwgJ3ByZXYgcGFnZScpKTtcbiAgICAgIHZhciBkaXNhYmxlZCA9ICF0aGlzLmhhc1ByZXYoKTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovaXNWYWxpZEVsZW1lbnQocHJldkJ1dHRvbikgPyAvKiNfX1BVUkVfXyovY2xvbmVFbGVtZW50KHByZXZCdXR0b24sIHtcbiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkXG4gICAgICB9KSA6IHByZXZCdXR0b247XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlck5leHRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyTmV4dChuZXh0UGFnZSkge1xuICAgICAgdmFyIF90aGlzJHByb3BzNCA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgbmV4dEljb24gPSBfdGhpcyRwcm9wczQubmV4dEljb24sXG4gICAgICAgICAgaXRlbVJlbmRlciA9IF90aGlzJHByb3BzNC5pdGVtUmVuZGVyO1xuICAgICAgdmFyIG5leHRCdXR0b24gPSBpdGVtUmVuZGVyKG5leHRQYWdlLCAnbmV4dCcsIHRoaXMuZ2V0SXRlbUljb24obmV4dEljb24sICduZXh0IHBhZ2UnKSk7XG4gICAgICB2YXIgZGlzYWJsZWQgPSAhdGhpcy5oYXNOZXh0KCk7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2lzVmFsaWRFbGVtZW50KG5leHRCdXR0b24pID8gLyojX19QVVJFX18qL2Nsb25lRWxlbWVudChuZXh0QnV0dG9uLCB7XG4gICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZFxuICAgICAgfSkgOiBuZXh0QnV0dG9uO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBfdGhpcyRwcm9wczUgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHByZWZpeENscyA9IF90aGlzJHByb3BzNS5wcmVmaXhDbHMsXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3RoaXMkcHJvcHM1LmNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZSA9IF90aGlzJHByb3BzNS5zdHlsZSxcbiAgICAgICAgICBkaXNhYmxlZCA9IF90aGlzJHByb3BzNS5kaXNhYmxlZCxcbiAgICAgICAgICBoaWRlT25TaW5nbGVQYWdlID0gX3RoaXMkcHJvcHM1LmhpZGVPblNpbmdsZVBhZ2UsXG4gICAgICAgICAgdG90YWwgPSBfdGhpcyRwcm9wczUudG90YWwsXG4gICAgICAgICAgbG9jYWxlID0gX3RoaXMkcHJvcHM1LmxvY2FsZSxcbiAgICAgICAgICBzaG93UXVpY2tKdW1wZXIgPSBfdGhpcyRwcm9wczUuc2hvd1F1aWNrSnVtcGVyLFxuICAgICAgICAgIHNob3dMZXNzSXRlbXMgPSBfdGhpcyRwcm9wczUuc2hvd0xlc3NJdGVtcyxcbiAgICAgICAgICBzaG93VGl0bGUgPSBfdGhpcyRwcm9wczUuc2hvd1RpdGxlLFxuICAgICAgICAgIHNob3dUb3RhbCA9IF90aGlzJHByb3BzNS5zaG93VG90YWwsXG4gICAgICAgICAgc2ltcGxlID0gX3RoaXMkcHJvcHM1LnNpbXBsZSxcbiAgICAgICAgICBpdGVtUmVuZGVyID0gX3RoaXMkcHJvcHM1Lml0ZW1SZW5kZXIsXG4gICAgICAgICAgc2hvd1ByZXZOZXh0SnVtcGVycyA9IF90aGlzJHByb3BzNS5zaG93UHJldk5leHRKdW1wZXJzLFxuICAgICAgICAgIGp1bXBQcmV2SWNvbiA9IF90aGlzJHByb3BzNS5qdW1wUHJldkljb24sXG4gICAgICAgICAganVtcE5leHRJY29uID0gX3RoaXMkcHJvcHM1Lmp1bXBOZXh0SWNvbixcbiAgICAgICAgICBzZWxlY3RDb21wb25lbnRDbGFzcyA9IF90aGlzJHByb3BzNS5zZWxlY3RDb21wb25lbnRDbGFzcyxcbiAgICAgICAgICBzZWxlY3RQcmVmaXhDbHMgPSBfdGhpcyRwcm9wczUuc2VsZWN0UHJlZml4Q2xzLFxuICAgICAgICAgIHBhZ2VTaXplT3B0aW9ucyA9IF90aGlzJHByb3BzNS5wYWdlU2l6ZU9wdGlvbnM7XG4gICAgICB2YXIgX3RoaXMkc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIGN1cnJlbnQgPSBfdGhpcyRzdGF0ZS5jdXJyZW50LFxuICAgICAgICAgIHBhZ2VTaXplID0gX3RoaXMkc3RhdGUucGFnZVNpemUsXG4gICAgICAgICAgY3VycmVudElucHV0VmFsdWUgPSBfdGhpcyRzdGF0ZS5jdXJyZW50SW5wdXRWYWx1ZTsgLy8gV2hlbiBoaWRlT25TaW5nbGVQYWdlIGlzIHRydWUgYW5kIHRoZXJlIGlzIG9ubHkgMSBwYWdlLCBoaWRlIHRoZSBwYWdlclxuXG4gICAgICBpZiAoaGlkZU9uU2luZ2xlUGFnZSA9PT0gdHJ1ZSAmJiB0b3RhbCA8PSBwYWdlU2l6ZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIGFsbFBhZ2VzID0gY2FsY3VsYXRlUGFnZSh1bmRlZmluZWQsIHRoaXMuc3RhdGUsIHRoaXMucHJvcHMpO1xuICAgICAgdmFyIHBhZ2VyTGlzdCA9IFtdO1xuICAgICAgdmFyIGp1bXBQcmV2ID0gbnVsbDtcbiAgICAgIHZhciBqdW1wTmV4dCA9IG51bGw7XG4gICAgICB2YXIgZmlyc3RQYWdlciA9IG51bGw7XG4gICAgICB2YXIgbGFzdFBhZ2VyID0gbnVsbDtcbiAgICAgIHZhciBnb3RvQnV0dG9uID0gbnVsbDtcbiAgICAgIHZhciBnb0J1dHRvbiA9IHNob3dRdWlja0p1bXBlciAmJiBzaG93UXVpY2tKdW1wZXIuZ29CdXR0b247XG4gICAgICB2YXIgcGFnZUJ1ZmZlclNpemUgPSBzaG93TGVzc0l0ZW1zID8gMSA6IDI7XG4gICAgICB2YXIgcHJldlBhZ2UgPSBjdXJyZW50IC0gMSA+IDAgPyBjdXJyZW50IC0gMSA6IDA7XG4gICAgICB2YXIgbmV4dFBhZ2UgPSBjdXJyZW50ICsgMSA8IGFsbFBhZ2VzID8gY3VycmVudCArIDEgOiBhbGxQYWdlcztcbiAgICAgIHZhciBkYXRhT3JBcmlhQXR0cmlidXRlUHJvcHMgPSBPYmplY3Qua2V5cyh0aGlzLnByb3BzKS5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGtleSkge1xuICAgICAgICBpZiAoa2V5LnN1YnN0cigwLCA1KSA9PT0gJ2RhdGEtJyB8fCBrZXkuc3Vic3RyKDAsIDUpID09PSAnYXJpYS0nIHx8IGtleSA9PT0gJ3JvbGUnKSB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgcHJldltrZXldID0gX3RoaXMyLnByb3BzW2tleV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgIH0sIHt9KTtcblxuICAgICAgaWYgKHNpbXBsZSkge1xuICAgICAgICBpZiAoZ29CdXR0b24pIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGdvQnV0dG9uID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIGdvdG9CdXR0b24gPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlR29UTyxcbiAgICAgICAgICAgICAgb25LZXlVcDogdGhpcy5oYW5kbGVHb1RPXG4gICAgICAgICAgICB9LCBsb2NhbGUuanVtcF90b19jb25maXJtKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ290b0J1dHRvbiA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlR29UTyxcbiAgICAgICAgICAgICAgb25LZXlVcDogdGhpcy5oYW5kbGVHb1RPXG4gICAgICAgICAgICB9LCBnb0J1dHRvbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZ290b0J1dHRvbiA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwibGlcIiwge1xuICAgICAgICAgICAgdGl0bGU6IHNob3dUaXRsZSA/IFwiXCIuY29uY2F0KGxvY2FsZS5qdW1wX3RvKS5jb25jYXQoY3VycmVudCwgXCIvXCIpLmNvbmNhdChhbGxQYWdlcykgOiBudWxsLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXNpbXBsZS1wYWdlclwiKVxuICAgICAgICAgIH0sIGdvdG9CdXR0b24pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidWxcIiwgX2V4dGVuZHMoe1xuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhwcmVmaXhDbHMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItc2ltcGxlXCIpLCBfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItZGlzYWJsZWRcIiksIGRpc2FibGVkKSwgY2xhc3NOYW1lKSxcbiAgICAgICAgICBzdHlsZTogc3R5bGUsXG4gICAgICAgICAgcmVmOiB0aGlzLnNhdmVQYWdpbmF0aW9uTm9kZVxuICAgICAgICB9LCBkYXRhT3JBcmlhQXR0cmlidXRlUHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxpXCIsIHtcbiAgICAgICAgICB0aXRsZTogc2hvd1RpdGxlID8gbG9jYWxlLnByZXZfcGFnZSA6IG51bGwsXG4gICAgICAgICAgb25DbGljazogdGhpcy5wcmV2LFxuICAgICAgICAgIHRhYkluZGV4OiB0aGlzLmhhc1ByZXYoKSA/IDAgOiBudWxsLFxuICAgICAgICAgIG9uS2V5UHJlc3M6IHRoaXMucnVuSWZFbnRlclByZXYsXG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItcHJldlwiKSwgX2RlZmluZVByb3BlcnR5KHt9LCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWRpc2FibGVkXCIpLCAhdGhpcy5oYXNQcmV2KCkpKSxcbiAgICAgICAgICBcImFyaWEtZGlzYWJsZWRcIjogIXRoaXMuaGFzUHJldigpXG4gICAgICAgIH0sIHRoaXMucmVuZGVyUHJldihwcmV2UGFnZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxpXCIsIHtcbiAgICAgICAgICB0aXRsZTogc2hvd1RpdGxlID8gXCJcIi5jb25jYXQoY3VycmVudCwgXCIvXCIpLmNvbmNhdChhbGxQYWdlcykgOiBudWxsLFxuICAgICAgICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1zaW1wbGUtcGFnZXJcIilcbiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgdmFsdWU6IGN1cnJlbnRJbnB1dFZhbHVlLFxuICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCxcbiAgICAgICAgICBvbktleURvd246IHRoaXMuaGFuZGxlS2V5RG93bixcbiAgICAgICAgICBvbktleVVwOiB0aGlzLmhhbmRsZUtleVVwLFxuICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUtleVVwLFxuICAgICAgICAgIHNpemU6IFwiM1wiXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1zbGFzaFwiKVxuICAgICAgICB9LCBcIi9cIiksIGFsbFBhZ2VzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7XG4gICAgICAgICAgdGl0bGU6IHNob3dUaXRsZSA/IGxvY2FsZS5uZXh0X3BhZ2UgOiBudWxsLFxuICAgICAgICAgIG9uQ2xpY2s6IHRoaXMubmV4dCxcbiAgICAgICAgICB0YWJJbmRleDogdGhpcy5oYXNQcmV2KCkgPyAwIDogbnVsbCxcbiAgICAgICAgICBvbktleVByZXNzOiB0aGlzLnJ1bklmRW50ZXJOZXh0LFxuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW5leHRcIiksIF9kZWZpbmVQcm9wZXJ0eSh7fSwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1kaXNhYmxlZFwiKSwgIXRoaXMuaGFzTmV4dCgpKSksXG4gICAgICAgICAgXCJhcmlhLWRpc2FibGVkXCI6ICF0aGlzLmhhc05leHQoKVxuICAgICAgICB9LCB0aGlzLnJlbmRlck5leHQobmV4dFBhZ2UpKSwgZ290b0J1dHRvbik7XG4gICAgICB9XG5cbiAgICAgIGlmIChhbGxQYWdlcyA8PSAzICsgcGFnZUJ1ZmZlclNpemUgKiAyKSB7XG4gICAgICAgIHZhciBwYWdlclByb3BzID0ge1xuICAgICAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgICAgIHJvb3RQcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNoYW5nZSxcbiAgICAgICAgICBvbktleVByZXNzOiB0aGlzLnJ1bklmRW50ZXIsXG4gICAgICAgICAgc2hvd1RpdGxlOiBzaG93VGl0bGUsXG4gICAgICAgICAgaXRlbVJlbmRlcjogaXRlbVJlbmRlclxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICghYWxsUGFnZXMpIHtcbiAgICAgICAgICBwYWdlckxpc3QucHVzaCggLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGFnZXIsIF9leHRlbmRzKHt9LCBwYWdlclByb3BzLCB7XG4gICAgICAgICAgICBrZXk6IFwibm9QYWdlclwiLFxuICAgICAgICAgICAgcGFnZTogYWxsUGFnZXMsXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItZGlzYWJsZWRcIilcbiAgICAgICAgICB9KSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gYWxsUGFnZXM7IGkgKz0gMSkge1xuICAgICAgICAgIHZhciBhY3RpdmUgPSBjdXJyZW50ID09PSBpO1xuICAgICAgICAgIHBhZ2VyTGlzdC5wdXNoKCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQYWdlciwgX2V4dGVuZHMoe30sIHBhZ2VyUHJvcHMsIHtcbiAgICAgICAgICAgIGtleTogaSxcbiAgICAgICAgICAgIHBhZ2U6IGksXG4gICAgICAgICAgICBhY3RpdmU6IGFjdGl2ZVxuICAgICAgICAgIH0pKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcmV2SXRlbVRpdGxlID0gc2hvd0xlc3NJdGVtcyA/IGxvY2FsZS5wcmV2XzMgOiBsb2NhbGUucHJldl81O1xuICAgICAgICB2YXIgbmV4dEl0ZW1UaXRsZSA9IHNob3dMZXNzSXRlbXMgPyBsb2NhbGUubmV4dF8zIDogbG9jYWxlLm5leHRfNTtcblxuICAgICAgICBpZiAoc2hvd1ByZXZOZXh0SnVtcGVycykge1xuICAgICAgICAgIGp1bXBQcmV2ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7XG4gICAgICAgICAgICB0aXRsZTogc2hvd1RpdGxlID8gcHJldkl0ZW1UaXRsZSA6IG51bGwsXG4gICAgICAgICAgICBrZXk6IFwicHJldlwiLFxuICAgICAgICAgICAgb25DbGljazogdGhpcy5qdW1wUHJldixcbiAgICAgICAgICAgIHRhYkluZGV4OiBcIjBcIixcbiAgICAgICAgICAgIG9uS2V5UHJlc3M6IHRoaXMucnVuSWZFbnRlckp1bXBQcmV2LFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItanVtcC1wcmV2XCIpLCBfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItanVtcC1wcmV2LWN1c3RvbS1pY29uXCIpLCAhIWp1bXBQcmV2SWNvbikpXG4gICAgICAgICAgfSwgaXRlbVJlbmRlcih0aGlzLmdldEp1bXBQcmV2UGFnZSgpLCAnanVtcC1wcmV2JywgdGhpcy5nZXRJdGVtSWNvbihqdW1wUHJldkljb24sICdwcmV2IHBhZ2UnKSkpO1xuICAgICAgICAgIGp1bXBOZXh0ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7XG4gICAgICAgICAgICB0aXRsZTogc2hvd1RpdGxlID8gbmV4dEl0ZW1UaXRsZSA6IG51bGwsXG4gICAgICAgICAgICBrZXk6IFwibmV4dFwiLFxuICAgICAgICAgICAgdGFiSW5kZXg6IFwiMFwiLFxuICAgICAgICAgICAgb25DbGljazogdGhpcy5qdW1wTmV4dCxcbiAgICAgICAgICAgIG9uS2V5UHJlc3M6IHRoaXMucnVuSWZFbnRlckp1bXBOZXh0LFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItanVtcC1uZXh0XCIpLCBfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItanVtcC1uZXh0LWN1c3RvbS1pY29uXCIpLCAhIWp1bXBOZXh0SWNvbikpXG4gICAgICAgICAgfSwgaXRlbVJlbmRlcih0aGlzLmdldEp1bXBOZXh0UGFnZSgpLCAnanVtcC1uZXh0JywgdGhpcy5nZXRJdGVtSWNvbihqdW1wTmV4dEljb24sICduZXh0IHBhZ2UnKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFzdFBhZ2VyID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGFnZXIsIHtcbiAgICAgICAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICAgICAgICBsYXN0OiB0cnVlLFxuICAgICAgICAgIHJvb3RQcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNoYW5nZSxcbiAgICAgICAgICBvbktleVByZXNzOiB0aGlzLnJ1bklmRW50ZXIsXG4gICAgICAgICAga2V5OiBhbGxQYWdlcyxcbiAgICAgICAgICBwYWdlOiBhbGxQYWdlcyxcbiAgICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgICAgIHNob3dUaXRsZTogc2hvd1RpdGxlLFxuICAgICAgICAgIGl0ZW1SZW5kZXI6IGl0ZW1SZW5kZXJcbiAgICAgICAgfSk7XG4gICAgICAgIGZpcnN0UGFnZXIgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQYWdlciwge1xuICAgICAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgICAgIHJvb3RQcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNoYW5nZSxcbiAgICAgICAgICBvbktleVByZXNzOiB0aGlzLnJ1bklmRW50ZXIsXG4gICAgICAgICAga2V5OiAxLFxuICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICBzaG93VGl0bGU6IHNob3dUaXRsZSxcbiAgICAgICAgICBpdGVtUmVuZGVyOiBpdGVtUmVuZGVyXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbGVmdCA9IE1hdGgubWF4KDEsIGN1cnJlbnQgLSBwYWdlQnVmZmVyU2l6ZSk7XG4gICAgICAgIHZhciByaWdodCA9IE1hdGgubWluKGN1cnJlbnQgKyBwYWdlQnVmZmVyU2l6ZSwgYWxsUGFnZXMpO1xuXG4gICAgICAgIGlmIChjdXJyZW50IC0gMSA8PSBwYWdlQnVmZmVyU2l6ZSkge1xuICAgICAgICAgIHJpZ2h0ID0gMSArIHBhZ2VCdWZmZXJTaXplICogMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhbGxQYWdlcyAtIGN1cnJlbnQgPD0gcGFnZUJ1ZmZlclNpemUpIHtcbiAgICAgICAgICBsZWZ0ID0gYWxsUGFnZXMgLSBwYWdlQnVmZmVyU2l6ZSAqIDI7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBfaSA9IGxlZnQ7IF9pIDw9IHJpZ2h0OyBfaSArPSAxKSB7XG4gICAgICAgICAgdmFyIF9hY3RpdmUgPSBjdXJyZW50ID09PSBfaTtcblxuICAgICAgICAgIHBhZ2VyTGlzdC5wdXNoKCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQYWdlciwge1xuICAgICAgICAgICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgICAgICAgICByb290UHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNoYW5nZSxcbiAgICAgICAgICAgIG9uS2V5UHJlc3M6IHRoaXMucnVuSWZFbnRlcixcbiAgICAgICAgICAgIGtleTogX2ksXG4gICAgICAgICAgICBwYWdlOiBfaSxcbiAgICAgICAgICAgIGFjdGl2ZTogX2FjdGl2ZSxcbiAgICAgICAgICAgIHNob3dUaXRsZTogc2hvd1RpdGxlLFxuICAgICAgICAgICAgaXRlbVJlbmRlcjogaXRlbVJlbmRlclxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjdXJyZW50IC0gMSA+PSBwYWdlQnVmZmVyU2l6ZSAqIDIgJiYgY3VycmVudCAhPT0gMSArIDIpIHtcbiAgICAgICAgICBwYWdlckxpc3RbMF0gPSAvKiNfX1BVUkVfXyovY2xvbmVFbGVtZW50KHBhZ2VyTGlzdFswXSwge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWl0ZW0tYWZ0ZXItanVtcC1wcmV2XCIpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcGFnZXJMaXN0LnVuc2hpZnQoanVtcFByZXYpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFsbFBhZ2VzIC0gY3VycmVudCA+PSBwYWdlQnVmZmVyU2l6ZSAqIDIgJiYgY3VycmVudCAhPT0gYWxsUGFnZXMgLSAyKSB7XG4gICAgICAgICAgcGFnZXJMaXN0W3BhZ2VyTGlzdC5sZW5ndGggLSAxXSA9IC8qI19fUFVSRV9fKi9jbG9uZUVsZW1lbnQocGFnZXJMaXN0W3BhZ2VyTGlzdC5sZW5ndGggLSAxXSwge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWl0ZW0tYmVmb3JlLWp1bXAtbmV4dFwiKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHBhZ2VyTGlzdC5wdXNoKGp1bXBOZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsZWZ0ICE9PSAxKSB7XG4gICAgICAgICAgcGFnZXJMaXN0LnVuc2hpZnQoZmlyc3RQYWdlcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmlnaHQgIT09IGFsbFBhZ2VzKSB7XG4gICAgICAgICAgcGFnZXJMaXN0LnB1c2gobGFzdFBhZ2VyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgdG90YWxUZXh0ID0gbnVsbDtcblxuICAgICAgaWYgKHNob3dUb3RhbCkge1xuICAgICAgICB0b3RhbFRleHQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxpXCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItdG90YWwtdGV4dFwiKVxuICAgICAgICB9LCBzaG93VG90YWwodG90YWwsIFt0b3RhbCA9PT0gMCA/IDAgOiAoY3VycmVudCAtIDEpICogcGFnZVNpemUgKyAxLCBjdXJyZW50ICogcGFnZVNpemUgPiB0b3RhbCA/IHRvdGFsIDogY3VycmVudCAqIHBhZ2VTaXplXSkpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJldkRpc2FibGVkID0gIXRoaXMuaGFzUHJldigpIHx8ICFhbGxQYWdlcztcbiAgICAgIHZhciBuZXh0RGlzYWJsZWQgPSAhdGhpcy5oYXNOZXh0KCkgfHwgIWFsbFBhZ2VzO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidWxcIiwgX2V4dGVuZHMoe1xuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMocHJlZml4Q2xzLCBjbGFzc05hbWUsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1kaXNhYmxlZFwiKSwgZGlzYWJsZWQpKSxcbiAgICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgICB1bnNlbGVjdGFibGU6IFwidW5zZWxlY3RhYmxlXCIsXG4gICAgICAgIHJlZjogdGhpcy5zYXZlUGFnaW5hdGlvbk5vZGVcbiAgICAgIH0sIGRhdGFPckFyaWFBdHRyaWJ1dGVQcm9wcyksIHRvdGFsVGV4dCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7XG4gICAgICAgIHRpdGxlOiBzaG93VGl0bGUgPyBsb2NhbGUucHJldl9wYWdlIDogbnVsbCxcbiAgICAgICAgb25DbGljazogdGhpcy5wcmV2LFxuICAgICAgICB0YWJJbmRleDogcHJldkRpc2FibGVkID8gbnVsbCA6IDAsXG4gICAgICAgIG9uS2V5UHJlc3M6IHRoaXMucnVuSWZFbnRlclByZXYsXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXByZXZcIiksIF9kZWZpbmVQcm9wZXJ0eSh7fSwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1kaXNhYmxlZFwiKSwgcHJldkRpc2FibGVkKSksXG4gICAgICAgIFwiYXJpYS1kaXNhYmxlZFwiOiBwcmV2RGlzYWJsZWRcbiAgICAgIH0sIHRoaXMucmVuZGVyUHJldihwcmV2UGFnZSkpLCBwYWdlckxpc3QsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwibGlcIiwge1xuICAgICAgICB0aXRsZTogc2hvd1RpdGxlID8gbG9jYWxlLm5leHRfcGFnZSA6IG51bGwsXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMubmV4dCxcbiAgICAgICAgdGFiSW5kZXg6IG5leHREaXNhYmxlZCA/IG51bGwgOiAwLFxuICAgICAgICBvbktleVByZXNzOiB0aGlzLnJ1bklmRW50ZXJOZXh0LFxuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1uZXh0XCIpLCBfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItZGlzYWJsZWRcIiksIG5leHREaXNhYmxlZCkpLFxuICAgICAgICBcImFyaWEtZGlzYWJsZWRcIjogbmV4dERpc2FibGVkXG4gICAgICB9LCB0aGlzLnJlbmRlck5leHQobmV4dFBhZ2UpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoT3B0aW9ucywge1xuICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsXG4gICAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgICByb290UHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgICAgIHNlbGVjdENvbXBvbmVudENsYXNzOiBzZWxlY3RDb21wb25lbnRDbGFzcyxcbiAgICAgICAgc2VsZWN0UHJlZml4Q2xzOiBzZWxlY3RQcmVmaXhDbHMsXG4gICAgICAgIGNoYW5nZVNpemU6IHRoaXMuZ2V0U2hvd1NpemVDaGFuZ2VyKCkgPyB0aGlzLmNoYW5nZVBhZ2VTaXplIDogbnVsbCxcbiAgICAgICAgY3VycmVudDogY3VycmVudCxcbiAgICAgICAgcGFnZVNpemU6IHBhZ2VTaXplLFxuICAgICAgICBwYWdlU2l6ZU9wdGlvbnM6IHBhZ2VTaXplT3B0aW9ucyxcbiAgICAgICAgcXVpY2tHbzogdGhpcy5zaG91bGREaXNwbGF5UXVpY2tKdW1wZXIoKSA/IHRoaXMuaGFuZGxlQ2hhbmdlIDogbnVsbCxcbiAgICAgICAgZ29CdXR0b246IGdvQnV0dG9uXG4gICAgICB9KSk7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwiZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhwcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICB2YXIgbmV3U3RhdGUgPSB7fTtcblxuICAgICAgaWYgKCdjdXJyZW50JyBpbiBwcm9wcykge1xuICAgICAgICBuZXdTdGF0ZS5jdXJyZW50ID0gcHJvcHMuY3VycmVudDtcblxuICAgICAgICBpZiAocHJvcHMuY3VycmVudCAhPT0gcHJldlN0YXRlLmN1cnJlbnQpIHtcbiAgICAgICAgICBuZXdTdGF0ZS5jdXJyZW50SW5wdXRWYWx1ZSA9IG5ld1N0YXRlLmN1cnJlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCdwYWdlU2l6ZScgaW4gcHJvcHMgJiYgcHJvcHMucGFnZVNpemUgIT09IHByZXZTdGF0ZS5wYWdlU2l6ZSkge1xuICAgICAgICB2YXIgY3VycmVudCA9IHByZXZTdGF0ZS5jdXJyZW50O1xuICAgICAgICB2YXIgbmV3Q3VycmVudCA9IGNhbGN1bGF0ZVBhZ2UocHJvcHMucGFnZVNpemUsIHByZXZTdGF0ZSwgcHJvcHMpO1xuICAgICAgICBjdXJyZW50ID0gY3VycmVudCA+IG5ld0N1cnJlbnQgPyBuZXdDdXJyZW50IDogY3VycmVudDtcblxuICAgICAgICBpZiAoISgnY3VycmVudCcgaW4gcHJvcHMpKSB7XG4gICAgICAgICAgbmV3U3RhdGUuY3VycmVudCA9IGN1cnJlbnQ7XG4gICAgICAgICAgbmV3U3RhdGUuY3VycmVudElucHV0VmFsdWUgPSBjdXJyZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3U3RhdGUucGFnZVNpemUgPSBwcm9wcy5wYWdlU2l6ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQYWdpbmF0aW9uO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5QYWdpbmF0aW9uLmRlZmF1bHRQcm9wcyA9IHtcbiAgZGVmYXVsdEN1cnJlbnQ6IDEsXG4gIHRvdGFsOiAwLFxuICBkZWZhdWx0UGFnZVNpemU6IDEwLFxuICBvbkNoYW5nZTogbm9vcCxcbiAgY2xhc3NOYW1lOiAnJyxcbiAgc2VsZWN0UHJlZml4Q2xzOiAncmMtc2VsZWN0JyxcbiAgcHJlZml4Q2xzOiAncmMtcGFnaW5hdGlvbicsXG4gIHNlbGVjdENvbXBvbmVudENsYXNzOiBudWxsLFxuICBoaWRlT25TaW5nbGVQYWdlOiBmYWxzZSxcbiAgc2hvd1ByZXZOZXh0SnVtcGVyczogdHJ1ZSxcbiAgc2hvd1F1aWNrSnVtcGVyOiBmYWxzZSxcbiAgc2hvd0xlc3NJdGVtczogZmFsc2UsXG4gIHNob3dUaXRsZTogdHJ1ZSxcbiAgb25TaG93U2l6ZUNoYW5nZTogbm9vcCxcbiAgbG9jYWxlOiBMT0NBTEUsXG4gIHN0eWxlOiB7fSxcbiAgaXRlbVJlbmRlcjogZGVmYXVsdEl0ZW1SZW5kZXIsXG4gIHRvdGFsQm91bmRhcnlTaG93U2l6ZUNoYW5nZXI6IDUwXG59O1xuZXhwb3J0IGRlZmF1bHQgUGFnaW5hdGlvbjsiLCJleHBvcnQgZGVmYXVsdCB7XG4gIC8vIE9wdGlvbnMuanN4XG4gIGl0ZW1zX3Blcl9wYWdlOiAnLyBwYWdlJyxcbiAganVtcF90bzogJ0dvIHRvJyxcbiAganVtcF90b19jb25maXJtOiAnY29uZmlybScsXG4gIHBhZ2U6ICcnLFxuICAvLyBQYWdpbmF0aW9uLmpzeFxuICBwcmV2X3BhZ2U6ICdQcmV2aW91cyBQYWdlJyxcbiAgbmV4dF9wYWdlOiAnTmV4dCBQYWdlJyxcbiAgcHJldl81OiAnUHJldmlvdXMgNSBQYWdlcycsXG4gIG5leHRfNTogJ05leHQgNSBQYWdlcycsXG4gIHByZXZfMzogJ1ByZXZpb3VzIDMgUGFnZXMnLFxuICBuZXh0XzM6ICdOZXh0IDMgUGFnZXMnXG59OyIsImV4cG9ydCBkZWZhdWx0IHtcbiAgLy8gT3B0aW9ucy5qc3hcbiAgaXRlbXNfcGVyX3BhZ2U6ICfmnaEv6aG1JyxcbiAganVtcF90bzogJ+i3s+iHsycsXG4gIGp1bXBfdG9fY29uZmlybTogJ+ehruWumicsXG4gIHBhZ2U6ICfpobUnLFxuICAvLyBQYWdpbmF0aW9uLmpzeFxuICBwcmV2X3BhZ2U6ICfkuIrkuIDpobUnLFxuICBuZXh0X3BhZ2U6ICfkuIvkuIDpobUnLFxuICBwcmV2XzU6ICflkJHliY0gNSDpobUnLFxuICBuZXh0XzU6ICflkJHlkI4gNSDpobUnLFxuICBwcmV2XzM6ICflkJHliY0gMyDpobUnLFxuICBuZXh0XzM6ICflkJHlkI4gMyDpobUnXG59OyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbnZhciBQYW5lbENvbnRleHQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlQ29udGV4dCh7fSk7XG5leHBvcnQgZGVmYXVsdCBQYW5lbENvbnRleHQ7IiwiaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2tcIjtcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzXCI7XG5pbXBvcnQgX2luaGVyaXRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c1wiO1xuaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXJcIjtcbmltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcblxuLyoqXG4gKiBSZW1vdmVkOlxuICogIC0gZ2V0Q2FsZW5kYXJDb250YWluZXI6IHVzZSBgZ2V0UG9wdXBDb250YWluZXJgIGluc3RlYWRcbiAqICAtIG9uT2tcbiAqXG4gKiBOZXcgRmVhdHVyZTpcbiAqICAtIHBpY2tlclxuICogIC0gYWxsb3dFbXB0eVxuICogIC0gc2VsZWN0YWJsZVxuICpcbiAqIFRpcHM6IFNob3VsZCBhZGQgZmFxIGFib3V0IGBkYXRldGltZWAgbW9kZSB3aXRoIGBkZWZhdWx0VmFsdWVgXG4gKi9cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSBcInJjLXV0aWwvZXMvd2FybmluZ1wiO1xuaW1wb3J0IHVzZU1lcmdlZFN0YXRlIGZyb20gXCJyYy11dGlsL2VzL2hvb2tzL3VzZU1lcmdlZFN0YXRlXCI7XG5pbXBvcnQgUGlja2VyUGFuZWwgZnJvbSAnLi9QaWNrZXJQYW5lbCc7XG5pbXBvcnQgUGlja2VyVHJpZ2dlciBmcm9tICcuL1BpY2tlclRyaWdnZXInO1xuaW1wb3J0IHsgZm9ybWF0VmFsdWUsIGlzRXF1YWwsIHBhcnNlVmFsdWUgfSBmcm9tICcuL3V0aWxzL2RhdGVVdGlsJztcbmltcG9ydCBnZXREYXRhT3JBcmlhUHJvcHMsIHsgdG9BcnJheSB9IGZyb20gJy4vdXRpbHMvbWlzY1V0aWwnO1xuaW1wb3J0IFBhbmVsQ29udGV4dCBmcm9tICcuL1BhbmVsQ29udGV4dCc7XG5pbXBvcnQgeyBnZXREZWZhdWx0Rm9ybWF0LCBnZXRJbnB1dFNpemUsIGVsZW1lbnRzQ29udGFpbnMgfSBmcm9tICcuL3V0aWxzL3VpVXRpbCc7XG5pbXBvcnQgdXNlUGlja2VySW5wdXQgZnJvbSAnLi9ob29rcy91c2VQaWNrZXJJbnB1dCc7XG5pbXBvcnQgdXNlVGV4dFZhbHVlTWFwcGluZyBmcm9tICcuL2hvb2tzL3VzZVRleHRWYWx1ZU1hcHBpbmcnO1xuaW1wb3J0IHVzZVZhbHVlVGV4dHMgZnJvbSAnLi9ob29rcy91c2VWYWx1ZVRleHRzJztcbmltcG9ydCB1c2VIb3ZlclZhbHVlIGZyb20gJy4vaG9va3MvdXNlSG92ZXJWYWx1ZSc7XG5cbmZ1bmN0aW9uIElubmVyUGlja2VyKHByb3BzKSB7XG4gIHZhciBfY2xhc3NOYW1lczI7XG5cbiAgdmFyIF9wcm9wcyRwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBwcmVmaXhDbHMgPSBfcHJvcHMkcHJlZml4Q2xzID09PSB2b2lkIDAgPyAncmMtcGlja2VyJyA6IF9wcm9wcyRwcmVmaXhDbHMsXG4gICAgICBpZCA9IHByb3BzLmlkLFxuICAgICAgdGFiSW5kZXggPSBwcm9wcy50YWJJbmRleCxcbiAgICAgIHN0eWxlID0gcHJvcHMuc3R5bGUsXG4gICAgICBjbGFzc05hbWUgPSBwcm9wcy5jbGFzc05hbWUsXG4gICAgICBkcm9wZG93bkNsYXNzTmFtZSA9IHByb3BzLmRyb3Bkb3duQ2xhc3NOYW1lLFxuICAgICAgZHJvcGRvd25BbGlnbiA9IHByb3BzLmRyb3Bkb3duQWxpZ24sXG4gICAgICBwb3B1cFN0eWxlID0gcHJvcHMucG9wdXBTdHlsZSxcbiAgICAgIHRyYW5zaXRpb25OYW1lID0gcHJvcHMudHJhbnNpdGlvbk5hbWUsXG4gICAgICBnZW5lcmF0ZUNvbmZpZyA9IHByb3BzLmdlbmVyYXRlQ29uZmlnLFxuICAgICAgbG9jYWxlID0gcHJvcHMubG9jYWxlLFxuICAgICAgaW5wdXRSZWFkT25seSA9IHByb3BzLmlucHV0UmVhZE9ubHksXG4gICAgICBhbGxvd0NsZWFyID0gcHJvcHMuYWxsb3dDbGVhcixcbiAgICAgIGF1dG9Gb2N1cyA9IHByb3BzLmF1dG9Gb2N1cyxcbiAgICAgIHNob3dUaW1lID0gcHJvcHMuc2hvd1RpbWUsXG4gICAgICBfcHJvcHMkcGlja2VyID0gcHJvcHMucGlja2VyLFxuICAgICAgcGlja2VyID0gX3Byb3BzJHBpY2tlciA9PT0gdm9pZCAwID8gJ2RhdGUnIDogX3Byb3BzJHBpY2tlcixcbiAgICAgIGZvcm1hdCA9IHByb3BzLmZvcm1hdCxcbiAgICAgIHVzZTEySG91cnMgPSBwcm9wcy51c2UxMkhvdXJzLFxuICAgICAgdmFsdWUgPSBwcm9wcy52YWx1ZSxcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IHByb3BzLmRlZmF1bHRWYWx1ZSxcbiAgICAgIG9wZW4gPSBwcm9wcy5vcGVuLFxuICAgICAgZGVmYXVsdE9wZW4gPSBwcm9wcy5kZWZhdWx0T3BlbixcbiAgICAgIGRlZmF1bHRPcGVuVmFsdWUgPSBwcm9wcy5kZWZhdWx0T3BlblZhbHVlLFxuICAgICAgc3VmZml4SWNvbiA9IHByb3BzLnN1ZmZpeEljb24sXG4gICAgICBjbGVhckljb24gPSBwcm9wcy5jbGVhckljb24sXG4gICAgICBkaXNhYmxlZCA9IHByb3BzLmRpc2FibGVkLFxuICAgICAgZGlzYWJsZWREYXRlID0gcHJvcHMuZGlzYWJsZWREYXRlLFxuICAgICAgcGxhY2Vob2xkZXIgPSBwcm9wcy5wbGFjZWhvbGRlcixcbiAgICAgIGdldFBvcHVwQ29udGFpbmVyID0gcHJvcHMuZ2V0UG9wdXBDb250YWluZXIsXG4gICAgICBwaWNrZXJSZWYgPSBwcm9wcy5waWNrZXJSZWYsXG4gICAgICBwYW5lbFJlbmRlciA9IHByb3BzLnBhbmVsUmVuZGVyLFxuICAgICAgb25DaGFuZ2UgPSBwcm9wcy5vbkNoYW5nZSxcbiAgICAgIG9uT3BlbkNoYW5nZSA9IHByb3BzLm9uT3BlbkNoYW5nZSxcbiAgICAgIG9uRm9jdXMgPSBwcm9wcy5vbkZvY3VzLFxuICAgICAgb25CbHVyID0gcHJvcHMub25CbHVyLFxuICAgICAgb25Nb3VzZURvd24gPSBwcm9wcy5vbk1vdXNlRG93bixcbiAgICAgIG9uTW91c2VVcCA9IHByb3BzLm9uTW91c2VVcCxcbiAgICAgIG9uTW91c2VFbnRlciA9IHByb3BzLm9uTW91c2VFbnRlcixcbiAgICAgIG9uTW91c2VMZWF2ZSA9IHByb3BzLm9uTW91c2VMZWF2ZSxcbiAgICAgIG9uQ29udGV4dE1lbnUgPSBwcm9wcy5vbkNvbnRleHRNZW51LFxuICAgICAgb25DbGljayA9IHByb3BzLm9uQ2xpY2ssXG4gICAgICBfb25LZXlEb3duID0gcHJvcHMub25LZXlEb3duLFxuICAgICAgX29uU2VsZWN0ID0gcHJvcHMub25TZWxlY3QsXG4gICAgICBkaXJlY3Rpb24gPSBwcm9wcy5kaXJlY3Rpb24sXG4gICAgICBfcHJvcHMkYXV0b0NvbXBsZXRlID0gcHJvcHMuYXV0b0NvbXBsZXRlLFxuICAgICAgYXV0b0NvbXBsZXRlID0gX3Byb3BzJGF1dG9Db21wbGV0ZSA9PT0gdm9pZCAwID8gJ29mZicgOiBfcHJvcHMkYXV0b0NvbXBsZXRlO1xuICB2YXIgaW5wdXRSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gIHZhciBuZWVkQ29uZmlybUJ1dHRvbiA9IHBpY2tlciA9PT0gJ2RhdGUnICYmICEhc2hvd1RpbWUgfHwgcGlja2VyID09PSAndGltZSc7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFN0YXRlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIGZvcm1hdExpc3QgPSB0b0FycmF5KGdldERlZmF1bHRGb3JtYXQoZm9ybWF0LCBwaWNrZXIsIHNob3dUaW1lLCB1c2UxMkhvdXJzKSk7IC8vIFBhbmVsIHJlZlxuXG4gIHZhciBwYW5lbERpdlJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTtcbiAgdmFyIGlucHV0RGl2UmVmID0gUmVhY3QudXNlUmVmKG51bGwpOyAvLyBSZWFsIHZhbHVlXG5cbiAgdmFyIF91c2VNZXJnZWRTdGF0ZSA9IHVzZU1lcmdlZFN0YXRlKG51bGwsIHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVcbiAgfSksXG4gICAgICBfdXNlTWVyZ2VkU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZU1lcmdlZFN0YXRlLCAyKSxcbiAgICAgIG1lcmdlZFZhbHVlID0gX3VzZU1lcmdlZFN0YXRlMlswXSxcbiAgICAgIHNldElubmVyVmFsdWUgPSBfdXNlTWVyZ2VkU3RhdGUyWzFdOyAvLyBTZWxlY3RlZCB2YWx1ZVxuXG5cbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKG1lcmdlZFZhbHVlKSxcbiAgICAgIF9SZWFjdCR1c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUsIDIpLFxuICAgICAgc2VsZWN0ZWRWYWx1ZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRTZWxlY3RlZFZhbHVlID0gX1JlYWN0JHVzZVN0YXRlMlsxXTsgLy8gT3BlcmF0aW9uIHJlZlxuXG5cbiAgdmFyIG9wZXJhdGlvblJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTsgLy8gT3BlblxuXG4gIHZhciBfdXNlTWVyZ2VkU3RhdGUzID0gdXNlTWVyZ2VkU3RhdGUoZmFsc2UsIHtcbiAgICB2YWx1ZTogb3BlbixcbiAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRPcGVuLFxuICAgIHBvc3RTdGF0ZTogZnVuY3Rpb24gcG9zdFN0YXRlKHBvc3RPcGVuKSB7XG4gICAgICByZXR1cm4gZGlzYWJsZWQgPyBmYWxzZSA6IHBvc3RPcGVuO1xuICAgIH0sXG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKG5ld09wZW4pIHtcbiAgICAgIGlmIChvbk9wZW5DaGFuZ2UpIHtcbiAgICAgICAgb25PcGVuQ2hhbmdlKG5ld09wZW4pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW5ld09wZW4gJiYgb3BlcmF0aW9uUmVmLmN1cnJlbnQgJiYgb3BlcmF0aW9uUmVmLmN1cnJlbnQub25DbG9zZSkge1xuICAgICAgICBvcGVyYXRpb25SZWYuY3VycmVudC5vbkNsb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICB9KSxcbiAgICAgIF91c2VNZXJnZWRTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlTWVyZ2VkU3RhdGUzLCAyKSxcbiAgICAgIG1lcmdlZE9wZW4gPSBfdXNlTWVyZ2VkU3RhdGU0WzBdLFxuICAgICAgdHJpZ2dlcklubmVyT3BlbiA9IF91c2VNZXJnZWRTdGF0ZTRbMV07IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFRleHQgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgX3VzZVZhbHVlVGV4dHMgPSB1c2VWYWx1ZVRleHRzKHNlbGVjdGVkVmFsdWUsIHtcbiAgICBmb3JtYXRMaXN0OiBmb3JtYXRMaXN0LFxuICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZyxcbiAgICBsb2NhbGU6IGxvY2FsZVxuICB9KSxcbiAgICAgIF91c2VWYWx1ZVRleHRzMiA9IF9zbGljZWRUb0FycmF5KF91c2VWYWx1ZVRleHRzLCAyKSxcbiAgICAgIHZhbHVlVGV4dHMgPSBfdXNlVmFsdWVUZXh0czJbMF0sXG4gICAgICBmaXJzdFZhbHVlVGV4dCA9IF91c2VWYWx1ZVRleHRzMlsxXTtcblxuICB2YXIgX3VzZVRleHRWYWx1ZU1hcHBpbmcgPSB1c2VUZXh0VmFsdWVNYXBwaW5nKHtcbiAgICB2YWx1ZVRleHRzOiB2YWx1ZVRleHRzLFxuICAgIG9uVGV4dENoYW5nZTogZnVuY3Rpb24gb25UZXh0Q2hhbmdlKG5ld1RleHQpIHtcbiAgICAgIHZhciBpbnB1dERhdGUgPSBwYXJzZVZhbHVlKG5ld1RleHQsIHtcbiAgICAgICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgICAgIGZvcm1hdExpc3Q6IGZvcm1hdExpc3QsXG4gICAgICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZ1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChpbnB1dERhdGUgJiYgKCFkaXNhYmxlZERhdGUgfHwgIWRpc2FibGVkRGF0ZShpbnB1dERhdGUpKSkge1xuICAgICAgICBzZXRTZWxlY3RlZFZhbHVlKGlucHV0RGF0ZSk7XG4gICAgICB9XG4gICAgfVxuICB9KSxcbiAgICAgIF91c2VUZXh0VmFsdWVNYXBwaW5nMiA9IF9zbGljZWRUb0FycmF5KF91c2VUZXh0VmFsdWVNYXBwaW5nLCAzKSxcbiAgICAgIHRleHQgPSBfdXNlVGV4dFZhbHVlTWFwcGluZzJbMF0sXG4gICAgICB0cmlnZ2VyVGV4dENoYW5nZSA9IF91c2VUZXh0VmFsdWVNYXBwaW5nMlsxXSxcbiAgICAgIHJlc2V0VGV4dCA9IF91c2VUZXh0VmFsdWVNYXBwaW5nMlsyXTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBUcmlnZ2VyID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciB0cmlnZ2VyQ2hhbmdlID0gZnVuY3Rpb24gdHJpZ2dlckNoYW5nZShuZXdWYWx1ZSkge1xuICAgIHNldFNlbGVjdGVkVmFsdWUobmV3VmFsdWUpO1xuICAgIHNldElubmVyVmFsdWUobmV3VmFsdWUpO1xuXG4gICAgaWYgKG9uQ2hhbmdlICYmICFpc0VxdWFsKGdlbmVyYXRlQ29uZmlnLCBtZXJnZWRWYWx1ZSwgbmV3VmFsdWUpKSB7XG4gICAgICBvbkNoYW5nZShuZXdWYWx1ZSwgbmV3VmFsdWUgPyBmb3JtYXRWYWx1ZShuZXdWYWx1ZSwge1xuICAgICAgICBnZW5lcmF0ZUNvbmZpZzogZ2VuZXJhdGVDb25maWcsXG4gICAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgICBmb3JtYXQ6IGZvcm1hdExpc3RbMF1cbiAgICAgIH0pIDogJycpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgdHJpZ2dlck9wZW4gPSBmdW5jdGlvbiB0cmlnZ2VyT3BlbihuZXdPcGVuKSB7XG4gICAgaWYgKGRpc2FibGVkICYmIG5ld09wZW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cmlnZ2VySW5uZXJPcGVuKG5ld09wZW4pO1xuICB9O1xuXG4gIHZhciBmb3J3YXJkS2V5RG93biA9IGZ1bmN0aW9uIGZvcndhcmRLZXlEb3duKGUpIHtcbiAgICBpZiAobWVyZ2VkT3BlbiAmJiBvcGVyYXRpb25SZWYuY3VycmVudCAmJiBvcGVyYXRpb25SZWYuY3VycmVudC5vbktleURvd24pIHtcbiAgICAgIC8vIExldCBwb3B1cCBwYW5lbCBoYW5kbGUga2V5Ym9hcmRcbiAgICAgIHJldHVybiBvcGVyYXRpb25SZWYuY3VycmVudC5vbktleURvd24oZSk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1sb25lLWJsb2NrcyAqL1xuXG5cbiAgICB7XG4gICAgICB3YXJuaW5nKGZhbHNlLCAnUGlja2VyIG5vdCBjb3JyZWN0IGZvcndhcmQgS2V5RG93biBvcGVyYXRpb24uIFBsZWFzZSBoZWxwIHRvIGZpcmUgaXNzdWUgYWJvdXQgdGhpcy4nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIG9uSW50ZXJuYWxNb3VzZVVwID0gZnVuY3Rpb24gb25JbnRlcm5hbE1vdXNlVXAoKSB7XG4gICAgaWYgKG9uTW91c2VVcCkge1xuICAgICAgb25Nb3VzZVVwLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBpZiAoaW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgaW5wdXRSZWYuY3VycmVudC5mb2N1cygpO1xuICAgICAgdHJpZ2dlck9wZW4odHJ1ZSk7XG4gICAgfVxuICB9OyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBJbnB1dCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIF91c2VQaWNrZXJJbnB1dCA9IHVzZVBpY2tlcklucHV0KHtcbiAgICBibHVyVG9DYW5jZWw6IG5lZWRDb25maXJtQnV0dG9uLFxuICAgIG9wZW46IG1lcmdlZE9wZW4sXG4gICAgdmFsdWU6IHRleHQsXG4gICAgdHJpZ2dlck9wZW46IHRyaWdnZXJPcGVuLFxuICAgIGZvcndhcmRLZXlEb3duOiBmb3J3YXJkS2V5RG93bixcbiAgICBpc0NsaWNrT3V0c2lkZTogZnVuY3Rpb24gaXNDbGlja091dHNpZGUodGFyZ2V0KSB7XG4gICAgICByZXR1cm4gIWVsZW1lbnRzQ29udGFpbnMoW3BhbmVsRGl2UmVmLmN1cnJlbnQsIGlucHV0RGl2UmVmLmN1cnJlbnRdLCB0YXJnZXQpO1xuICAgIH0sXG4gICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkge1xuICAgICAgaWYgKGRpc2FibGVkRGF0ZSAmJiBkaXNhYmxlZERhdGUoc2VsZWN0ZWRWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB0cmlnZ2VyQ2hhbmdlKHNlbGVjdGVkVmFsdWUpO1xuICAgICAgdHJpZ2dlck9wZW4oZmFsc2UpO1xuICAgICAgcmVzZXRUZXh0KCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiBvbkNhbmNlbCgpIHtcbiAgICAgIHRyaWdnZXJPcGVuKGZhbHNlKTtcbiAgICAgIHNldFNlbGVjdGVkVmFsdWUobWVyZ2VkVmFsdWUpO1xuICAgICAgcmVzZXRUZXh0KCk7XG4gICAgfSxcbiAgICBvbktleURvd246IGZ1bmN0aW9uIG9uS2V5RG93bihlLCBwcmV2ZW50RGVmYXVsdCkge1xuICAgICAgX29uS2V5RG93biA9PT0gbnVsbCB8fCBfb25LZXlEb3duID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb25LZXlEb3duKGUsIHByZXZlbnREZWZhdWx0KTtcbiAgICB9LFxuICAgIG9uRm9jdXM6IG9uRm9jdXMsXG4gICAgb25CbHVyOiBvbkJsdXJcbiAgfSksXG4gICAgICBfdXNlUGlja2VySW5wdXQyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVBpY2tlcklucHV0LCAyKSxcbiAgICAgIGlucHV0UHJvcHMgPSBfdXNlUGlja2VySW5wdXQyWzBdLFxuICAgICAgX3VzZVBpY2tlcklucHV0MiQgPSBfdXNlUGlja2VySW5wdXQyWzFdLFxuICAgICAgZm9jdXNlZCA9IF91c2VQaWNrZXJJbnB1dDIkLmZvY3VzZWQsXG4gICAgICB0eXBpbmcgPSBfdXNlUGlja2VySW5wdXQyJC50eXBpbmc7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFN5bmMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIENsb3NlIHNob3VsZCBzeW5jIGJhY2sgd2l0aCB0ZXh0IHZhbHVlXG5cblxuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghbWVyZ2VkT3Blbikge1xuICAgICAgc2V0U2VsZWN0ZWRWYWx1ZShtZXJnZWRWYWx1ZSk7XG5cbiAgICAgIGlmICghdmFsdWVUZXh0cy5sZW5ndGggfHwgdmFsdWVUZXh0c1swXSA9PT0gJycpIHtcbiAgICAgICAgdHJpZ2dlclRleHRDaGFuZ2UoJycpO1xuICAgICAgfSBlbHNlIGlmIChmaXJzdFZhbHVlVGV4dCAhPT0gdGV4dCkge1xuICAgICAgICByZXNldFRleHQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFttZXJnZWRPcGVuLCB2YWx1ZVRleHRzXSk7IC8vIENoYW5nZSBwaWNrZXIgc2hvdWxkIHN5bmMgYmFjayB3aXRoIHRleHQgdmFsdWVcblxuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghbWVyZ2VkT3Blbikge1xuICAgICAgcmVzZXRUZXh0KCk7XG4gICAgfVxuICB9LCBbcGlja2VyXSk7IC8vIFN5bmMgaW5uZXJWYWx1ZSB3aXRoIGNvbnRyb2wgbW9kZVxuXG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgLy8gU3luYyBzZWxlY3QgdmFsdWVcbiAgICBzZXRTZWxlY3RlZFZhbHVlKG1lcmdlZFZhbHVlKTtcbiAgfSwgW21lcmdlZFZhbHVlXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUHJpdmF0ZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgaWYgKHBpY2tlclJlZikge1xuICAgIHBpY2tlclJlZi5jdXJyZW50ID0ge1xuICAgICAgZm9jdXM6IGZ1bmN0aW9uIGZvY3VzKCkge1xuICAgICAgICBpZiAoaW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgICAgIGlucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoKSB7XG4gICAgICAgIGlmIChpbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgaW5wdXRSZWYuY3VycmVudC5ibHVyKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgdmFyIF91c2VIb3ZlclZhbHVlID0gdXNlSG92ZXJWYWx1ZSh0ZXh0LCB7XG4gICAgZm9ybWF0TGlzdDogZm9ybWF0TGlzdCxcbiAgICBnZW5lcmF0ZUNvbmZpZzogZ2VuZXJhdGVDb25maWcsXG4gICAgbG9jYWxlOiBsb2NhbGVcbiAgfSksXG4gICAgICBfdXNlSG92ZXJWYWx1ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlSG92ZXJWYWx1ZSwgMyksXG4gICAgICBob3ZlclZhbHVlID0gX3VzZUhvdmVyVmFsdWUyWzBdLFxuICAgICAgb25FbnRlciA9IF91c2VIb3ZlclZhbHVlMlsxXSxcbiAgICAgIG9uTGVhdmUgPSBfdXNlSG92ZXJWYWx1ZTJbMl07IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFBhbmVsID09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgcGFuZWxQcm9wcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpLCB7fSwge1xuICAgIGNsYXNzTmFtZTogdW5kZWZpbmVkLFxuICAgIHN0eWxlOiB1bmRlZmluZWQsXG4gICAgcGlja2VyVmFsdWU6IHVuZGVmaW5lZCxcbiAgICBvblBpY2tlclZhbHVlQ2hhbmdlOiB1bmRlZmluZWQsXG4gICAgb25DaGFuZ2U6IG51bGxcbiAgfSk7XG5cbiAgdmFyIHBhbmVsTm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBpY2tlclBhbmVsLCBfZXh0ZW5kcyh7fSwgcGFuZWxQcm9wcywge1xuICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZyxcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoX2RlZmluZVByb3BlcnR5KHt9LCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXBhbmVsLWZvY3VzZWRcIiksICF0eXBpbmcpKSxcbiAgICB2YWx1ZTogc2VsZWN0ZWRWYWx1ZSxcbiAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICB0YWJJbmRleDogLTEsXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KGRhdGUpIHtcbiAgICAgIF9vblNlbGVjdCA9PT0gbnVsbCB8fCBfb25TZWxlY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vblNlbGVjdChkYXRlKTtcbiAgICAgIHNldFNlbGVjdGVkVmFsdWUoZGF0ZSk7XG4gICAgfSxcbiAgICBkaXJlY3Rpb246IGRpcmVjdGlvbixcbiAgICBvblBhbmVsQ2hhbmdlOiBmdW5jdGlvbiBvblBhbmVsQ2hhbmdlKHZpZXdEYXRlLCBtb2RlKSB7XG4gICAgICB2YXIgb25QYW5lbENoYW5nZSA9IHByb3BzLm9uUGFuZWxDaGFuZ2U7XG4gICAgICBvbkxlYXZlKHRydWUpO1xuICAgICAgb25QYW5lbENoYW5nZSA9PT0gbnVsbCB8fCBvblBhbmVsQ2hhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblBhbmVsQ2hhbmdlKHZpZXdEYXRlLCBtb2RlKTtcbiAgICB9XG4gIH0pKTtcblxuICBpZiAocGFuZWxSZW5kZXIpIHtcbiAgICBwYW5lbE5vZGUgPSBwYW5lbFJlbmRlcihwYW5lbE5vZGUpO1xuICB9XG5cbiAgdmFyIHBhbmVsID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1wYW5lbC1jb250YWluZXJcIiksXG4gICAgb25Nb3VzZURvd246IGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sIHBhbmVsTm9kZSk7XG4gIHZhciBzdWZmaXhOb2RlO1xuXG4gIGlmIChzdWZmaXhJY29uKSB7XG4gICAgc3VmZml4Tm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItc3VmZml4XCIpXG4gICAgfSwgc3VmZml4SWNvbik7XG4gIH1cblxuICB2YXIgY2xlYXJOb2RlO1xuXG4gIGlmIChhbGxvd0NsZWFyICYmIG1lcmdlZFZhbHVlICYmICFkaXNhYmxlZCkge1xuICAgIGNsZWFyTm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9LFxuICAgICAgb25Nb3VzZVVwOiBmdW5jdGlvbiBvbk1vdXNlVXAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRyaWdnZXJDaGFuZ2UobnVsbCk7XG4gICAgICAgIHRyaWdnZXJPcGVuKGZhbHNlKTtcbiAgICAgIH0sXG4gICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItY2xlYXJcIiksXG4gICAgICByb2xlOiBcImJ1dHRvblwiXG4gICAgfSwgY2xlYXJJY29uIHx8IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItY2xlYXItYnRuXCIpXG4gICAgfSkpO1xuICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gV2FybmluZyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHdhcm5pbmcoIWRlZmF1bHRPcGVuVmFsdWUsICdgZGVmYXVsdE9wZW5WYWx1ZWAgbWF5IGNvbmZ1c2UgdXNlciBmb3IgdGhlIGN1cnJlbnQgdmFsdWUgc3RhdHVzLiBQbGVhc2UgdXNlIGBkZWZhdWx0VmFsdWVgIGluc3RlYWQuJyk7XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBSZXR1cm4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBvbkNvbnRleHRTZWxlY3QgPSBmdW5jdGlvbiBvbkNvbnRleHRTZWxlY3QoZGF0ZSwgdHlwZSkge1xuICAgIGlmICh0eXBlID09PSAnc3VibWl0JyB8fCB0eXBlICE9PSAna2V5JyAmJiAhbmVlZENvbmZpcm1CdXR0b24pIHtcbiAgICAgIC8vIHRyaWdnZXJDaGFuZ2Ugd2lsbCBhbHNvIHVwZGF0ZSBzZWxlY3RlZCB2YWx1ZXNcbiAgICAgIHRyaWdnZXJDaGFuZ2UoZGF0ZSk7XG4gICAgICB0cmlnZ2VyT3BlbihmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBwb3B1cFBsYWNlbWVudCA9IGRpcmVjdGlvbiA9PT0gJ3J0bCcgPyAnYm90dG9tUmlnaHQnIDogJ2JvdHRvbUxlZnQnO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGFuZWxDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHtcbiAgICAgIG9wZXJhdGlvblJlZjogb3BlcmF0aW9uUmVmLFxuICAgICAgaGlkZUhlYWRlcjogcGlja2VyID09PSAndGltZScsXG4gICAgICBwYW5lbFJlZjogcGFuZWxEaXZSZWYsXG4gICAgICBvblNlbGVjdDogb25Db250ZXh0U2VsZWN0LFxuICAgICAgb3BlbjogbWVyZ2VkT3BlbixcbiAgICAgIGRlZmF1bHRPcGVuVmFsdWU6IGRlZmF1bHRPcGVuVmFsdWUsXG4gICAgICBvbkRhdGVNb3VzZUVudGVyOiBvbkVudGVyLFxuICAgICAgb25EYXRlTW91c2VMZWF2ZTogb25MZWF2ZVxuICAgIH1cbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGlja2VyVHJpZ2dlciwge1xuICAgIHZpc2libGU6IG1lcmdlZE9wZW4sXG4gICAgcG9wdXBFbGVtZW50OiBwYW5lbCxcbiAgICBwb3B1cFN0eWxlOiBwb3B1cFN0eWxlLFxuICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgIGRyb3Bkb3duQ2xhc3NOYW1lOiBkcm9wZG93bkNsYXNzTmFtZSxcbiAgICBkcm9wZG93bkFsaWduOiBkcm9wZG93bkFsaWduLFxuICAgIGdldFBvcHVwQ29udGFpbmVyOiBnZXRQb3B1cENvbnRhaW5lcixcbiAgICB0cmFuc2l0aW9uTmFtZTogdHJhbnNpdGlvbk5hbWUsXG4gICAgcG9wdXBQbGFjZW1lbnQ6IHBvcHVwUGxhY2VtZW50LFxuICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMocHJlZml4Q2xzLCBjbGFzc05hbWUsIChfY2xhc3NOYW1lczIgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzMiwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1kaXNhYmxlZFwiKSwgZGlzYWJsZWQpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMyLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWZvY3VzZWRcIiksIGZvY3VzZWQpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMyLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXJ0bFwiKSwgZGlyZWN0aW9uID09PSAncnRsJyksIF9jbGFzc05hbWVzMikpLFxuICAgIHN0eWxlOiBzdHlsZSxcbiAgICBvbk1vdXNlRG93bjogb25Nb3VzZURvd24sXG4gICAgb25Nb3VzZVVwOiBvbkludGVybmFsTW91c2VVcCxcbiAgICBvbk1vdXNlRW50ZXI6IG9uTW91c2VFbnRlcixcbiAgICBvbk1vdXNlTGVhdmU6IG9uTW91c2VMZWF2ZSxcbiAgICBvbkNvbnRleHRNZW51OiBvbkNvbnRleHRNZW51LFxuICAgIG9uQ2xpY2s6IG9uQ2xpY2tcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWlucHV0XCIpLCBfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaW5wdXQtcGxhY2Vob2xkZXJcIiksICEhaG92ZXJWYWx1ZSkpLFxuICAgIHJlZjogaW5wdXREaXZSZWZcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBfZXh0ZW5kcyh7XG4gICAgaWQ6IGlkLFxuICAgIHRhYkluZGV4OiB0YWJJbmRleCxcbiAgICBkaXNhYmxlZDogZGlzYWJsZWQsXG4gICAgcmVhZE9ubHk6IGlucHV0UmVhZE9ubHkgfHwgdHlwZW9mIGZvcm1hdExpc3RbMF0gPT09ICdmdW5jdGlvbicgfHwgIXR5cGluZyxcbiAgICB2YWx1ZTogaG92ZXJWYWx1ZSB8fCB0ZXh0LFxuICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICB0cmlnZ2VyVGV4dENoYW5nZShlLnRhcmdldC52YWx1ZSk7XG4gICAgfSxcbiAgICBhdXRvRm9jdXM6IGF1dG9Gb2N1cyxcbiAgICBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsXG4gICAgcmVmOiBpbnB1dFJlZixcbiAgICB0aXRsZTogdGV4dFxuICB9LCBpbnB1dFByb3BzLCB7XG4gICAgc2l6ZTogZ2V0SW5wdXRTaXplKHBpY2tlciwgZm9ybWF0TGlzdFswXSwgZ2VuZXJhdGVDb25maWcpXG4gIH0sIGdldERhdGFPckFyaWFQcm9wcyhwcm9wcyksIHtcbiAgICBhdXRvQ29tcGxldGU6IGF1dG9Db21wbGV0ZVxuICB9KSksIHN1ZmZpeE5vZGUsIGNsZWFyTm9kZSkpKSk7XG59IC8vIFdyYXAgd2l0aCBjbGFzcyBjb21wb25lbnQgdG8gZW5hYmxlIHBhc3MgZ2VuZXJpYyB3aXRoIGluc3RhbmNlIG1ldGhvZFxuXG5cbnZhciBQaWNrZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFBpY2tlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihQaWNrZXIpO1xuXG4gIGZ1bmN0aW9uIFBpY2tlcigpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGlja2VyKTtcblxuICAgIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgX3RoaXMucGlja2VyUmVmID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZVJlZigpO1xuXG4gICAgX3RoaXMuZm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX3RoaXMucGlja2VyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgX3RoaXMucGlja2VyUmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMuYmx1ciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfdGhpcy5waWNrZXJSZWYuY3VycmVudCkge1xuICAgICAgICBfdGhpcy5waWNrZXJSZWYuY3VycmVudC5ibHVyKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQaWNrZXIsIFt7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSW5uZXJQaWNrZXIsIF9leHRlbmRzKHt9LCB0aGlzLnByb3BzLCB7XG4gICAgICAgIHBpY2tlclJlZjogdGhpcy5waWNrZXJSZWZcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUGlja2VyO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5leHBvcnQgZGVmYXVsdCBQaWNrZXI7IiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfdHlwZW9mIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2ZcIjtcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuXG4vKipcbiAqIExvZ2ljOlxuICogIFdoZW4gYG1vZGVgID09PSBgcGlja2VyYCxcbiAqICBjbGljayB3aWxsIHRyaWdnZXIgYG9uU2VsZWN0YCAoaWYgdmFsdWUgY2hhbmdlZCB0cmlnZ2VyIGBvbkNoYW5nZWAgYWxzbykuXG4gKiAgUGFuZWwgY2hhbmdlIHdpbGwgbm90IHRyaWdnZXIgYG9uU2VsZWN0YCBidXQgdHJpZ2dlciBgb25QYW5lbENoYW5nZWBcbiAqL1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgS2V5Q29kZSBmcm9tIFwicmMtdXRpbC9lcy9LZXlDb2RlXCI7XG5pbXBvcnQgd2FybmluZyBmcm9tIFwicmMtdXRpbC9lcy93YXJuaW5nXCI7XG5pbXBvcnQgdXNlTWVyZ2VkU3RhdGUgZnJvbSBcInJjLXV0aWwvZXMvaG9va3MvdXNlTWVyZ2VkU3RhdGVcIjtcbmltcG9ydCBUaW1lUGFuZWwgZnJvbSAnLi9wYW5lbHMvVGltZVBhbmVsJztcbmltcG9ydCBEYXRldGltZVBhbmVsIGZyb20gJy4vcGFuZWxzL0RhdGV0aW1lUGFuZWwnO1xuaW1wb3J0IERhdGVQYW5lbCBmcm9tICcuL3BhbmVscy9EYXRlUGFuZWwnO1xuaW1wb3J0IFdlZWtQYW5lbCBmcm9tICcuL3BhbmVscy9XZWVrUGFuZWwnO1xuaW1wb3J0IE1vbnRoUGFuZWwgZnJvbSAnLi9wYW5lbHMvTW9udGhQYW5lbCc7XG5pbXBvcnQgUXVhcnRlclBhbmVsIGZyb20gJy4vcGFuZWxzL1F1YXJ0ZXJQYW5lbCc7XG5pbXBvcnQgWWVhclBhbmVsIGZyb20gJy4vcGFuZWxzL1llYXJQYW5lbCc7XG5pbXBvcnQgRGVjYWRlUGFuZWwgZnJvbSAnLi9wYW5lbHMvRGVjYWRlUGFuZWwnO1xuaW1wb3J0IHsgaXNFcXVhbCB9IGZyb20gJy4vdXRpbHMvZGF0ZVV0aWwnO1xuaW1wb3J0IFBhbmVsQ29udGV4dCBmcm9tICcuL1BhbmVsQ29udGV4dCc7XG5pbXBvcnQgeyBQaWNrZXJNb2RlTWFwIH0gZnJvbSAnLi91dGlscy91aVV0aWwnO1xuaW1wb3J0IFJhbmdlQ29udGV4dCBmcm9tICcuL1JhbmdlQ29udGV4dCc7XG5pbXBvcnQgZ2V0RXh0cmFGb290ZXIgZnJvbSAnLi91dGlscy9nZXRFeHRyYUZvb3Rlcic7XG5pbXBvcnQgZ2V0UmFuZ2VzIGZyb20gJy4vdXRpbHMvZ2V0UmFuZ2VzJztcbmltcG9ydCB7IGdldExvd2VyQm91bmRUaW1lLCBzZXREYXRlVGltZSwgc2V0VGltZSB9IGZyb20gJy4vdXRpbHMvdGltZVV0aWwnO1xuXG5mdW5jdGlvbiBQaWNrZXJQYW5lbChwcm9wcykge1xuICB2YXIgX2NsYXNzTmFtZXM7XG5cbiAgdmFyIF9wcm9wcyRwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBwcmVmaXhDbHMgPSBfcHJvcHMkcHJlZml4Q2xzID09PSB2b2lkIDAgPyAncmMtcGlja2VyJyA6IF9wcm9wcyRwcmVmaXhDbHMsXG4gICAgICBjbGFzc05hbWUgPSBwcm9wcy5jbGFzc05hbWUsXG4gICAgICBzdHlsZSA9IHByb3BzLnN0eWxlLFxuICAgICAgbG9jYWxlID0gcHJvcHMubG9jYWxlLFxuICAgICAgZ2VuZXJhdGVDb25maWcgPSBwcm9wcy5nZW5lcmF0ZUNvbmZpZyxcbiAgICAgIHZhbHVlID0gcHJvcHMudmFsdWUsXG4gICAgICBkZWZhdWx0VmFsdWUgPSBwcm9wcy5kZWZhdWx0VmFsdWUsXG4gICAgICBwaWNrZXJWYWx1ZSA9IHByb3BzLnBpY2tlclZhbHVlLFxuICAgICAgZGVmYXVsdFBpY2tlclZhbHVlID0gcHJvcHMuZGVmYXVsdFBpY2tlclZhbHVlLFxuICAgICAgZGlzYWJsZWREYXRlID0gcHJvcHMuZGlzYWJsZWREYXRlLFxuICAgICAgbW9kZSA9IHByb3BzLm1vZGUsXG4gICAgICBfcHJvcHMkcGlja2VyID0gcHJvcHMucGlja2VyLFxuICAgICAgcGlja2VyID0gX3Byb3BzJHBpY2tlciA9PT0gdm9pZCAwID8gJ2RhdGUnIDogX3Byb3BzJHBpY2tlcixcbiAgICAgIF9wcm9wcyR0YWJJbmRleCA9IHByb3BzLnRhYkluZGV4LFxuICAgICAgdGFiSW5kZXggPSBfcHJvcHMkdGFiSW5kZXggPT09IHZvaWQgMCA/IDAgOiBfcHJvcHMkdGFiSW5kZXgsXG4gICAgICBzaG93Tm93ID0gcHJvcHMuc2hvd05vdyxcbiAgICAgIHNob3dUaW1lID0gcHJvcHMuc2hvd1RpbWUsXG4gICAgICBzaG93VG9kYXkgPSBwcm9wcy5zaG93VG9kYXksXG4gICAgICByZW5kZXJFeHRyYUZvb3RlciA9IHByb3BzLnJlbmRlckV4dHJhRm9vdGVyLFxuICAgICAgaGlkZUhlYWRlciA9IHByb3BzLmhpZGVIZWFkZXIsXG4gICAgICBvblNlbGVjdCA9IHByb3BzLm9uU2VsZWN0LFxuICAgICAgb25DaGFuZ2UgPSBwcm9wcy5vbkNoYW5nZSxcbiAgICAgIG9uUGFuZWxDaGFuZ2UgPSBwcm9wcy5vblBhbmVsQ2hhbmdlLFxuICAgICAgb25Nb3VzZURvd24gPSBwcm9wcy5vbk1vdXNlRG93bixcbiAgICAgIG9uUGlja2VyVmFsdWVDaGFuZ2UgPSBwcm9wcy5vblBpY2tlclZhbHVlQ2hhbmdlLFxuICAgICAgX29uT2sgPSBwcm9wcy5vbk9rLFxuICAgICAgY29tcG9uZW50cyA9IHByb3BzLmNvbXBvbmVudHMsXG4gICAgICBkaXJlY3Rpb24gPSBwcm9wcy5kaXJlY3Rpb24sXG4gICAgICBfcHJvcHMkaG91clN0ZXAgPSBwcm9wcy5ob3VyU3RlcCxcbiAgICAgIGhvdXJTdGVwID0gX3Byb3BzJGhvdXJTdGVwID09PSB2b2lkIDAgPyAxIDogX3Byb3BzJGhvdXJTdGVwLFxuICAgICAgX3Byb3BzJG1pbnV0ZVN0ZXAgPSBwcm9wcy5taW51dGVTdGVwLFxuICAgICAgbWludXRlU3RlcCA9IF9wcm9wcyRtaW51dGVTdGVwID09PSB2b2lkIDAgPyAxIDogX3Byb3BzJG1pbnV0ZVN0ZXAsXG4gICAgICBfcHJvcHMkc2Vjb25kU3RlcCA9IHByb3BzLnNlY29uZFN0ZXAsXG4gICAgICBzZWNvbmRTdGVwID0gX3Byb3BzJHNlY29uZFN0ZXAgPT09IHZvaWQgMCA/IDEgOiBfcHJvcHMkc2Vjb25kU3RlcDtcbiAgdmFyIG5lZWRDb25maXJtQnV0dG9uID0gcGlja2VyID09PSAnZGF0ZScgJiYgISFzaG93VGltZSB8fCBwaWNrZXIgPT09ICd0aW1lJztcbiAgdmFyIGlzSG91clN0ZXBWYWxpZCA9IDI0ICUgaG91clN0ZXAgPT09IDA7XG4gIHZhciBpc01pbnV0ZVN0ZXBWYWxpZCA9IDYwICUgbWludXRlU3RlcCA9PT0gMDtcbiAgdmFyIGlzU2Vjb25kU3RlcFZhbGlkID0gNjAgJSBzZWNvbmRTdGVwID09PSAwO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgd2FybmluZyghdmFsdWUgfHwgZ2VuZXJhdGVDb25maWcuaXNWYWxpZGF0ZSh2YWx1ZSksICdJbnZhbGlkYXRlIGRhdGUgcGFzcyB0byBgdmFsdWVgLicpO1xuICAgIHdhcm5pbmcoIXZhbHVlIHx8IGdlbmVyYXRlQ29uZmlnLmlzVmFsaWRhdGUodmFsdWUpLCAnSW52YWxpZGF0ZSBkYXRlIHBhc3MgdG8gYGRlZmF1bHRWYWx1ZWAuJyk7XG4gICAgd2FybmluZyhpc0hvdXJTdGVwVmFsaWQsIFwiYGhvdXJTdGVwYCBcIi5jb25jYXQoaG91clN0ZXAsIFwiIGlzIGludmFsaWQuIEl0IHNob3VsZCBiZSBhIGZhY3RvciBvZiAyNC5cIikpO1xuICAgIHdhcm5pbmcoaXNNaW51dGVTdGVwVmFsaWQsIFwiYG1pbnV0ZVN0ZXBgIFwiLmNvbmNhdChtaW51dGVTdGVwLCBcIiBpcyBpbnZhbGlkLiBJdCBzaG91bGQgYmUgYSBmYWN0b3Igb2YgNjAuXCIpKTtcbiAgICB3YXJuaW5nKGlzU2Vjb25kU3RlcFZhbGlkLCBcImBzZWNvbmRTdGVwYCBcIi5jb25jYXQoc2Vjb25kU3RlcCwgXCIgaXMgaW52YWxpZC4gSXQgc2hvdWxkIGJlIGEgZmFjdG9yIG9mIDYwLlwiKSk7XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBTdGF0ZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIHBhbmVsQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUGFuZWxDb250ZXh0KTtcbiAgdmFyIG9wZXJhdGlvblJlZiA9IHBhbmVsQ29udGV4dC5vcGVyYXRpb25SZWYsXG4gICAgICBwYW5lbERpdlJlZiA9IHBhbmVsQ29udGV4dC5wYW5lbFJlZixcbiAgICAgIG9uQ29udGV4dFNlbGVjdCA9IHBhbmVsQ29udGV4dC5vblNlbGVjdCxcbiAgICAgIGhpZGVSYW5nZXMgPSBwYW5lbENvbnRleHQuaGlkZVJhbmdlcyxcbiAgICAgIGRlZmF1bHRPcGVuVmFsdWUgPSBwYW5lbENvbnRleHQuZGVmYXVsdE9wZW5WYWx1ZTtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFJhbmdlQ29udGV4dCksXG4gICAgICBpblJhbmdlID0gX1JlYWN0JHVzZUNvbnRleHQuaW5SYW5nZSxcbiAgICAgIHBhbmVsUG9zaXRpb24gPSBfUmVhY3QkdXNlQ29udGV4dC5wYW5lbFBvc2l0aW9uLFxuICAgICAgcmFuZ2VkVmFsdWUgPSBfUmVhY3QkdXNlQ29udGV4dC5yYW5nZWRWYWx1ZSxcbiAgICAgIGhvdmVyUmFuZ2VkVmFsdWUgPSBfUmVhY3QkdXNlQ29udGV4dC5ob3ZlclJhbmdlZFZhbHVlO1xuXG4gIHZhciBwYW5lbFJlZiA9IFJlYWN0LnVzZVJlZih7fSk7IC8vIEhhbmRsZSBpbml0IGxvZ2ljXG5cbiAgdmFyIGluaXRSZWYgPSBSZWFjdC51c2VSZWYodHJ1ZSk7IC8vIFZhbHVlXG5cbiAgdmFyIF91c2VNZXJnZWRTdGF0ZSA9IHVzZU1lcmdlZFN0YXRlKG51bGwsIHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWUsXG4gICAgcG9zdFN0YXRlOiBmdW5jdGlvbiBwb3N0U3RhdGUodmFsKSB7XG4gICAgICBpZiAoIXZhbCAmJiBkZWZhdWx0T3BlblZhbHVlICYmIHBpY2tlciA9PT0gJ3RpbWUnKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0T3BlblZhbHVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgfSksXG4gICAgICBfdXNlTWVyZ2VkU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZU1lcmdlZFN0YXRlLCAyKSxcbiAgICAgIG1lcmdlZFZhbHVlID0gX3VzZU1lcmdlZFN0YXRlMlswXSxcbiAgICAgIHNldElubmVyVmFsdWUgPSBfdXNlTWVyZ2VkU3RhdGUyWzFdOyAvLyBWaWV3IGRhdGUgY29udHJvbFxuXG5cbiAgdmFyIF91c2VNZXJnZWRTdGF0ZTMgPSB1c2VNZXJnZWRTdGF0ZShudWxsLCB7XG4gICAgdmFsdWU6IHBpY2tlclZhbHVlLFxuICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdFBpY2tlclZhbHVlIHx8IG1lcmdlZFZhbHVlLFxuICAgIHBvc3RTdGF0ZTogZnVuY3Rpb24gcG9zdFN0YXRlKGRhdGUpIHtcbiAgICAgIHZhciBub3cgPSBnZW5lcmF0ZUNvbmZpZy5nZXROb3coKTtcbiAgICAgIGlmICghZGF0ZSkgcmV0dXJuIG5vdzsgLy8gV2hlbiB2YWx1ZSBpcyBudWxsIGFuZCBzZXQgc2hvd1RpbWVcblxuICAgICAgaWYgKCFtZXJnZWRWYWx1ZSAmJiBzaG93VGltZSkge1xuICAgICAgICBpZiAoX3R5cGVvZihzaG93VGltZSkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgcmV0dXJuIHNldERhdGVUaW1lKGdlbmVyYXRlQ29uZmlnLCBkYXRlLCBzaG93VGltZS5kZWZhdWx0VmFsdWUgfHwgbm93KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gc2V0RGF0ZVRpbWUoZ2VuZXJhdGVDb25maWcsIGRhdGUsIGRlZmF1bHRWYWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2V0RGF0ZVRpbWUoZ2VuZXJhdGVDb25maWcsIGRhdGUsIG5vdyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRlO1xuICAgIH1cbiAgfSksXG4gICAgICBfdXNlTWVyZ2VkU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZU1lcmdlZFN0YXRlMywgMiksXG4gICAgICB2aWV3RGF0ZSA9IF91c2VNZXJnZWRTdGF0ZTRbMF0sXG4gICAgICBzZXRJbm5lclZpZXdEYXRlID0gX3VzZU1lcmdlZFN0YXRlNFsxXTtcblxuICB2YXIgc2V0Vmlld0RhdGUgPSBmdW5jdGlvbiBzZXRWaWV3RGF0ZShkYXRlKSB7XG4gICAgc2V0SW5uZXJWaWV3RGF0ZShkYXRlKTtcblxuICAgIGlmIChvblBpY2tlclZhbHVlQ2hhbmdlKSB7XG4gICAgICBvblBpY2tlclZhbHVlQ2hhbmdlKGRhdGUpO1xuICAgIH1cbiAgfTsgLy8gUGFuZWwgY29udHJvbFxuXG5cbiAgdmFyIGdldEludGVybmFsTmV4dE1vZGUgPSBmdW5jdGlvbiBnZXRJbnRlcm5hbE5leHRNb2RlKG5leHRNb2RlKSB7XG4gICAgdmFyIGdldE5leHRNb2RlID0gUGlja2VyTW9kZU1hcFtwaWNrZXJdO1xuXG4gICAgaWYgKGdldE5leHRNb2RlKSB7XG4gICAgICByZXR1cm4gZ2V0TmV4dE1vZGUobmV4dE1vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXh0TW9kZTtcbiAgfTsgLy8gU2F2ZSBwYW5lbCBpcyBjaGFuZ2VkIGZyb20gd2hpY2ggcGFuZWxcblxuXG4gIHZhciBfdXNlTWVyZ2VkU3RhdGU1ID0gdXNlTWVyZ2VkU3RhdGUoZnVuY3Rpb24gKCkge1xuICAgIGlmIChwaWNrZXIgPT09ICd0aW1lJykge1xuICAgICAgcmV0dXJuICd0aW1lJztcbiAgICB9XG5cbiAgICByZXR1cm4gZ2V0SW50ZXJuYWxOZXh0TW9kZSgnZGF0ZScpO1xuICB9LCB7XG4gICAgdmFsdWU6IG1vZGVcbiAgfSksXG4gICAgICBfdXNlTWVyZ2VkU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZU1lcmdlZFN0YXRlNSwgMiksXG4gICAgICBtZXJnZWRNb2RlID0gX3VzZU1lcmdlZFN0YXRlNlswXSxcbiAgICAgIHNldElubmVyTW9kZSA9IF91c2VNZXJnZWRTdGF0ZTZbMV07XG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBzZXRJbm5lck1vZGUocGlja2VyKTtcbiAgfSwgW3BpY2tlcl0pO1xuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGUgPSBSZWFjdC51c2VTdGF0ZShmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG1lcmdlZE1vZGU7XG4gIH0pLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksXG4gICAgICBzb3VyY2VNb2RlID0gX1JlYWN0JHVzZVN0YXRlMlswXSxcbiAgICAgIHNldFNvdXJjZU1vZGUgPSBfUmVhY3QkdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBvbkludGVybmFsUGFuZWxDaGFuZ2UgPSBmdW5jdGlvbiBvbkludGVybmFsUGFuZWxDaGFuZ2UobmV3TW9kZSwgdmlld1ZhbHVlKSB7XG4gICAgdmFyIG5leHRNb2RlID0gZ2V0SW50ZXJuYWxOZXh0TW9kZShuZXdNb2RlIHx8IG1lcmdlZE1vZGUpO1xuICAgIHNldFNvdXJjZU1vZGUobWVyZ2VkTW9kZSk7XG4gICAgc2V0SW5uZXJNb2RlKG5leHRNb2RlKTtcblxuICAgIGlmIChvblBhbmVsQ2hhbmdlICYmIChtZXJnZWRNb2RlICE9PSBuZXh0TW9kZSB8fCBpc0VxdWFsKGdlbmVyYXRlQ29uZmlnLCB2aWV3RGF0ZSwgdmlld0RhdGUpKSkge1xuICAgICAgb25QYW5lbENoYW5nZSh2aWV3VmFsdWUsIG5leHRNb2RlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHRyaWdnZXJTZWxlY3QgPSBmdW5jdGlvbiB0cmlnZ2VyU2VsZWN0KGRhdGUsIHR5cGUpIHtcbiAgICB2YXIgZm9yY2VUcmlnZ2VyU2VsZWN0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTtcblxuICAgIGlmIChtZXJnZWRNb2RlID09PSBwaWNrZXIgfHwgZm9yY2VUcmlnZ2VyU2VsZWN0KSB7XG4gICAgICBzZXRJbm5lclZhbHVlKGRhdGUpO1xuXG4gICAgICBpZiAob25TZWxlY3QpIHtcbiAgICAgICAgb25TZWxlY3QoZGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvbkNvbnRleHRTZWxlY3QpIHtcbiAgICAgICAgb25Db250ZXh0U2VsZWN0KGRhdGUsIHR5cGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAob25DaGFuZ2UgJiYgIWlzRXF1YWwoZ2VuZXJhdGVDb25maWcsIGRhdGUsIG1lcmdlZFZhbHVlKSAmJiAhKGRpc2FibGVkRGF0ZSA9PT0gbnVsbCB8fCBkaXNhYmxlZERhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRpc2FibGVkRGF0ZShkYXRlKSkpIHtcbiAgICAgICAgb25DaGFuZ2UoZGF0ZSk7XG4gICAgICB9XG4gICAgfVxuICB9OyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IEludGVyYWN0aXZlID09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgb25JbnRlcm5hbEtleURvd24gPSBmdW5jdGlvbiBvbkludGVybmFsS2V5RG93bihlKSB7XG4gICAgaWYgKHBhbmVsUmVmLmN1cnJlbnQgJiYgcGFuZWxSZWYuY3VycmVudC5vbktleURvd24pIHtcbiAgICAgIGlmIChbS2V5Q29kZS5MRUZULCBLZXlDb2RlLlJJR0hULCBLZXlDb2RlLlVQLCBLZXlDb2RlLkRPV04sIEtleUNvZGUuUEFHRV9VUCwgS2V5Q29kZS5QQUdFX0RPV04sIEtleUNvZGUuRU5URVJdLmluY2x1ZGVzKGUud2hpY2gpKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBhbmVsUmVmLmN1cnJlbnQub25LZXlEb3duKGUpO1xuICAgIH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tbG9uZS1ibG9ja3MgKi9cblxuXG4gICAge1xuICAgICAgd2FybmluZyhmYWxzZSwgJ1BhbmVsIG5vdCBjb3JyZWN0IGhhbmRsZSBrZXlEb3duIGV2ZW50LiBQbGVhc2UgaGVscCB0byBmaXJlIGlzc3VlIGFib3V0IHRoaXMuJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qIGVzbGludC1lbmFibGUgbm8tbG9uZS1ibG9ja3MgKi9cbiAgfTtcblxuICB2YXIgb25JbnRlcm5hbEJsdXIgPSBmdW5jdGlvbiBvbkludGVybmFsQmx1cihlKSB7XG4gICAgaWYgKHBhbmVsUmVmLmN1cnJlbnQgJiYgcGFuZWxSZWYuY3VycmVudC5vbkJsdXIpIHtcbiAgICAgIHBhbmVsUmVmLmN1cnJlbnQub25CbHVyKGUpO1xuICAgIH1cbiAgfTtcblxuICBpZiAob3BlcmF0aW9uUmVmICYmIHBhbmVsUG9zaXRpb24gIT09ICdyaWdodCcpIHtcbiAgICBvcGVyYXRpb25SZWYuY3VycmVudCA9IHtcbiAgICAgIG9uS2V5RG93bjogb25JbnRlcm5hbEtleURvd24sXG4gICAgICBvbkNsb3NlOiBmdW5jdGlvbiBvbkNsb3NlKCkge1xuICAgICAgICBpZiAocGFuZWxSZWYuY3VycmVudCAmJiBwYW5lbFJlZi5jdXJyZW50Lm9uQ2xvc2UpIHtcbiAgICAgICAgICBwYW5lbFJlZi5jdXJyZW50Lm9uQ2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBFZmZlY3QgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodmFsdWUgJiYgIWluaXRSZWYuY3VycmVudCkge1xuICAgICAgc2V0SW5uZXJWaWV3RGF0ZSh2YWx1ZSk7XG4gICAgfVxuICB9LCBbdmFsdWVdKTtcbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpbml0UmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgfSwgW10pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IFBhbmVscyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIHBhbmVsTm9kZTtcblxuICB2YXIgcGlja2VyUHJvcHMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHByb3BzKSwge30sIHtcbiAgICBvcGVyYXRpb25SZWY6IHBhbmVsUmVmLFxuICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgIHZpZXdEYXRlOiB2aWV3RGF0ZSxcbiAgICB2YWx1ZTogbWVyZ2VkVmFsdWUsXG4gICAgb25WaWV3RGF0ZUNoYW5nZTogc2V0Vmlld0RhdGUsXG4gICAgc291cmNlTW9kZTogc291cmNlTW9kZSxcbiAgICBvblBhbmVsQ2hhbmdlOiBvbkludGVybmFsUGFuZWxDaGFuZ2UsXG4gICAgZGlzYWJsZWREYXRlOiBkaXNhYmxlZERhdGVcbiAgfSk7XG5cbiAgZGVsZXRlIHBpY2tlclByb3BzLm9uQ2hhbmdlO1xuICBkZWxldGUgcGlja2VyUHJvcHMub25TZWxlY3Q7XG5cbiAgc3dpdGNoIChtZXJnZWRNb2RlKSB7XG4gICAgY2FzZSAnZGVjYWRlJzpcbiAgICAgIHBhbmVsTm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KERlY2FkZVBhbmVsLCBfZXh0ZW5kcyh7fSwgcGlja2VyUHJvcHMsIHtcbiAgICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KGRhdGUsIHR5cGUpIHtcbiAgICAgICAgICBzZXRWaWV3RGF0ZShkYXRlKTtcbiAgICAgICAgICB0cmlnZ2VyU2VsZWN0KGRhdGUsIHR5cGUpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3llYXInOlxuICAgICAgcGFuZWxOb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoWWVhclBhbmVsLCBfZXh0ZW5kcyh7fSwgcGlja2VyUHJvcHMsIHtcbiAgICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KGRhdGUsIHR5cGUpIHtcbiAgICAgICAgICBzZXRWaWV3RGF0ZShkYXRlKTtcbiAgICAgICAgICB0cmlnZ2VyU2VsZWN0KGRhdGUsIHR5cGUpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgIHBhbmVsTm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1vbnRoUGFuZWwsIF9leHRlbmRzKHt9LCBwaWNrZXJQcm9wcywge1xuICAgICAgICBvblNlbGVjdDogZnVuY3Rpb24gb25TZWxlY3QoZGF0ZSwgdHlwZSkge1xuICAgICAgICAgIHNldFZpZXdEYXRlKGRhdGUpO1xuICAgICAgICAgIHRyaWdnZXJTZWxlY3QoZGF0ZSwgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAncXVhcnRlcic6XG4gICAgICBwYW5lbE5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChRdWFydGVyUGFuZWwsIF9leHRlbmRzKHt9LCBwaWNrZXJQcm9wcywge1xuICAgICAgICBvblNlbGVjdDogZnVuY3Rpb24gb25TZWxlY3QoZGF0ZSwgdHlwZSkge1xuICAgICAgICAgIHNldFZpZXdEYXRlKGRhdGUpO1xuICAgICAgICAgIHRyaWdnZXJTZWxlY3QoZGF0ZSwgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnd2Vlayc6XG4gICAgICBwYW5lbE5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChXZWVrUGFuZWwsIF9leHRlbmRzKHt9LCBwaWNrZXJQcm9wcywge1xuICAgICAgICBvblNlbGVjdDogZnVuY3Rpb24gb25TZWxlY3QoZGF0ZSwgdHlwZSkge1xuICAgICAgICAgIHNldFZpZXdEYXRlKGRhdGUpO1xuICAgICAgICAgIHRyaWdnZXJTZWxlY3QoZGF0ZSwgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAndGltZSc6XG4gICAgICBkZWxldGUgcGlja2VyUHJvcHMuc2hvd1RpbWU7XG4gICAgICBwYW5lbE5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUaW1lUGFuZWwsIF9leHRlbmRzKHt9LCBwaWNrZXJQcm9wcywgX3R5cGVvZihzaG93VGltZSkgPT09ICdvYmplY3QnID8gc2hvd1RpbWUgOiBudWxsLCB7XG4gICAgICAgIG9uU2VsZWN0OiBmdW5jdGlvbiBvblNlbGVjdChkYXRlLCB0eXBlKSB7XG4gICAgICAgICAgc2V0Vmlld0RhdGUoZGF0ZSk7XG4gICAgICAgICAgdHJpZ2dlclNlbGVjdChkYXRlLCB0eXBlKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKHNob3dUaW1lKSB7XG4gICAgICAgIHBhbmVsTm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KERhdGV0aW1lUGFuZWwsIF9leHRlbmRzKHt9LCBwaWNrZXJQcm9wcywge1xuICAgICAgICAgIG9uU2VsZWN0OiBmdW5jdGlvbiBvblNlbGVjdChkYXRlLCB0eXBlKSB7XG4gICAgICAgICAgICBzZXRWaWV3RGF0ZShkYXRlKTtcbiAgICAgICAgICAgIHRyaWdnZXJTZWxlY3QoZGF0ZSwgdHlwZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYW5lbE5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChEYXRlUGFuZWwsIF9leHRlbmRzKHt9LCBwaWNrZXJQcm9wcywge1xuICAgICAgICAgIG9uU2VsZWN0OiBmdW5jdGlvbiBvblNlbGVjdChkYXRlLCB0eXBlKSB7XG4gICAgICAgICAgICBzZXRWaWV3RGF0ZShkYXRlKTtcbiAgICAgICAgICAgIHRyaWdnZXJTZWxlY3QoZGF0ZSwgdHlwZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IEZvb3RlciA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgZXh0cmFGb290ZXI7XG4gIHZhciByYW5nZXNOb2RlO1xuXG4gIHZhciBvbk5vdyA9IGZ1bmN0aW9uIG9uTm93KCkge1xuICAgIHZhciBub3cgPSBnZW5lcmF0ZUNvbmZpZy5nZXROb3coKTtcbiAgICB2YXIgbG93ZXJCb3VuZFRpbWUgPSBnZXRMb3dlckJvdW5kVGltZShnZW5lcmF0ZUNvbmZpZy5nZXRIb3VyKG5vdyksIGdlbmVyYXRlQ29uZmlnLmdldE1pbnV0ZShub3cpLCBnZW5lcmF0ZUNvbmZpZy5nZXRTZWNvbmQobm93KSwgaXNIb3VyU3RlcFZhbGlkID8gaG91clN0ZXAgOiAxLCBpc01pbnV0ZVN0ZXBWYWxpZCA/IG1pbnV0ZVN0ZXAgOiAxLCBpc1NlY29uZFN0ZXBWYWxpZCA/IHNlY29uZFN0ZXAgOiAxKTtcbiAgICB2YXIgYWRqdXN0ZWROb3cgPSBzZXRUaW1lKGdlbmVyYXRlQ29uZmlnLCBub3csIGxvd2VyQm91bmRUaW1lWzBdLCAvLyBob3VyXG4gICAgbG93ZXJCb3VuZFRpbWVbMV0sIC8vIG1pbnV0ZVxuICAgIGxvd2VyQm91bmRUaW1lWzJdKTtcbiAgICB0cmlnZ2VyU2VsZWN0KGFkanVzdGVkTm93LCAnc3VibWl0Jyk7XG4gIH07XG5cbiAgaWYgKCFoaWRlUmFuZ2VzKSB7XG4gICAgZXh0cmFGb290ZXIgPSBnZXRFeHRyYUZvb3RlcihwcmVmaXhDbHMsIG1lcmdlZE1vZGUsIHJlbmRlckV4dHJhRm9vdGVyKTtcbiAgICByYW5nZXNOb2RlID0gZ2V0UmFuZ2VzKHtcbiAgICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgICAgY29tcG9uZW50czogY29tcG9uZW50cyxcbiAgICAgIG5lZWRDb25maXJtQnV0dG9uOiBuZWVkQ29uZmlybUJ1dHRvbixcbiAgICAgIG9rRGlzYWJsZWQ6ICFtZXJnZWRWYWx1ZSB8fCBkaXNhYmxlZERhdGUgJiYgZGlzYWJsZWREYXRlKG1lcmdlZFZhbHVlKSxcbiAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgc2hvd05vdzogc2hvd05vdyxcbiAgICAgIG9uTm93OiBuZWVkQ29uZmlybUJ1dHRvbiAmJiBvbk5vdyxcbiAgICAgIG9uT2s6IGZ1bmN0aW9uIG9uT2soKSB7XG4gICAgICAgIGlmIChtZXJnZWRWYWx1ZSkge1xuICAgICAgICAgIHRyaWdnZXJTZWxlY3QobWVyZ2VkVmFsdWUsICdzdWJtaXQnLCB0cnVlKTtcblxuICAgICAgICAgIGlmIChfb25Paykge1xuICAgICAgICAgICAgX29uT2sobWVyZ2VkVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgdmFyIHRvZGF5Tm9kZTtcblxuICBpZiAoc2hvd1RvZGF5ICYmIG1lcmdlZE1vZGUgPT09ICdkYXRlJyAmJiBwaWNrZXIgPT09ICdkYXRlJyAmJiAhc2hvd1RpbWUpIHtcbiAgICB2YXIgbm93ID0gZ2VuZXJhdGVDb25maWcuZ2V0Tm93KCk7XG4gICAgdmFyIHRvZGF5Q2xzID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi10b2RheS1idG5cIik7XG4gICAgdmFyIGRpc2FibGVkID0gZGlzYWJsZWREYXRlICYmIGRpc2FibGVkRGF0ZShub3cpO1xuICAgIHRvZGF5Tm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYVwiLCB7XG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXModG9kYXlDbHMsIGRpc2FibGVkICYmIFwiXCIuY29uY2F0KHRvZGF5Q2xzLCBcIi1kaXNhYmxlZFwiKSksXG4gICAgICBcImFyaWEtZGlzYWJsZWRcIjogZGlzYWJsZWQsXG4gICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICBpZiAoIWRpc2FibGVkKSB7XG4gICAgICAgICAgdHJpZ2dlclNlbGVjdChub3csICdtb3VzZScsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgbG9jYWxlLnRvZGF5KTtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQYW5lbENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwYW5lbENvbnRleHQpLCB7fSwge1xuICAgICAgbW9kZTogbWVyZ2VkTW9kZSxcbiAgICAgIGhpZGVIZWFkZXI6ICdoaWRlSGVhZGVyJyBpbiBwcm9wcyA/IGhpZGVIZWFkZXIgOiBwYW5lbENvbnRleHQuaGlkZUhlYWRlcixcbiAgICAgIGhpZGVQcmV2QnRuOiBpblJhbmdlICYmIHBhbmVsUG9zaXRpb24gPT09ICdyaWdodCcsXG4gICAgICBoaWRlTmV4dEJ0bjogaW5SYW5nZSAmJiBwYW5lbFBvc2l0aW9uID09PSAnbGVmdCdcbiAgICB9KVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgdGFiSW5kZXg6IHRhYkluZGV4LFxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXBhbmVsXCIpLCBjbGFzc05hbWUsIChfY2xhc3NOYW1lcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItcGFuZWwtaGFzLXJhbmdlXCIpLCByYW5nZWRWYWx1ZSAmJiByYW5nZWRWYWx1ZVswXSAmJiByYW5nZWRWYWx1ZVsxXSksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1wYW5lbC1oYXMtcmFuZ2UtaG92ZXJcIiksIGhvdmVyUmFuZ2VkVmFsdWUgJiYgaG92ZXJSYW5nZWRWYWx1ZVswXSAmJiBob3ZlclJhbmdlZFZhbHVlWzFdKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXBhbmVsLXJ0bFwiKSwgZGlyZWN0aW9uID09PSAncnRsJyksIF9jbGFzc05hbWVzKSksXG4gICAgc3R5bGU6IHN0eWxlLFxuICAgIG9uS2V5RG93bjogb25JbnRlcm5hbEtleURvd24sXG4gICAgb25CbHVyOiBvbkludGVybmFsQmx1cixcbiAgICBvbk1vdXNlRG93bjogb25Nb3VzZURvd24sXG4gICAgcmVmOiBwYW5lbERpdlJlZlxuICB9LCBwYW5lbE5vZGUsIGV4dHJhRm9vdGVyIHx8IHJhbmdlc05vZGUgfHwgdG9kYXlOb2RlID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1mb290ZXJcIilcbiAgfSwgZXh0cmFGb290ZXIsIHJhbmdlc05vZGUsIHRvZGF5Tm9kZSkgOiBudWxsKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBpY2tlclBhbmVsO1xuLyogZXNsaW50LWVuYWJsZSAqLyIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBUcmlnZ2VyIGZyb20gJ3JjLXRyaWdnZXInO1xudmFyIEJVSUxUX0lOX1BMQUNFTUVOVFMgPSB7XG4gIGJvdHRvbUxlZnQ6IHtcbiAgICBwb2ludHM6IFsndGwnLCAnYmwnXSxcbiAgICBvZmZzZXQ6IFswLCA0XSxcbiAgICBvdmVyZmxvdzoge1xuICAgICAgYWRqdXN0WDogMSxcbiAgICAgIGFkanVzdFk6IDFcbiAgICB9XG4gIH0sXG4gIGJvdHRvbVJpZ2h0OiB7XG4gICAgcG9pbnRzOiBbJ3RyJywgJ2JyJ10sXG4gICAgb2Zmc2V0OiBbMCwgNF0sXG4gICAgb3ZlcmZsb3c6IHtcbiAgICAgIGFkanVzdFg6IDEsXG4gICAgICBhZGp1c3RZOiAxXG4gICAgfVxuICB9LFxuICB0b3BMZWZ0OiB7XG4gICAgcG9pbnRzOiBbJ2JsJywgJ3RsJ10sXG4gICAgb2Zmc2V0OiBbMCwgLTRdLFxuICAgIG92ZXJmbG93OiB7XG4gICAgICBhZGp1c3RYOiAwLFxuICAgICAgYWRqdXN0WTogMVxuICAgIH1cbiAgfSxcbiAgdG9wUmlnaHQ6IHtcbiAgICBwb2ludHM6IFsnYnInLCAndHInXSxcbiAgICBvZmZzZXQ6IFswLCAtNF0sXG4gICAgb3ZlcmZsb3c6IHtcbiAgICAgIGFkanVzdFg6IDAsXG4gICAgICBhZGp1c3RZOiAxXG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBQaWNrZXJUcmlnZ2VyKF9yZWYpIHtcbiAgdmFyIF9jbGFzc05hbWVzO1xuXG4gIHZhciBwcmVmaXhDbHMgPSBfcmVmLnByZWZpeENscyxcbiAgICAgIHBvcHVwRWxlbWVudCA9IF9yZWYucG9wdXBFbGVtZW50LFxuICAgICAgcG9wdXBTdHlsZSA9IF9yZWYucG9wdXBTdHlsZSxcbiAgICAgIHZpc2libGUgPSBfcmVmLnZpc2libGUsXG4gICAgICBkcm9wZG93bkNsYXNzTmFtZSA9IF9yZWYuZHJvcGRvd25DbGFzc05hbWUsXG4gICAgICBkcm9wZG93bkFsaWduID0gX3JlZi5kcm9wZG93bkFsaWduLFxuICAgICAgdHJhbnNpdGlvbk5hbWUgPSBfcmVmLnRyYW5zaXRpb25OYW1lLFxuICAgICAgZ2V0UG9wdXBDb250YWluZXIgPSBfcmVmLmdldFBvcHVwQ29udGFpbmVyLFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgcmFuZ2UgPSBfcmVmLnJhbmdlLFxuICAgICAgcG9wdXBQbGFjZW1lbnQgPSBfcmVmLnBvcHVwUGxhY2VtZW50LFxuICAgICAgZGlyZWN0aW9uID0gX3JlZi5kaXJlY3Rpb247XG4gIHZhciBkcm9wZG93blByZWZpeENscyA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItZHJvcGRvd25cIik7XG5cbiAgdmFyIGdldFBvcHVwUGxhY2VtZW50ID0gZnVuY3Rpb24gZ2V0UG9wdXBQbGFjZW1lbnQoKSB7XG4gICAgaWYgKHBvcHVwUGxhY2VtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBwb3B1cFBsYWNlbWVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gZGlyZWN0aW9uID09PSAncnRsJyA/ICdib3R0b21SaWdodCcgOiAnYm90dG9tTGVmdCc7XG4gIH07XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyaWdnZXIsIHtcbiAgICBzaG93QWN0aW9uOiBbXSxcbiAgICBoaWRlQWN0aW9uOiBbXSxcbiAgICBwb3B1cFBsYWNlbWVudDogZ2V0UG9wdXBQbGFjZW1lbnQoKSxcbiAgICBidWlsdGluUGxhY2VtZW50czogQlVJTFRfSU5fUExBQ0VNRU5UUyxcbiAgICBwcmVmaXhDbHM6IGRyb3Bkb3duUHJlZml4Q2xzLFxuICAgIHBvcHVwVHJhbnNpdGlvbk5hbWU6IHRyYW5zaXRpb25OYW1lLFxuICAgIHBvcHVwOiBwb3B1cEVsZW1lbnQsXG4gICAgcG9wdXBBbGlnbjogZHJvcGRvd25BbGlnbixcbiAgICBwb3B1cFZpc2libGU6IHZpc2libGUsXG4gICAgcG9wdXBDbGFzc05hbWU6IGNsYXNzTmFtZXMoZHJvcGRvd25DbGFzc05hbWUsIChfY2xhc3NOYW1lcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KGRyb3Bkb3duUHJlZml4Q2xzLCBcIi1yYW5nZVwiKSwgcmFuZ2UpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KGRyb3Bkb3duUHJlZml4Q2xzLCBcIi1ydGxcIiksIGRpcmVjdGlvbiA9PT0gJ3J0bCcpLCBfY2xhc3NOYW1lcykpLFxuICAgIHBvcHVwU3R5bGU6IHBvcHVwU3R5bGUsXG4gICAgZ2V0UG9wdXBDb250YWluZXI6IGdldFBvcHVwQ29udGFpbmVyXG4gIH0sIGNoaWxkcmVuKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUGlja2VyVHJpZ2dlcjsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG52YXIgUmFuZ2VDb250ZXh0ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUNvbnRleHQoe30pO1xuZXhwb3J0IGRlZmF1bHQgUmFuZ2VDb250ZXh0OyIsImltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrXCI7XG5pbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzc1wiO1xuaW1wb3J0IF9pbmhlcml0cyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHNcIjtcbmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyXCI7XG5pbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfdHlwZW9mIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2ZcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB3YXJuaW5nIGZyb20gXCJyYy11dGlsL2VzL3dhcm5pbmdcIjtcbmltcG9ydCB1c2VNZXJnZWRTdGF0ZSBmcm9tIFwicmMtdXRpbC9lcy9ob29rcy91c2VNZXJnZWRTdGF0ZVwiO1xuaW1wb3J0IFBpY2tlclRyaWdnZXIgZnJvbSAnLi9QaWNrZXJUcmlnZ2VyJztcbmltcG9ydCBQaWNrZXJQYW5lbCBmcm9tICcuL1BpY2tlclBhbmVsJztcbmltcG9ydCB1c2VQaWNrZXJJbnB1dCBmcm9tICcuL2hvb2tzL3VzZVBpY2tlcklucHV0JztcbmltcG9ydCBnZXREYXRhT3JBcmlhUHJvcHMsIHsgdG9BcnJheSwgZ2V0VmFsdWUsIHVwZGF0ZVZhbHVlcyB9IGZyb20gJy4vdXRpbHMvbWlzY1V0aWwnO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdEZvcm1hdCwgZ2V0SW5wdXRTaXplLCBlbGVtZW50c0NvbnRhaW5zIH0gZnJvbSAnLi91dGlscy91aVV0aWwnO1xuaW1wb3J0IFBhbmVsQ29udGV4dCBmcm9tICcuL1BhbmVsQ29udGV4dCc7XG5pbXBvcnQgeyBpc0VxdWFsLCBnZXRDbG9zaW5nVmlld0RhdGUsIGlzU2FtZURhdGUsIGlzU2FtZVdlZWssIGlzU2FtZVF1YXJ0ZXIsIGZvcm1hdFZhbHVlLCBwYXJzZVZhbHVlIH0gZnJvbSAnLi91dGlscy9kYXRlVXRpbCc7XG5pbXBvcnQgdXNlVmFsdWVUZXh0cyBmcm9tICcuL2hvb2tzL3VzZVZhbHVlVGV4dHMnO1xuaW1wb3J0IHVzZVRleHRWYWx1ZU1hcHBpbmcgZnJvbSAnLi9ob29rcy91c2VUZXh0VmFsdWVNYXBwaW5nJztcbmltcG9ydCBSYW5nZUNvbnRleHQgZnJvbSAnLi9SYW5nZUNvbnRleHQnO1xuaW1wb3J0IHVzZVJhbmdlRGlzYWJsZWQgZnJvbSAnLi9ob29rcy91c2VSYW5nZURpc2FibGVkJztcbmltcG9ydCBnZXRFeHRyYUZvb3RlciBmcm9tICcuL3V0aWxzL2dldEV4dHJhRm9vdGVyJztcbmltcG9ydCBnZXRSYW5nZXMgZnJvbSAnLi91dGlscy9nZXRSYW5nZXMnO1xuaW1wb3J0IHVzZVJhbmdlVmlld0RhdGVzIGZyb20gJy4vaG9va3MvdXNlUmFuZ2VWaWV3RGF0ZXMnO1xuaW1wb3J0IHVzZUhvdmVyVmFsdWUgZnJvbSAnLi9ob29rcy91c2VIb3ZlclZhbHVlJztcblxuZnVuY3Rpb24gcmVvcmRlclZhbHVlcyh2YWx1ZXMsIGdlbmVyYXRlQ29uZmlnKSB7XG4gIGlmICh2YWx1ZXMgJiYgdmFsdWVzWzBdICYmIHZhbHVlc1sxXSAmJiBnZW5lcmF0ZUNvbmZpZy5pc0FmdGVyKHZhbHVlc1swXSwgdmFsdWVzWzFdKSkge1xuICAgIHJldHVybiBbdmFsdWVzWzFdLCB2YWx1ZXNbMF1dO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuZnVuY3Rpb24gY2FuVmFsdWVUcmlnZ2VyKHZhbHVlLCBpbmRleCwgZGlzYWJsZWQsIGFsbG93RW1wdHkpIHtcbiAgaWYgKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAoYWxsb3dFbXB0eSAmJiBhbGxvd0VtcHR5W2luZGV4XSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKGRpc2FibGVkWyhpbmRleCArIDEpICUgMl0pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gSW5uZXJSYW5nZVBpY2tlcihwcm9wcykge1xuICB2YXIgX2NsYXNzTmFtZXMyLCBfY2xhc3NOYW1lczMsIF9jbGFzc05hbWVzNDtcblxuICB2YXIgX3Byb3BzJHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIHByZWZpeENscyA9IF9wcm9wcyRwcmVmaXhDbHMgPT09IHZvaWQgMCA/ICdyYy1waWNrZXInIDogX3Byb3BzJHByZWZpeENscyxcbiAgICAgIGlkID0gcHJvcHMuaWQsXG4gICAgICBzdHlsZSA9IHByb3BzLnN0eWxlLFxuICAgICAgY2xhc3NOYW1lID0gcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgcG9wdXBTdHlsZSA9IHByb3BzLnBvcHVwU3R5bGUsXG4gICAgICBkcm9wZG93bkNsYXNzTmFtZSA9IHByb3BzLmRyb3Bkb3duQ2xhc3NOYW1lLFxuICAgICAgdHJhbnNpdGlvbk5hbWUgPSBwcm9wcy50cmFuc2l0aW9uTmFtZSxcbiAgICAgIGRyb3Bkb3duQWxpZ24gPSBwcm9wcy5kcm9wZG93bkFsaWduLFxuICAgICAgZ2V0UG9wdXBDb250YWluZXIgPSBwcm9wcy5nZXRQb3B1cENvbnRhaW5lcixcbiAgICAgIGdlbmVyYXRlQ29uZmlnID0gcHJvcHMuZ2VuZXJhdGVDb25maWcsXG4gICAgICBsb2NhbGUgPSBwcm9wcy5sb2NhbGUsXG4gICAgICBwbGFjZWhvbGRlciA9IHByb3BzLnBsYWNlaG9sZGVyLFxuICAgICAgYXV0b0ZvY3VzID0gcHJvcHMuYXV0b0ZvY3VzLFxuICAgICAgZGlzYWJsZWQgPSBwcm9wcy5kaXNhYmxlZCxcbiAgICAgIGZvcm1hdCA9IHByb3BzLmZvcm1hdCxcbiAgICAgIF9wcm9wcyRwaWNrZXIgPSBwcm9wcy5waWNrZXIsXG4gICAgICBwaWNrZXIgPSBfcHJvcHMkcGlja2VyID09PSB2b2lkIDAgPyAnZGF0ZScgOiBfcHJvcHMkcGlja2VyLFxuICAgICAgc2hvd1RpbWUgPSBwcm9wcy5zaG93VGltZSxcbiAgICAgIHVzZTEySG91cnMgPSBwcm9wcy51c2UxMkhvdXJzLFxuICAgICAgX3Byb3BzJHNlcGFyYXRvciA9IHByb3BzLnNlcGFyYXRvcixcbiAgICAgIHNlcGFyYXRvciA9IF9wcm9wcyRzZXBhcmF0b3IgPT09IHZvaWQgMCA/ICd+JyA6IF9wcm9wcyRzZXBhcmF0b3IsXG4gICAgICB2YWx1ZSA9IHByb3BzLnZhbHVlLFxuICAgICAgZGVmYXVsdFZhbHVlID0gcHJvcHMuZGVmYXVsdFZhbHVlLFxuICAgICAgZGVmYXVsdFBpY2tlclZhbHVlID0gcHJvcHMuZGVmYXVsdFBpY2tlclZhbHVlLFxuICAgICAgb3BlbiA9IHByb3BzLm9wZW4sXG4gICAgICBkZWZhdWx0T3BlbiA9IHByb3BzLmRlZmF1bHRPcGVuLFxuICAgICAgZGlzYWJsZWREYXRlID0gcHJvcHMuZGlzYWJsZWREYXRlLFxuICAgICAgX2Rpc2FibGVkVGltZSA9IHByb3BzLmRpc2FibGVkVGltZSxcbiAgICAgIGRhdGVSZW5kZXIgPSBwcm9wcy5kYXRlUmVuZGVyLFxuICAgICAgcGFuZWxSZW5kZXIgPSBwcm9wcy5wYW5lbFJlbmRlcixcbiAgICAgIHJhbmdlcyA9IHByb3BzLnJhbmdlcyxcbiAgICAgIGFsbG93RW1wdHkgPSBwcm9wcy5hbGxvd0VtcHR5LFxuICAgICAgYWxsb3dDbGVhciA9IHByb3BzLmFsbG93Q2xlYXIsXG4gICAgICBzdWZmaXhJY29uID0gcHJvcHMuc3VmZml4SWNvbixcbiAgICAgIGNsZWFySWNvbiA9IHByb3BzLmNsZWFySWNvbixcbiAgICAgIHBpY2tlclJlZiA9IHByb3BzLnBpY2tlclJlZixcbiAgICAgIGlucHV0UmVhZE9ubHkgPSBwcm9wcy5pbnB1dFJlYWRPbmx5LFxuICAgICAgbW9kZSA9IHByb3BzLm1vZGUsXG4gICAgICByZW5kZXJFeHRyYUZvb3RlciA9IHByb3BzLnJlbmRlckV4dHJhRm9vdGVyLFxuICAgICAgb25DaGFuZ2UgPSBwcm9wcy5vbkNoYW5nZSxcbiAgICAgIG9uT3BlbkNoYW5nZSA9IHByb3BzLm9uT3BlbkNoYW5nZSxcbiAgICAgIG9uUGFuZWxDaGFuZ2UgPSBwcm9wcy5vblBhbmVsQ2hhbmdlLFxuICAgICAgb25DYWxlbmRhckNoYW5nZSA9IHByb3BzLm9uQ2FsZW5kYXJDaGFuZ2UsXG4gICAgICBfb25Gb2N1cyA9IHByb3BzLm9uRm9jdXMsXG4gICAgICBvbkJsdXIgPSBwcm9wcy5vbkJsdXIsXG4gICAgICBvbk1vdXNlRW50ZXIgPSBwcm9wcy5vbk1vdXNlRW50ZXIsXG4gICAgICBvbk1vdXNlTGVhdmUgPSBwcm9wcy5vbk1vdXNlTGVhdmUsXG4gICAgICBfb25PayA9IHByb3BzLm9uT2ssXG4gICAgICBfb25LZXlEb3duID0gcHJvcHMub25LZXlEb3duLFxuICAgICAgY29tcG9uZW50cyA9IHByb3BzLmNvbXBvbmVudHMsXG4gICAgICBvcmRlciA9IHByb3BzLm9yZGVyLFxuICAgICAgZGlyZWN0aW9uID0gcHJvcHMuZGlyZWN0aW9uLFxuICAgICAgYWN0aXZlUGlja2VySW5kZXggPSBwcm9wcy5hY3RpdmVQaWNrZXJJbmRleCxcbiAgICAgIF9wcm9wcyRhdXRvQ29tcGxldGUgPSBwcm9wcy5hdXRvQ29tcGxldGUsXG4gICAgICBhdXRvQ29tcGxldGUgPSBfcHJvcHMkYXV0b0NvbXBsZXRlID09PSB2b2lkIDAgPyAnb2ZmJyA6IF9wcm9wcyRhdXRvQ29tcGxldGU7XG4gIHZhciBuZWVkQ29uZmlybUJ1dHRvbiA9IHBpY2tlciA9PT0gJ2RhdGUnICYmICEhc2hvd1RpbWUgfHwgcGlja2VyID09PSAndGltZSc7IC8vIFdlIHJlY29yZCBvcGVuZWQgc3RhdHVzIGhlcmUgaW4gY2FzZSByZXBlYXQgb3BlbiB3aXRoIHBpY2tlclxuXG4gIHZhciBvcGVuUmVjb3Jkc1JlZiA9IHVzZVJlZih7fSk7XG4gIHZhciBjb250YWluZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIHZhciBwYW5lbERpdlJlZiA9IHVzZVJlZihudWxsKTtcbiAgdmFyIHN0YXJ0SW5wdXREaXZSZWYgPSB1c2VSZWYobnVsbCk7XG4gIHZhciBlbmRJbnB1dERpdlJlZiA9IHVzZVJlZihudWxsKTtcbiAgdmFyIHNlcGFyYXRvclJlZiA9IHVzZVJlZihudWxsKTtcbiAgdmFyIHN0YXJ0SW5wdXRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIHZhciBlbmRJbnB1dFJlZiA9IHVzZVJlZihudWxsKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gTWlzYyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgZm9ybWF0TGlzdCA9IHRvQXJyYXkoZ2V0RGVmYXVsdEZvcm1hdChmb3JtYXQsIHBpY2tlciwgc2hvd1RpbWUsIHVzZTEySG91cnMpKTsgLy8gQWN0aXZlIHBpY2tlclxuXG4gIHZhciBfdXNlTWVyZ2VkU3RhdGUgPSB1c2VNZXJnZWRTdGF0ZSgwLCB7XG4gICAgdmFsdWU6IGFjdGl2ZVBpY2tlckluZGV4XG4gIH0pLFxuICAgICAgX3VzZU1lcmdlZFN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VNZXJnZWRTdGF0ZSwgMiksXG4gICAgICBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCA9IF91c2VNZXJnZWRTdGF0ZTJbMF0sXG4gICAgICBzZXRNZXJnZWRBY3RpdmVQaWNrZXJJbmRleCA9IF91c2VNZXJnZWRTdGF0ZTJbMV07IC8vIE9wZXJhdGlvbiByZWZcblxuXG4gIHZhciBvcGVyYXRpb25SZWYgPSB1c2VSZWYobnVsbCk7XG4gIHZhciBtZXJnZWREaXNhYmxlZCA9IFJlYWN0LnVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGRpc2FibGVkKSkge1xuICAgICAgcmV0dXJuIGRpc2FibGVkO1xuICAgIH1cblxuICAgIHJldHVybiBbZGlzYWJsZWQgfHwgZmFsc2UsIGRpc2FibGVkIHx8IGZhbHNlXTtcbiAgfSwgW2Rpc2FibGVkXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFZhbHVlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIF91c2VNZXJnZWRTdGF0ZTMgPSB1c2VNZXJnZWRTdGF0ZShudWxsLCB7XG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdFZhbHVlLFxuICAgIHBvc3RTdGF0ZTogZnVuY3Rpb24gcG9zdFN0YXRlKHZhbHVlcykge1xuICAgICAgcmV0dXJuIHBpY2tlciA9PT0gJ3RpbWUnICYmICFvcmRlciA/IHZhbHVlcyA6IHJlb3JkZXJWYWx1ZXModmFsdWVzLCBnZW5lcmF0ZUNvbmZpZyk7XG4gICAgfVxuICB9KSxcbiAgICAgIF91c2VNZXJnZWRTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlTWVyZ2VkU3RhdGUzLCAyKSxcbiAgICAgIG1lcmdlZFZhbHVlID0gX3VzZU1lcmdlZFN0YXRlNFswXSxcbiAgICAgIHNldElubmVyVmFsdWUgPSBfdXNlTWVyZ2VkU3RhdGU0WzFdOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT0gVmlldyBEYXRlID09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBDb25maWcgdmlldyBwYW5lbFxuXG5cbiAgdmFyIF91c2VSYW5nZVZpZXdEYXRlcyA9IHVzZVJhbmdlVmlld0RhdGVzKHtcbiAgICB2YWx1ZXM6IG1lcmdlZFZhbHVlLFxuICAgIHBpY2tlcjogcGlja2VyLFxuICAgIGRlZmF1bHREYXRlczogZGVmYXVsdFBpY2tlclZhbHVlLFxuICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZ1xuICB9KSxcbiAgICAgIF91c2VSYW5nZVZpZXdEYXRlczIgPSBfc2xpY2VkVG9BcnJheShfdXNlUmFuZ2VWaWV3RGF0ZXMsIDIpLFxuICAgICAgZ2V0Vmlld0RhdGUgPSBfdXNlUmFuZ2VWaWV3RGF0ZXMyWzBdLFxuICAgICAgc2V0Vmlld0RhdGUgPSBfdXNlUmFuZ2VWaWV3RGF0ZXMyWzFdOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IFNlbGVjdCBWYWx1ZXMgPT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIF91c2VNZXJnZWRTdGF0ZTUgPSB1c2VNZXJnZWRTdGF0ZShtZXJnZWRWYWx1ZSwge1xuICAgIHBvc3RTdGF0ZTogZnVuY3Rpb24gcG9zdFN0YXRlKHZhbHVlcykge1xuICAgICAgdmFyIHBvc3RWYWx1ZXMgPSB2YWx1ZXM7XG5cbiAgICAgIGlmIChtZXJnZWREaXNhYmxlZFswXSAmJiBtZXJnZWREaXNhYmxlZFsxXSkge1xuICAgICAgICByZXR1cm4gcG9zdFZhbHVlcztcbiAgICAgIH0gLy8gRmlsbCBkaXNhYmxlZCB1bml0XG5cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKG1lcmdlZERpc2FibGVkW2ldICYmICFnZXRWYWx1ZShwb3N0VmFsdWVzLCBpKSAmJiAhZ2V0VmFsdWUoYWxsb3dFbXB0eSwgaSkpIHtcbiAgICAgICAgICBwb3N0VmFsdWVzID0gdXBkYXRlVmFsdWVzKHBvc3RWYWx1ZXMsIGdlbmVyYXRlQ29uZmlnLmdldE5vdygpLCBpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcG9zdFZhbHVlcztcbiAgICB9XG4gIH0pLFxuICAgICAgX3VzZU1lcmdlZFN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VNZXJnZWRTdGF0ZTUsIDIpLFxuICAgICAgc2VsZWN0ZWRWYWx1ZSA9IF91c2VNZXJnZWRTdGF0ZTZbMF0sXG4gICAgICBzZXRTZWxlY3RlZFZhbHVlID0gX3VzZU1lcmdlZFN0YXRlNlsxXTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gTW9kZXMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBfdXNlTWVyZ2VkU3RhdGU3ID0gdXNlTWVyZ2VkU3RhdGUoW3BpY2tlciwgcGlja2VyXSwge1xuICAgIHZhbHVlOiBtb2RlXG4gIH0pLFxuICAgICAgX3VzZU1lcmdlZFN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF91c2VNZXJnZWRTdGF0ZTcsIDIpLFxuICAgICAgbWVyZ2VkTW9kZXMgPSBfdXNlTWVyZ2VkU3RhdGU4WzBdLFxuICAgICAgc2V0SW5uZXJNb2RlcyA9IF91c2VNZXJnZWRTdGF0ZThbMV07XG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBzZXRJbm5lck1vZGVzKFtwaWNrZXIsIHBpY2tlcl0pO1xuICB9LCBbcGlja2VyXSk7XG5cbiAgdmFyIHRyaWdnZXJNb2Rlc0NoYW5nZSA9IGZ1bmN0aW9uIHRyaWdnZXJNb2Rlc0NoYW5nZShtb2RlcywgdmFsdWVzKSB7XG4gICAgc2V0SW5uZXJNb2Rlcyhtb2Rlcyk7XG5cbiAgICBpZiAob25QYW5lbENoYW5nZSkge1xuICAgICAgb25QYW5lbENoYW5nZSh2YWx1ZXMsIG1vZGVzKTtcbiAgICB9XG4gIH07IC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gRGlzYWJsZSBEYXRlID09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgX3VzZVJhbmdlRGlzYWJsZWQgPSB1c2VSYW5nZURpc2FibGVkKHtcbiAgICBwaWNrZXI6IHBpY2tlcixcbiAgICBzZWxlY3RlZFZhbHVlOiBzZWxlY3RlZFZhbHVlLFxuICAgIGxvY2FsZTogbG9jYWxlLFxuICAgIGRpc2FibGVkOiBtZXJnZWREaXNhYmxlZCxcbiAgICBkaXNhYmxlZERhdGU6IGRpc2FibGVkRGF0ZSxcbiAgICBnZW5lcmF0ZUNvbmZpZzogZ2VuZXJhdGVDb25maWdcbiAgfSwgb3BlblJlY29yZHNSZWYuY3VycmVudFsxXSwgb3BlblJlY29yZHNSZWYuY3VycmVudFswXSksXG4gICAgICBfdXNlUmFuZ2VEaXNhYmxlZDIgPSBfc2xpY2VkVG9BcnJheShfdXNlUmFuZ2VEaXNhYmxlZCwgMiksXG4gICAgICBkaXNhYmxlZFN0YXJ0RGF0ZSA9IF91c2VSYW5nZURpc2FibGVkMlswXSxcbiAgICAgIGRpc2FibGVkRW5kRGF0ZSA9IF91c2VSYW5nZURpc2FibGVkMlsxXTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gT3BlbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBfdXNlTWVyZ2VkU3RhdGU5ID0gdXNlTWVyZ2VkU3RhdGUoZmFsc2UsIHtcbiAgICB2YWx1ZTogb3BlbixcbiAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRPcGVuLFxuICAgIHBvc3RTdGF0ZTogZnVuY3Rpb24gcG9zdFN0YXRlKHBvc3RPcGVuKSB7XG4gICAgICByZXR1cm4gbWVyZ2VkRGlzYWJsZWRbbWVyZ2VkQWN0aXZlUGlja2VySW5kZXhdID8gZmFsc2UgOiBwb3N0T3BlbjtcbiAgICB9LFxuICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShuZXdPcGVuKSB7XG4gICAgICBpZiAob25PcGVuQ2hhbmdlKSB7XG4gICAgICAgIG9uT3BlbkNoYW5nZShuZXdPcGVuKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFuZXdPcGVuICYmIG9wZXJhdGlvblJlZi5jdXJyZW50ICYmIG9wZXJhdGlvblJlZi5jdXJyZW50Lm9uQ2xvc2UpIHtcbiAgICAgICAgb3BlcmF0aW9uUmVmLmN1cnJlbnQub25DbG9zZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSksXG4gICAgICBfdXNlTWVyZ2VkU3RhdGUxMCA9IF9zbGljZWRUb0FycmF5KF91c2VNZXJnZWRTdGF0ZTksIDIpLFxuICAgICAgbWVyZ2VkT3BlbiA9IF91c2VNZXJnZWRTdGF0ZTEwWzBdLFxuICAgICAgdHJpZ2dlcklubmVyT3BlbiA9IF91c2VNZXJnZWRTdGF0ZTEwWzFdO1xuXG4gIHZhciBzdGFydE9wZW4gPSBtZXJnZWRPcGVuICYmIG1lcmdlZEFjdGl2ZVBpY2tlckluZGV4ID09PSAwO1xuICB2YXIgZW5kT3BlbiA9IG1lcmdlZE9wZW4gJiYgbWVyZ2VkQWN0aXZlUGlja2VySW5kZXggPT09IDE7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFBvcHVwID09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFBvcHVwIG1pbiB3aWR0aFxuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZSgwKSxcbiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgcG9wdXBNaW5XaWR0aCA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRQb3B1cE1pbldpZHRoID0gX3VzZVN0YXRlMlsxXTtcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghbWVyZ2VkT3BlbiAmJiBjb250YWluZXJSZWYuY3VycmVudCkge1xuICAgICAgc2V0UG9wdXBNaW5XaWR0aChjb250YWluZXJSZWYuY3VycmVudC5vZmZzZXRXaWR0aCk7XG4gICAgfVxuICB9LCBbbWVyZ2VkT3Blbl0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IFRyaWdnZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciB0cmlnZ2VyUmVmID0gUmVhY3QudXNlUmVmKCk7XG5cbiAgZnVuY3Rpb24gX3RyaWdnZXJPcGVuKG5ld09wZW4sIGluZGV4KSB7XG4gICAgaWYgKG5ld09wZW4pIHtcbiAgICAgIGNsZWFyVGltZW91dCh0cmlnZ2VyUmVmLmN1cnJlbnQpO1xuICAgICAgb3BlblJlY29yZHNSZWYuY3VycmVudFtpbmRleF0gPSB0cnVlO1xuICAgICAgc2V0TWVyZ2VkQWN0aXZlUGlja2VySW5kZXgoaW5kZXgpO1xuICAgICAgdHJpZ2dlcklubmVyT3BlbihuZXdPcGVuKTsgLy8gT3BlbiB0byByZXNldCB2aWV3IGRhdGVcblxuICAgICAgaWYgKCFtZXJnZWRPcGVuKSB7XG4gICAgICAgIHNldFZpZXdEYXRlKG51bGwsIGluZGV4KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG1lcmdlZEFjdGl2ZVBpY2tlckluZGV4ID09PSBpbmRleCkge1xuICAgICAgdHJpZ2dlcklubmVyT3BlbihuZXdPcGVuKTsgLy8gQ2xlYW4gdXAgYXN5bmNcbiAgICAgIC8vIFRoaXMgbWFrZXMgcmVmIG5vdCBxdWljayByZWZyZXNoIGluIGNhc2UgdXNlciBvcGVuIGFub3RoZXIgaW5wdXQgd2l0aCBibHVyIHRyaWdnZXJcblxuICAgICAgdmFyIG9wZW5SZWNvcmRzID0gb3BlblJlY29yZHNSZWYuY3VycmVudDtcbiAgICAgIHRyaWdnZXJSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAob3BlblJlY29yZHMgPT09IG9wZW5SZWNvcmRzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBvcGVuUmVjb3Jkc1JlZi5jdXJyZW50ID0ge307XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRyaWdnZXJPcGVuQW5kRm9jdXMoaW5kZXgpIHtcbiAgICBfdHJpZ2dlck9wZW4odHJ1ZSwgaW5kZXgpOyAvLyBVc2Ugc2V0VGltZW91dCB0byBtYWtlIHN1cmUgcGFuZWwgRE9NIGV4aXN0c1xuXG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpbnB1dFJlZiA9IFtzdGFydElucHV0UmVmLCBlbmRJbnB1dFJlZl1baW5kZXhdO1xuXG4gICAgICBpZiAoaW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgICBpbnB1dFJlZi5jdXJyZW50LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfSwgMCk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmlnZ2VyQ2hhbmdlKG5ld1ZhbHVlLCBzb3VyY2VJbmRleCkge1xuICAgIHZhciB2YWx1ZXMgPSBuZXdWYWx1ZTtcbiAgICB2YXIgc3RhcnRWYWx1ZSA9IGdldFZhbHVlKHZhbHVlcywgMCk7XG4gICAgdmFyIGVuZFZhbHVlID0gZ2V0VmFsdWUodmFsdWVzLCAxKTsgLy8gPj4+Pj4gRm9ybWF0IHN0YXJ0ICYgZW5kIHZhbHVlc1xuXG4gICAgaWYgKHN0YXJ0VmFsdWUgJiYgZW5kVmFsdWUgJiYgZ2VuZXJhdGVDb25maWcuaXNBZnRlcihzdGFydFZhbHVlLCBlbmRWYWx1ZSkpIHtcbiAgICAgIGlmICggLy8gV2Vla1BpY2tlciBvbmx5IGNvbXBhcmUgd2Vla1xuICAgICAgcGlja2VyID09PSAnd2VlaycgJiYgIWlzU2FtZVdlZWsoZ2VuZXJhdGVDb25maWcsIGxvY2FsZS5sb2NhbGUsIHN0YXJ0VmFsdWUsIGVuZFZhbHVlKSB8fCAvLyBRdW90YVBpY2tlciBvbmx5IGNvbXBhcmUgd2Vla1xuICAgICAgcGlja2VyID09PSAncXVhcnRlcicgJiYgIWlzU2FtZVF1YXJ0ZXIoZ2VuZXJhdGVDb25maWcsIHN0YXJ0VmFsdWUsIGVuZFZhbHVlKSB8fCAvLyBPdGhlciBub24tVGltZVBpY2tlciBjb21wYXJlIGRhdGVcbiAgICAgIHBpY2tlciAhPT0gJ3dlZWsnICYmIHBpY2tlciAhPT0gJ3F1YXJ0ZXInICYmIHBpY2tlciAhPT0gJ3RpbWUnICYmICFpc1NhbWVEYXRlKGdlbmVyYXRlQ29uZmlnLCBzdGFydFZhbHVlLCBlbmRWYWx1ZSkpIHtcbiAgICAgICAgLy8gQ2xlYW4gdXAgZW5kIGRhdGUgd2hlbiBzdGFydCBkYXRlIGlzIGFmdGVyIGVuZCBkYXRlXG4gICAgICAgIGlmIChzb3VyY2VJbmRleCA9PT0gMCkge1xuICAgICAgICAgIHZhbHVlcyA9IFtzdGFydFZhbHVlLCBudWxsXTtcbiAgICAgICAgICBlbmRWYWx1ZSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhcnRWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgdmFsdWVzID0gW251bGwsIGVuZFZhbHVlXTtcbiAgICAgICAgfSAvLyBDbGVhbiB1cCBjYWNoZSBzaW5jZSBpbnZhbGlkYXRlXG5cblxuICAgICAgICBvcGVuUmVjb3Jkc1JlZi5jdXJyZW50ID0gX2RlZmluZVByb3BlcnR5KHt9LCBzb3VyY2VJbmRleCwgdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHBpY2tlciAhPT0gJ3RpbWUnIHx8IG9yZGVyICE9PSBmYWxzZSkge1xuICAgICAgICAvLyBSZW9yZGVyIHdoZW4gaW4gc2FtZSBkYXRlXG4gICAgICAgIHZhbHVlcyA9IHJlb3JkZXJWYWx1ZXModmFsdWVzLCBnZW5lcmF0ZUNvbmZpZyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0U2VsZWN0ZWRWYWx1ZSh2YWx1ZXMpO1xuICAgIHZhciBzdGFydFN0ciA9IHZhbHVlcyAmJiB2YWx1ZXNbMF0gPyBmb3JtYXRWYWx1ZSh2YWx1ZXNbMF0sIHtcbiAgICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZyxcbiAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgZm9ybWF0OiBmb3JtYXRMaXN0WzBdXG4gICAgfSkgOiAnJztcbiAgICB2YXIgZW5kU3RyID0gdmFsdWVzICYmIHZhbHVlc1sxXSA/IGZvcm1hdFZhbHVlKHZhbHVlc1sxXSwge1xuICAgICAgZ2VuZXJhdGVDb25maWc6IGdlbmVyYXRlQ29uZmlnLFxuICAgICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgICBmb3JtYXQ6IGZvcm1hdExpc3RbMF1cbiAgICB9KSA6ICcnO1xuXG4gICAgaWYgKG9uQ2FsZW5kYXJDaGFuZ2UpIHtcbiAgICAgIHZhciBpbmZvID0ge1xuICAgICAgICByYW5nZTogc291cmNlSW5kZXggPT09IDAgPyAnc3RhcnQnIDogJ2VuZCdcbiAgICAgIH07XG4gICAgICBvbkNhbGVuZGFyQ2hhbmdlKHZhbHVlcywgW3N0YXJ0U3RyLCBlbmRTdHJdLCBpbmZvKTtcbiAgICB9IC8vID4+Pj4+IFRyaWdnZXIgYG9uQ2hhbmdlYCBldmVudFxuXG5cbiAgICB2YXIgY2FuU3RhcnRWYWx1ZVRyaWdnZXIgPSBjYW5WYWx1ZVRyaWdnZXIoc3RhcnRWYWx1ZSwgMCwgbWVyZ2VkRGlzYWJsZWQsIGFsbG93RW1wdHkpO1xuICAgIHZhciBjYW5FbmRWYWx1ZVRyaWdnZXIgPSBjYW5WYWx1ZVRyaWdnZXIoZW5kVmFsdWUsIDEsIG1lcmdlZERpc2FibGVkLCBhbGxvd0VtcHR5KTtcbiAgICB2YXIgY2FuVHJpZ2dlciA9IHZhbHVlcyA9PT0gbnVsbCB8fCBjYW5TdGFydFZhbHVlVHJpZ2dlciAmJiBjYW5FbmRWYWx1ZVRyaWdnZXI7XG5cbiAgICBpZiAoY2FuVHJpZ2dlcikge1xuICAgICAgLy8gVHJpZ2dlciBvbkNoYW5nZSBvbmx5IHdoZW4gdmFsdWUgaXMgdmFsaWRhdGVcbiAgICAgIHNldElubmVyVmFsdWUodmFsdWVzKTtcblxuICAgICAgaWYgKG9uQ2hhbmdlICYmICghaXNFcXVhbChnZW5lcmF0ZUNvbmZpZywgZ2V0VmFsdWUobWVyZ2VkVmFsdWUsIDApLCBzdGFydFZhbHVlKSB8fCAhaXNFcXVhbChnZW5lcmF0ZUNvbmZpZywgZ2V0VmFsdWUobWVyZ2VkVmFsdWUsIDEpLCBlbmRWYWx1ZSkpKSB7XG4gICAgICAgIG9uQ2hhbmdlKHZhbHVlcywgW3N0YXJ0U3RyLCBlbmRTdHJdKTtcbiAgICAgIH1cbiAgICB9IC8vID4+Pj4+IE9wZW4gcGlja2VyIHdoZW5cbiAgICAvLyBBbHdheXMgb3BlbiBhbm90aGVyIHBpY2tlciBpZiBwb3NzaWJsZVxuXG5cbiAgICB2YXIgbmV4dE9wZW5JbmRleCA9IG51bGw7XG5cbiAgICBpZiAoc291cmNlSW5kZXggPT09IDAgJiYgIW1lcmdlZERpc2FibGVkWzFdKSB7XG4gICAgICBuZXh0T3BlbkluZGV4ID0gMTtcbiAgICB9IGVsc2UgaWYgKHNvdXJjZUluZGV4ID09PSAxICYmICFtZXJnZWREaXNhYmxlZFswXSkge1xuICAgICAgbmV4dE9wZW5JbmRleCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG5leHRPcGVuSW5kZXggIT09IG51bGwgJiYgbmV4dE9wZW5JbmRleCAhPT0gbWVyZ2VkQWN0aXZlUGlja2VySW5kZXggJiYgKCFvcGVuUmVjb3Jkc1JlZi5jdXJyZW50W25leHRPcGVuSW5kZXhdIHx8ICFnZXRWYWx1ZSh2YWx1ZXMsIG5leHRPcGVuSW5kZXgpKSAmJiBnZXRWYWx1ZSh2YWx1ZXMsIHNvdXJjZUluZGV4KSkge1xuICAgICAgLy8gRGVsYXkgdG8gZm9jdXMgdG8gYXZvaWQgaW5wdXQgYmx1ciB0cmlnZ2VyIGV4cGlyZWQgc2VsZWN0ZWRWYWx1ZXNcbiAgICAgIHRyaWdnZXJPcGVuQW5kRm9jdXMobmV4dE9wZW5JbmRleCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF90cmlnZ2VyT3BlbihmYWxzZSwgc291cmNlSW5kZXgpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBmb3J3YXJkS2V5RG93biA9IGZ1bmN0aW9uIGZvcndhcmRLZXlEb3duKGUpIHtcbiAgICBpZiAobWVyZ2VkT3BlbiAmJiBvcGVyYXRpb25SZWYuY3VycmVudCAmJiBvcGVyYXRpb25SZWYuY3VycmVudC5vbktleURvd24pIHtcbiAgICAgIC8vIExldCBwb3B1cCBwYW5lbCBoYW5kbGUga2V5Ym9hcmRcbiAgICAgIHJldHVybiBvcGVyYXRpb25SZWYuY3VycmVudC5vbktleURvd24oZSk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1sb25lLWJsb2NrcyAqL1xuXG5cbiAgICB7XG4gICAgICB3YXJuaW5nKGZhbHNlLCAnUGlja2VyIG5vdCBjb3JyZWN0IGZvcndhcmQgS2V5RG93biBvcGVyYXRpb24uIFBsZWFzZSBoZWxwIHRvIGZpcmUgaXNzdWUgYWJvdXQgdGhpcy4nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFRleHQgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgc2hhcmVkVGV4dEhvb2tzUHJvcHMgPSB7XG4gICAgZm9ybWF0TGlzdDogZm9ybWF0TGlzdCxcbiAgICBnZW5lcmF0ZUNvbmZpZzogZ2VuZXJhdGVDb25maWcsXG4gICAgbG9jYWxlOiBsb2NhbGVcbiAgfTtcblxuICB2YXIgX3VzZVZhbHVlVGV4dHMgPSB1c2VWYWx1ZVRleHRzKGdldFZhbHVlKHNlbGVjdGVkVmFsdWUsIDApLCBzaGFyZWRUZXh0SG9va3NQcm9wcyksXG4gICAgICBfdXNlVmFsdWVUZXh0czIgPSBfc2xpY2VkVG9BcnJheShfdXNlVmFsdWVUZXh0cywgMiksXG4gICAgICBzdGFydFZhbHVlVGV4dHMgPSBfdXNlVmFsdWVUZXh0czJbMF0sXG4gICAgICBmaXJzdFN0YXJ0VmFsdWVUZXh0ID0gX3VzZVZhbHVlVGV4dHMyWzFdO1xuXG4gIHZhciBfdXNlVmFsdWVUZXh0czMgPSB1c2VWYWx1ZVRleHRzKGdldFZhbHVlKHNlbGVjdGVkVmFsdWUsIDEpLCBzaGFyZWRUZXh0SG9va3NQcm9wcyksXG4gICAgICBfdXNlVmFsdWVUZXh0czQgPSBfc2xpY2VkVG9BcnJheShfdXNlVmFsdWVUZXh0czMsIDIpLFxuICAgICAgZW5kVmFsdWVUZXh0cyA9IF91c2VWYWx1ZVRleHRzNFswXSxcbiAgICAgIGZpcnN0RW5kVmFsdWVUZXh0ID0gX3VzZVZhbHVlVGV4dHM0WzFdO1xuXG4gIHZhciBfb25UZXh0Q2hhbmdlID0gZnVuY3Rpb24gb25UZXh0Q2hhbmdlKG5ld1RleHQsIGluZGV4KSB7XG4gICAgdmFyIGlucHV0RGF0ZSA9IHBhcnNlVmFsdWUobmV3VGV4dCwge1xuICAgICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgICBmb3JtYXRMaXN0OiBmb3JtYXRMaXN0LFxuICAgICAgZ2VuZXJhdGVDb25maWc6IGdlbmVyYXRlQ29uZmlnXG4gICAgfSk7XG4gICAgdmFyIGRpc2FibGVkRnVuYyA9IGluZGV4ID09PSAwID8gZGlzYWJsZWRTdGFydERhdGUgOiBkaXNhYmxlZEVuZERhdGU7XG5cbiAgICBpZiAoaW5wdXREYXRlICYmICFkaXNhYmxlZEZ1bmMoaW5wdXREYXRlKSkge1xuICAgICAgc2V0U2VsZWN0ZWRWYWx1ZSh1cGRhdGVWYWx1ZXMoc2VsZWN0ZWRWYWx1ZSwgaW5wdXREYXRlLCBpbmRleCkpO1xuICAgICAgc2V0Vmlld0RhdGUoaW5wdXREYXRlLCBpbmRleCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBfdXNlVGV4dFZhbHVlTWFwcGluZyA9IHVzZVRleHRWYWx1ZU1hcHBpbmcoe1xuICAgIHZhbHVlVGV4dHM6IHN0YXJ0VmFsdWVUZXh0cyxcbiAgICBvblRleHRDaGFuZ2U6IGZ1bmN0aW9uIG9uVGV4dENoYW5nZShuZXdUZXh0KSB7XG4gICAgICByZXR1cm4gX29uVGV4dENoYW5nZShuZXdUZXh0LCAwKTtcbiAgICB9XG4gIH0pLFxuICAgICAgX3VzZVRleHRWYWx1ZU1hcHBpbmcyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVRleHRWYWx1ZU1hcHBpbmcsIDMpLFxuICAgICAgc3RhcnRUZXh0ID0gX3VzZVRleHRWYWx1ZU1hcHBpbmcyWzBdLFxuICAgICAgdHJpZ2dlclN0YXJ0VGV4dENoYW5nZSA9IF91c2VUZXh0VmFsdWVNYXBwaW5nMlsxXSxcbiAgICAgIHJlc2V0U3RhcnRUZXh0ID0gX3VzZVRleHRWYWx1ZU1hcHBpbmcyWzJdO1xuXG4gIHZhciBfdXNlVGV4dFZhbHVlTWFwcGluZzMgPSB1c2VUZXh0VmFsdWVNYXBwaW5nKHtcbiAgICB2YWx1ZVRleHRzOiBlbmRWYWx1ZVRleHRzLFxuICAgIG9uVGV4dENoYW5nZTogZnVuY3Rpb24gb25UZXh0Q2hhbmdlKG5ld1RleHQpIHtcbiAgICAgIHJldHVybiBfb25UZXh0Q2hhbmdlKG5ld1RleHQsIDEpO1xuICAgIH1cbiAgfSksXG4gICAgICBfdXNlVGV4dFZhbHVlTWFwcGluZzQgPSBfc2xpY2VkVG9BcnJheShfdXNlVGV4dFZhbHVlTWFwcGluZzMsIDMpLFxuICAgICAgZW5kVGV4dCA9IF91c2VUZXh0VmFsdWVNYXBwaW5nNFswXSxcbiAgICAgIHRyaWdnZXJFbmRUZXh0Q2hhbmdlID0gX3VzZVRleHRWYWx1ZU1hcHBpbmc0WzFdLFxuICAgICAgcmVzZXRFbmRUZXh0ID0gX3VzZVRleHRWYWx1ZU1hcHBpbmc0WzJdO1xuXG4gIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUobnVsbCksXG4gICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgICByYW5nZUhvdmVyVmFsdWUgPSBfdXNlU3RhdGU0WzBdLFxuICAgICAgc2V0UmFuZ2VIb3ZlclZhbHVlID0gX3VzZVN0YXRlNFsxXTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT0gSG92ZXIgUmFuZ2UgPT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBfdXNlU3RhdGU1ID0gdXNlU3RhdGUobnVsbCksXG4gICAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksXG4gICAgICBob3ZlclJhbmdlZFZhbHVlID0gX3VzZVN0YXRlNlswXSxcbiAgICAgIHNldEhvdmVyUmFuZ2VkVmFsdWUgPSBfdXNlU3RhdGU2WzFdO1xuXG4gIHZhciBfdXNlSG92ZXJWYWx1ZSA9IHVzZUhvdmVyVmFsdWUoc3RhcnRUZXh0LCB7XG4gICAgZm9ybWF0TGlzdDogZm9ybWF0TGlzdCxcbiAgICBnZW5lcmF0ZUNvbmZpZzogZ2VuZXJhdGVDb25maWcsXG4gICAgbG9jYWxlOiBsb2NhbGVcbiAgfSksXG4gICAgICBfdXNlSG92ZXJWYWx1ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlSG92ZXJWYWx1ZSwgMyksXG4gICAgICBzdGFydEhvdmVyVmFsdWUgPSBfdXNlSG92ZXJWYWx1ZTJbMF0sXG4gICAgICBvblN0YXJ0RW50ZXIgPSBfdXNlSG92ZXJWYWx1ZTJbMV0sXG4gICAgICBvblN0YXJ0TGVhdmUgPSBfdXNlSG92ZXJWYWx1ZTJbMl07XG5cbiAgdmFyIF91c2VIb3ZlclZhbHVlMyA9IHVzZUhvdmVyVmFsdWUoZW5kVGV4dCwge1xuICAgIGZvcm1hdExpc3Q6IGZvcm1hdExpc3QsXG4gICAgZ2VuZXJhdGVDb25maWc6IGdlbmVyYXRlQ29uZmlnLFxuICAgIGxvY2FsZTogbG9jYWxlXG4gIH0pLFxuICAgICAgX3VzZUhvdmVyVmFsdWU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZUhvdmVyVmFsdWUzLCAzKSxcbiAgICAgIGVuZEhvdmVyVmFsdWUgPSBfdXNlSG92ZXJWYWx1ZTRbMF0sXG4gICAgICBvbkVuZEVudGVyID0gX3VzZUhvdmVyVmFsdWU0WzFdLFxuICAgICAgb25FbmRMZWF2ZSA9IF91c2VIb3ZlclZhbHVlNFsyXTtcblxuICB2YXIgb25EYXRlTW91c2VFbnRlciA9IGZ1bmN0aW9uIG9uRGF0ZU1vdXNlRW50ZXIoZGF0ZSkge1xuICAgIHNldEhvdmVyUmFuZ2VkVmFsdWUodXBkYXRlVmFsdWVzKHNlbGVjdGVkVmFsdWUsIGRhdGUsIG1lcmdlZEFjdGl2ZVBpY2tlckluZGV4KSk7XG5cbiAgICBpZiAobWVyZ2VkQWN0aXZlUGlja2VySW5kZXggPT09IDApIHtcbiAgICAgIG9uU3RhcnRFbnRlcihkYXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb25FbmRFbnRlcihkYXRlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIG9uRGF0ZU1vdXNlTGVhdmUgPSBmdW5jdGlvbiBvbkRhdGVNb3VzZUxlYXZlKCkge1xuICAgIHNldEhvdmVyUmFuZ2VkVmFsdWUodXBkYXRlVmFsdWVzKHNlbGVjdGVkVmFsdWUsIG51bGwsIG1lcmdlZEFjdGl2ZVBpY2tlckluZGV4KSk7XG5cbiAgICBpZiAobWVyZ2VkQWN0aXZlUGlja2VySW5kZXggPT09IDApIHtcbiAgICAgIG9uU3RhcnRMZWF2ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbkVuZExlYXZlKCk7XG4gICAgfVxuICB9OyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBJbnB1dCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIGdldFNoYXJlZElucHV0SG9va1Byb3BzID0gZnVuY3Rpb24gZ2V0U2hhcmVkSW5wdXRIb29rUHJvcHMoaW5kZXgsIHJlc2V0VGV4dCkge1xuICAgIHJldHVybiB7XG4gICAgICBibHVyVG9DYW5jZWw6IG5lZWRDb25maXJtQnV0dG9uLFxuICAgICAgZm9yd2FyZEtleURvd246IGZvcndhcmRLZXlEb3duLFxuICAgICAgb25CbHVyOiBvbkJsdXIsXG4gICAgICBpc0NsaWNrT3V0c2lkZTogZnVuY3Rpb24gaXNDbGlja091dHNpZGUodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiAhZWxlbWVudHNDb250YWlucyhbcGFuZWxEaXZSZWYuY3VycmVudCwgc3RhcnRJbnB1dERpdlJlZi5jdXJyZW50LCBlbmRJbnB1dERpdlJlZi5jdXJyZW50XSwgdGFyZ2V0KTtcbiAgICAgIH0sXG4gICAgICBvbkZvY3VzOiBmdW5jdGlvbiBvbkZvY3VzKGUpIHtcbiAgICAgICAgc2V0TWVyZ2VkQWN0aXZlUGlja2VySW5kZXgoaW5kZXgpO1xuXG4gICAgICAgIGlmIChfb25Gb2N1cykge1xuICAgICAgICAgIF9vbkZvY3VzKGUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdHJpZ2dlck9wZW46IGZ1bmN0aW9uIHRyaWdnZXJPcGVuKG5ld09wZW4pIHtcbiAgICAgICAgX3RyaWdnZXJPcGVuKG5ld09wZW4sIGluZGV4KTtcbiAgICAgIH0sXG4gICAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7XG4gICAgICAgIHRyaWdnZXJDaGFuZ2Uoc2VsZWN0ZWRWYWx1ZSwgaW5kZXgpO1xuICAgICAgICByZXNldFRleHQoKTtcbiAgICAgIH0sXG4gICAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7XG4gICAgICAgIF90cmlnZ2VyT3BlbihmYWxzZSwgaW5kZXgpO1xuXG4gICAgICAgIHNldFNlbGVjdGVkVmFsdWUobWVyZ2VkVmFsdWUpO1xuICAgICAgICByZXNldFRleHQoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIHZhciBfdXNlUGlja2VySW5wdXQgPSB1c2VQaWNrZXJJbnB1dChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGdldFNoYXJlZElucHV0SG9va1Byb3BzKDAsIHJlc2V0U3RhcnRUZXh0KSksIHt9LCB7XG4gICAgb3Blbjogc3RhcnRPcGVuLFxuICAgIHZhbHVlOiBzdGFydFRleHQsXG4gICAgb25LZXlEb3duOiBmdW5jdGlvbiBvbktleURvd24oZSwgcHJldmVudERlZmF1bHQpIHtcbiAgICAgIF9vbktleURvd24gPT09IG51bGwgfHwgX29uS2V5RG93biA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29uS2V5RG93bihlLCBwcmV2ZW50RGVmYXVsdCk7XG4gICAgfVxuICB9KSksXG4gICAgICBfdXNlUGlja2VySW5wdXQyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVBpY2tlcklucHV0LCAyKSxcbiAgICAgIHN0YXJ0SW5wdXRQcm9wcyA9IF91c2VQaWNrZXJJbnB1dDJbMF0sXG4gICAgICBfdXNlUGlja2VySW5wdXQyJCA9IF91c2VQaWNrZXJJbnB1dDJbMV0sXG4gICAgICBzdGFydEZvY3VzZWQgPSBfdXNlUGlja2VySW5wdXQyJC5mb2N1c2VkLFxuICAgICAgc3RhcnRUeXBpbmcgPSBfdXNlUGlja2VySW5wdXQyJC50eXBpbmc7XG5cbiAgdmFyIF91c2VQaWNrZXJJbnB1dDMgPSB1c2VQaWNrZXJJbnB1dChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGdldFNoYXJlZElucHV0SG9va1Byb3BzKDEsIHJlc2V0RW5kVGV4dCkpLCB7fSwge1xuICAgIG9wZW46IGVuZE9wZW4sXG4gICAgdmFsdWU6IGVuZFRleHQsXG4gICAgb25LZXlEb3duOiBmdW5jdGlvbiBvbktleURvd24oZSwgcHJldmVudERlZmF1bHQpIHtcbiAgICAgIF9vbktleURvd24gPT09IG51bGwgfHwgX29uS2V5RG93biA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29uS2V5RG93bihlLCBwcmV2ZW50RGVmYXVsdCk7XG4gICAgfVxuICB9KSksXG4gICAgICBfdXNlUGlja2VySW5wdXQ0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVBpY2tlcklucHV0MywgMiksXG4gICAgICBlbmRJbnB1dFByb3BzID0gX3VzZVBpY2tlcklucHV0NFswXSxcbiAgICAgIF91c2VQaWNrZXJJbnB1dDQkID0gX3VzZVBpY2tlcklucHV0NFsxXSxcbiAgICAgIGVuZEZvY3VzZWQgPSBfdXNlUGlja2VySW5wdXQ0JC5mb2N1c2VkLFxuICAgICAgZW5kVHlwaW5nID0gX3VzZVBpY2tlcklucHV0NCQudHlwaW5nOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PSBDbGljayBQaWNrZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBvblBpY2tlckNsaWNrID0gZnVuY3Rpb24gb25QaWNrZXJDbGljayhlKSB7XG4gICAgLy8gV2hlbiBjbGljayBpbnNpZGUgdGhlIHBpY2tlciAmIG91dHNpZGUgdGhlIHBpY2tlcidzIGlucHV0IGVsZW1lbnRzXG4gICAgLy8gdGhlIHBhbmVsIHNob3VsZCBzdGlsbCBiZSBvcGVuZWRcbiAgICBpZiAoIW1lcmdlZE9wZW4gJiYgIXN0YXJ0SW5wdXRSZWYuY3VycmVudC5jb250YWlucyhlLnRhcmdldCkgJiYgIWVuZElucHV0UmVmLmN1cnJlbnQuY29udGFpbnMoZS50YXJnZXQpKSB7XG4gICAgICBpZiAoIW1lcmdlZERpc2FibGVkWzBdKSB7XG4gICAgICAgIHRyaWdnZXJPcGVuQW5kRm9jdXMoMCk7XG4gICAgICB9IGVsc2UgaWYgKCFtZXJnZWREaXNhYmxlZFsxXSkge1xuICAgICAgICB0cmlnZ2VyT3BlbkFuZEZvY3VzKDEpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgb25QaWNrZXJNb3VzZURvd24gPSBmdW5jdGlvbiBvblBpY2tlck1vdXNlRG93bihlKSB7XG4gICAgLy8gc2hvdWxkbid0IGFmZmVjdCBpbnB1dCBlbGVtZW50cyBpZiBwaWNrZXIgaXMgYWN0aXZlXG4gICAgaWYgKG1lcmdlZE9wZW4gJiYgKHN0YXJ0Rm9jdXNlZCB8fCBlbmRGb2N1c2VkKSAmJiAhc3RhcnRJbnB1dFJlZi5jdXJyZW50LmNvbnRhaW5zKGUudGFyZ2V0KSAmJiAhZW5kSW5wdXRSZWYuY3VycmVudC5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH07IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFN5bmMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIENsb3NlIHNob3VsZCBzeW5jIGJhY2sgd2l0aCB0ZXh0IHZhbHVlXG5cblxuICB2YXIgc3RhcnRTdHIgPSBtZXJnZWRWYWx1ZSAmJiBtZXJnZWRWYWx1ZVswXSA/IGZvcm1hdFZhbHVlKG1lcmdlZFZhbHVlWzBdLCB7XG4gICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgZm9ybWF0OiAnWVlZWU1NRERISG1tc3MnLFxuICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZ1xuICB9KSA6ICcnO1xuICB2YXIgZW5kU3RyID0gbWVyZ2VkVmFsdWUgJiYgbWVyZ2VkVmFsdWVbMV0gPyBmb3JtYXRWYWx1ZShtZXJnZWRWYWx1ZVsxXSwge1xuICAgIGxvY2FsZTogbG9jYWxlLFxuICAgIGZvcm1hdDogJ1lZWVlNTURESEhtbXNzJyxcbiAgICBnZW5lcmF0ZUNvbmZpZzogZ2VuZXJhdGVDb25maWdcbiAgfSkgOiAnJztcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIW1lcmdlZE9wZW4pIHtcbiAgICAgIHNldFNlbGVjdGVkVmFsdWUobWVyZ2VkVmFsdWUpO1xuXG4gICAgICBpZiAoIXN0YXJ0VmFsdWVUZXh0cy5sZW5ndGggfHwgc3RhcnRWYWx1ZVRleHRzWzBdID09PSAnJykge1xuICAgICAgICB0cmlnZ2VyU3RhcnRUZXh0Q2hhbmdlKCcnKTtcbiAgICAgIH0gZWxzZSBpZiAoZmlyc3RTdGFydFZhbHVlVGV4dCAhPT0gc3RhcnRUZXh0KSB7XG4gICAgICAgIHJlc2V0U3RhcnRUZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghZW5kVmFsdWVUZXh0cy5sZW5ndGggfHwgZW5kVmFsdWVUZXh0c1swXSA9PT0gJycpIHtcbiAgICAgICAgdHJpZ2dlckVuZFRleHRDaGFuZ2UoJycpO1xuICAgICAgfSBlbHNlIGlmIChmaXJzdEVuZFZhbHVlVGV4dCAhPT0gZW5kVGV4dCkge1xuICAgICAgICByZXNldEVuZFRleHQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFttZXJnZWRPcGVuLCBzdGFydFZhbHVlVGV4dHMsIGVuZFZhbHVlVGV4dHNdKTsgLy8gU3luYyBpbm5lclZhbHVlIHdpdGggY29udHJvbCBtb2RlXG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBzZXRTZWxlY3RlZFZhbHVlKG1lcmdlZFZhbHVlKTtcbiAgfSwgW3N0YXJ0U3RyLCBlbmRTdHJdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBXYXJuaW5nID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmICh2YWx1ZSAmJiBBcnJheS5pc0FycmF5KGRpc2FibGVkKSAmJiAoZ2V0VmFsdWUoZGlzYWJsZWQsIDApICYmICFnZXRWYWx1ZSh2YWx1ZSwgMCkgfHwgZ2V0VmFsdWUoZGlzYWJsZWQsIDEpICYmICFnZXRWYWx1ZSh2YWx1ZSwgMSkpKSB7XG4gICAgICB3YXJuaW5nKGZhbHNlLCAnYGRpc2FibGVkYCBzaG91bGQgbm90IHNldCB3aXRoIGVtcHR5IGB2YWx1ZWAuIFlvdSBzaG91bGQgc2V0IGBhbGxvd0VtcHR5YCBvciBgdmFsdWVgIGluc3RlYWQuJyk7XG4gICAgfVxuICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUHJpdmF0ZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICBpZiAocGlja2VyUmVmKSB7XG4gICAgcGlja2VyUmVmLmN1cnJlbnQgPSB7XG4gICAgICBmb2N1czogZnVuY3Rpb24gZm9jdXMoKSB7XG4gICAgICAgIGlmIChzdGFydElucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBzdGFydElucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoKSB7XG4gICAgICAgIGlmIChzdGFydElucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBzdGFydElucHV0UmVmLmN1cnJlbnQuYmx1cigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVuZElucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBlbmRJbnB1dFJlZi5jdXJyZW50LmJsdXIoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBSYW5nZXMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciByYW5nZUxhYmVscyA9IE9iamVjdC5rZXlzKHJhbmdlcyB8fCB7fSk7XG4gIHZhciByYW5nZUxpc3QgPSByYW5nZUxhYmVscy5tYXAoZnVuY3Rpb24gKGxhYmVsKSB7XG4gICAgdmFyIHJhbmdlID0gcmFuZ2VzW2xhYmVsXTtcbiAgICB2YXIgbmV3VmFsdWVzID0gdHlwZW9mIHJhbmdlID09PSAnZnVuY3Rpb24nID8gcmFuZ2UoKSA6IHJhbmdlO1xuICAgIHJldHVybiB7XG4gICAgICBsYWJlbDogbGFiZWwsXG4gICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICB0cmlnZ2VyQ2hhbmdlKG5ld1ZhbHVlcywgbnVsbCk7XG5cbiAgICAgICAgX3RyaWdnZXJPcGVuKGZhbHNlLCBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCk7XG4gICAgICB9LFxuICAgICAgb25Nb3VzZUVudGVyOiBmdW5jdGlvbiBvbk1vdXNlRW50ZXIoKSB7XG4gICAgICAgIHNldFJhbmdlSG92ZXJWYWx1ZShuZXdWYWx1ZXMpO1xuICAgICAgfSxcbiAgICAgIG9uTW91c2VMZWF2ZTogZnVuY3Rpb24gb25Nb3VzZUxlYXZlKCkge1xuICAgICAgICBzZXRSYW5nZUhvdmVyVmFsdWUobnVsbCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFBhbmVsID09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gcmVuZGVyUGFuZWwoKSB7XG4gICAgdmFyIHBhbmVsUG9zaXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuICAgIHZhciBwYW5lbFByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICB2YXIgcGFuZWxIb3ZlclJhbmdlZFZhbHVlID0gbnVsbDtcblxuICAgIGlmIChtZXJnZWRPcGVuICYmIGhvdmVyUmFuZ2VkVmFsdWUgJiYgaG92ZXJSYW5nZWRWYWx1ZVswXSAmJiBob3ZlclJhbmdlZFZhbHVlWzFdICYmIGdlbmVyYXRlQ29uZmlnLmlzQWZ0ZXIoaG92ZXJSYW5nZWRWYWx1ZVsxXSwgaG92ZXJSYW5nZWRWYWx1ZVswXSkpIHtcbiAgICAgIHBhbmVsSG92ZXJSYW5nZWRWYWx1ZSA9IGhvdmVyUmFuZ2VkVmFsdWU7XG4gICAgfVxuXG4gICAgdmFyIHBhbmVsU2hvd1RpbWUgPSBzaG93VGltZTtcblxuICAgIGlmIChzaG93VGltZSAmJiBfdHlwZW9mKHNob3dUaW1lKSA9PT0gJ29iamVjdCcgJiYgc2hvd1RpbWUuZGVmYXVsdFZhbHVlKSB7XG4gICAgICB2YXIgdGltZURlZmF1bHRWYWx1ZXMgPSBzaG93VGltZS5kZWZhdWx0VmFsdWU7XG4gICAgICBwYW5lbFNob3dUaW1lID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzaG93VGltZSksIHt9LCB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZ2V0VmFsdWUodGltZURlZmF1bHRWYWx1ZXMsIG1lcmdlZEFjdGl2ZVBpY2tlckluZGV4KSB8fCB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBwYW5lbERhdGVSZW5kZXIgPSBudWxsO1xuXG4gICAgaWYgKGRhdGVSZW5kZXIpIHtcbiAgICAgIHBhbmVsRGF0ZVJlbmRlciA9IGZ1bmN0aW9uIHBhbmVsRGF0ZVJlbmRlcihkYXRlLCB0b2RheSkge1xuICAgICAgICByZXR1cm4gZGF0ZVJlbmRlcihkYXRlLCB0b2RheSwge1xuICAgICAgICAgIHJhbmdlOiBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCA/ICdlbmQnIDogJ3N0YXJ0J1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJhbmdlQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgdmFsdWU6IHtcbiAgICAgICAgaW5SYW5nZTogdHJ1ZSxcbiAgICAgICAgcGFuZWxQb3NpdGlvbjogcGFuZWxQb3NpdGlvbixcbiAgICAgICAgcmFuZ2VkVmFsdWU6IHJhbmdlSG92ZXJWYWx1ZSB8fCBzZWxlY3RlZFZhbHVlLFxuICAgICAgICBob3ZlclJhbmdlZFZhbHVlOiBwYW5lbEhvdmVyUmFuZ2VkVmFsdWVcbiAgICAgIH1cbiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQaWNrZXJQYW5lbCwgX2V4dGVuZHMoe30sIHByb3BzLCBwYW5lbFByb3BzLCB7XG4gICAgICBkYXRlUmVuZGVyOiBwYW5lbERhdGVSZW5kZXIsXG4gICAgICBzaG93VGltZTogcGFuZWxTaG93VGltZSxcbiAgICAgIG1vZGU6IG1lcmdlZE1vZGVzW21lcmdlZEFjdGl2ZVBpY2tlckluZGV4XSxcbiAgICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZyxcbiAgICAgIHN0eWxlOiB1bmRlZmluZWQsXG4gICAgICBkaXJlY3Rpb246IGRpcmVjdGlvbixcbiAgICAgIGRpc2FibGVkRGF0ZTogbWVyZ2VkQWN0aXZlUGlja2VySW5kZXggPT09IDAgPyBkaXNhYmxlZFN0YXJ0RGF0ZSA6IGRpc2FibGVkRW5kRGF0ZSxcbiAgICAgIGRpc2FibGVkVGltZTogZnVuY3Rpb24gZGlzYWJsZWRUaW1lKGRhdGUpIHtcbiAgICAgICAgaWYgKF9kaXNhYmxlZFRpbWUpIHtcbiAgICAgICAgICByZXR1cm4gX2Rpc2FibGVkVGltZShkYXRlLCBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCA9PT0gMCA/ICdzdGFydCcgOiAnZW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9LFxuICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKF9kZWZpbmVQcm9wZXJ0eSh7fSwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1wYW5lbC1mb2N1c2VkXCIpLCBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCA9PT0gMCA/ICFzdGFydFR5cGluZyA6ICFlbmRUeXBpbmcpKSxcbiAgICAgIHZhbHVlOiBnZXRWYWx1ZShzZWxlY3RlZFZhbHVlLCBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCksXG4gICAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICAgIHRhYkluZGV4OiAtMSxcbiAgICAgIG9uUGFuZWxDaGFuZ2U6IGZ1bmN0aW9uIG9uUGFuZWxDaGFuZ2UoZGF0ZSwgbmV3TW9kZSkge1xuICAgICAgICAvLyBjbGVhciBob3ZlciB2YWx1ZSB3aGVuIHBhbmVsIGNoYW5nZVxuICAgICAgICBpZiAobWVyZ2VkQWN0aXZlUGlja2VySW5kZXggPT09IDApIHtcbiAgICAgICAgICBvblN0YXJ0TGVhdmUodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWVyZ2VkQWN0aXZlUGlja2VySW5kZXggPT09IDEpIHtcbiAgICAgICAgICBvbkVuZExlYXZlKHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJpZ2dlck1vZGVzQ2hhbmdlKHVwZGF0ZVZhbHVlcyhtZXJnZWRNb2RlcywgbmV3TW9kZSwgbWVyZ2VkQWN0aXZlUGlja2VySW5kZXgpLCB1cGRhdGVWYWx1ZXMoc2VsZWN0ZWRWYWx1ZSwgZGF0ZSwgbWVyZ2VkQWN0aXZlUGlja2VySW5kZXgpKTtcbiAgICAgICAgdmFyIHZpZXdEYXRlID0gZGF0ZTtcblxuICAgICAgICBpZiAocGFuZWxQb3NpdGlvbiA9PT0gJ3JpZ2h0JyAmJiBtZXJnZWRNb2Rlc1ttZXJnZWRBY3RpdmVQaWNrZXJJbmRleF0gPT09IG5ld01vZGUpIHtcbiAgICAgICAgICB2aWV3RGF0ZSA9IGdldENsb3NpbmdWaWV3RGF0ZSh2aWV3RGF0ZSwgbmV3TW9kZSwgZ2VuZXJhdGVDb25maWcsIC0xKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFZpZXdEYXRlKHZpZXdEYXRlLCBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCk7XG4gICAgICB9LFxuICAgICAgb25PazogbnVsbCxcbiAgICAgIG9uU2VsZWN0OiB1bmRlZmluZWQsXG4gICAgICBvbkNoYW5nZTogdW5kZWZpbmVkLFxuICAgICAgZGVmYXVsdFZhbHVlOiBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCA9PT0gMCA/IGdldFZhbHVlKHNlbGVjdGVkVmFsdWUsIDEpIDogZ2V0VmFsdWUoc2VsZWN0ZWRWYWx1ZSwgMCksXG4gICAgICBkZWZhdWx0UGlja2VyVmFsdWU6IHVuZGVmaW5lZFxuICAgIH0pKSk7XG4gIH1cblxuICB2YXIgYXJyb3dMZWZ0ID0gMDtcbiAgdmFyIHBhbmVsTGVmdCA9IDA7XG5cbiAgaWYgKG1lcmdlZEFjdGl2ZVBpY2tlckluZGV4ICYmIHN0YXJ0SW5wdXREaXZSZWYuY3VycmVudCAmJiBzZXBhcmF0b3JSZWYuY3VycmVudCAmJiBwYW5lbERpdlJlZi5jdXJyZW50KSB7XG4gICAgLy8gQXJyb3cgb2Zmc2V0XG4gICAgYXJyb3dMZWZ0ID0gc3RhcnRJbnB1dERpdlJlZi5jdXJyZW50Lm9mZnNldFdpZHRoICsgc2VwYXJhdG9yUmVmLmN1cnJlbnQub2Zmc2V0V2lkdGg7XG5cbiAgICBpZiAocGFuZWxEaXZSZWYuY3VycmVudC5vZmZzZXRXaWR0aCAmJiBhcnJvd0xlZnQgPiBwYW5lbERpdlJlZi5jdXJyZW50Lm9mZnNldFdpZHRoKSB7XG4gICAgICBwYW5lbExlZnQgPSBhcnJvd0xlZnQ7XG4gICAgfVxuICB9XG5cbiAgdmFyIGFycm93UG9zaXRpb25TdHlsZSA9IGRpcmVjdGlvbiA9PT0gJ3J0bCcgPyB7XG4gICAgcmlnaHQ6IGFycm93TGVmdFxuICB9IDoge1xuICAgIGxlZnQ6IGFycm93TGVmdFxuICB9O1xuXG4gIGZ1bmN0aW9uIHJlbmRlclBhbmVscygpIHtcbiAgICB2YXIgcGFuZWxzO1xuICAgIHZhciBleHRyYU5vZGUgPSBnZXRFeHRyYUZvb3RlcihwcmVmaXhDbHMsIG1lcmdlZE1vZGVzW21lcmdlZEFjdGl2ZVBpY2tlckluZGV4XSwgcmVuZGVyRXh0cmFGb290ZXIpO1xuICAgIHZhciByYW5nZXNOb2RlID0gZ2V0UmFuZ2VzKHtcbiAgICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgICAgY29tcG9uZW50czogY29tcG9uZW50cyxcbiAgICAgIG5lZWRDb25maXJtQnV0dG9uOiBuZWVkQ29uZmlybUJ1dHRvbixcbiAgICAgIG9rRGlzYWJsZWQ6ICFnZXRWYWx1ZShzZWxlY3RlZFZhbHVlLCBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCkgfHwgZGlzYWJsZWREYXRlICYmIGRpc2FibGVkRGF0ZShzZWxlY3RlZFZhbHVlW21lcmdlZEFjdGl2ZVBpY2tlckluZGV4XSksXG4gICAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICAgIHJhbmdlTGlzdDogcmFuZ2VMaXN0LFxuICAgICAgb25PazogZnVuY3Rpb24gb25PaygpIHtcbiAgICAgICAgaWYgKGdldFZhbHVlKHNlbGVjdGVkVmFsdWUsIG1lcmdlZEFjdGl2ZVBpY2tlckluZGV4KSkge1xuICAgICAgICAgIC8vIHRyaWdnZXJDaGFuZ2VPbGQoc2VsZWN0ZWRWYWx1ZSk7XG4gICAgICAgICAgdHJpZ2dlckNoYW5nZShzZWxlY3RlZFZhbHVlLCBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCk7XG5cbiAgICAgICAgICBpZiAoX29uT2spIHtcbiAgICAgICAgICAgIF9vbk9rKHNlbGVjdGVkVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHBpY2tlciAhPT0gJ3RpbWUnICYmICFzaG93VGltZSkge1xuICAgICAgdmFyIHZpZXdEYXRlID0gZ2V0Vmlld0RhdGUobWVyZ2VkQWN0aXZlUGlja2VySW5kZXgpO1xuICAgICAgdmFyIG5leHRWaWV3RGF0ZSA9IGdldENsb3NpbmdWaWV3RGF0ZSh2aWV3RGF0ZSwgcGlja2VyLCBnZW5lcmF0ZUNvbmZpZyk7XG4gICAgICB2YXIgY3VycmVudE1vZGUgPSBtZXJnZWRNb2Rlc1ttZXJnZWRBY3RpdmVQaWNrZXJJbmRleF07XG4gICAgICB2YXIgc2hvd0RvdWJsZVBhbmVsID0gY3VycmVudE1vZGUgPT09IHBpY2tlcjtcbiAgICAgIHZhciBsZWZ0UGFuZWwgPSByZW5kZXJQYW5lbChzaG93RG91YmxlUGFuZWwgPyAnbGVmdCcgOiBmYWxzZSwge1xuICAgICAgICBwaWNrZXJWYWx1ZTogdmlld0RhdGUsXG4gICAgICAgIG9uUGlja2VyVmFsdWVDaGFuZ2U6IGZ1bmN0aW9uIG9uUGlja2VyVmFsdWVDaGFuZ2UobmV3Vmlld0RhdGUpIHtcbiAgICAgICAgICBzZXRWaWV3RGF0ZShuZXdWaWV3RGF0ZSwgbWVyZ2VkQWN0aXZlUGlja2VySW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHZhciByaWdodFBhbmVsID0gcmVuZGVyUGFuZWwoJ3JpZ2h0Jywge1xuICAgICAgICBwaWNrZXJWYWx1ZTogbmV4dFZpZXdEYXRlLFxuICAgICAgICBvblBpY2tlclZhbHVlQ2hhbmdlOiBmdW5jdGlvbiBvblBpY2tlclZhbHVlQ2hhbmdlKG5ld1ZpZXdEYXRlKSB7XG4gICAgICAgICAgc2V0Vmlld0RhdGUoZ2V0Q2xvc2luZ1ZpZXdEYXRlKG5ld1ZpZXdEYXRlLCBwaWNrZXIsIGdlbmVyYXRlQ29uZmlnLCAtMSksIG1lcmdlZEFjdGl2ZVBpY2tlckluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdydGwnKSB7XG4gICAgICAgIHBhbmVscyA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCByaWdodFBhbmVsLCBzaG93RG91YmxlUGFuZWwgJiYgbGVmdFBhbmVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhbmVscyA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBsZWZ0UGFuZWwsIHNob3dEb3VibGVQYW5lbCAmJiByaWdodFBhbmVsKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcGFuZWxzID0gcmVuZGVyUGFuZWwoKTtcbiAgICB9XG5cbiAgICB2YXIgbWVyZ2VkTm9kZXMgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXBhbmVsc1wiKVxuICAgIH0sIHBhbmVscyksIChleHRyYU5vZGUgfHwgcmFuZ2VzTm9kZSkgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWZvb3RlclwiKVxuICAgIH0sIGV4dHJhTm9kZSwgcmFuZ2VzTm9kZSkpO1xuXG4gICAgaWYgKHBhbmVsUmVuZGVyKSB7XG4gICAgICBtZXJnZWROb2RlcyA9IHBhbmVsUmVuZGVyKG1lcmdlZE5vZGVzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXBhbmVsLWNvbnRhaW5lclwiKSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1hcmdpbkxlZnQ6IHBhbmVsTGVmdFxuICAgICAgfSxcbiAgICAgIHJlZjogcGFuZWxEaXZSZWYsXG4gICAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfSwgbWVyZ2VkTm9kZXMpO1xuICB9XG5cbiAgdmFyIHJhbmdlUGFuZWwgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItcmFuZ2Utd3JhcHBlclwiKSwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1cIikuY29uY2F0KHBpY2tlciwgXCItcmFuZ2Utd3JhcHBlclwiKSksXG4gICAgc3R5bGU6IHtcbiAgICAgIG1pbldpZHRoOiBwb3B1cE1pbldpZHRoXG4gICAgfVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXJhbmdlLWFycm93XCIpLFxuICAgIHN0eWxlOiBhcnJvd1Bvc2l0aW9uU3R5bGVcbiAgfSksIHJlbmRlclBhbmVscygpKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gSWNvbnMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgc3VmZml4Tm9kZTtcblxuICBpZiAoc3VmZml4SWNvbikge1xuICAgIHN1ZmZpeE5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXN1ZmZpeFwiKVxuICAgIH0sIHN1ZmZpeEljb24pO1xuICB9XG5cbiAgdmFyIGNsZWFyTm9kZTtcblxuICBpZiAoYWxsb3dDbGVhciAmJiAoZ2V0VmFsdWUobWVyZ2VkVmFsdWUsIDApICYmICFtZXJnZWREaXNhYmxlZFswXSB8fCBnZXRWYWx1ZShtZXJnZWRWYWx1ZSwgMSkgJiYgIW1lcmdlZERpc2FibGVkWzFdKSkge1xuICAgIGNsZWFyTm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9LFxuICAgICAgb25Nb3VzZVVwOiBmdW5jdGlvbiBvbk1vdXNlVXAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBtZXJnZWRWYWx1ZTtcblxuICAgICAgICBpZiAoIW1lcmdlZERpc2FibGVkWzBdKSB7XG4gICAgICAgICAgdmFsdWVzID0gdXBkYXRlVmFsdWVzKHZhbHVlcywgbnVsbCwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW1lcmdlZERpc2FibGVkWzFdKSB7XG4gICAgICAgICAgdmFsdWVzID0gdXBkYXRlVmFsdWVzKHZhbHVlcywgbnVsbCwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICB0cmlnZ2VyQ2hhbmdlKHZhbHVlcywgbnVsbCk7XG5cbiAgICAgICAgX3RyaWdnZXJPcGVuKGZhbHNlLCBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCk7XG4gICAgICB9LFxuICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWNsZWFyXCIpXG4gICAgfSwgY2xlYXJJY29uIHx8IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItY2xlYXItYnRuXCIpXG4gICAgfSkpO1xuICB9XG5cbiAgdmFyIGlucHV0U2hhcmVkUHJvcHMgPSB7XG4gICAgc2l6ZTogZ2V0SW5wdXRTaXplKHBpY2tlciwgZm9ybWF0TGlzdFswXSwgZ2VuZXJhdGVDb25maWcpXG4gIH07XG4gIHZhciBhY3RpdmVCYXJMZWZ0ID0gMDtcbiAgdmFyIGFjdGl2ZUJhcldpZHRoID0gMDtcblxuICBpZiAoc3RhcnRJbnB1dERpdlJlZi5jdXJyZW50ICYmIGVuZElucHV0RGl2UmVmLmN1cnJlbnQgJiYgc2VwYXJhdG9yUmVmLmN1cnJlbnQpIHtcbiAgICBpZiAobWVyZ2VkQWN0aXZlUGlja2VySW5kZXggPT09IDApIHtcbiAgICAgIGFjdGl2ZUJhcldpZHRoID0gc3RhcnRJbnB1dERpdlJlZi5jdXJyZW50Lm9mZnNldFdpZHRoO1xuICAgIH0gZWxzZSB7XG4gICAgICBhY3RpdmVCYXJMZWZ0ID0gYXJyb3dMZWZ0O1xuICAgICAgYWN0aXZlQmFyV2lkdGggPSBlbmRJbnB1dERpdlJlZi5jdXJyZW50Lm9mZnNldFdpZHRoO1xuICAgIH1cbiAgfVxuXG4gIHZhciBhY3RpdmVCYXJQb3NpdGlvblN0eWxlID0gZGlyZWN0aW9uID09PSAncnRsJyA/IHtcbiAgICByaWdodDogYWN0aXZlQmFyTGVmdFxuICB9IDoge1xuICAgIGxlZnQ6IGFjdGl2ZUJhckxlZnRcbiAgfTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBSZXR1cm4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgb25Db250ZXh0U2VsZWN0ID0gZnVuY3Rpb24gb25Db250ZXh0U2VsZWN0KGRhdGUsIHR5cGUpIHtcbiAgICB2YXIgdmFsdWVzID0gdXBkYXRlVmFsdWVzKHNlbGVjdGVkVmFsdWUsIGRhdGUsIG1lcmdlZEFjdGl2ZVBpY2tlckluZGV4KTtcblxuICAgIGlmICh0eXBlID09PSAnc3VibWl0JyB8fCB0eXBlICE9PSAna2V5JyAmJiAhbmVlZENvbmZpcm1CdXR0b24pIHtcbiAgICAgIC8vIHRyaWdnZXJDaGFuZ2Ugd2lsbCBhbHNvIHVwZGF0ZSBzZWxlY3RlZCB2YWx1ZXNcbiAgICAgIHRyaWdnZXJDaGFuZ2UodmFsdWVzLCBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCk7IC8vIGNsZWFyIGhvdmVyIHZhbHVlIHN0eWxlXG5cbiAgICAgIGlmIChtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCA9PT0gMCkge1xuICAgICAgICBvblN0YXJ0TGVhdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9uRW5kTGVhdmUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2V0U2VsZWN0ZWRWYWx1ZSh2YWx1ZXMpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGFuZWxDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHtcbiAgICAgIG9wZXJhdGlvblJlZjogb3BlcmF0aW9uUmVmLFxuICAgICAgaGlkZUhlYWRlcjogcGlja2VyID09PSAndGltZScsXG4gICAgICBvbkRhdGVNb3VzZUVudGVyOiBvbkRhdGVNb3VzZUVudGVyLFxuICAgICAgb25EYXRlTW91c2VMZWF2ZTogb25EYXRlTW91c2VMZWF2ZSxcbiAgICAgIGhpZGVSYW5nZXM6IHRydWUsXG4gICAgICBvblNlbGVjdDogb25Db250ZXh0U2VsZWN0LFxuICAgICAgb3BlbjogbWVyZ2VkT3BlblxuICAgIH1cbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGlja2VyVHJpZ2dlciwge1xuICAgIHZpc2libGU6IG1lcmdlZE9wZW4sXG4gICAgcG9wdXBFbGVtZW50OiByYW5nZVBhbmVsLFxuICAgIHBvcHVwU3R5bGU6IHBvcHVwU3R5bGUsXG4gICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgZHJvcGRvd25DbGFzc05hbWU6IGRyb3Bkb3duQ2xhc3NOYW1lLFxuICAgIGRyb3Bkb3duQWxpZ246IGRyb3Bkb3duQWxpZ24sXG4gICAgZ2V0UG9wdXBDb250YWluZXI6IGdldFBvcHVwQ29udGFpbmVyLFxuICAgIHRyYW5zaXRpb25OYW1lOiB0cmFuc2l0aW9uTmFtZSxcbiAgICByYW5nZTogdHJ1ZSxcbiAgICBkaXJlY3Rpb246IGRpcmVjdGlvblxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfZXh0ZW5kcyh7XG4gICAgcmVmOiBjb250YWluZXJSZWYsXG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKHByZWZpeENscywgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1yYW5nZVwiKSwgY2xhc3NOYW1lLCAoX2NsYXNzTmFtZXMyID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lczIsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItZGlzYWJsZWRcIiksIG1lcmdlZERpc2FibGVkWzBdICYmIG1lcmdlZERpc2FibGVkWzFdKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzMiwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1mb2N1c2VkXCIpLCBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCA9PT0gMCA/IHN0YXJ0Rm9jdXNlZCA6IGVuZEZvY3VzZWQpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMyLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXJ0bFwiKSwgZGlyZWN0aW9uID09PSAncnRsJyksIF9jbGFzc05hbWVzMikpLFxuICAgIHN0eWxlOiBzdHlsZSxcbiAgICBvbkNsaWNrOiBvblBpY2tlckNsaWNrLFxuICAgIG9uTW91c2VFbnRlcjogb25Nb3VzZUVudGVyLFxuICAgIG9uTW91c2VMZWF2ZTogb25Nb3VzZUxlYXZlLFxuICAgIG9uTW91c2VEb3duOiBvblBpY2tlck1vdXNlRG93blxuICB9LCBnZXREYXRhT3JBcmlhUHJvcHMocHJvcHMpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWlucHV0XCIpLCAoX2NsYXNzTmFtZXMzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lczMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaW5wdXQtYWN0aXZlXCIpLCBtZXJnZWRBY3RpdmVQaWNrZXJJbmRleCA9PT0gMCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lczMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaW5wdXQtcGxhY2Vob2xkZXJcIiksICEhc3RhcnRIb3ZlclZhbHVlKSwgX2NsYXNzTmFtZXMzKSksXG4gICAgcmVmOiBzdGFydElucHV0RGl2UmVmXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgX2V4dGVuZHMoe1xuICAgIGlkOiBpZCxcbiAgICBkaXNhYmxlZDogbWVyZ2VkRGlzYWJsZWRbMF0sXG4gICAgcmVhZE9ubHk6IGlucHV0UmVhZE9ubHkgfHwgdHlwZW9mIGZvcm1hdExpc3RbMF0gPT09ICdmdW5jdGlvbicgfHwgIXN0YXJ0VHlwaW5nLFxuICAgIHZhbHVlOiBzdGFydEhvdmVyVmFsdWUgfHwgc3RhcnRUZXh0LFxuICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICB0cmlnZ2VyU3RhcnRUZXh0Q2hhbmdlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9LFxuICAgIGF1dG9Gb2N1czogYXV0b0ZvY3VzLFxuICAgIHBsYWNlaG9sZGVyOiBnZXRWYWx1ZShwbGFjZWhvbGRlciwgMCkgfHwgJycsXG4gICAgcmVmOiBzdGFydElucHV0UmVmXG4gIH0sIHN0YXJ0SW5wdXRQcm9wcywgaW5wdXRTaGFyZWRQcm9wcywge1xuICAgIGF1dG9Db21wbGV0ZTogYXV0b0NvbXBsZXRlXG4gIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItcmFuZ2Utc2VwYXJhdG9yXCIpLFxuICAgIHJlZjogc2VwYXJhdG9yUmVmXG4gIH0sIHNlcGFyYXRvciksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1pbnB1dFwiKSwgKF9jbGFzc05hbWVzNCA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXM0LCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWlucHV0LWFjdGl2ZVwiKSwgbWVyZ2VkQWN0aXZlUGlja2VySW5kZXggPT09IDEpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXM0LCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWlucHV0LXBsYWNlaG9sZGVyXCIpLCAhIWVuZEhvdmVyVmFsdWUpLCBfY2xhc3NOYW1lczQpKSxcbiAgICByZWY6IGVuZElucHV0RGl2UmVmXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgX2V4dGVuZHMoe1xuICAgIGRpc2FibGVkOiBtZXJnZWREaXNhYmxlZFsxXSxcbiAgICByZWFkT25seTogaW5wdXRSZWFkT25seSB8fCB0eXBlb2YgZm9ybWF0TGlzdFswXSA9PT0gJ2Z1bmN0aW9uJyB8fCAhZW5kVHlwaW5nLFxuICAgIHZhbHVlOiBlbmRIb3ZlclZhbHVlIHx8IGVuZFRleHQsXG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgIHRyaWdnZXJFbmRUZXh0Q2hhbmdlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9LFxuICAgIHBsYWNlaG9sZGVyOiBnZXRWYWx1ZShwbGFjZWhvbGRlciwgMSkgfHwgJycsXG4gICAgcmVmOiBlbmRJbnB1dFJlZlxuICB9LCBlbmRJbnB1dFByb3BzLCBpbnB1dFNoYXJlZFByb3BzLCB7XG4gICAgYXV0b0NvbXBsZXRlOiBhdXRvQ29tcGxldGVcbiAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1hY3RpdmUtYmFyXCIpLFxuICAgIHN0eWxlOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGFjdGl2ZUJhclBvc2l0aW9uU3R5bGUpLCB7fSwge1xuICAgICAgd2lkdGg6IGFjdGl2ZUJhcldpZHRoLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZSdcbiAgICB9KVxuICB9KSwgc3VmZml4Tm9kZSwgY2xlYXJOb2RlKSkpO1xufSAvLyBXcmFwIHdpdGggY2xhc3MgY29tcG9uZW50IHRvIGVuYWJsZSBwYXNzIGdlbmVyaWMgd2l0aCBpbnN0YW5jZSBtZXRob2RcblxuXG52YXIgUmFuZ2VQaWNrZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFJhbmdlUGlja2VyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFJhbmdlUGlja2VyKTtcblxuICBmdW5jdGlvbiBSYW5nZVBpY2tlcigpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmFuZ2VQaWNrZXIpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBfdGhpcy5waWNrZXJSZWYgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlUmVmKCk7XG5cbiAgICBfdGhpcy5mb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfdGhpcy5waWNrZXJSZWYuY3VycmVudCkge1xuICAgICAgICBfdGhpcy5waWNrZXJSZWYuY3VycmVudC5mb2N1cygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5ibHVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF90aGlzLnBpY2tlclJlZi5jdXJyZW50KSB7XG4gICAgICAgIF90aGlzLnBpY2tlclJlZi5jdXJyZW50LmJsdXIoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJhbmdlUGlja2VyLCBbe1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElubmVyUmFuZ2VQaWNrZXIsIF9leHRlbmRzKHt9LCB0aGlzLnByb3BzLCB7XG4gICAgICAgIHBpY2tlclJlZjogdGhpcy5waWNrZXJSZWZcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUmFuZ2VQaWNrZXI7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbmV4cG9ydCBkZWZhdWx0IFJhbmdlUGlja2VyOyIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IG5vdGVPbmNlIH0gZnJvbSBcInJjLXV0aWwvZXMvd2FybmluZ1wiO1xudmFyIGdlbmVyYXRlQ29uZmlnID0ge1xuICAvLyBnZXRcbiAgZ2V0Tm93OiBmdW5jdGlvbiBnZXROb3coKSB7XG4gICAgcmV0dXJuIG1vbWVudCgpO1xuICB9LFxuICBnZXRGaXhlZERhdGU6IGZ1bmN0aW9uIGdldEZpeGVkRGF0ZShzdHJpbmcpIHtcbiAgICByZXR1cm4gbW9tZW50KHN0cmluZywgJ1lZWVktTU0tREQnKTtcbiAgfSxcbiAgZ2V0RW5kRGF0ZTogZnVuY3Rpb24gZ2V0RW5kRGF0ZShkYXRlKSB7XG4gICAgdmFyIGNsb25lID0gZGF0ZS5jbG9uZSgpO1xuICAgIHJldHVybiBjbG9uZS5lbmRPZignbW9udGgnKTtcbiAgfSxcbiAgZ2V0V2Vla0RheTogZnVuY3Rpb24gZ2V0V2Vla0RheShkYXRlKSB7XG4gICAgdmFyIGNsb25lID0gZGF0ZS5jbG9uZSgpLmxvY2FsZSgnZW5fVVMnKTtcbiAgICByZXR1cm4gY2xvbmUud2Vla2RheSgpICsgY2xvbmUubG9jYWxlRGF0YSgpLmZpcnN0RGF5T2ZXZWVrKCk7XG4gIH0sXG4gIGdldFllYXI6IGZ1bmN0aW9uIGdldFllYXIoZGF0ZSkge1xuICAgIHJldHVybiBkYXRlLnllYXIoKTtcbiAgfSxcbiAgZ2V0TW9udGg6IGZ1bmN0aW9uIGdldE1vbnRoKGRhdGUpIHtcbiAgICByZXR1cm4gZGF0ZS5tb250aCgpO1xuICB9LFxuICBnZXREYXRlOiBmdW5jdGlvbiBnZXREYXRlKGRhdGUpIHtcbiAgICByZXR1cm4gZGF0ZS5kYXRlKCk7XG4gIH0sXG4gIGdldEhvdXI6IGZ1bmN0aW9uIGdldEhvdXIoZGF0ZSkge1xuICAgIHJldHVybiBkYXRlLmhvdXIoKTtcbiAgfSxcbiAgZ2V0TWludXRlOiBmdW5jdGlvbiBnZXRNaW51dGUoZGF0ZSkge1xuICAgIHJldHVybiBkYXRlLm1pbnV0ZSgpO1xuICB9LFxuICBnZXRTZWNvbmQ6IGZ1bmN0aW9uIGdldFNlY29uZChkYXRlKSB7XG4gICAgcmV0dXJuIGRhdGUuc2Vjb25kKCk7XG4gIH0sXG4gIC8vIHNldFxuICBhZGRZZWFyOiBmdW5jdGlvbiBhZGRZZWFyKGRhdGUsIGRpZmYpIHtcbiAgICB2YXIgY2xvbmUgPSBkYXRlLmNsb25lKCk7XG4gICAgcmV0dXJuIGNsb25lLmFkZChkaWZmLCAneWVhcicpO1xuICB9LFxuICBhZGRNb250aDogZnVuY3Rpb24gYWRkTW9udGgoZGF0ZSwgZGlmZikge1xuICAgIHZhciBjbG9uZSA9IGRhdGUuY2xvbmUoKTtcbiAgICByZXR1cm4gY2xvbmUuYWRkKGRpZmYsICdtb250aCcpO1xuICB9LFxuICBhZGREYXRlOiBmdW5jdGlvbiBhZGREYXRlKGRhdGUsIGRpZmYpIHtcbiAgICB2YXIgY2xvbmUgPSBkYXRlLmNsb25lKCk7XG4gICAgcmV0dXJuIGNsb25lLmFkZChkaWZmLCAnZGF5Jyk7XG4gIH0sXG4gIHNldFllYXI6IGZ1bmN0aW9uIHNldFllYXIoZGF0ZSwgeWVhcikge1xuICAgIHZhciBjbG9uZSA9IGRhdGUuY2xvbmUoKTtcbiAgICByZXR1cm4gY2xvbmUueWVhcih5ZWFyKTtcbiAgfSxcbiAgc2V0TW9udGg6IGZ1bmN0aW9uIHNldE1vbnRoKGRhdGUsIG1vbnRoKSB7XG4gICAgdmFyIGNsb25lID0gZGF0ZS5jbG9uZSgpO1xuICAgIHJldHVybiBjbG9uZS5tb250aChtb250aCk7XG4gIH0sXG4gIHNldERhdGU6IGZ1bmN0aW9uIHNldERhdGUoZGF0ZSwgbnVtKSB7XG4gICAgdmFyIGNsb25lID0gZGF0ZS5jbG9uZSgpO1xuICAgIHJldHVybiBjbG9uZS5kYXRlKG51bSk7XG4gIH0sXG4gIHNldEhvdXI6IGZ1bmN0aW9uIHNldEhvdXIoZGF0ZSwgaG91cikge1xuICAgIHZhciBjbG9uZSA9IGRhdGUuY2xvbmUoKTtcbiAgICByZXR1cm4gY2xvbmUuaG91cihob3VyKTtcbiAgfSxcbiAgc2V0TWludXRlOiBmdW5jdGlvbiBzZXRNaW51dGUoZGF0ZSwgbWludXRlKSB7XG4gICAgdmFyIGNsb25lID0gZGF0ZS5jbG9uZSgpO1xuICAgIHJldHVybiBjbG9uZS5taW51dGUobWludXRlKTtcbiAgfSxcbiAgc2V0U2Vjb25kOiBmdW5jdGlvbiBzZXRTZWNvbmQoZGF0ZSwgc2Vjb25kKSB7XG4gICAgdmFyIGNsb25lID0gZGF0ZS5jbG9uZSgpO1xuICAgIHJldHVybiBjbG9uZS5zZWNvbmQoc2Vjb25kKTtcbiAgfSxcbiAgLy8gQ29tcGFyZVxuICBpc0FmdGVyOiBmdW5jdGlvbiBpc0FmdGVyKGRhdGUxLCBkYXRlMikge1xuICAgIHJldHVybiBkYXRlMS5pc0FmdGVyKGRhdGUyKTtcbiAgfSxcbiAgaXNWYWxpZGF0ZTogZnVuY3Rpb24gaXNWYWxpZGF0ZShkYXRlKSB7XG4gICAgcmV0dXJuIGRhdGUuaXNWYWxpZCgpO1xuICB9LFxuICBsb2NhbGU6IHtcbiAgICBnZXRXZWVrRmlyc3REYXk6IGZ1bmN0aW9uIGdldFdlZWtGaXJzdERheShsb2NhbGUpIHtcbiAgICAgIHZhciBkYXRlID0gbW9tZW50KCkubG9jYWxlKGxvY2FsZSk7XG4gICAgICByZXR1cm4gZGF0ZS5sb2NhbGVEYXRhKCkuZmlyc3REYXlPZldlZWsoKTtcbiAgICB9LFxuICAgIGdldFdlZWtGaXJzdERhdGU6IGZ1bmN0aW9uIGdldFdlZWtGaXJzdERhdGUobG9jYWxlLCBkYXRlKSB7XG4gICAgICB2YXIgY2xvbmUgPSBkYXRlLmNsb25lKCk7XG4gICAgICB2YXIgcmVzdWx0ID0gY2xvbmUubG9jYWxlKGxvY2FsZSk7XG4gICAgICByZXR1cm4gcmVzdWx0LndlZWtkYXkoMCk7XG4gICAgfSxcbiAgICBnZXRXZWVrOiBmdW5jdGlvbiBnZXRXZWVrKGxvY2FsZSwgZGF0ZSkge1xuICAgICAgdmFyIGNsb25lID0gZGF0ZS5jbG9uZSgpO1xuICAgICAgdmFyIHJlc3VsdCA9IGNsb25lLmxvY2FsZShsb2NhbGUpO1xuICAgICAgcmV0dXJuIHJlc3VsdC53ZWVrKCk7XG4gICAgfSxcbiAgICBnZXRTaG9ydFdlZWtEYXlzOiBmdW5jdGlvbiBnZXRTaG9ydFdlZWtEYXlzKGxvY2FsZSkge1xuICAgICAgdmFyIGRhdGUgPSBtb21lbnQoKS5sb2NhbGUobG9jYWxlKTtcbiAgICAgIHJldHVybiBkYXRlLmxvY2FsZURhdGEoKS53ZWVrZGF5c01pbigpO1xuICAgIH0sXG4gICAgZ2V0U2hvcnRNb250aHM6IGZ1bmN0aW9uIGdldFNob3J0TW9udGhzKGxvY2FsZSkge1xuICAgICAgdmFyIGRhdGUgPSBtb21lbnQoKS5sb2NhbGUobG9jYWxlKTtcbiAgICAgIHJldHVybiBkYXRlLmxvY2FsZURhdGEoKS5tb250aHNTaG9ydCgpO1xuICAgIH0sXG4gICAgZm9ybWF0OiBmdW5jdGlvbiBmb3JtYXQobG9jYWxlLCBkYXRlLCBfZm9ybWF0KSB7XG4gICAgICB2YXIgY2xvbmUgPSBkYXRlLmNsb25lKCk7XG4gICAgICB2YXIgcmVzdWx0ID0gY2xvbmUubG9jYWxlKGxvY2FsZSk7XG4gICAgICByZXR1cm4gcmVzdWx0LmZvcm1hdChfZm9ybWF0KTtcbiAgICB9LFxuICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShsb2NhbGUsIHRleHQsIGZvcm1hdHMpIHtcbiAgICAgIHZhciBmYWxsYmFja0Zvcm1hdExpc3QgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3JtYXRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHZhciBmb3JtYXQgPSBmb3JtYXRzW2ldO1xuICAgICAgICB2YXIgZm9ybWF0VGV4dCA9IHRleHQ7XG5cbiAgICAgICAgaWYgKGZvcm1hdC5pbmNsdWRlcygnd28nKSB8fCBmb3JtYXQuaW5jbHVkZXMoJ1dvJykpIHtcbiAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgvd28vZywgJ3cnKS5yZXBsYWNlKC9Xby9nLCAnVycpO1xuICAgICAgICAgIHZhciBtYXRjaEZvcm1hdCA9IGZvcm1hdC5tYXRjaCgvWy1ZeU1tRGRIaFNzV3dHZ10rL2cpO1xuICAgICAgICAgIHZhciBtYXRjaFRleHQgPSBmb3JtYXRUZXh0Lm1hdGNoKC9bLVxcZF0rL2cpO1xuXG4gICAgICAgICAgaWYgKG1hdGNoRm9ybWF0ICYmIG1hdGNoVGV4dCkge1xuICAgICAgICAgICAgZm9ybWF0ID0gbWF0Y2hGb3JtYXQuam9pbignJyk7XG4gICAgICAgICAgICBmb3JtYXRUZXh0ID0gbWF0Y2hUZXh0LmpvaW4oJycpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmYWxsYmFja0Zvcm1hdExpc3QucHVzaChmb3JtYXQucmVwbGFjZSgvby9nLCAnJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRlID0gbW9tZW50KGZvcm1hdFRleHQsIGZvcm1hdCwgbG9jYWxlLCB0cnVlKTtcblxuICAgICAgICBpZiAoZGF0ZS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBGYWxsYmFjayB0byBmdXp6eSBtYXRjaGluZywgdGhpcyBzaG91bGQgYWx3YXlzIG5vdCByZWFjaCBtYXRjaCBvciBuZWVkIGZpcmUgYSBpc3N1ZVxuXG5cbiAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBmYWxsYmFja0Zvcm1hdExpc3QubGVuZ3RoOyBfaSArPSAxKSB7XG4gICAgICAgIHZhciBfZGF0ZSA9IG1vbWVudCh0ZXh0LCBmYWxsYmFja0Zvcm1hdExpc3RbX2ldLCBsb2NhbGUsIGZhbHNlKTtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblxuXG4gICAgICAgIGlmIChfZGF0ZS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICBub3RlT25jZShmYWxzZSwgJ05vdCBtYXRjaCBhbnkgZm9ybWF0IHN0cmljdGx5IGFuZCBmYWxsYmFjayB0byBmdXp6eSBtYXRjaC4gUGxlYXNlIGhlbHAgdG8gZmlyZSBhIGlzc3VlIGFib3V0IHRoaXMuJyk7XG4gICAgICAgICAgcmV0dXJuIF9kYXRlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGdlbmVyYXRlQ29uZmlnOyIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgeyBpc0luUmFuZ2UgfSBmcm9tICcuLi91dGlscy9kYXRlVXRpbCc7XG5pbXBvcnQgeyBnZXRWYWx1ZSB9IGZyb20gJy4uL3V0aWxzL21pc2NVdGlsJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUNlbGxDbGFzc05hbWUoX3JlZikge1xuICB2YXIgY2VsbFByZWZpeENscyA9IF9yZWYuY2VsbFByZWZpeENscyxcbiAgICAgIGdlbmVyYXRlQ29uZmlnID0gX3JlZi5nZW5lcmF0ZUNvbmZpZyxcbiAgICAgIHJhbmdlZFZhbHVlID0gX3JlZi5yYW5nZWRWYWx1ZSxcbiAgICAgIGhvdmVyUmFuZ2VkVmFsdWUgPSBfcmVmLmhvdmVyUmFuZ2VkVmFsdWUsXG4gICAgICBpc0luVmlldyA9IF9yZWYuaXNJblZpZXcsXG4gICAgICBpc1NhbWVDZWxsID0gX3JlZi5pc1NhbWVDZWxsLFxuICAgICAgb2Zmc2V0Q2VsbCA9IF9yZWYub2Zmc2V0Q2VsbCxcbiAgICAgIHRvZGF5ID0gX3JlZi50b2RheSxcbiAgICAgIHZhbHVlID0gX3JlZi52YWx1ZTtcblxuICBmdW5jdGlvbiBnZXRDbGFzc05hbWUoY3VycmVudERhdGUpIHtcbiAgICB2YXIgX3JlZjI7XG5cbiAgICB2YXIgcHJldkRhdGUgPSBvZmZzZXRDZWxsKGN1cnJlbnREYXRlLCAtMSk7XG4gICAgdmFyIG5leHREYXRlID0gb2Zmc2V0Q2VsbChjdXJyZW50RGF0ZSwgMSk7XG4gICAgdmFyIHJhbmdlU3RhcnQgPSBnZXRWYWx1ZShyYW5nZWRWYWx1ZSwgMCk7XG4gICAgdmFyIHJhbmdlRW5kID0gZ2V0VmFsdWUocmFuZ2VkVmFsdWUsIDEpO1xuICAgIHZhciBob3ZlclN0YXJ0ID0gZ2V0VmFsdWUoaG92ZXJSYW5nZWRWYWx1ZSwgMCk7XG4gICAgdmFyIGhvdmVyRW5kID0gZ2V0VmFsdWUoaG92ZXJSYW5nZWRWYWx1ZSwgMSk7XG4gICAgdmFyIGlzUmFuZ2VIb3ZlcmVkID0gaXNJblJhbmdlKGdlbmVyYXRlQ29uZmlnLCBob3ZlclN0YXJ0LCBob3ZlckVuZCwgY3VycmVudERhdGUpO1xuXG4gICAgZnVuY3Rpb24gaXNSYW5nZVN0YXJ0KGRhdGUpIHtcbiAgICAgIHJldHVybiBpc1NhbWVDZWxsKHJhbmdlU3RhcnQsIGRhdGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzUmFuZ2VFbmQoZGF0ZSkge1xuICAgICAgcmV0dXJuIGlzU2FtZUNlbGwocmFuZ2VFbmQsIGRhdGUpO1xuICAgIH1cblxuICAgIHZhciBpc0hvdmVyU3RhcnQgPSBpc1NhbWVDZWxsKGhvdmVyU3RhcnQsIGN1cnJlbnREYXRlKTtcbiAgICB2YXIgaXNIb3ZlckVuZCA9IGlzU2FtZUNlbGwoaG92ZXJFbmQsIGN1cnJlbnREYXRlKTtcbiAgICB2YXIgaXNIb3ZlckVkZ2VTdGFydCA9IChpc1JhbmdlSG92ZXJlZCB8fCBpc0hvdmVyRW5kKSAmJiAoIWlzSW5WaWV3KHByZXZEYXRlKSB8fCBpc1JhbmdlRW5kKHByZXZEYXRlKSk7XG4gICAgdmFyIGlzSG92ZXJFZGdlRW5kID0gKGlzUmFuZ2VIb3ZlcmVkIHx8IGlzSG92ZXJTdGFydCkgJiYgKCFpc0luVmlldyhuZXh0RGF0ZSkgfHwgaXNSYW5nZVN0YXJ0KG5leHREYXRlKSk7XG4gICAgcmV0dXJuIF9yZWYyID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfcmVmMiwgXCJcIi5jb25jYXQoY2VsbFByZWZpeENscywgXCItaW4tdmlld1wiKSwgaXNJblZpZXcoY3VycmVudERhdGUpKSwgX2RlZmluZVByb3BlcnR5KF9yZWYyLCBcIlwiLmNvbmNhdChjZWxsUHJlZml4Q2xzLCBcIi1pbi1yYW5nZVwiKSwgaXNJblJhbmdlKGdlbmVyYXRlQ29uZmlnLCByYW5nZVN0YXJ0LCByYW5nZUVuZCwgY3VycmVudERhdGUpKSwgX2RlZmluZVByb3BlcnR5KF9yZWYyLCBcIlwiLmNvbmNhdChjZWxsUHJlZml4Q2xzLCBcIi1yYW5nZS1zdGFydFwiKSwgaXNSYW5nZVN0YXJ0KGN1cnJlbnREYXRlKSksIF9kZWZpbmVQcm9wZXJ0eShfcmVmMiwgXCJcIi5jb25jYXQoY2VsbFByZWZpeENscywgXCItcmFuZ2UtZW5kXCIpLCBpc1JhbmdlRW5kKGN1cnJlbnREYXRlKSksIF9kZWZpbmVQcm9wZXJ0eShfcmVmMiwgXCJcIi5jb25jYXQoY2VsbFByZWZpeENscywgXCItcmFuZ2Utc3RhcnQtc2luZ2xlXCIpLCBpc1JhbmdlU3RhcnQoY3VycmVudERhdGUpICYmICFyYW5nZUVuZCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmMiwgXCJcIi5jb25jYXQoY2VsbFByZWZpeENscywgXCItcmFuZ2UtZW5kLXNpbmdsZVwiKSwgaXNSYW5nZUVuZChjdXJyZW50RGF0ZSkgJiYgIXJhbmdlU3RhcnQpLCBfZGVmaW5lUHJvcGVydHkoX3JlZjIsIFwiXCIuY29uY2F0KGNlbGxQcmVmaXhDbHMsIFwiLXJhbmdlLXN0YXJ0LW5lYXItaG92ZXJcIiksIGlzUmFuZ2VTdGFydChjdXJyZW50RGF0ZSkgJiYgKGlzU2FtZUNlbGwocHJldkRhdGUsIGhvdmVyU3RhcnQpIHx8IGlzSW5SYW5nZShnZW5lcmF0ZUNvbmZpZywgaG92ZXJTdGFydCwgaG92ZXJFbmQsIHByZXZEYXRlKSkpLCBfZGVmaW5lUHJvcGVydHkoX3JlZjIsIFwiXCIuY29uY2F0KGNlbGxQcmVmaXhDbHMsIFwiLXJhbmdlLWVuZC1uZWFyLWhvdmVyXCIpLCBpc1JhbmdlRW5kKGN1cnJlbnREYXRlKSAmJiAoaXNTYW1lQ2VsbChuZXh0RGF0ZSwgaG92ZXJFbmQpIHx8IGlzSW5SYW5nZShnZW5lcmF0ZUNvbmZpZywgaG92ZXJTdGFydCwgaG92ZXJFbmQsIG5leHREYXRlKSkpLCBfZGVmaW5lUHJvcGVydHkoX3JlZjIsIFwiXCIuY29uY2F0KGNlbGxQcmVmaXhDbHMsIFwiLXJhbmdlLWhvdmVyXCIpLCBpc1JhbmdlSG92ZXJlZCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmMiwgXCJcIi5jb25jYXQoY2VsbFByZWZpeENscywgXCItcmFuZ2UtaG92ZXItc3RhcnRcIiksIGlzSG92ZXJTdGFydCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmMiwgXCJcIi5jb25jYXQoY2VsbFByZWZpeENscywgXCItcmFuZ2UtaG92ZXItZW5kXCIpLCBpc0hvdmVyRW5kKSwgX2RlZmluZVByb3BlcnR5KF9yZWYyLCBcIlwiLmNvbmNhdChjZWxsUHJlZml4Q2xzLCBcIi1yYW5nZS1ob3Zlci1lZGdlLXN0YXJ0XCIpLCBpc0hvdmVyRWRnZVN0YXJ0KSwgX2RlZmluZVByb3BlcnR5KF9yZWYyLCBcIlwiLmNvbmNhdChjZWxsUHJlZml4Q2xzLCBcIi1yYW5nZS1ob3Zlci1lZGdlLWVuZFwiKSwgaXNIb3ZlckVkZ2VFbmQpLCBfZGVmaW5lUHJvcGVydHkoX3JlZjIsIFwiXCIuY29uY2F0KGNlbGxQcmVmaXhDbHMsIFwiLXJhbmdlLWhvdmVyLWVkZ2Utc3RhcnQtbmVhci1yYW5nZVwiKSwgaXNIb3ZlckVkZ2VTdGFydCAmJiBpc1NhbWVDZWxsKHByZXZEYXRlLCByYW5nZUVuZCkpLCBfZGVmaW5lUHJvcGVydHkoX3JlZjIsIFwiXCIuY29uY2F0KGNlbGxQcmVmaXhDbHMsIFwiLXJhbmdlLWhvdmVyLWVkZ2UtZW5kLW5lYXItcmFuZ2VcIiksIGlzSG92ZXJFZGdlRW5kICYmIGlzU2FtZUNlbGwobmV4dERhdGUsIHJhbmdlU3RhcnQpKSwgX2RlZmluZVByb3BlcnR5KF9yZWYyLCBcIlwiLmNvbmNhdChjZWxsUHJlZml4Q2xzLCBcIi10b2RheVwiKSwgaXNTYW1lQ2VsbCh0b2RheSwgY3VycmVudERhdGUpKSwgX2RlZmluZVByb3BlcnR5KF9yZWYyLCBcIlwiLmNvbmNhdChjZWxsUHJlZml4Q2xzLCBcIi1zZWxlY3RlZFwiKSwgaXNTYW1lQ2VsbCh2YWx1ZSwgY3VycmVudERhdGUpKSwgX3JlZjI7XG4gIH1cblxuICByZXR1cm4gZ2V0Q2xhc3NOYW1lO1xufSIsImltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZVZhbHVlVGV4dHMgZnJvbSAnLi91c2VWYWx1ZVRleHRzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUhvdmVyVmFsdWUodmFsdWVUZXh0LCBfcmVmKSB7XG4gIHZhciBmb3JtYXRMaXN0ID0gX3JlZi5mb3JtYXRMaXN0LFxuICAgICAgZ2VuZXJhdGVDb25maWcgPSBfcmVmLmdlbmVyYXRlQ29uZmlnLFxuICAgICAgbG9jYWxlID0gX3JlZi5sb2NhbGU7XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKG51bGwpLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICB2YWx1ZSA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBpbnRlcm5hbFNldFZhbHVlID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgcmFmID0gdXNlUmVmKG51bGwpO1xuXG4gIGZ1bmN0aW9uIHNldFZhbHVlKHZhbCkge1xuICAgIHZhciBpbW1lZGlhdGVseSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG4gICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmLmN1cnJlbnQpO1xuXG4gICAgaWYgKGltbWVkaWF0ZWx5KSB7XG4gICAgICBpbnRlcm5hbFNldFZhbHVlKHZhbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmFmLmN1cnJlbnQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgaW50ZXJuYWxTZXRWYWx1ZSh2YWwpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIF91c2VWYWx1ZVRleHRzID0gdXNlVmFsdWVUZXh0cyh2YWx1ZSwge1xuICAgIGZvcm1hdExpc3Q6IGZvcm1hdExpc3QsXG4gICAgZ2VuZXJhdGVDb25maWc6IGdlbmVyYXRlQ29uZmlnLFxuICAgIGxvY2FsZTogbG9jYWxlXG4gIH0pLFxuICAgICAgX3VzZVZhbHVlVGV4dHMyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVZhbHVlVGV4dHMsIDIpLFxuICAgICAgZmlyc3RUZXh0ID0gX3VzZVZhbHVlVGV4dHMyWzFdO1xuXG4gIGZ1bmN0aW9uIG9uRW50ZXIoZGF0ZSkge1xuICAgIHNldFZhbHVlKGRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25MZWF2ZSgpIHtcbiAgICB2YXIgaW1tZWRpYXRlbHkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuICAgIHNldFZhbHVlKG51bGwsIGltbWVkaWF0ZWx5KTtcbiAgfVxuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgb25MZWF2ZSh0cnVlKTtcbiAgfSwgW3ZhbHVlVGV4dF0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmLmN1cnJlbnQpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgcmV0dXJuIFtmaXJzdFRleHQsIG9uRW50ZXIsIG9uTGVhdmVdO1xufSIsImltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IEtleUNvZGUgZnJvbSBcInJjLXV0aWwvZXMvS2V5Q29kZVwiO1xuaW1wb3J0IHsgYWRkR2xvYmFsTW91c2VEb3duRXZlbnQsIGdldFRhcmdldEZyb21FdmVudCB9IGZyb20gJy4uL3V0aWxzL3VpVXRpbCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VQaWNrZXJJbnB1dChfcmVmKSB7XG4gIHZhciBvcGVuID0gX3JlZi5vcGVuLFxuICAgICAgdmFsdWUgPSBfcmVmLnZhbHVlLFxuICAgICAgaXNDbGlja091dHNpZGUgPSBfcmVmLmlzQ2xpY2tPdXRzaWRlLFxuICAgICAgdHJpZ2dlck9wZW4gPSBfcmVmLnRyaWdnZXJPcGVuLFxuICAgICAgZm9yd2FyZEtleURvd24gPSBfcmVmLmZvcndhcmRLZXlEb3duLFxuICAgICAgX29uS2V5RG93biA9IF9yZWYub25LZXlEb3duLFxuICAgICAgYmx1clRvQ2FuY2VsID0gX3JlZi5ibHVyVG9DYW5jZWwsXG4gICAgICBvblN1Ym1pdCA9IF9yZWYub25TdWJtaXQsXG4gICAgICBvbkNhbmNlbCA9IF9yZWYub25DYW5jZWwsXG4gICAgICBfb25Gb2N1cyA9IF9yZWYub25Gb2N1cyxcbiAgICAgIF9vbkJsdXIgPSBfcmVmLm9uQmx1cjtcblxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICB0eXBpbmcgPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0VHlwaW5nID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSxcbiAgICAgIGZvY3VzZWQgPSBfdXNlU3RhdGU0WzBdLFxuICAgICAgc2V0Rm9jdXNlZCA9IF91c2VTdGF0ZTRbMV07XG4gIC8qKlxuICAgKiBXZSB3aWxsIHByZXZlbnQgYmx1ciB0byBoYW5kbGUgb3BlbiBldmVudCB3aGVuIHVzZXIgY2xpY2sgb3V0c2lkZSxcbiAgICogc2luY2UgdGhpcyB3aWxsIHJlcGVhdCB0cmlnZ2VyIGBvbk9wZW5DaGFuZ2VgIGV2ZW50LlxuICAgKi9cblxuXG4gIHZhciBwcmV2ZW50Qmx1clJlZiA9IHVzZVJlZihmYWxzZSk7XG4gIHZhciB2YWx1ZUNoYW5nZWRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICB2YXIgcHJldmVudERlZmF1bHRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICB2YXIgaW5wdXRQcm9wcyA9IHtcbiAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oKSB7XG4gICAgICBzZXRUeXBpbmcodHJ1ZSk7XG4gICAgICB0cmlnZ2VyT3Blbih0cnVlKTtcbiAgICB9LFxuICAgIG9uS2V5RG93bjogZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcbiAgICAgIHZhciBwcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KCkge1xuICAgICAgICBwcmV2ZW50RGVmYXVsdFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgIH07XG5cbiAgICAgIF9vbktleURvd24oZSwgcHJldmVudERlZmF1bHQpO1xuXG4gICAgICBpZiAocHJldmVudERlZmF1bHRSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgICBzd2l0Y2ggKGUud2hpY2gpIHtcbiAgICAgICAgY2FzZSBLZXlDb2RlLkVOVEVSOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlmICghb3Blbikge1xuICAgICAgICAgICAgICB0cmlnZ2VyT3Blbih0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob25TdWJtaXQoKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgc2V0VHlwaW5nKHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgS2V5Q29kZS5UQUI6XG4gICAgICAgICAge1xuICAgICAgICAgICAgaWYgKHR5cGluZyAmJiBvcGVuICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgIHNldFR5cGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXR5cGluZyAmJiBvcGVuKSB7XG4gICAgICAgICAgICAgIGlmICghZm9yd2FyZEtleURvd24oZSkgJiYgZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIHNldFR5cGluZyh0cnVlKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICBjYXNlIEtleUNvZGUuRVNDOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNldFR5cGluZyh0cnVlKTtcbiAgICAgICAgICAgIG9uQ2FuY2VsKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIW9wZW4gJiYgIVtLZXlDb2RlLlNISUZUXS5pbmNsdWRlcyhlLndoaWNoKSkge1xuICAgICAgICB0cmlnZ2VyT3Blbih0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoIXR5cGluZykge1xuICAgICAgICAvLyBMZXQgcG9wdXAgcGFuZWwgaGFuZGxlIGtleWJvYXJkXG4gICAgICAgIGZvcndhcmRLZXlEb3duKGUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgb25Gb2N1czogZnVuY3Rpb24gb25Gb2N1cyhlKSB7XG4gICAgICBzZXRUeXBpbmcodHJ1ZSk7XG4gICAgICBzZXRGb2N1c2VkKHRydWUpO1xuXG4gICAgICBpZiAoX29uRm9jdXMpIHtcbiAgICAgICAgX29uRm9jdXMoZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBvbkJsdXI6IGZ1bmN0aW9uIG9uQmx1cihlKSB7XG4gICAgICBpZiAocHJldmVudEJsdXJSZWYuY3VycmVudCB8fCAhaXNDbGlja091dHNpZGUoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgcHJldmVudEJsdXJSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChibHVyVG9DYW5jZWwpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIF9kb2N1bWVudCA9IGRvY3VtZW50LFxuICAgICAgICAgICAgICBhY3RpdmVFbGVtZW50ID0gX2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cbiAgICAgICAgICB3aGlsZSAoYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVFbGVtZW50LnNoYWRvd1Jvb3QpIHtcbiAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQgPSBhY3RpdmVFbGVtZW50LnNoYWRvd1Jvb3QuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXNDbGlja091dHNpZGUoYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgICAgIG9uQ2FuY2VsKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgIH0gZWxzZSBpZiAob3Blbikge1xuICAgICAgICB0cmlnZ2VyT3BlbihmYWxzZSk7XG5cbiAgICAgICAgaWYgKHZhbHVlQ2hhbmdlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgb25TdWJtaXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzZXRGb2N1c2VkKGZhbHNlKTtcblxuICAgICAgaWYgKF9vbkJsdXIpIHtcbiAgICAgICAgX29uQmx1cihlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07IC8vIGNoZWNrIGlmIHZhbHVlIGNoYW5nZWRcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhbHVlQ2hhbmdlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gIH0sIFtvcGVuXSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgdmFsdWVDaGFuZ2VkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICB9LCBbdmFsdWVdKTsgLy8gR2xvYmFsIGNsaWNrIGhhbmRsZXJcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBhZGRHbG9iYWxNb3VzZURvd25FdmVudChmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHRhcmdldCA9IGdldFRhcmdldEZyb21FdmVudChlKTtcblxuICAgICAgaWYgKG9wZW4pIHtcbiAgICAgICAgdmFyIGNsaWNrZWRPdXRzaWRlID0gaXNDbGlja091dHNpZGUodGFyZ2V0KTtcblxuICAgICAgICBpZiAoIWNsaWNrZWRPdXRzaWRlKSB7XG4gICAgICAgICAgcHJldmVudEJsdXJSZWYuY3VycmVudCA9IHRydWU7IC8vIEFsd2F5cyBzZXQgYmFjayBpbiBjYXNlIGBvbkJsdXJgIHByZXZlbnRlZCBieSB1c2VyXG5cbiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcHJldmVudEJsdXJSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKCFmb2N1c2VkIHx8IGNsaWNrZWRPdXRzaWRlKSB7XG4gICAgICAgICAgdHJpZ2dlck9wZW4oZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gW2lucHV0UHJvcHMsIHtcbiAgICBmb2N1c2VkOiBmb2N1c2VkLFxuICAgIHR5cGluZzogdHlwaW5nXG4gIH1dO1xufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdldFZhbHVlIH0gZnJvbSAnLi4vdXRpbHMvbWlzY1V0aWwnO1xuaW1wb3J0IHsgaXNTYW1lRGF0ZSwgZ2V0UXVhcnRlciB9IGZyb20gJy4uL3V0aWxzL2RhdGVVdGlsJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVJhbmdlRGlzYWJsZWQoX3JlZiwgZGlzYWJsZWRTdGFydCwgZGlzYWJsZWRFbmQpIHtcbiAgdmFyIHBpY2tlciA9IF9yZWYucGlja2VyLFxuICAgICAgbG9jYWxlID0gX3JlZi5sb2NhbGUsXG4gICAgICBzZWxlY3RlZFZhbHVlID0gX3JlZi5zZWxlY3RlZFZhbHVlLFxuICAgICAgZGlzYWJsZWREYXRlID0gX3JlZi5kaXNhYmxlZERhdGUsXG4gICAgICBkaXNhYmxlZCA9IF9yZWYuZGlzYWJsZWQsXG4gICAgICBnZW5lcmF0ZUNvbmZpZyA9IF9yZWYuZ2VuZXJhdGVDb25maWc7XG4gIHZhciBzdGFydERhdGUgPSBnZXRWYWx1ZShzZWxlY3RlZFZhbHVlLCAwKTtcbiAgdmFyIGVuZERhdGUgPSBnZXRWYWx1ZShzZWxlY3RlZFZhbHVlLCAxKTtcblxuICBmdW5jdGlvbiB3ZWVrRmlyc3REYXRlKGRhdGUpIHtcbiAgICByZXR1cm4gZ2VuZXJhdGVDb25maWcubG9jYWxlLmdldFdlZWtGaXJzdERhdGUobG9jYWxlLmxvY2FsZSwgZGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBtb250aE51bWJlcihkYXRlKSB7XG4gICAgdmFyIHllYXIgPSBnZW5lcmF0ZUNvbmZpZy5nZXRZZWFyKGRhdGUpO1xuICAgIHZhciBtb250aCA9IGdlbmVyYXRlQ29uZmlnLmdldE1vbnRoKGRhdGUpO1xuICAgIHJldHVybiB5ZWFyICogMTAwICsgbW9udGg7XG4gIH1cblxuICBmdW5jdGlvbiBxdWFydGVyTnVtYmVyKGRhdGUpIHtcbiAgICB2YXIgeWVhciA9IGdlbmVyYXRlQ29uZmlnLmdldFllYXIoZGF0ZSk7XG4gICAgdmFyIHF1YXJ0ZXIgPSBnZXRRdWFydGVyKGdlbmVyYXRlQ29uZmlnLCBkYXRlKTtcbiAgICByZXR1cm4geWVhciAqIDEwICsgcXVhcnRlcjtcbiAgfVxuXG4gIHZhciBkaXNhYmxlZFN0YXJ0RGF0ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgaWYgKGRpc2FibGVkRGF0ZSAmJiBkaXNhYmxlZERhdGUoZGF0ZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gLy8gRGlzYWJsZWQgcmFuZ2VcblxuXG4gICAgaWYgKGRpc2FibGVkWzFdICYmIGVuZERhdGUpIHtcbiAgICAgIHJldHVybiAhaXNTYW1lRGF0ZShnZW5lcmF0ZUNvbmZpZywgZGF0ZSwgZW5kRGF0ZSkgJiYgZ2VuZXJhdGVDb25maWcuaXNBZnRlcihkYXRlLCBlbmREYXRlKTtcbiAgICB9IC8vIERpc2FibGVkIHBhcnRcblxuXG4gICAgaWYgKGRpc2FibGVkU3RhcnQgJiYgZW5kRGF0ZSkge1xuICAgICAgc3dpdGNoIChwaWNrZXIpIHtcbiAgICAgICAgY2FzZSAncXVhcnRlcic6XG4gICAgICAgICAgcmV0dXJuIHF1YXJ0ZXJOdW1iZXIoZGF0ZSkgPiBxdWFydGVyTnVtYmVyKGVuZERhdGUpO1xuXG4gICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICByZXR1cm4gbW9udGhOdW1iZXIoZGF0ZSkgPiBtb250aE51bWJlcihlbmREYXRlKTtcblxuICAgICAgICBjYXNlICd3ZWVrJzpcbiAgICAgICAgICByZXR1cm4gd2Vla0ZpcnN0RGF0ZShkYXRlKSA+IHdlZWtGaXJzdERhdGUoZW5kRGF0ZSk7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gIWlzU2FtZURhdGUoZ2VuZXJhdGVDb25maWcsIGRhdGUsIGVuZERhdGUpICYmIGdlbmVyYXRlQ29uZmlnLmlzQWZ0ZXIoZGF0ZSwgZW5kRGF0ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LCBbZGlzYWJsZWREYXRlLCBkaXNhYmxlZFsxXSwgZW5kRGF0ZSwgZGlzYWJsZWRTdGFydF0pO1xuICB2YXIgZGlzYWJsZWRFbmREYXRlID0gUmVhY3QudXNlQ2FsbGJhY2soZnVuY3Rpb24gKGRhdGUpIHtcbiAgICBpZiAoZGlzYWJsZWREYXRlICYmIGRpc2FibGVkRGF0ZShkYXRlKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSAvLyBEaXNhYmxlZCByYW5nZVxuXG5cbiAgICBpZiAoZGlzYWJsZWRbMF0gJiYgc3RhcnREYXRlKSB7XG4gICAgICByZXR1cm4gIWlzU2FtZURhdGUoZ2VuZXJhdGVDb25maWcsIGRhdGUsIGVuZERhdGUpICYmIGdlbmVyYXRlQ29uZmlnLmlzQWZ0ZXIoc3RhcnREYXRlLCBkYXRlKTtcbiAgICB9IC8vIERpc2FibGVkIHBhcnRcblxuXG4gICAgaWYgKGRpc2FibGVkRW5kICYmIHN0YXJ0RGF0ZSkge1xuICAgICAgc3dpdGNoIChwaWNrZXIpIHtcbiAgICAgICAgY2FzZSAncXVhcnRlcic6XG4gICAgICAgICAgcmV0dXJuIHF1YXJ0ZXJOdW1iZXIoZGF0ZSkgPCBxdWFydGVyTnVtYmVyKHN0YXJ0RGF0ZSk7XG5cbiAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgIHJldHVybiBtb250aE51bWJlcihkYXRlKSA8IG1vbnRoTnVtYmVyKHN0YXJ0RGF0ZSk7XG5cbiAgICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgICAgcmV0dXJuIHdlZWtGaXJzdERhdGUoZGF0ZSkgPCB3ZWVrRmlyc3REYXRlKHN0YXJ0RGF0ZSk7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gIWlzU2FtZURhdGUoZ2VuZXJhdGVDb25maWcsIGRhdGUsIHN0YXJ0RGF0ZSkgJiYgZ2VuZXJhdGVDb25maWcuaXNBZnRlcihzdGFydERhdGUsIGRhdGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSwgW2Rpc2FibGVkRGF0ZSwgZGlzYWJsZWRbMF0sIHN0YXJ0RGF0ZSwgZGlzYWJsZWRFbmRdKTtcbiAgcmV0dXJuIFtkaXNhYmxlZFN0YXJ0RGF0ZSwgZGlzYWJsZWRFbmREYXRlXTtcbn0iLCJpbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdldFZhbHVlLCB1cGRhdGVWYWx1ZXMgfSBmcm9tICcuLi91dGlscy9taXNjVXRpbCc7XG5pbXBvcnQgeyBnZXRDbG9zaW5nVmlld0RhdGUsIGlzU2FtZVllYXIsIGlzU2FtZU1vbnRoLCBpc1NhbWVEZWNhZGUgfSBmcm9tICcuLi91dGlscy9kYXRlVXRpbCc7XG5cbmZ1bmN0aW9uIGdldFN0YXJ0RW5kRGlzdGFuY2Uoc3RhcnREYXRlLCBlbmREYXRlLCBwaWNrZXIsIGdlbmVyYXRlQ29uZmlnKSB7XG4gIHZhciBzdGFydE5leHQgPSBnZXRDbG9zaW5nVmlld0RhdGUoc3RhcnREYXRlLCBwaWNrZXIsIGdlbmVyYXRlQ29uZmlnLCAxKTtcblxuICBmdW5jdGlvbiBnZXREaXN0YW5jZShjb21wYXJlRnVuYykge1xuICAgIGlmIChjb21wYXJlRnVuYyhzdGFydERhdGUsIGVuZERhdGUpKSB7XG4gICAgICByZXR1cm4gJ3NhbWUnO1xuICAgIH1cblxuICAgIGlmIChjb21wYXJlRnVuYyhzdGFydE5leHQsIGVuZERhdGUpKSB7XG4gICAgICByZXR1cm4gJ2Nsb3NpbmcnO1xuICAgIH1cblxuICAgIHJldHVybiAnZmFyJztcbiAgfVxuXG4gIHN3aXRjaCAocGlja2VyKSB7XG4gICAgY2FzZSAneWVhcic6XG4gICAgICByZXR1cm4gZ2V0RGlzdGFuY2UoZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgcmV0dXJuIGlzU2FtZURlY2FkZShnZW5lcmF0ZUNvbmZpZywgc3RhcnQsIGVuZCk7XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ3F1YXJ0ZXInOlxuICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgIHJldHVybiBnZXREaXN0YW5jZShmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgICAgICByZXR1cm4gaXNTYW1lWWVhcihnZW5lcmF0ZUNvbmZpZywgc3RhcnQsIGVuZCk7XG4gICAgICB9KTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZ2V0RGlzdGFuY2UoZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgcmV0dXJuIGlzU2FtZU1vbnRoKGdlbmVyYXRlQ29uZmlnLCBzdGFydCwgZW5kKTtcbiAgICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFJhbmdlVmlld0RhdGUodmFsdWVzLCBpbmRleCwgcGlja2VyLCBnZW5lcmF0ZUNvbmZpZykge1xuICB2YXIgc3RhcnREYXRlID0gZ2V0VmFsdWUodmFsdWVzLCAwKTtcbiAgdmFyIGVuZERhdGUgPSBnZXRWYWx1ZSh2YWx1ZXMsIDEpO1xuXG4gIGlmIChpbmRleCA9PT0gMCkge1xuICAgIHJldHVybiBzdGFydERhdGU7XG4gIH1cblxuICBpZiAoc3RhcnREYXRlICYmIGVuZERhdGUpIHtcbiAgICB2YXIgZGlzdGFuY2UgPSBnZXRTdGFydEVuZERpc3RhbmNlKHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgcGlja2VyLCBnZW5lcmF0ZUNvbmZpZyk7XG5cbiAgICBzd2l0Y2ggKGRpc3RhbmNlKSB7XG4gICAgICBjYXNlICdzYW1lJzpcbiAgICAgICAgcmV0dXJuIHN0YXJ0RGF0ZTtcblxuICAgICAgY2FzZSAnY2xvc2luZyc6XG4gICAgICAgIHJldHVybiBzdGFydERhdGU7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBnZXRDbG9zaW5nVmlld0RhdGUoZW5kRGF0ZSwgcGlja2VyLCBnZW5lcmF0ZUNvbmZpZywgLTEpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdGFydERhdGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVJhbmdlVmlld0RhdGVzKF9yZWYpIHtcbiAgdmFyIHZhbHVlcyA9IF9yZWYudmFsdWVzLFxuICAgICAgcGlja2VyID0gX3JlZi5waWNrZXIsXG4gICAgICBkZWZhdWx0RGF0ZXMgPSBfcmVmLmRlZmF1bHREYXRlcyxcbiAgICAgIGdlbmVyYXRlQ29uZmlnID0gX3JlZi5nZW5lcmF0ZUNvbmZpZztcblxuICB2YXIgX1JlYWN0JHVzZVN0YXRlID0gUmVhY3QudXNlU3RhdGUoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBbZ2V0VmFsdWUoZGVmYXVsdERhdGVzLCAwKSwgZ2V0VmFsdWUoZGVmYXVsdERhdGVzLCAxKV07XG4gIH0pLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksXG4gICAgICBkZWZhdWx0Vmlld0RhdGVzID0gX1JlYWN0JHVzZVN0YXRlMlswXSxcbiAgICAgIHNldERlZmF1bHRWaWV3RGF0ZXMgPSBfUmVhY3QkdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGUzID0gUmVhY3QudXNlU3RhdGUobnVsbCksXG4gICAgICBfUmVhY3QkdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlMywgMiksXG4gICAgICB2aWV3RGF0ZXMgPSBfUmVhY3QkdXNlU3RhdGU0WzBdLFxuICAgICAgc2V0SW50ZXJuYWxWaWV3RGF0ZXMgPSBfUmVhY3QkdXNlU3RhdGU0WzFdO1xuXG4gIHZhciBzdGFydERhdGUgPSBnZXRWYWx1ZSh2YWx1ZXMsIDApO1xuICB2YXIgZW5kRGF0ZSA9IGdldFZhbHVlKHZhbHVlcywgMSk7XG5cbiAgZnVuY3Rpb24gZ2V0Vmlld0RhdGUoaW5kZXgpIHtcbiAgICAvLyBJZiBzZXQgZGVmYXVsdCB2aWV3IGRhdGUsIHVzZSBpdFxuICAgIGlmIChkZWZhdWx0Vmlld0RhdGVzW2luZGV4XSkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWaWV3RGF0ZXNbaW5kZXhdO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRWYWx1ZSh2aWV3RGF0ZXMsIGluZGV4KSB8fCBnZXRSYW5nZVZpZXdEYXRlKHZhbHVlcywgaW5kZXgsIHBpY2tlciwgZ2VuZXJhdGVDb25maWcpIHx8IHN0YXJ0RGF0ZSB8fCBlbmREYXRlIHx8IGdlbmVyYXRlQ29uZmlnLmdldE5vdygpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0Vmlld0RhdGUodmlld0RhdGUsIGluZGV4KSB7XG4gICAgaWYgKHZpZXdEYXRlKSB7XG4gICAgICB2YXIgbmV3Vmlld0RhdGVzID0gdXBkYXRlVmFsdWVzKHZpZXdEYXRlcywgdmlld0RhdGUsIGluZGV4KTsgLy8gU2V0IHZpZXcgZGF0ZSB3aWxsIGNsZWFuIHVwIGRlZmF1bHQgb25lXG5cbiAgICAgIHNldERlZmF1bHRWaWV3RGF0ZXMoIC8vIFNob3VsZCBhbHdheXMgYmUgYW4gYXJyYXlcbiAgICAgIHVwZGF0ZVZhbHVlcyhkZWZhdWx0Vmlld0RhdGVzLCBudWxsLCBpbmRleCkgfHwgW251bGwsIG51bGxdKTsgLy8gUmVzZXQgYW5vdGhlciBvbmUgd2hlbiBub3QgaGF2ZSB2YWx1ZVxuXG4gICAgICB2YXIgYW5vdGhlckluZGV4ID0gKGluZGV4ICsgMSkgJSAyO1xuXG4gICAgICBpZiAoIWdldFZhbHVlKHZhbHVlcywgYW5vdGhlckluZGV4KSkge1xuICAgICAgICBuZXdWaWV3RGF0ZXMgPSB1cGRhdGVWYWx1ZXMobmV3Vmlld0RhdGVzLCB2aWV3RGF0ZSwgYW5vdGhlckluZGV4KTtcbiAgICAgIH1cblxuICAgICAgc2V0SW50ZXJuYWxWaWV3RGF0ZXMobmV3Vmlld0RhdGVzKTtcbiAgICB9IGVsc2UgaWYgKHN0YXJ0RGF0ZSB8fCBlbmREYXRlKSB7XG4gICAgICAvLyBSZXNldCBhbGwgd2hlbiBoYXMgdmFsdWVzIHdoZW4gYHZpZXdEYXRlYCBpcyBgbnVsbGAgd2hpY2ggbWVhbnMgZnJvbSBvcGVuIHRyaWdnZXJcbiAgICAgIHNldEludGVybmFsVmlld0RhdGVzKG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbZ2V0Vmlld0RhdGUsIHNldFZpZXdEYXRlXTtcbn0iLCJpbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVRleHRWYWx1ZU1hcHBpbmcoX3JlZikge1xuICB2YXIgdmFsdWVUZXh0cyA9IF9yZWYudmFsdWVUZXh0cyxcbiAgICAgIG9uVGV4dENoYW5nZSA9IF9yZWYub25UZXh0Q2hhbmdlO1xuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGUgPSBSZWFjdC51c2VTdGF0ZSgnJyksXG4gICAgICBfUmVhY3QkdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlLCAyKSxcbiAgICAgIHRleHQgPSBfUmVhY3QkdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0SW5uZXJUZXh0ID0gX1JlYWN0JHVzZVN0YXRlMlsxXTtcblxuICB2YXIgdmFsdWVUZXh0c1JlZiA9IFJlYWN0LnVzZVJlZihbXSk7XG4gIHZhbHVlVGV4dHNSZWYuY3VycmVudCA9IHZhbHVlVGV4dHM7XG5cbiAgZnVuY3Rpb24gdHJpZ2dlclRleHRDaGFuZ2UodmFsdWUpIHtcbiAgICBzZXRJbm5lclRleHQodmFsdWUpO1xuICAgIG9uVGV4dENoYW5nZSh2YWx1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRleHQoKSB7XG4gICAgc2V0SW5uZXJUZXh0KHZhbHVlVGV4dHNSZWYuY3VycmVudFswXSk7XG4gIH1cblxuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICh2YWx1ZVRleHRzLmV2ZXJ5KGZ1bmN0aW9uICh2YWxUZXh0KSB7XG4gICAgICByZXR1cm4gdmFsVGV4dCAhPT0gdGV4dDtcbiAgICB9KSkge1xuICAgICAgcmVzZXRUZXh0KCk7XG4gICAgfVxuICB9LCBbdmFsdWVUZXh0cy5qb2luKCd8fCcpXSk7XG4gIHJldHVybiBbdGV4dCwgdHJpZ2dlclRleHRDaGFuZ2UsIHJlc2V0VGV4dF07XG59IiwiaW1wb3J0IHNoYWxsb3dFcXVhbCBmcm9tICdzaGFsbG93ZXF1YWwnO1xuaW1wb3J0IHVzZU1lbW8gZnJvbSBcInJjLXV0aWwvZXMvaG9va3MvdXNlTWVtb1wiO1xuaW1wb3J0IHsgZm9ybWF0VmFsdWUgfSBmcm9tICcuLi91dGlscy9kYXRlVXRpbCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VWYWx1ZVRleHRzKHZhbHVlLCBfcmVmKSB7XG4gIHZhciBmb3JtYXRMaXN0ID0gX3JlZi5mb3JtYXRMaXN0LFxuICAgICAgZ2VuZXJhdGVDb25maWcgPSBfcmVmLmdlbmVyYXRlQ29uZmlnLFxuICAgICAgbG9jYWxlID0gX3JlZi5sb2NhbGU7XG4gIHJldHVybiB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICByZXR1cm4gW1snJ10sICcnXTtcbiAgICB9IC8vIFdlIHdpbGwgY29udmVydCBkYXRhIGZvcm1hdCBiYWNrIHRvIGZpcnN0IGZvcm1hdFxuXG5cbiAgICB2YXIgZmlyc3RWYWx1ZVRleHQgPSAnJztcbiAgICB2YXIgZnVsbFZhbHVlVGV4dHMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9ybWF0TGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgdmFyIGZvcm1hdCA9IGZvcm1hdExpc3RbaV07XG4gICAgICB2YXIgZm9ybWF0U3RyID0gZm9ybWF0VmFsdWUodmFsdWUsIHtcbiAgICAgICAgZ2VuZXJhdGVDb25maWc6IGdlbmVyYXRlQ29uZmlnLFxuICAgICAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICAgICAgZm9ybWF0OiBmb3JtYXRcbiAgICAgIH0pO1xuICAgICAgZnVsbFZhbHVlVGV4dHMucHVzaChmb3JtYXRTdHIpO1xuXG4gICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICBmaXJzdFZhbHVlVGV4dCA9IGZvcm1hdFN0cjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW2Z1bGxWYWx1ZVRleHRzLCBmaXJzdFZhbHVlVGV4dF07XG4gIH0sIFt2YWx1ZSwgZm9ybWF0TGlzdF0sIGZ1bmN0aW9uIChwcmV2LCBuZXh0KSB7XG4gICAgcmV0dXJuIHByZXZbMF0gIT09IG5leHRbMF0gfHwgIXNoYWxsb3dFcXVhbChwcmV2WzFdLCBuZXh0WzFdKTtcbiAgfSk7XG59IiwiaW1wb3J0IFBpY2tlciBmcm9tICcuL1BpY2tlcic7XG5pbXBvcnQgUGlja2VyUGFuZWwgZnJvbSAnLi9QaWNrZXJQYW5lbCc7XG5pbXBvcnQgUmFuZ2VQaWNrZXIgZnJvbSAnLi9SYW5nZVBpY2tlcic7XG5leHBvcnQgeyBQaWNrZXJQYW5lbCwgUmFuZ2VQaWNrZXIgfTtcbmV4cG9ydCBkZWZhdWx0IFBpY2tlcjsiLCJ2YXIgbG9jYWxlID0ge1xuICBsb2NhbGU6ICdlbl9VUycsXG4gIHRvZGF5OiAnVG9kYXknLFxuICBub3c6ICdOb3cnLFxuICBiYWNrVG9Ub2RheTogJ0JhY2sgdG8gdG9kYXknLFxuICBvazogJ09rJyxcbiAgY2xlYXI6ICdDbGVhcicsXG4gIG1vbnRoOiAnTW9udGgnLFxuICB5ZWFyOiAnWWVhcicsXG4gIHRpbWVTZWxlY3Q6ICdzZWxlY3QgdGltZScsXG4gIGRhdGVTZWxlY3Q6ICdzZWxlY3QgZGF0ZScsXG4gIHdlZWtTZWxlY3Q6ICdDaG9vc2UgYSB3ZWVrJyxcbiAgbW9udGhTZWxlY3Q6ICdDaG9vc2UgYSBtb250aCcsXG4gIHllYXJTZWxlY3Q6ICdDaG9vc2UgYSB5ZWFyJyxcbiAgZGVjYWRlU2VsZWN0OiAnQ2hvb3NlIGEgZGVjYWRlJyxcbiAgeWVhckZvcm1hdDogJ1lZWVknLFxuICBkYXRlRm9ybWF0OiAnTS9EL1lZWVknLFxuICBkYXlGb3JtYXQ6ICdEJyxcbiAgZGF0ZVRpbWVGb3JtYXQ6ICdNL0QvWVlZWSBISDptbTpzcycsXG4gIG1vbnRoQmVmb3JlWWVhcjogdHJ1ZSxcbiAgcHJldmlvdXNNb250aDogJ1ByZXZpb3VzIG1vbnRoIChQYWdlVXApJyxcbiAgbmV4dE1vbnRoOiAnTmV4dCBtb250aCAoUGFnZURvd24pJyxcbiAgcHJldmlvdXNZZWFyOiAnTGFzdCB5ZWFyIChDb250cm9sICsgbGVmdCknLFxuICBuZXh0WWVhcjogJ05leHQgeWVhciAoQ29udHJvbCArIHJpZ2h0KScsXG4gIHByZXZpb3VzRGVjYWRlOiAnTGFzdCBkZWNhZGUnLFxuICBuZXh0RGVjYWRlOiAnTmV4dCBkZWNhZGUnLFxuICBwcmV2aW91c0NlbnR1cnk6ICdMYXN0IGNlbnR1cnknLFxuICBuZXh0Q2VudHVyeTogJ05leHQgY2VudHVyeSdcbn07XG5leHBvcnQgZGVmYXVsdCBsb2NhbGU7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBXRUVLX0RBWV9DT1VOVCwgZ2V0V2Vla1N0YXJ0RGF0ZSwgaXNTYW1lRGF0ZSwgaXNTYW1lTW9udGgsIGZvcm1hdFZhbHVlIH0gZnJvbSAnLi4vLi4vdXRpbHMvZGF0ZVV0aWwnO1xuaW1wb3J0IFJhbmdlQ29udGV4dCBmcm9tICcuLi8uLi9SYW5nZUNvbnRleHQnO1xuaW1wb3J0IHVzZUNlbGxDbGFzc05hbWUgZnJvbSAnLi4vLi4vaG9va3MvdXNlQ2VsbENsYXNzTmFtZSc7XG5pbXBvcnQgUGFuZWxCb2R5IGZyb20gJy4uL1BhbmVsQm9keSc7XG5cbmZ1bmN0aW9uIERhdGVCb2R5KHByb3BzKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBnZW5lcmF0ZUNvbmZpZyA9IHByb3BzLmdlbmVyYXRlQ29uZmlnLFxuICAgICAgcHJlZml4Q29sdW1uID0gcHJvcHMucHJlZml4Q29sdW1uLFxuICAgICAgbG9jYWxlID0gcHJvcHMubG9jYWxlLFxuICAgICAgcm93Q291bnQgPSBwcm9wcy5yb3dDb3VudCxcbiAgICAgIHZpZXdEYXRlID0gcHJvcHMudmlld0RhdGUsXG4gICAgICB2YWx1ZSA9IHByb3BzLnZhbHVlLFxuICAgICAgZGF0ZVJlbmRlciA9IHByb3BzLmRhdGVSZW5kZXI7XG5cbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChSYW5nZUNvbnRleHQpLFxuICAgICAgcmFuZ2VkVmFsdWUgPSBfUmVhY3QkdXNlQ29udGV4dC5yYW5nZWRWYWx1ZSxcbiAgICAgIGhvdmVyUmFuZ2VkVmFsdWUgPSBfUmVhY3QkdXNlQ29udGV4dC5ob3ZlclJhbmdlZFZhbHVlO1xuXG4gIHZhciBiYXNlRGF0ZSA9IGdldFdlZWtTdGFydERhdGUobG9jYWxlLmxvY2FsZSwgZ2VuZXJhdGVDb25maWcsIHZpZXdEYXRlKTtcbiAgdmFyIGNlbGxQcmVmaXhDbHMgPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWNlbGxcIik7XG4gIHZhciB3ZWVrRmlyc3REYXkgPSBnZW5lcmF0ZUNvbmZpZy5sb2NhbGUuZ2V0V2Vla0ZpcnN0RGF5KGxvY2FsZS5sb2NhbGUpO1xuICB2YXIgdG9kYXkgPSBnZW5lcmF0ZUNvbmZpZy5nZXROb3coKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEhlYWRlciA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgaGVhZGVyQ2VsbHMgPSBbXTtcbiAgdmFyIHdlZWtEYXlzTG9jYWxlID0gbG9jYWxlLnNob3J0V2Vla0RheXMgfHwgKGdlbmVyYXRlQ29uZmlnLmxvY2FsZS5nZXRTaG9ydFdlZWtEYXlzID8gZ2VuZXJhdGVDb25maWcubG9jYWxlLmdldFNob3J0V2Vla0RheXMobG9jYWxlLmxvY2FsZSkgOiBbXSk7XG5cbiAgaWYgKHByZWZpeENvbHVtbikge1xuICAgIGhlYWRlckNlbGxzLnB1c2goIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidGhcIiwge1xuICAgICAga2V5OiBcImVtcHR5XCIsXG4gICAgICBcImFyaWEtbGFiZWxcIjogXCJlbXB0eSBjZWxsXCJcbiAgICB9KSk7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IFdFRUtfREFZX0NPVU5UOyBpICs9IDEpIHtcbiAgICBoZWFkZXJDZWxscy5wdXNoKCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRoXCIsIHtcbiAgICAgIGtleTogaVxuICAgIH0sIHdlZWtEYXlzTG9jYWxlWyhpICsgd2Vla0ZpcnN0RGF5KSAlIFdFRUtfREFZX0NPVU5UXSkpO1xuICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQm9keSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgZ2V0Q2VsbENsYXNzTmFtZSA9IHVzZUNlbGxDbGFzc05hbWUoe1xuICAgIGNlbGxQcmVmaXhDbHM6IGNlbGxQcmVmaXhDbHMsXG4gICAgdG9kYXk6IHRvZGF5LFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBnZW5lcmF0ZUNvbmZpZzogZ2VuZXJhdGVDb25maWcsXG4gICAgcmFuZ2VkVmFsdWU6IHByZWZpeENvbHVtbiA/IG51bGwgOiByYW5nZWRWYWx1ZSxcbiAgICBob3ZlclJhbmdlZFZhbHVlOiBwcmVmaXhDb2x1bW4gPyBudWxsIDogaG92ZXJSYW5nZWRWYWx1ZSxcbiAgICBpc1NhbWVDZWxsOiBmdW5jdGlvbiBpc1NhbWVDZWxsKGN1cnJlbnQsIHRhcmdldCkge1xuICAgICAgcmV0dXJuIGlzU2FtZURhdGUoZ2VuZXJhdGVDb25maWcsIGN1cnJlbnQsIHRhcmdldCk7XG4gICAgfSxcbiAgICBpc0luVmlldzogZnVuY3Rpb24gaXNJblZpZXcoZGF0ZSkge1xuICAgICAgcmV0dXJuIGlzU2FtZU1vbnRoKGdlbmVyYXRlQ29uZmlnLCBkYXRlLCB2aWV3RGF0ZSk7XG4gICAgfSxcbiAgICBvZmZzZXRDZWxsOiBmdW5jdGlvbiBvZmZzZXRDZWxsKGRhdGUsIG9mZnNldCkge1xuICAgICAgcmV0dXJuIGdlbmVyYXRlQ29uZmlnLmFkZERhdGUoZGF0ZSwgb2Zmc2V0KTtcbiAgICB9XG4gIH0pO1xuICB2YXIgZ2V0Q2VsbE5vZGUgPSBkYXRlUmVuZGVyID8gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICByZXR1cm4gZGF0ZVJlbmRlcihkYXRlLCB0b2RheSk7XG4gIH0gOiB1bmRlZmluZWQ7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQYW5lbEJvZHksIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHJvd051bTogcm93Q291bnQsXG4gICAgY29sTnVtOiBXRUVLX0RBWV9DT1VOVCxcbiAgICBiYXNlRGF0ZTogYmFzZURhdGUsXG4gICAgZ2V0Q2VsbE5vZGU6IGdldENlbGxOb2RlLFxuICAgIGdldENlbGxUZXh0OiBnZW5lcmF0ZUNvbmZpZy5nZXREYXRlLFxuICAgIGdldENlbGxDbGFzc05hbWU6IGdldENlbGxDbGFzc05hbWUsXG4gICAgZ2V0Q2VsbERhdGU6IGdlbmVyYXRlQ29uZmlnLmFkZERhdGUsXG4gICAgdGl0bGVDZWxsOiBmdW5jdGlvbiB0aXRsZUNlbGwoZGF0ZSkge1xuICAgICAgcmV0dXJuIGZvcm1hdFZhbHVlKGRhdGUsIHtcbiAgICAgICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgICAgIGZvcm1hdDogJ1lZWVktTU0tREQnLFxuICAgICAgICBnZW5lcmF0ZUNvbmZpZzogZ2VuZXJhdGVDb25maWdcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgaGVhZGVyQ2VsbHM6IGhlYWRlckNlbGxzXG4gIH0pKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0ZUJvZHk7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgSGVhZGVyIGZyb20gJy4uL0hlYWRlcic7XG5pbXBvcnQgUGFuZWxDb250ZXh0IGZyb20gJy4uLy4uL1BhbmVsQ29udGV4dCc7XG5pbXBvcnQgeyBmb3JtYXRWYWx1ZSB9IGZyb20gJy4uLy4uL3V0aWxzL2RhdGVVdGlsJztcblxuZnVuY3Rpb24gRGF0ZUhlYWRlcihwcm9wcykge1xuICB2YXIgcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzLFxuICAgICAgZ2VuZXJhdGVDb25maWcgPSBwcm9wcy5nZW5lcmF0ZUNvbmZpZyxcbiAgICAgIGxvY2FsZSA9IHByb3BzLmxvY2FsZSxcbiAgICAgIHZpZXdEYXRlID0gcHJvcHMudmlld0RhdGUsXG4gICAgICBvbk5leHRNb250aCA9IHByb3BzLm9uTmV4dE1vbnRoLFxuICAgICAgb25QcmV2TW9udGggPSBwcm9wcy5vblByZXZNb250aCxcbiAgICAgIG9uTmV4dFllYXIgPSBwcm9wcy5vbk5leHRZZWFyLFxuICAgICAgb25QcmV2WWVhciA9IHByb3BzLm9uUHJldlllYXIsXG4gICAgICBvblllYXJDbGljayA9IHByb3BzLm9uWWVhckNsaWNrLFxuICAgICAgb25Nb250aENsaWNrID0gcHJvcHMub25Nb250aENsaWNrO1xuXG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUGFuZWxDb250ZXh0KSxcbiAgICAgIGhpZGVIZWFkZXIgPSBfUmVhY3QkdXNlQ29udGV4dC5oaWRlSGVhZGVyO1xuXG4gIGlmIChoaWRlSGVhZGVyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgaGVhZGVyUHJlZml4Q2xzID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1oZWFkZXJcIik7XG4gIHZhciBtb250aHNMb2NhbGUgPSBsb2NhbGUuc2hvcnRNb250aHMgfHwgKGdlbmVyYXRlQ29uZmlnLmxvY2FsZS5nZXRTaG9ydE1vbnRocyA/IGdlbmVyYXRlQ29uZmlnLmxvY2FsZS5nZXRTaG9ydE1vbnRocyhsb2NhbGUubG9jYWxlKSA6IFtdKTtcbiAgdmFyIG1vbnRoID0gZ2VuZXJhdGVDb25maWcuZ2V0TW9udGgodmlld0RhdGUpOyAvLyA9PT09PT09PT09PT09PT09PT09IE1vbnRoICYgWWVhciA9PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIHllYXJOb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAga2V5OiBcInllYXJcIixcbiAgICBvbkNsaWNrOiBvblllYXJDbGljayxcbiAgICB0YWJJbmRleDogLTEsXG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXllYXItYnRuXCIpXG4gIH0sIGZvcm1hdFZhbHVlKHZpZXdEYXRlLCB7XG4gICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgZm9ybWF0OiBsb2NhbGUueWVhckZvcm1hdCxcbiAgICBnZW5lcmF0ZUNvbmZpZzogZ2VuZXJhdGVDb25maWdcbiAgfSkpO1xuICB2YXIgbW9udGhOb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAga2V5OiBcIm1vbnRoXCIsXG4gICAgb25DbGljazogb25Nb250aENsaWNrLFxuICAgIHRhYkluZGV4OiAtMSxcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItbW9udGgtYnRuXCIpXG4gIH0sIGxvY2FsZS5tb250aEZvcm1hdCA/IGZvcm1hdFZhbHVlKHZpZXdEYXRlLCB7XG4gICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgZm9ybWF0OiBsb2NhbGUubW9udGhGb3JtYXQsXG4gICAgZ2VuZXJhdGVDb25maWc6IGdlbmVyYXRlQ29uZmlnXG4gIH0pIDogbW9udGhzTG9jYWxlW21vbnRoXSk7XG4gIHZhciBtb250aFllYXJOb2RlcyA9IGxvY2FsZS5tb250aEJlZm9yZVllYXIgPyBbbW9udGhOb2RlLCB5ZWFyTm9kZV0gOiBbeWVhck5vZGUsIG1vbnRoTm9kZV07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChIZWFkZXIsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHByZWZpeENsczogaGVhZGVyUHJlZml4Q2xzLFxuICAgIG9uU3VwZXJQcmV2OiBvblByZXZZZWFyLFxuICAgIG9uUHJldjogb25QcmV2TW9udGgsXG4gICAgb25OZXh0OiBvbk5leHRNb250aCxcbiAgICBvblN1cGVyTmV4dDogb25OZXh0WWVhclxuICB9KSwgbW9udGhZZWFyTm9kZXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRlSGVhZGVyOyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBEYXRlQm9keSBmcm9tICcuL0RhdGVCb2R5JztcbmltcG9ydCBEYXRlSGVhZGVyIGZyb20gJy4vRGF0ZUhlYWRlcic7XG5pbXBvcnQgeyBXRUVLX0RBWV9DT1VOVCB9IGZyb20gJy4uLy4uL3V0aWxzL2RhdGVVdGlsJztcbmltcG9ydCB7IGNyZWF0ZUtleURvd25IYW5kbGVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvdWlVdGlsJztcbnZhciBEQVRFX1JPV19DT1VOVCA9IDY7XG5cbmZ1bmN0aW9uIERhdGVQYW5lbChwcm9wcykge1xuICB2YXIgcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzLFxuICAgICAgX3Byb3BzJHBhbmVsTmFtZSA9IHByb3BzLnBhbmVsTmFtZSxcbiAgICAgIHBhbmVsTmFtZSA9IF9wcm9wcyRwYW5lbE5hbWUgPT09IHZvaWQgMCA/ICdkYXRlJyA6IF9wcm9wcyRwYW5lbE5hbWUsXG4gICAgICBrZXlib2FyZENvbmZpZyA9IHByb3BzLmtleWJvYXJkQ29uZmlnLFxuICAgICAgYWN0aXZlID0gcHJvcHMuYWN0aXZlLFxuICAgICAgb3BlcmF0aW9uUmVmID0gcHJvcHMub3BlcmF0aW9uUmVmLFxuICAgICAgZ2VuZXJhdGVDb25maWcgPSBwcm9wcy5nZW5lcmF0ZUNvbmZpZyxcbiAgICAgIHZhbHVlID0gcHJvcHMudmFsdWUsXG4gICAgICB2aWV3RGF0ZSA9IHByb3BzLnZpZXdEYXRlLFxuICAgICAgb25WaWV3RGF0ZUNoYW5nZSA9IHByb3BzLm9uVmlld0RhdGVDaGFuZ2UsXG4gICAgICBvblBhbmVsQ2hhbmdlID0gcHJvcHMub25QYW5lbENoYW5nZSxcbiAgICAgIF9vblNlbGVjdCA9IHByb3BzLm9uU2VsZWN0O1xuICB2YXIgcGFuZWxQcmVmaXhDbHMgPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLVwiKS5jb25jYXQocGFuZWxOYW1lLCBcIi1wYW5lbFwiKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT0gS2V5Ym9hcmQgPT09PT09PT09PT09PT09PT09PT09PT1cblxuICBvcGVyYXRpb25SZWYuY3VycmVudCA9IHtcbiAgICBvbktleURvd246IGZ1bmN0aW9uIG9uS2V5RG93bihldmVudCkge1xuICAgICAgcmV0dXJuIGNyZWF0ZUtleURvd25IYW5kbGVyKGV2ZW50LCBfb2JqZWN0U3ByZWFkKHtcbiAgICAgICAgb25MZWZ0UmlnaHQ6IGZ1bmN0aW9uIG9uTGVmdFJpZ2h0KGRpZmYpIHtcbiAgICAgICAgICBfb25TZWxlY3QoZ2VuZXJhdGVDb25maWcuYWRkRGF0ZSh2YWx1ZSB8fCB2aWV3RGF0ZSwgZGlmZiksICdrZXknKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25DdHJsTGVmdFJpZ2h0OiBmdW5jdGlvbiBvbkN0cmxMZWZ0UmlnaHQoZGlmZikge1xuICAgICAgICAgIF9vblNlbGVjdChnZW5lcmF0ZUNvbmZpZy5hZGRZZWFyKHZhbHVlIHx8IHZpZXdEYXRlLCBkaWZmKSwgJ2tleScpO1xuICAgICAgICB9LFxuICAgICAgICBvblVwRG93bjogZnVuY3Rpb24gb25VcERvd24oZGlmZikge1xuICAgICAgICAgIF9vblNlbGVjdChnZW5lcmF0ZUNvbmZpZy5hZGREYXRlKHZhbHVlIHx8IHZpZXdEYXRlLCBkaWZmICogV0VFS19EQVlfQ09VTlQpLCAna2V5Jyk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUGFnZVVwRG93bjogZnVuY3Rpb24gb25QYWdlVXBEb3duKGRpZmYpIHtcbiAgICAgICAgICBfb25TZWxlY3QoZ2VuZXJhdGVDb25maWcuYWRkTW9udGgodmFsdWUgfHwgdmlld0RhdGUsIGRpZmYpLCAna2V5Jyk7XG4gICAgICAgIH1cbiAgICAgIH0sIGtleWJvYXJkQ29uZmlnKSk7XG4gICAgfVxuICB9OyAvLyA9PT09PT09PT09PT09PT09PT09PSBWaWV3IE9wZXJhdGlvbiA9PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBvblllYXJDaGFuZ2UgPSBmdW5jdGlvbiBvblllYXJDaGFuZ2UoZGlmZikge1xuICAgIHZhciBuZXdEYXRlID0gZ2VuZXJhdGVDb25maWcuYWRkWWVhcih2aWV3RGF0ZSwgZGlmZik7XG4gICAgb25WaWV3RGF0ZUNoYW5nZShuZXdEYXRlKTtcbiAgICBvblBhbmVsQ2hhbmdlKG51bGwsIG5ld0RhdGUpO1xuICB9O1xuXG4gIHZhciBvbk1vbnRoQ2hhbmdlID0gZnVuY3Rpb24gb25Nb250aENoYW5nZShkaWZmKSB7XG4gICAgdmFyIG5ld0RhdGUgPSBnZW5lcmF0ZUNvbmZpZy5hZGRNb250aCh2aWV3RGF0ZSwgZGlmZik7XG4gICAgb25WaWV3RGF0ZUNoYW5nZShuZXdEYXRlKTtcbiAgICBvblBhbmVsQ2hhbmdlKG51bGwsIG5ld0RhdGUpO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKHBhbmVsUHJlZml4Q2xzLCBfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KHBhbmVsUHJlZml4Q2xzLCBcIi1hY3RpdmVcIiksIGFjdGl2ZSkpXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KERhdGVIZWFkZXIsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICB2aWV3RGF0ZTogdmlld0RhdGUgLy8gVmlldyBPcGVyYXRpb25cbiAgICAsXG4gICAgb25QcmV2WWVhcjogZnVuY3Rpb24gb25QcmV2WWVhcigpIHtcbiAgICAgIG9uWWVhckNoYW5nZSgtMSk7XG4gICAgfSxcbiAgICBvbk5leHRZZWFyOiBmdW5jdGlvbiBvbk5leHRZZWFyKCkge1xuICAgICAgb25ZZWFyQ2hhbmdlKDEpO1xuICAgIH0sXG4gICAgb25QcmV2TW9udGg6IGZ1bmN0aW9uIG9uUHJldk1vbnRoKCkge1xuICAgICAgb25Nb250aENoYW5nZSgtMSk7XG4gICAgfSxcbiAgICBvbk5leHRNb250aDogZnVuY3Rpb24gb25OZXh0TW9udGgoKSB7XG4gICAgICBvbk1vbnRoQ2hhbmdlKDEpO1xuICAgIH0sXG4gICAgb25Nb250aENsaWNrOiBmdW5jdGlvbiBvbk1vbnRoQ2xpY2soKSB7XG4gICAgICBvblBhbmVsQ2hhbmdlKCdtb250aCcsIHZpZXdEYXRlKTtcbiAgICB9LFxuICAgIG9uWWVhckNsaWNrOiBmdW5jdGlvbiBvblllYXJDbGljaygpIHtcbiAgICAgIG9uUGFuZWxDaGFuZ2UoJ3llYXInLCB2aWV3RGF0ZSk7XG4gICAgfVxuICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KERhdGVCb2R5LCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICBvblNlbGVjdDogZnVuY3Rpb24gb25TZWxlY3QoZGF0ZSkge1xuICAgICAgcmV0dXJuIF9vblNlbGVjdChkYXRlLCAnbW91c2UnKTtcbiAgICB9LFxuICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICB2aWV3RGF0ZTogdmlld0RhdGUsXG4gICAgcm93Q291bnQ6IERBVEVfUk9XX0NPVU5UXG4gIH0pKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IERhdGVQYW5lbDsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF90eXBlb2YgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZlwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBLZXlDb2RlIGZyb20gXCJyYy11dGlsL2VzL0tleUNvZGVcIjtcbmltcG9ydCBEYXRlUGFuZWwgZnJvbSAnLi4vRGF0ZVBhbmVsJztcbmltcG9ydCBUaW1lUGFuZWwgZnJvbSAnLi4vVGltZVBhbmVsJztcbmltcG9ydCB7IHR1cGxlIH0gZnJvbSAnLi4vLi4vdXRpbHMvbWlzY1V0aWwnO1xuaW1wb3J0IHsgc2V0RGF0ZVRpbWUgYXMgc2V0VGltZSB9IGZyb20gJy4uLy4uL3V0aWxzL3RpbWVVdGlsJztcbnZhciBBQ1RJVkVfUEFORUwgPSB0dXBsZSgnZGF0ZScsICd0aW1lJyk7XG5cbmZ1bmN0aW9uIERhdGV0aW1lUGFuZWwocHJvcHMpIHtcbiAgdmFyIHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIG9wZXJhdGlvblJlZiA9IHByb3BzLm9wZXJhdGlvblJlZixcbiAgICAgIGdlbmVyYXRlQ29uZmlnID0gcHJvcHMuZ2VuZXJhdGVDb25maWcsXG4gICAgICB2YWx1ZSA9IHByb3BzLnZhbHVlLFxuICAgICAgZGVmYXVsdFZhbHVlID0gcHJvcHMuZGVmYXVsdFZhbHVlLFxuICAgICAgZGlzYWJsZWRUaW1lID0gcHJvcHMuZGlzYWJsZWRUaW1lLFxuICAgICAgc2hvd1RpbWUgPSBwcm9wcy5zaG93VGltZSxcbiAgICAgIG9uU2VsZWN0ID0gcHJvcHMub25TZWxlY3Q7XG4gIHZhciBwYW5lbFByZWZpeENscyA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItZGF0ZXRpbWUtcGFuZWxcIik7XG5cbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksXG4gICAgICBhY3RpdmVQYW5lbCA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRBY3RpdmVQYW5lbCA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgdmFyIGRhdGVPcGVyYXRpb25SZWYgPSBSZWFjdC51c2VSZWYoe30pO1xuICB2YXIgdGltZU9wZXJhdGlvblJlZiA9IFJlYWN0LnVzZVJlZih7fSk7XG4gIHZhciB0aW1lUHJvcHMgPSBfdHlwZW9mKHNob3dUaW1lKSA9PT0gJ29iamVjdCcgPyBfb2JqZWN0U3ByZWFkKHt9LCBzaG93VGltZSkgOiB7fTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT0gS2V5Ym9hcmQgPT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBnZXROZXh0QWN0aXZlKG9mZnNldCkge1xuICAgIHZhciBhY3RpdmVJbmRleCA9IEFDVElWRV9QQU5FTC5pbmRleE9mKGFjdGl2ZVBhbmVsKSArIG9mZnNldDtcbiAgICB2YXIgbmV4dEFjdGl2ZVBhbmVsID0gQUNUSVZFX1BBTkVMW2FjdGl2ZUluZGV4XSB8fCBudWxsO1xuICAgIHJldHVybiBuZXh0QWN0aXZlUGFuZWw7XG4gIH1cblxuICB2YXIgb25CbHVyID0gZnVuY3Rpb24gb25CbHVyKGUpIHtcbiAgICBpZiAodGltZU9wZXJhdGlvblJlZi5jdXJyZW50Lm9uQmx1cikge1xuICAgICAgdGltZU9wZXJhdGlvblJlZi5jdXJyZW50Lm9uQmx1cihlKTtcbiAgICB9XG5cbiAgICBzZXRBY3RpdmVQYW5lbChudWxsKTtcbiAgfTtcblxuICBvcGVyYXRpb25SZWYuY3VycmVudCA9IHtcbiAgICBvbktleURvd246IGZ1bmN0aW9uIG9uS2V5RG93bihldmVudCkge1xuICAgICAgLy8gU3dpdGNoIGFjdGl2ZSBwYW5lbFxuICAgICAgaWYgKGV2ZW50LndoaWNoID09PSBLZXlDb2RlLlRBQikge1xuICAgICAgICB2YXIgbmV4dEFjdGl2ZVBhbmVsID0gZ2V0TmV4dEFjdGl2ZShldmVudC5zaGlmdEtleSA/IC0xIDogMSk7XG4gICAgICAgIHNldEFjdGl2ZVBhbmVsKG5leHRBY3RpdmVQYW5lbCk7XG5cbiAgICAgICAgaWYgKG5leHRBY3RpdmVQYW5lbCkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gLy8gT3BlcmF0ZSBvbiBjdXJyZW50IGFjdGl2ZSBwYW5lbFxuXG5cbiAgICAgIGlmIChhY3RpdmVQYW5lbCkge1xuICAgICAgICB2YXIgcmVmID0gYWN0aXZlUGFuZWwgPT09ICdkYXRlJyA/IGRhdGVPcGVyYXRpb25SZWYgOiB0aW1lT3BlcmF0aW9uUmVmO1xuXG4gICAgICAgIGlmIChyZWYuY3VycmVudCAmJiByZWYuY3VycmVudC5vbktleURvd24pIHtcbiAgICAgICAgICByZWYuY3VycmVudC5vbktleURvd24oZXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IC8vIFN3aXRjaCBmaXJzdCBhY3RpdmUgcGFuZWwgaWYgb3BlcmF0ZSB3aXRob3V0IHBhbmVsXG5cblxuICAgICAgaWYgKFtLZXlDb2RlLkxFRlQsIEtleUNvZGUuUklHSFQsIEtleUNvZGUuVVAsIEtleUNvZGUuRE9XTl0uaW5jbHVkZXMoZXZlbnQud2hpY2gpKSB7XG4gICAgICAgIHNldEFjdGl2ZVBhbmVsKCdkYXRlJyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBvbkJsdXI6IG9uQmx1cixcbiAgICBvbkNsb3NlOiBvbkJsdXJcbiAgfTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IEV2ZW50cyA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgb25JbnRlcm5hbFNlbGVjdCA9IGZ1bmN0aW9uIG9uSW50ZXJuYWxTZWxlY3QoZGF0ZSwgc291cmNlKSB7XG4gICAgdmFyIHNlbGVjdGVkRGF0ZSA9IGRhdGU7XG5cbiAgICBpZiAoc291cmNlID09PSAnZGF0ZScgJiYgIXZhbHVlICYmIHRpbWVQcm9wcy5kZWZhdWx0VmFsdWUpIHtcbiAgICAgIC8vIERhdGUgd2l0aCB0aW1lIGRlZmF1bHRWYWx1ZVxuICAgICAgc2VsZWN0ZWREYXRlID0gZ2VuZXJhdGVDb25maWcuc2V0SG91cihzZWxlY3RlZERhdGUsIGdlbmVyYXRlQ29uZmlnLmdldEhvdXIodGltZVByb3BzLmRlZmF1bHRWYWx1ZSkpO1xuICAgICAgc2VsZWN0ZWREYXRlID0gZ2VuZXJhdGVDb25maWcuc2V0TWludXRlKHNlbGVjdGVkRGF0ZSwgZ2VuZXJhdGVDb25maWcuZ2V0TWludXRlKHRpbWVQcm9wcy5kZWZhdWx0VmFsdWUpKTtcbiAgICAgIHNlbGVjdGVkRGF0ZSA9IGdlbmVyYXRlQ29uZmlnLnNldFNlY29uZChzZWxlY3RlZERhdGUsIGdlbmVyYXRlQ29uZmlnLmdldFNlY29uZCh0aW1lUHJvcHMuZGVmYXVsdFZhbHVlKSk7XG4gICAgfSBlbHNlIGlmIChzb3VyY2UgPT09ICd0aW1lJyAmJiAhdmFsdWUgJiYgZGVmYXVsdFZhbHVlKSB7XG4gICAgICBzZWxlY3RlZERhdGUgPSBnZW5lcmF0ZUNvbmZpZy5zZXRZZWFyKHNlbGVjdGVkRGF0ZSwgZ2VuZXJhdGVDb25maWcuZ2V0WWVhcihkZWZhdWx0VmFsdWUpKTtcbiAgICAgIHNlbGVjdGVkRGF0ZSA9IGdlbmVyYXRlQ29uZmlnLnNldE1vbnRoKHNlbGVjdGVkRGF0ZSwgZ2VuZXJhdGVDb25maWcuZ2V0TW9udGgoZGVmYXVsdFZhbHVlKSk7XG4gICAgICBzZWxlY3RlZERhdGUgPSBnZW5lcmF0ZUNvbmZpZy5zZXREYXRlKHNlbGVjdGVkRGF0ZSwgZ2VuZXJhdGVDb25maWcuZ2V0RGF0ZShkZWZhdWx0VmFsdWUpKTtcbiAgICB9XG5cbiAgICBpZiAob25TZWxlY3QpIHtcbiAgICAgIG9uU2VsZWN0KHNlbGVjdGVkRGF0ZSwgJ21vdXNlJyk7XG4gICAgfVxuICB9OyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIGRpc2FibGVkVGltZXMgPSBkaXNhYmxlZFRpbWUgPyBkaXNhYmxlZFRpbWUodmFsdWUgfHwgbnVsbCkgOiB7fTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMocGFuZWxQcmVmaXhDbHMsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgXCJcIi5jb25jYXQocGFuZWxQcmVmaXhDbHMsIFwiLWFjdGl2ZVwiKSwgYWN0aXZlUGFuZWwpKVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChEYXRlUGFuZWwsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIG9wZXJhdGlvblJlZjogZGF0ZU9wZXJhdGlvblJlZixcbiAgICBhY3RpdmU6IGFjdGl2ZVBhbmVsID09PSAnZGF0ZScsXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KGRhdGUpIHtcbiAgICAgIG9uSW50ZXJuYWxTZWxlY3Qoc2V0VGltZShnZW5lcmF0ZUNvbmZpZywgZGF0ZSwgc2hvd1RpbWUgJiYgX3R5cGVvZihzaG93VGltZSkgPT09ICdvYmplY3QnID8gc2hvd1RpbWUuZGVmYXVsdFZhbHVlIDogbnVsbCksICdkYXRlJyk7XG4gICAgfVxuICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRpbWVQYW5lbCwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgZm9ybWF0OiB1bmRlZmluZWRcbiAgfSwgdGltZVByb3BzLCBkaXNhYmxlZFRpbWVzLCB7XG4gICAgZGVmYXVsdFZhbHVlOiB1bmRlZmluZWQsXG4gICAgb3BlcmF0aW9uUmVmOiB0aW1lT3BlcmF0aW9uUmVmLFxuICAgIGFjdGl2ZTogYWN0aXZlUGFuZWwgPT09ICd0aW1lJyxcbiAgICBvblNlbGVjdDogZnVuY3Rpb24gb25TZWxlY3QoZGF0ZSkge1xuICAgICAgb25JbnRlcm5hbFNlbGVjdChkYXRlLCAndGltZScpO1xuICAgIH1cbiAgfSkpKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0ZXRpbWVQYW5lbDsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBERUNBREVfRElTVEFOQ0VfQ09VTlQsIERFQ0FERV9VTklUX0RJRkYgfSBmcm9tICcuJztcbmltcG9ydCBQYW5lbEJvZHkgZnJvbSAnLi4vUGFuZWxCb2R5JztcbmV4cG9ydCB2YXIgREVDQURFX0NPTF9DT1VOVCA9IDM7XG52YXIgREVDQURFX1JPV19DT1VOVCA9IDQ7XG5cbmZ1bmN0aW9uIERlY2FkZUJvZHkocHJvcHMpIHtcbiAgdmFyIERFQ0FERV9VTklUX0RJRkZfREVTID0gREVDQURFX1VOSVRfRElGRiAtIDE7XG4gIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICB2aWV3RGF0ZSA9IHByb3BzLnZpZXdEYXRlLFxuICAgICAgZ2VuZXJhdGVDb25maWcgPSBwcm9wcy5nZW5lcmF0ZUNvbmZpZztcbiAgdmFyIGNlbGxQcmVmaXhDbHMgPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWNlbGxcIik7XG4gIHZhciB5ZWFyTnVtYmVyID0gZ2VuZXJhdGVDb25maWcuZ2V0WWVhcih2aWV3RGF0ZSk7XG4gIHZhciBkZWNhZGVZZWFyTnVtYmVyID0gTWF0aC5mbG9vcih5ZWFyTnVtYmVyIC8gREVDQURFX1VOSVRfRElGRikgKiBERUNBREVfVU5JVF9ESUZGO1xuICB2YXIgc3RhcnREZWNhZGVZZWFyID0gTWF0aC5mbG9vcih5ZWFyTnVtYmVyIC8gREVDQURFX0RJU1RBTkNFX0NPVU5UKSAqIERFQ0FERV9ESVNUQU5DRV9DT1VOVDtcbiAgdmFyIGVuZERlY2FkZVllYXIgPSBzdGFydERlY2FkZVllYXIgKyBERUNBREVfRElTVEFOQ0VfQ09VTlQgLSAxO1xuICB2YXIgYmFzZURlY2FkZVllYXIgPSBnZW5lcmF0ZUNvbmZpZy5zZXRZZWFyKHZpZXdEYXRlLCBzdGFydERlY2FkZVllYXIgLSBNYXRoLmNlaWwoKERFQ0FERV9DT0xfQ09VTlQgKiBERUNBREVfUk9XX0NPVU5UICogREVDQURFX1VOSVRfRElGRiAtIERFQ0FERV9ESVNUQU5DRV9DT1VOVCkgLyAyKSk7XG5cbiAgdmFyIGdldENlbGxDbGFzc05hbWUgPSBmdW5jdGlvbiBnZXRDZWxsQ2xhc3NOYW1lKGRhdGUpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBzdGFydERlY2FkZU51bWJlciA9IGdlbmVyYXRlQ29uZmlnLmdldFllYXIoZGF0ZSk7XG4gICAgdmFyIGVuZERlY2FkZU51bWJlciA9IHN0YXJ0RGVjYWRlTnVtYmVyICsgREVDQURFX1VOSVRfRElGRl9ERVM7XG4gICAgcmV0dXJuIF9yZWYgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9yZWYsIFwiXCIuY29uY2F0KGNlbGxQcmVmaXhDbHMsIFwiLWluLXZpZXdcIiksIHN0YXJ0RGVjYWRlWWVhciA8PSBzdGFydERlY2FkZU51bWJlciAmJiBlbmREZWNhZGVOdW1iZXIgPD0gZW5kRGVjYWRlWWVhciksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCBcIlwiLmNvbmNhdChjZWxsUHJlZml4Q2xzLCBcIi1zZWxlY3RlZFwiKSwgc3RhcnREZWNhZGVOdW1iZXIgPT09IGRlY2FkZVllYXJOdW1iZXIpLCBfcmVmO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQYW5lbEJvZHksIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHJvd051bTogREVDQURFX1JPV19DT1VOVCxcbiAgICBjb2xOdW06IERFQ0FERV9DT0xfQ09VTlQsXG4gICAgYmFzZURhdGU6IGJhc2VEZWNhZGVZZWFyLFxuICAgIGdldENlbGxUZXh0OiBmdW5jdGlvbiBnZXRDZWxsVGV4dChkYXRlKSB7XG4gICAgICB2YXIgc3RhcnREZWNhZGVOdW1iZXIgPSBnZW5lcmF0ZUNvbmZpZy5nZXRZZWFyKGRhdGUpO1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KHN0YXJ0RGVjYWRlTnVtYmVyLCBcIi1cIikuY29uY2F0KHN0YXJ0RGVjYWRlTnVtYmVyICsgREVDQURFX1VOSVRfRElGRl9ERVMpO1xuICAgIH0sXG4gICAgZ2V0Q2VsbENsYXNzTmFtZTogZ2V0Q2VsbENsYXNzTmFtZSxcbiAgICBnZXRDZWxsRGF0ZTogZnVuY3Rpb24gZ2V0Q2VsbERhdGUoZGF0ZSwgb2Zmc2V0KSB7XG4gICAgICByZXR1cm4gZ2VuZXJhdGVDb25maWcuYWRkWWVhcihkYXRlLCBvZmZzZXQgKiBERUNBREVfVU5JVF9ESUZGKTtcbiAgICB9XG4gIH0pKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgRGVjYWRlQm9keTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBIZWFkZXIgZnJvbSAnLi4vSGVhZGVyJztcbmltcG9ydCB7IERFQ0FERV9ESVNUQU5DRV9DT1VOVCB9IGZyb20gJy4nO1xuaW1wb3J0IFBhbmVsQ29udGV4dCBmcm9tICcuLi8uLi9QYW5lbENvbnRleHQnO1xuXG5mdW5jdGlvbiBEZWNhZGVIZWFkZXIocHJvcHMpIHtcbiAgdmFyIHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIGdlbmVyYXRlQ29uZmlnID0gcHJvcHMuZ2VuZXJhdGVDb25maWcsXG4gICAgICB2aWV3RGF0ZSA9IHByb3BzLnZpZXdEYXRlLFxuICAgICAgb25QcmV2RGVjYWRlcyA9IHByb3BzLm9uUHJldkRlY2FkZXMsXG4gICAgICBvbk5leHREZWNhZGVzID0gcHJvcHMub25OZXh0RGVjYWRlcztcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFBhbmVsQ29udGV4dCksXG4gICAgICBoaWRlSGVhZGVyID0gX1JlYWN0JHVzZUNvbnRleHQuaGlkZUhlYWRlcjtcblxuICBpZiAoaGlkZUhlYWRlcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGhlYWRlclByZWZpeENscyA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaGVhZGVyXCIpO1xuICB2YXIgeWVhck51bWJlciA9IGdlbmVyYXRlQ29uZmlnLmdldFllYXIodmlld0RhdGUpO1xuICB2YXIgc3RhcnRZZWFyID0gTWF0aC5mbG9vcih5ZWFyTnVtYmVyIC8gREVDQURFX0RJU1RBTkNFX0NPVU5UKSAqIERFQ0FERV9ESVNUQU5DRV9DT1VOVDtcbiAgdmFyIGVuZFllYXIgPSBzdGFydFllYXIgKyBERUNBREVfRElTVEFOQ0VfQ09VTlQgLSAxO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSGVhZGVyLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICBwcmVmaXhDbHM6IGhlYWRlclByZWZpeENscyxcbiAgICBvblN1cGVyUHJldjogb25QcmV2RGVjYWRlcyxcbiAgICBvblN1cGVyTmV4dDogb25OZXh0RGVjYWRlc1xuICB9KSwgc3RhcnRZZWFyLCBcIi1cIiwgZW5kWWVhcik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IERlY2FkZUhlYWRlcjsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBEZWNhZGVIZWFkZXIgZnJvbSAnLi9EZWNhZGVIZWFkZXInO1xuaW1wb3J0IERlY2FkZUJvZHksIHsgREVDQURFX0NPTF9DT1VOVCB9IGZyb20gJy4vRGVjYWRlQm9keSc7XG5pbXBvcnQgeyBjcmVhdGVLZXlEb3duSGFuZGxlciB9IGZyb20gJy4uLy4uL3V0aWxzL3VpVXRpbCc7XG5leHBvcnQgdmFyIERFQ0FERV9VTklUX0RJRkYgPSAxMDtcbmV4cG9ydCB2YXIgREVDQURFX0RJU1RBTkNFX0NPVU5UID0gREVDQURFX1VOSVRfRElGRiAqIDEwO1xuXG5mdW5jdGlvbiBEZWNhZGVQYW5lbChwcm9wcykge1xuICB2YXIgcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzLFxuICAgICAgb25WaWV3RGF0ZUNoYW5nZSA9IHByb3BzLm9uVmlld0RhdGVDaGFuZ2UsXG4gICAgICBnZW5lcmF0ZUNvbmZpZyA9IHByb3BzLmdlbmVyYXRlQ29uZmlnLFxuICAgICAgdmlld0RhdGUgPSBwcm9wcy52aWV3RGF0ZSxcbiAgICAgIG9wZXJhdGlvblJlZiA9IHByb3BzLm9wZXJhdGlvblJlZixcbiAgICAgIG9uU2VsZWN0ID0gcHJvcHMub25TZWxlY3QsXG4gICAgICBvblBhbmVsQ2hhbmdlID0gcHJvcHMub25QYW5lbENoYW5nZTtcbiAgdmFyIHBhbmVsUHJlZml4Q2xzID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1kZWNhZGUtcGFuZWxcIik7IC8vID09PT09PT09PT09PT09PT09PT09PT09IEtleWJvYXJkID09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgb3BlcmF0aW9uUmVmLmN1cnJlbnQgPSB7XG4gICAgb25LZXlEb3duOiBmdW5jdGlvbiBvbktleURvd24oZXZlbnQpIHtcbiAgICAgIHJldHVybiBjcmVhdGVLZXlEb3duSGFuZGxlcihldmVudCwge1xuICAgICAgICBvbkxlZnRSaWdodDogZnVuY3Rpb24gb25MZWZ0UmlnaHQoZGlmZikge1xuICAgICAgICAgIG9uU2VsZWN0KGdlbmVyYXRlQ29uZmlnLmFkZFllYXIodmlld0RhdGUsIGRpZmYgKiBERUNBREVfVU5JVF9ESUZGKSwgJ2tleScpO1xuICAgICAgICB9LFxuICAgICAgICBvbkN0cmxMZWZ0UmlnaHQ6IGZ1bmN0aW9uIG9uQ3RybExlZnRSaWdodChkaWZmKSB7XG4gICAgICAgICAgb25TZWxlY3QoZ2VuZXJhdGVDb25maWcuYWRkWWVhcih2aWV3RGF0ZSwgZGlmZiAqIERFQ0FERV9ESVNUQU5DRV9DT1VOVCksICdrZXknKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25VcERvd246IGZ1bmN0aW9uIG9uVXBEb3duKGRpZmYpIHtcbiAgICAgICAgICBvblNlbGVjdChnZW5lcmF0ZUNvbmZpZy5hZGRZZWFyKHZpZXdEYXRlLCBkaWZmICogREVDQURFX1VOSVRfRElGRiAqIERFQ0FERV9DT0xfQ09VTlQpLCAna2V5Jyk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAgICAgb25QYW5lbENoYW5nZSgneWVhcicsIHZpZXdEYXRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9OyAvLyA9PT09PT09PT09PT09PT09PT09PSBWaWV3IE9wZXJhdGlvbiA9PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBvbkRlY2FkZXNDaGFuZ2UgPSBmdW5jdGlvbiBvbkRlY2FkZXNDaGFuZ2UoZGlmZikge1xuICAgIHZhciBuZXdEYXRlID0gZ2VuZXJhdGVDb25maWcuYWRkWWVhcih2aWV3RGF0ZSwgZGlmZiAqIERFQ0FERV9ESVNUQU5DRV9DT1VOVCk7XG4gICAgb25WaWV3RGF0ZUNoYW5nZShuZXdEYXRlKTtcbiAgICBvblBhbmVsQ2hhbmdlKG51bGwsIG5ld0RhdGUpO1xuICB9O1xuXG4gIHZhciBvbkludGVybmFsU2VsZWN0ID0gZnVuY3Rpb24gb25JbnRlcm5hbFNlbGVjdChkYXRlKSB7XG4gICAgb25TZWxlY3QoZGF0ZSwgJ21vdXNlJyk7XG4gICAgb25QYW5lbENoYW5nZSgneWVhcicsIGRhdGUpO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBwYW5lbFByZWZpeENsc1xuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChEZWNhZGVIZWFkZXIsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgIG9uUHJldkRlY2FkZXM6IGZ1bmN0aW9uIG9uUHJldkRlY2FkZXMoKSB7XG4gICAgICBvbkRlY2FkZXNDaGFuZ2UoLTEpO1xuICAgIH0sXG4gICAgb25OZXh0RGVjYWRlczogZnVuY3Rpb24gb25OZXh0RGVjYWRlcygpIHtcbiAgICAgIG9uRGVjYWRlc0NoYW5nZSgxKTtcbiAgICB9XG4gIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRGVjYWRlQm9keSwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgb25TZWxlY3Q6IG9uSW50ZXJuYWxTZWxlY3RcbiAgfSkpKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgRGVjYWRlUGFuZWw7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFBhbmVsQ29udGV4dCBmcm9tICcuLi9QYW5lbENvbnRleHQnO1xudmFyIEhJRERFTl9TVFlMRSA9IHtcbiAgdmlzaWJpbGl0eTogJ2hpZGRlbidcbn07XG5cbmZ1bmN0aW9uIEhlYWRlcihfcmVmKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBfcmVmLnByZWZpeENscyxcbiAgICAgIF9yZWYkcHJldkljb24gPSBfcmVmLnByZXZJY29uLFxuICAgICAgcHJldkljb24gPSBfcmVmJHByZXZJY29uID09PSB2b2lkIDAgPyBcIlxcdTIwMzlcIiA6IF9yZWYkcHJldkljb24sXG4gICAgICBfcmVmJG5leHRJY29uID0gX3JlZi5uZXh0SWNvbixcbiAgICAgIG5leHRJY29uID0gX3JlZiRuZXh0SWNvbiA9PT0gdm9pZCAwID8gXCJcXHUyMDNBXCIgOiBfcmVmJG5leHRJY29uLFxuICAgICAgX3JlZiRzdXBlclByZXZJY29uID0gX3JlZi5zdXBlclByZXZJY29uLFxuICAgICAgc3VwZXJQcmV2SWNvbiA9IF9yZWYkc3VwZXJQcmV2SWNvbiA9PT0gdm9pZCAwID8gXCJcXHhBQlwiIDogX3JlZiRzdXBlclByZXZJY29uLFxuICAgICAgX3JlZiRzdXBlck5leHRJY29uID0gX3JlZi5zdXBlck5leHRJY29uLFxuICAgICAgc3VwZXJOZXh0SWNvbiA9IF9yZWYkc3VwZXJOZXh0SWNvbiA9PT0gdm9pZCAwID8gXCJcXHhCQlwiIDogX3JlZiRzdXBlck5leHRJY29uLFxuICAgICAgb25TdXBlclByZXYgPSBfcmVmLm9uU3VwZXJQcmV2LFxuICAgICAgb25TdXBlck5leHQgPSBfcmVmLm9uU3VwZXJOZXh0LFxuICAgICAgb25QcmV2ID0gX3JlZi5vblByZXYsXG4gICAgICBvbk5leHQgPSBfcmVmLm9uTmV4dCxcbiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFBhbmVsQ29udGV4dCksXG4gICAgICBoaWRlTmV4dEJ0biA9IF9SZWFjdCR1c2VDb250ZXh0LmhpZGVOZXh0QnRuLFxuICAgICAgaGlkZVByZXZCdG4gPSBfUmVhY3QkdXNlQ29udGV4dC5oaWRlUHJldkJ0bjtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogcHJlZml4Q2xzXG4gIH0sIG9uU3VwZXJQcmV2ICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgIG9uQ2xpY2s6IG9uU3VwZXJQcmV2LFxuICAgIHRhYkluZGV4OiAtMSxcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItc3VwZXItcHJldi1idG5cIiksXG4gICAgc3R5bGU6IGhpZGVQcmV2QnRuID8gSElEREVOX1NUWUxFIDoge31cbiAgfSwgc3VwZXJQcmV2SWNvbiksIG9uUHJldiAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgdHlwZTogXCJidXR0b25cIixcbiAgICBvbkNsaWNrOiBvblByZXYsXG4gICAgdGFiSW5kZXg6IC0xLFxuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1wcmV2LWJ0blwiKSxcbiAgICBzdHlsZTogaGlkZVByZXZCdG4gPyBISURERU5fU1RZTEUgOiB7fVxuICB9LCBwcmV2SWNvbiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItdmlld1wiKVxuICB9LCBjaGlsZHJlbiksIG9uTmV4dCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgdHlwZTogXCJidXR0b25cIixcbiAgICBvbkNsaWNrOiBvbk5leHQsXG4gICAgdGFiSW5kZXg6IC0xLFxuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1uZXh0LWJ0blwiKSxcbiAgICBzdHlsZTogaGlkZU5leHRCdG4gPyBISURERU5fU1RZTEUgOiB7fVxuICB9LCBuZXh0SWNvbiksIG9uU3VwZXJOZXh0ICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgIG9uQ2xpY2s6IG9uU3VwZXJOZXh0LFxuICAgIHRhYkluZGV4OiAtMSxcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItc3VwZXItbmV4dC1idG5cIiksXG4gICAgc3R5bGU6IGhpZGVOZXh0QnRuID8gSElEREVOX1NUWUxFIDoge31cbiAgfSwgc3VwZXJOZXh0SWNvbikpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBIZWFkZXI7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBmb3JtYXRWYWx1ZSwgaXNTYW1lTW9udGggfSBmcm9tICcuLi8uLi91dGlscy9kYXRlVXRpbCc7XG5pbXBvcnQgUmFuZ2VDb250ZXh0IGZyb20gJy4uLy4uL1JhbmdlQ29udGV4dCc7XG5pbXBvcnQgdXNlQ2VsbENsYXNzTmFtZSBmcm9tICcuLi8uLi9ob29rcy91c2VDZWxsQ2xhc3NOYW1lJztcbmltcG9ydCBQYW5lbEJvZHkgZnJvbSAnLi4vUGFuZWxCb2R5JztcbmV4cG9ydCB2YXIgTU9OVEhfQ09MX0NPVU5UID0gMztcbnZhciBNT05USF9ST1dfQ09VTlQgPSA0O1xuXG5mdW5jdGlvbiBNb250aEJvZHkocHJvcHMpIHtcbiAgdmFyIHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIGxvY2FsZSA9IHByb3BzLmxvY2FsZSxcbiAgICAgIHZhbHVlID0gcHJvcHMudmFsdWUsXG4gICAgICB2aWV3RGF0ZSA9IHByb3BzLnZpZXdEYXRlLFxuICAgICAgZ2VuZXJhdGVDb25maWcgPSBwcm9wcy5nZW5lcmF0ZUNvbmZpZyxcbiAgICAgIG1vbnRoQ2VsbFJlbmRlciA9IHByb3BzLm1vbnRoQ2VsbFJlbmRlcjtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFJhbmdlQ29udGV4dCksXG4gICAgICByYW5nZWRWYWx1ZSA9IF9SZWFjdCR1c2VDb250ZXh0LnJhbmdlZFZhbHVlLFxuICAgICAgaG92ZXJSYW5nZWRWYWx1ZSA9IF9SZWFjdCR1c2VDb250ZXh0LmhvdmVyUmFuZ2VkVmFsdWU7XG5cbiAgdmFyIGNlbGxQcmVmaXhDbHMgPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWNlbGxcIik7XG4gIHZhciBnZXRDZWxsQ2xhc3NOYW1lID0gdXNlQ2VsbENsYXNzTmFtZSh7XG4gICAgY2VsbFByZWZpeENsczogY2VsbFByZWZpeENscyxcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgZ2VuZXJhdGVDb25maWc6IGdlbmVyYXRlQ29uZmlnLFxuICAgIHJhbmdlZFZhbHVlOiByYW5nZWRWYWx1ZSxcbiAgICBob3ZlclJhbmdlZFZhbHVlOiBob3ZlclJhbmdlZFZhbHVlLFxuICAgIGlzU2FtZUNlbGw6IGZ1bmN0aW9uIGlzU2FtZUNlbGwoY3VycmVudCwgdGFyZ2V0KSB7XG4gICAgICByZXR1cm4gaXNTYW1lTW9udGgoZ2VuZXJhdGVDb25maWcsIGN1cnJlbnQsIHRhcmdldCk7XG4gICAgfSxcbiAgICBpc0luVmlldzogZnVuY3Rpb24gaXNJblZpZXcoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIG9mZnNldENlbGw6IGZ1bmN0aW9uIG9mZnNldENlbGwoZGF0ZSwgb2Zmc2V0KSB7XG4gICAgICByZXR1cm4gZ2VuZXJhdGVDb25maWcuYWRkTW9udGgoZGF0ZSwgb2Zmc2V0KTtcbiAgICB9XG4gIH0pO1xuICB2YXIgbW9udGhzTG9jYWxlID0gbG9jYWxlLnNob3J0TW9udGhzIHx8IChnZW5lcmF0ZUNvbmZpZy5sb2NhbGUuZ2V0U2hvcnRNb250aHMgPyBnZW5lcmF0ZUNvbmZpZy5sb2NhbGUuZ2V0U2hvcnRNb250aHMobG9jYWxlLmxvY2FsZSkgOiBbXSk7XG4gIHZhciBiYXNlTW9udGggPSBnZW5lcmF0ZUNvbmZpZy5zZXRNb250aCh2aWV3RGF0ZSwgMCk7XG4gIHZhciBnZXRDZWxsTm9kZSA9IG1vbnRoQ2VsbFJlbmRlciA/IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgcmV0dXJuIG1vbnRoQ2VsbFJlbmRlcihkYXRlLCBsb2NhbGUpO1xuICB9IDogdW5kZWZpbmVkO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGFuZWxCb2R5LCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICByb3dOdW06IE1PTlRIX1JPV19DT1VOVCxcbiAgICBjb2xOdW06IE1PTlRIX0NPTF9DT1VOVCxcbiAgICBiYXNlRGF0ZTogYmFzZU1vbnRoLFxuICAgIGdldENlbGxOb2RlOiBnZXRDZWxsTm9kZSxcbiAgICBnZXRDZWxsVGV4dDogZnVuY3Rpb24gZ2V0Q2VsbFRleHQoZGF0ZSkge1xuICAgICAgcmV0dXJuIGxvY2FsZS5tb250aEZvcm1hdCA/IGZvcm1hdFZhbHVlKGRhdGUsIHtcbiAgICAgICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgICAgIGZvcm1hdDogbG9jYWxlLm1vbnRoRm9ybWF0LFxuICAgICAgICBnZW5lcmF0ZUNvbmZpZzogZ2VuZXJhdGVDb25maWdcbiAgICAgIH0pIDogbW9udGhzTG9jYWxlW2dlbmVyYXRlQ29uZmlnLmdldE1vbnRoKGRhdGUpXTtcbiAgICB9LFxuICAgIGdldENlbGxDbGFzc05hbWU6IGdldENlbGxDbGFzc05hbWUsXG4gICAgZ2V0Q2VsbERhdGU6IGdlbmVyYXRlQ29uZmlnLmFkZE1vbnRoLFxuICAgIHRpdGxlQ2VsbDogZnVuY3Rpb24gdGl0bGVDZWxsKGRhdGUpIHtcbiAgICAgIHJldHVybiBmb3JtYXRWYWx1ZShkYXRlLCB7XG4gICAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgICBmb3JtYXQ6ICdZWVlZLU1NJyxcbiAgICAgICAgZ2VuZXJhdGVDb25maWc6IGdlbmVyYXRlQ29uZmlnXG4gICAgICB9KTtcbiAgICB9XG4gIH0pKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9udGhCb2R5OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEhlYWRlciBmcm9tICcuLi9IZWFkZXInO1xuaW1wb3J0IFBhbmVsQ29udGV4dCBmcm9tICcuLi8uLi9QYW5lbENvbnRleHQnO1xuaW1wb3J0IHsgZm9ybWF0VmFsdWUgfSBmcm9tICcuLi8uLi91dGlscy9kYXRlVXRpbCc7XG5cbmZ1bmN0aW9uIE1vbnRoSGVhZGVyKHByb3BzKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBnZW5lcmF0ZUNvbmZpZyA9IHByb3BzLmdlbmVyYXRlQ29uZmlnLFxuICAgICAgbG9jYWxlID0gcHJvcHMubG9jYWxlLFxuICAgICAgdmlld0RhdGUgPSBwcm9wcy52aWV3RGF0ZSxcbiAgICAgIG9uTmV4dFllYXIgPSBwcm9wcy5vbk5leHRZZWFyLFxuICAgICAgb25QcmV2WWVhciA9IHByb3BzLm9uUHJldlllYXIsXG4gICAgICBvblllYXJDbGljayA9IHByb3BzLm9uWWVhckNsaWNrO1xuXG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUGFuZWxDb250ZXh0KSxcbiAgICAgIGhpZGVIZWFkZXIgPSBfUmVhY3QkdXNlQ29udGV4dC5oaWRlSGVhZGVyO1xuXG4gIGlmIChoaWRlSGVhZGVyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgaGVhZGVyUHJlZml4Q2xzID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1oZWFkZXJcIik7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChIZWFkZXIsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHByZWZpeENsczogaGVhZGVyUHJlZml4Q2xzLFxuICAgIG9uU3VwZXJQcmV2OiBvblByZXZZZWFyLFxuICAgIG9uU3VwZXJOZXh0OiBvbk5leHRZZWFyXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgdHlwZTogXCJidXR0b25cIixcbiAgICBvbkNsaWNrOiBvblllYXJDbGljayxcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCIteWVhci1idG5cIilcbiAgfSwgZm9ybWF0VmFsdWUodmlld0RhdGUsIHtcbiAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICBmb3JtYXQ6IGxvY2FsZS55ZWFyRm9ybWF0LFxuICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZ1xuICB9KSkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBNb250aEhlYWRlcjsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBNb250aEhlYWRlciBmcm9tICcuL01vbnRoSGVhZGVyJztcbmltcG9ydCBNb250aEJvZHksIHsgTU9OVEhfQ09MX0NPVU5UIH0gZnJvbSAnLi9Nb250aEJvZHknO1xuaW1wb3J0IHsgY3JlYXRlS2V5RG93bkhhbmRsZXIgfSBmcm9tICcuLi8uLi91dGlscy91aVV0aWwnO1xuXG5mdW5jdGlvbiBNb250aFBhbmVsKHByb3BzKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBvcGVyYXRpb25SZWYgPSBwcm9wcy5vcGVyYXRpb25SZWYsXG4gICAgICBvblZpZXdEYXRlQ2hhbmdlID0gcHJvcHMub25WaWV3RGF0ZUNoYW5nZSxcbiAgICAgIGdlbmVyYXRlQ29uZmlnID0gcHJvcHMuZ2VuZXJhdGVDb25maWcsXG4gICAgICB2YWx1ZSA9IHByb3BzLnZhbHVlLFxuICAgICAgdmlld0RhdGUgPSBwcm9wcy52aWV3RGF0ZSxcbiAgICAgIG9uUGFuZWxDaGFuZ2UgPSBwcm9wcy5vblBhbmVsQ2hhbmdlLFxuICAgICAgX29uU2VsZWN0ID0gcHJvcHMub25TZWxlY3Q7XG4gIHZhciBwYW5lbFByZWZpeENscyA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItbW9udGgtcGFuZWxcIik7IC8vID09PT09PT09PT09PT09PT09PT09PT09IEtleWJvYXJkID09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgb3BlcmF0aW9uUmVmLmN1cnJlbnQgPSB7XG4gICAgb25LZXlEb3duOiBmdW5jdGlvbiBvbktleURvd24oZXZlbnQpIHtcbiAgICAgIHJldHVybiBjcmVhdGVLZXlEb3duSGFuZGxlcihldmVudCwge1xuICAgICAgICBvbkxlZnRSaWdodDogZnVuY3Rpb24gb25MZWZ0UmlnaHQoZGlmZikge1xuICAgICAgICAgIF9vblNlbGVjdChnZW5lcmF0ZUNvbmZpZy5hZGRNb250aCh2YWx1ZSB8fCB2aWV3RGF0ZSwgZGlmZiksICdrZXknKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25DdHJsTGVmdFJpZ2h0OiBmdW5jdGlvbiBvbkN0cmxMZWZ0UmlnaHQoZGlmZikge1xuICAgICAgICAgIF9vblNlbGVjdChnZW5lcmF0ZUNvbmZpZy5hZGRZZWFyKHZhbHVlIHx8IHZpZXdEYXRlLCBkaWZmKSwgJ2tleScpO1xuICAgICAgICB9LFxuICAgICAgICBvblVwRG93bjogZnVuY3Rpb24gb25VcERvd24oZGlmZikge1xuICAgICAgICAgIF9vblNlbGVjdChnZW5lcmF0ZUNvbmZpZy5hZGRNb250aCh2YWx1ZSB8fCB2aWV3RGF0ZSwgZGlmZiAqIE1PTlRIX0NPTF9DT1VOVCksICdrZXknKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcigpIHtcbiAgICAgICAgICBvblBhbmVsQ2hhbmdlKCdkYXRlJywgdmFsdWUgfHwgdmlld0RhdGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07IC8vID09PT09PT09PT09PT09PT09PT09IFZpZXcgT3BlcmF0aW9uID09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIG9uWWVhckNoYW5nZSA9IGZ1bmN0aW9uIG9uWWVhckNoYW5nZShkaWZmKSB7XG4gICAgdmFyIG5ld0RhdGUgPSBnZW5lcmF0ZUNvbmZpZy5hZGRZZWFyKHZpZXdEYXRlLCBkaWZmKTtcbiAgICBvblZpZXdEYXRlQ2hhbmdlKG5ld0RhdGUpO1xuICAgIG9uUGFuZWxDaGFuZ2UobnVsbCwgbmV3RGF0ZSk7XG4gIH07XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IHBhbmVsUHJlZml4Q2xzXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1vbnRoSGVhZGVyLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICBwcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICBvblByZXZZZWFyOiBmdW5jdGlvbiBvblByZXZZZWFyKCkge1xuICAgICAgb25ZZWFyQ2hhbmdlKC0xKTtcbiAgICB9LFxuICAgIG9uTmV4dFllYXI6IGZ1bmN0aW9uIG9uTmV4dFllYXIoKSB7XG4gICAgICBvblllYXJDaGFuZ2UoMSk7XG4gICAgfSxcbiAgICBvblllYXJDbGljazogZnVuY3Rpb24gb25ZZWFyQ2xpY2soKSB7XG4gICAgICBvblBhbmVsQ2hhbmdlKCd5ZWFyJywgdmlld0RhdGUpO1xuICAgIH1cbiAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNb250aEJvZHksIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgIG9uU2VsZWN0OiBmdW5jdGlvbiBvblNlbGVjdChkYXRlKSB7XG4gICAgICBfb25TZWxlY3QoZGF0ZSwgJ21vdXNlJyk7XG5cbiAgICAgIG9uUGFuZWxDaGFuZ2UoJ2RhdGUnLCBkYXRlKTtcbiAgICB9XG4gIH0pKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vbnRoUGFuZWw7IiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBQYW5lbENvbnRleHQgZnJvbSAnLi4vUGFuZWxDb250ZXh0JztcbmltcG9ydCB7IGdldExhc3REYXkgfSBmcm9tICcuLi91dGlscy90aW1lVXRpbCc7XG5pbXBvcnQgeyBnZXRDZWxsRGF0ZURpc2FibGVkIH0gZnJvbSAnLi4vdXRpbHMvZGF0ZVV0aWwnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGFuZWxCb2R5KF9yZWYpIHtcbiAgdmFyIHByZWZpeENscyA9IF9yZWYucHJlZml4Q2xzLFxuICAgICAgZGlzYWJsZWREYXRlID0gX3JlZi5kaXNhYmxlZERhdGUsXG4gICAgICBvblNlbGVjdCA9IF9yZWYub25TZWxlY3QsXG4gICAgICBwaWNrZXIgPSBfcmVmLnBpY2tlcixcbiAgICAgIHJvd051bSA9IF9yZWYucm93TnVtLFxuICAgICAgY29sTnVtID0gX3JlZi5jb2xOdW0sXG4gICAgICBwcmVmaXhDb2x1bW4gPSBfcmVmLnByZWZpeENvbHVtbixcbiAgICAgIHJvd0NsYXNzTmFtZSA9IF9yZWYucm93Q2xhc3NOYW1lLFxuICAgICAgYmFzZURhdGUgPSBfcmVmLmJhc2VEYXRlLFxuICAgICAgZ2V0Q2VsbENsYXNzTmFtZSA9IF9yZWYuZ2V0Q2VsbENsYXNzTmFtZSxcbiAgICAgIGdldENlbGxUZXh0ID0gX3JlZi5nZXRDZWxsVGV4dCxcbiAgICAgIGdldENlbGxOb2RlID0gX3JlZi5nZXRDZWxsTm9kZSxcbiAgICAgIGdldENlbGxEYXRlID0gX3JlZi5nZXRDZWxsRGF0ZSxcbiAgICAgIGdlbmVyYXRlQ29uZmlnID0gX3JlZi5nZW5lcmF0ZUNvbmZpZyxcbiAgICAgIHRpdGxlQ2VsbCA9IF9yZWYudGl0bGVDZWxsLFxuICAgICAgaGVhZGVyQ2VsbHMgPSBfcmVmLmhlYWRlckNlbGxzO1xuXG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUGFuZWxDb250ZXh0KSxcbiAgICAgIG9uRGF0ZU1vdXNlRW50ZXIgPSBfUmVhY3QkdXNlQ29udGV4dC5vbkRhdGVNb3VzZUVudGVyLFxuICAgICAgb25EYXRlTW91c2VMZWF2ZSA9IF9SZWFjdCR1c2VDb250ZXh0Lm9uRGF0ZU1vdXNlTGVhdmUsXG4gICAgICBtb2RlID0gX1JlYWN0JHVzZUNvbnRleHQubW9kZTtcblxuICB2YXIgY2VsbFByZWZpeENscyA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItY2VsbFwiKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBCb2R5ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgcm93cyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcm93TnVtOyBpICs9IDEpIHtcbiAgICB2YXIgcm93ID0gW107XG4gICAgdmFyIHJvd1N0YXJ0RGF0ZSA9IHZvaWQgMDtcblxuICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGopIHtcbiAgICAgIHZhciBfb2JqZWN0U3ByZWFkMjtcblxuICAgICAgdmFyIG9mZnNldCA9IGkgKiBjb2xOdW0gKyBqO1xuICAgICAgdmFyIGN1cnJlbnREYXRlID0gZ2V0Q2VsbERhdGUoYmFzZURhdGUsIG9mZnNldCk7XG4gICAgICB2YXIgZGlzYWJsZWQgPSBnZXRDZWxsRGF0ZURpc2FibGVkKHtcbiAgICAgICAgY2VsbERhdGU6IGN1cnJlbnREYXRlLFxuICAgICAgICBtb2RlOiBtb2RlLFxuICAgICAgICBkaXNhYmxlZERhdGU6IGRpc2FibGVkRGF0ZSxcbiAgICAgICAgZ2VuZXJhdGVDb25maWc6IGdlbmVyYXRlQ29uZmlnXG4gICAgICB9KTtcblxuICAgICAgaWYgKGogPT09IDApIHtcbiAgICAgICAgcm93U3RhcnREYXRlID0gY3VycmVudERhdGU7XG5cbiAgICAgICAgaWYgKHByZWZpeENvbHVtbikge1xuICAgICAgICAgIHJvdy5wdXNoKHByZWZpeENvbHVtbihyb3dTdGFydERhdGUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgdGl0bGUgPSB0aXRsZUNlbGwgJiYgdGl0bGVDZWxsKGN1cnJlbnREYXRlKTtcbiAgICAgIHJvdy5wdXNoKCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRkXCIsIHtcbiAgICAgICAga2V5OiBqLFxuICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhjZWxsUHJlZml4Q2xzLCBfb2JqZWN0U3ByZWFkKChfb2JqZWN0U3ByZWFkMiA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX29iamVjdFNwcmVhZDIsIFwiXCIuY29uY2F0KGNlbGxQcmVmaXhDbHMsIFwiLWRpc2FibGVkXCIpLCBkaXNhYmxlZCksIF9kZWZpbmVQcm9wZXJ0eShfb2JqZWN0U3ByZWFkMiwgXCJcIi5jb25jYXQoY2VsbFByZWZpeENscywgXCItc3RhcnRcIiksIGdldENlbGxUZXh0KGN1cnJlbnREYXRlKSA9PT0gMSB8fCBwaWNrZXIgPT09ICd5ZWFyJyAmJiBOdW1iZXIodGl0bGUpICUgMTAgPT09IDApLCBfZGVmaW5lUHJvcGVydHkoX29iamVjdFNwcmVhZDIsIFwiXCIuY29uY2F0KGNlbGxQcmVmaXhDbHMsIFwiLWVuZFwiKSwgdGl0bGUgPT09IGdldExhc3REYXkoZ2VuZXJhdGVDb25maWcsIGN1cnJlbnREYXRlKSB8fCBwaWNrZXIgPT09ICd5ZWFyJyAmJiBOdW1iZXIodGl0bGUpICUgMTAgPT09IDkpLCBfb2JqZWN0U3ByZWFkMiksIGdldENlbGxDbGFzc05hbWUoY3VycmVudERhdGUpKSksXG4gICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgaWYgKCFkaXNhYmxlZCkge1xuICAgICAgICAgICAgb25TZWxlY3QoY3VycmVudERhdGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25Nb3VzZUVudGVyOiBmdW5jdGlvbiBvbk1vdXNlRW50ZXIoKSB7XG4gICAgICAgICAgaWYgKCFkaXNhYmxlZCAmJiBvbkRhdGVNb3VzZUVudGVyKSB7XG4gICAgICAgICAgICBvbkRhdGVNb3VzZUVudGVyKGN1cnJlbnREYXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uTW91c2VMZWF2ZTogZnVuY3Rpb24gb25Nb3VzZUxlYXZlKCkge1xuICAgICAgICAgIGlmICghZGlzYWJsZWQgJiYgb25EYXRlTW91c2VMZWF2ZSkge1xuICAgICAgICAgICAgb25EYXRlTW91c2VMZWF2ZShjdXJyZW50RGF0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBnZXRDZWxsTm9kZSA/IGdldENlbGxOb2RlKGN1cnJlbnREYXRlKSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChjZWxsUHJlZml4Q2xzLCBcIi1pbm5lclwiKVxuICAgICAgfSwgZ2V0Q2VsbFRleHQoY3VycmVudERhdGUpKSkpO1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvbE51bTsgaiArPSAxKSB7XG4gICAgICBfbG9vcChqKTtcbiAgICB9XG5cbiAgICByb3dzLnB1c2goIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidHJcIiwge1xuICAgICAga2V5OiBpLFxuICAgICAgY2xhc3NOYW1lOiByb3dDbGFzc05hbWUgJiYgcm93Q2xhc3NOYW1lKHJvd1N0YXJ0RGF0ZSlcbiAgICB9LCByb3cpKTtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWJvZHlcIilcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWNvbnRlbnRcIilcbiAgfSwgaGVhZGVyQ2VsbHMgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0aGVhZFwiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInRyXCIsIG51bGwsIGhlYWRlckNlbGxzKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIiwgbnVsbCwgcm93cykpKTtcbn0iLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGZvcm1hdFZhbHVlLCBpc1NhbWVRdWFydGVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvZGF0ZVV0aWwnO1xuaW1wb3J0IFJhbmdlQ29udGV4dCBmcm9tICcuLi8uLi9SYW5nZUNvbnRleHQnO1xuaW1wb3J0IHVzZUNlbGxDbGFzc05hbWUgZnJvbSAnLi4vLi4vaG9va3MvdXNlQ2VsbENsYXNzTmFtZSc7XG5pbXBvcnQgUGFuZWxCb2R5IGZyb20gJy4uL1BhbmVsQm9keSc7XG5leHBvcnQgdmFyIFFVQVJURVJfQ09MX0NPVU5UID0gNDtcbnZhciBRVUFSVEVSX1JPV19DT1VOVCA9IDE7XG5cbmZ1bmN0aW9uIFF1YXJ0ZXJCb2R5KHByb3BzKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBsb2NhbGUgPSBwcm9wcy5sb2NhbGUsXG4gICAgICB2YWx1ZSA9IHByb3BzLnZhbHVlLFxuICAgICAgdmlld0RhdGUgPSBwcm9wcy52aWV3RGF0ZSxcbiAgICAgIGdlbmVyYXRlQ29uZmlnID0gcHJvcHMuZ2VuZXJhdGVDb25maWc7XG5cbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChSYW5nZUNvbnRleHQpLFxuICAgICAgcmFuZ2VkVmFsdWUgPSBfUmVhY3QkdXNlQ29udGV4dC5yYW5nZWRWYWx1ZSxcbiAgICAgIGhvdmVyUmFuZ2VkVmFsdWUgPSBfUmVhY3QkdXNlQ29udGV4dC5ob3ZlclJhbmdlZFZhbHVlO1xuXG4gIHZhciBjZWxsUHJlZml4Q2xzID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1jZWxsXCIpO1xuICB2YXIgZ2V0Q2VsbENsYXNzTmFtZSA9IHVzZUNlbGxDbGFzc05hbWUoe1xuICAgIGNlbGxQcmVmaXhDbHM6IGNlbGxQcmVmaXhDbHMsXG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZyxcbiAgICByYW5nZWRWYWx1ZTogcmFuZ2VkVmFsdWUsXG4gICAgaG92ZXJSYW5nZWRWYWx1ZTogaG92ZXJSYW5nZWRWYWx1ZSxcbiAgICBpc1NhbWVDZWxsOiBmdW5jdGlvbiBpc1NhbWVDZWxsKGN1cnJlbnQsIHRhcmdldCkge1xuICAgICAgcmV0dXJuIGlzU2FtZVF1YXJ0ZXIoZ2VuZXJhdGVDb25maWcsIGN1cnJlbnQsIHRhcmdldCk7XG4gICAgfSxcbiAgICBpc0luVmlldzogZnVuY3Rpb24gaXNJblZpZXcoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIG9mZnNldENlbGw6IGZ1bmN0aW9uIG9mZnNldENlbGwoZGF0ZSwgb2Zmc2V0KSB7XG4gICAgICByZXR1cm4gZ2VuZXJhdGVDb25maWcuYWRkTW9udGgoZGF0ZSwgb2Zmc2V0ICogMyk7XG4gICAgfVxuICB9KTtcbiAgdmFyIGJhc2VRdWFydGVyID0gZ2VuZXJhdGVDb25maWcuc2V0RGF0ZShnZW5lcmF0ZUNvbmZpZy5zZXRNb250aCh2aWV3RGF0ZSwgMCksIDEpO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGFuZWxCb2R5LCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICByb3dOdW06IFFVQVJURVJfUk9XX0NPVU5ULFxuICAgIGNvbE51bTogUVVBUlRFUl9DT0xfQ09VTlQsXG4gICAgYmFzZURhdGU6IGJhc2VRdWFydGVyLFxuICAgIGdldENlbGxUZXh0OiBmdW5jdGlvbiBnZXRDZWxsVGV4dChkYXRlKSB7XG4gICAgICByZXR1cm4gZm9ybWF0VmFsdWUoZGF0ZSwge1xuICAgICAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICAgICAgZm9ybWF0OiBsb2NhbGUucXVhcnRlckZvcm1hdCB8fCAnW1FdUScsXG4gICAgICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZ1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRDZWxsQ2xhc3NOYW1lOiBnZXRDZWxsQ2xhc3NOYW1lLFxuICAgIGdldENlbGxEYXRlOiBmdW5jdGlvbiBnZXRDZWxsRGF0ZShkYXRlLCBvZmZzZXQpIHtcbiAgICAgIHJldHVybiBnZW5lcmF0ZUNvbmZpZy5hZGRNb250aChkYXRlLCBvZmZzZXQgKiAzKTtcbiAgICB9LFxuICAgIHRpdGxlQ2VsbDogZnVuY3Rpb24gdGl0bGVDZWxsKGRhdGUpIHtcbiAgICAgIHJldHVybiBmb3JtYXRWYWx1ZShkYXRlLCB7XG4gICAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgICBmb3JtYXQ6ICdZWVlZLVtRXVEnLFxuICAgICAgICBnZW5lcmF0ZUNvbmZpZzogZ2VuZXJhdGVDb25maWdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBRdWFydGVyQm9keTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBIZWFkZXIgZnJvbSAnLi4vSGVhZGVyJztcbmltcG9ydCBQYW5lbENvbnRleHQgZnJvbSAnLi4vLi4vUGFuZWxDb250ZXh0JztcbmltcG9ydCB7IGZvcm1hdFZhbHVlIH0gZnJvbSAnLi4vLi4vdXRpbHMvZGF0ZVV0aWwnO1xuXG5mdW5jdGlvbiBRdWFydGVySGVhZGVyKHByb3BzKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBnZW5lcmF0ZUNvbmZpZyA9IHByb3BzLmdlbmVyYXRlQ29uZmlnLFxuICAgICAgbG9jYWxlID0gcHJvcHMubG9jYWxlLFxuICAgICAgdmlld0RhdGUgPSBwcm9wcy52aWV3RGF0ZSxcbiAgICAgIG9uTmV4dFllYXIgPSBwcm9wcy5vbk5leHRZZWFyLFxuICAgICAgb25QcmV2WWVhciA9IHByb3BzLm9uUHJldlllYXIsXG4gICAgICBvblllYXJDbGljayA9IHByb3BzLm9uWWVhckNsaWNrO1xuXG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUGFuZWxDb250ZXh0KSxcbiAgICAgIGhpZGVIZWFkZXIgPSBfUmVhY3QkdXNlQ29udGV4dC5oaWRlSGVhZGVyO1xuXG4gIGlmIChoaWRlSGVhZGVyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgaGVhZGVyUHJlZml4Q2xzID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1oZWFkZXJcIik7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChIZWFkZXIsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHByZWZpeENsczogaGVhZGVyUHJlZml4Q2xzLFxuICAgIG9uU3VwZXJQcmV2OiBvblByZXZZZWFyLFxuICAgIG9uU3VwZXJOZXh0OiBvbk5leHRZZWFyXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgdHlwZTogXCJidXR0b25cIixcbiAgICBvbkNsaWNrOiBvblllYXJDbGljayxcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCIteWVhci1idG5cIilcbiAgfSwgZm9ybWF0VmFsdWUodmlld0RhdGUsIHtcbiAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICBmb3JtYXQ6IGxvY2FsZS55ZWFyRm9ybWF0LFxuICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZ1xuICB9KSkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBRdWFydGVySGVhZGVyOyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFF1YXJ0ZXJIZWFkZXIgZnJvbSAnLi9RdWFydGVySGVhZGVyJztcbmltcG9ydCBRdWFydGVyQm9keSBmcm9tICcuL1F1YXJ0ZXJCb2R5JztcbmltcG9ydCB7IGNyZWF0ZUtleURvd25IYW5kbGVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvdWlVdGlsJztcblxuZnVuY3Rpb24gUXVhcnRlclBhbmVsKHByb3BzKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBvcGVyYXRpb25SZWYgPSBwcm9wcy5vcGVyYXRpb25SZWYsXG4gICAgICBvblZpZXdEYXRlQ2hhbmdlID0gcHJvcHMub25WaWV3RGF0ZUNoYW5nZSxcbiAgICAgIGdlbmVyYXRlQ29uZmlnID0gcHJvcHMuZ2VuZXJhdGVDb25maWcsXG4gICAgICB2YWx1ZSA9IHByb3BzLnZhbHVlLFxuICAgICAgdmlld0RhdGUgPSBwcm9wcy52aWV3RGF0ZSxcbiAgICAgIG9uUGFuZWxDaGFuZ2UgPSBwcm9wcy5vblBhbmVsQ2hhbmdlLFxuICAgICAgX29uU2VsZWN0ID0gcHJvcHMub25TZWxlY3Q7XG4gIHZhciBwYW5lbFByZWZpeENscyA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItcXVhcnRlci1wYW5lbFwiKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT0gS2V5Ym9hcmQgPT09PT09PT09PT09PT09PT09PT09PT1cblxuICBvcGVyYXRpb25SZWYuY3VycmVudCA9IHtcbiAgICBvbktleURvd246IGZ1bmN0aW9uIG9uS2V5RG93bihldmVudCkge1xuICAgICAgcmV0dXJuIGNyZWF0ZUtleURvd25IYW5kbGVyKGV2ZW50LCB7XG4gICAgICAgIG9uTGVmdFJpZ2h0OiBmdW5jdGlvbiBvbkxlZnRSaWdodChkaWZmKSB7XG4gICAgICAgICAgX29uU2VsZWN0KGdlbmVyYXRlQ29uZmlnLmFkZE1vbnRoKHZhbHVlIHx8IHZpZXdEYXRlLCBkaWZmICogMyksICdrZXknKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25DdHJsTGVmdFJpZ2h0OiBmdW5jdGlvbiBvbkN0cmxMZWZ0UmlnaHQoZGlmZikge1xuICAgICAgICAgIF9vblNlbGVjdChnZW5lcmF0ZUNvbmZpZy5hZGRZZWFyKHZhbHVlIHx8IHZpZXdEYXRlLCBkaWZmKSwgJ2tleScpO1xuICAgICAgICB9LFxuICAgICAgICBvblVwRG93bjogZnVuY3Rpb24gb25VcERvd24oZGlmZikge1xuICAgICAgICAgIF9vblNlbGVjdChnZW5lcmF0ZUNvbmZpZy5hZGRZZWFyKHZhbHVlIHx8IHZpZXdEYXRlLCBkaWZmKSwgJ2tleScpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07IC8vID09PT09PT09PT09PT09PT09PT09IFZpZXcgT3BlcmF0aW9uID09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIG9uWWVhckNoYW5nZSA9IGZ1bmN0aW9uIG9uWWVhckNoYW5nZShkaWZmKSB7XG4gICAgdmFyIG5ld0RhdGUgPSBnZW5lcmF0ZUNvbmZpZy5hZGRZZWFyKHZpZXdEYXRlLCBkaWZmKTtcbiAgICBvblZpZXdEYXRlQ2hhbmdlKG5ld0RhdGUpO1xuICAgIG9uUGFuZWxDaGFuZ2UobnVsbCwgbmV3RGF0ZSk7XG4gIH07XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IHBhbmVsUHJlZml4Q2xzXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFF1YXJ0ZXJIZWFkZXIsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgIG9uUHJldlllYXI6IGZ1bmN0aW9uIG9uUHJldlllYXIoKSB7XG4gICAgICBvblllYXJDaGFuZ2UoLTEpO1xuICAgIH0sXG4gICAgb25OZXh0WWVhcjogZnVuY3Rpb24gb25OZXh0WWVhcigpIHtcbiAgICAgIG9uWWVhckNoYW5nZSgxKTtcbiAgICB9LFxuICAgIG9uWWVhckNsaWNrOiBmdW5jdGlvbiBvblllYXJDbGljaygpIHtcbiAgICAgIG9uUGFuZWxDaGFuZ2UoJ3llYXInLCB2aWV3RGF0ZSk7XG4gICAgfVxuICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFF1YXJ0ZXJCb2R5LCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICBwcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICBvblNlbGVjdDogZnVuY3Rpb24gb25TZWxlY3QoZGF0ZSkge1xuICAgICAgX29uU2VsZWN0KGRhdGUsICdtb3VzZScpO1xuICAgIH1cbiAgfSkpKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUXVhcnRlclBhbmVsOyIsImltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VNZW1vIGZyb20gXCJyYy11dGlsL2VzL2hvb2tzL3VzZU1lbW9cIjtcbmltcG9ydCBUaW1lVW5pdENvbHVtbiBmcm9tICcuL1RpbWVVbml0Q29sdW1uJztcbmltcG9ydCB7IGxlZnRQYWQgfSBmcm9tICcuLi8uLi91dGlscy9taXNjVXRpbCc7XG5pbXBvcnQgeyBzZXRUaW1lIGFzIHV0aWxTZXRUaW1lIH0gZnJvbSAnLi4vLi4vdXRpbHMvdGltZVV0aWwnO1xuXG5mdW5jdGlvbiBzaG91bGRVbml0c1VwZGF0ZShwcmV2VW5pdHMsIG5leHRVbml0cykge1xuICBpZiAocHJldlVuaXRzLmxlbmd0aCAhPT0gbmV4dFVuaXRzLmxlbmd0aCkgcmV0dXJuIHRydWU7IC8vIGlmIGFueSB1bml0J3MgZGlzYWJsZWQgc3RhdHVzIGlzIGRpZmZlcmVudCwgdGhlIHVuaXRzIHNob3VsZCBiZSByZS1ldmFsdXRlZFxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJldlVuaXRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKHByZXZVbml0c1tpXS5kaXNhYmxlZCAhPT0gbmV4dFVuaXRzW2ldLmRpc2FibGVkKSByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVVbml0cyhzdGFydCwgZW5kLCBzdGVwLCBkaXNhYmxlZFVuaXRzKSB7XG4gIHZhciB1bml0cyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8PSBlbmQ7IGkgKz0gc3RlcCkge1xuICAgIHVuaXRzLnB1c2goe1xuICAgICAgbGFiZWw6IGxlZnRQYWQoaSwgMiksXG4gICAgICB2YWx1ZTogaSxcbiAgICAgIGRpc2FibGVkOiAoZGlzYWJsZWRVbml0cyB8fCBbXSkuaW5jbHVkZXMoaSlcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB1bml0cztcbn1cblxuZnVuY3Rpb24gVGltZUJvZHkocHJvcHMpIHtcbiAgdmFyIGdlbmVyYXRlQ29uZmlnID0gcHJvcHMuZ2VuZXJhdGVDb25maWcsXG4gICAgICBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBvcGVyYXRpb25SZWYgPSBwcm9wcy5vcGVyYXRpb25SZWYsXG4gICAgICBhY3RpdmVDb2x1bW5JbmRleCA9IHByb3BzLmFjdGl2ZUNvbHVtbkluZGV4LFxuICAgICAgdmFsdWUgPSBwcm9wcy52YWx1ZSxcbiAgICAgIHNob3dIb3VyID0gcHJvcHMuc2hvd0hvdXIsXG4gICAgICBzaG93TWludXRlID0gcHJvcHMuc2hvd01pbnV0ZSxcbiAgICAgIHNob3dTZWNvbmQgPSBwcm9wcy5zaG93U2Vjb25kLFxuICAgICAgdXNlMTJIb3VycyA9IHByb3BzLnVzZTEySG91cnMsXG4gICAgICBfcHJvcHMkaG91clN0ZXAgPSBwcm9wcy5ob3VyU3RlcCxcbiAgICAgIGhvdXJTdGVwID0gX3Byb3BzJGhvdXJTdGVwID09PSB2b2lkIDAgPyAxIDogX3Byb3BzJGhvdXJTdGVwLFxuICAgICAgX3Byb3BzJG1pbnV0ZVN0ZXAgPSBwcm9wcy5taW51dGVTdGVwLFxuICAgICAgbWludXRlU3RlcCA9IF9wcm9wcyRtaW51dGVTdGVwID09PSB2b2lkIDAgPyAxIDogX3Byb3BzJG1pbnV0ZVN0ZXAsXG4gICAgICBfcHJvcHMkc2Vjb25kU3RlcCA9IHByb3BzLnNlY29uZFN0ZXAsXG4gICAgICBzZWNvbmRTdGVwID0gX3Byb3BzJHNlY29uZFN0ZXAgPT09IHZvaWQgMCA/IDEgOiBfcHJvcHMkc2Vjb25kU3RlcCxcbiAgICAgIGRpc2FibGVkSG91cnMgPSBwcm9wcy5kaXNhYmxlZEhvdXJzLFxuICAgICAgZGlzYWJsZWRNaW51dGVzID0gcHJvcHMuZGlzYWJsZWRNaW51dGVzLFxuICAgICAgZGlzYWJsZWRTZWNvbmRzID0gcHJvcHMuZGlzYWJsZWRTZWNvbmRzLFxuICAgICAgaGlkZURpc2FibGVkT3B0aW9ucyA9IHByb3BzLmhpZGVEaXNhYmxlZE9wdGlvbnMsXG4gICAgICBvblNlbGVjdCA9IHByb3BzLm9uU2VsZWN0O1xuICB2YXIgY29sdW1ucyA9IFtdO1xuICB2YXIgY29udGVudFByZWZpeENscyA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItY29udGVudFwiKTtcbiAgdmFyIGNvbHVtblByZWZpeENscyA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItdGltZS1wYW5lbFwiKTtcbiAgdmFyIGlzUE07XG4gIHZhciBvcmlnaW5Ib3VyID0gdmFsdWUgPyBnZW5lcmF0ZUNvbmZpZy5nZXRIb3VyKHZhbHVlKSA6IC0xO1xuICB2YXIgaG91ciA9IG9yaWdpbkhvdXI7XG4gIHZhciBtaW51dGUgPSB2YWx1ZSA/IGdlbmVyYXRlQ29uZmlnLmdldE1pbnV0ZSh2YWx1ZSkgOiAtMTtcbiAgdmFyIHNlY29uZCA9IHZhbHVlID8gZ2VuZXJhdGVDb25maWcuZ2V0U2Vjb25kKHZhbHVlKSA6IC0xO1xuXG4gIHZhciBzZXRUaW1lID0gZnVuY3Rpb24gc2V0VGltZShpc05ld1BNLCBuZXdIb3VyLCBuZXdNaW51dGUsIG5ld1NlY29uZCkge1xuICAgIHZhciBuZXdEYXRlID0gdmFsdWUgfHwgZ2VuZXJhdGVDb25maWcuZ2V0Tm93KCk7XG4gICAgdmFyIG1lcmdlZEhvdXIgPSBNYXRoLm1heCgwLCBuZXdIb3VyKTtcbiAgICB2YXIgbWVyZ2VkTWludXRlID0gTWF0aC5tYXgoMCwgbmV3TWludXRlKTtcbiAgICB2YXIgbWVyZ2VkU2Vjb25kID0gTWF0aC5tYXgoMCwgbmV3U2Vjb25kKTtcbiAgICBuZXdEYXRlID0gdXRpbFNldFRpbWUoZ2VuZXJhdGVDb25maWcsIG5ld0RhdGUsICF1c2UxMkhvdXJzIHx8ICFpc05ld1BNID8gbWVyZ2VkSG91ciA6IG1lcmdlZEhvdXIgKyAxMiwgbWVyZ2VkTWludXRlLCBtZXJnZWRTZWNvbmQpO1xuICAgIHJldHVybiBuZXdEYXRlO1xuICB9OyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IFVuaXQgPT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIHJhd0hvdXJzID0gZ2VuZXJhdGVVbml0cygwLCAyMywgaG91clN0ZXAsIGRpc2FibGVkSG91cnMgJiYgZGlzYWJsZWRIb3VycygpKTtcbiAgdmFyIG1lbW9yaXplZFJhd0hvdXJzID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHJhd0hvdXJzO1xuICB9LCByYXdIb3Vycywgc2hvdWxkVW5pdHNVcGRhdGUpOyAvLyBTaG91bGQgYWRkaXRpb25hbCBsb2dpYyB0byBoYW5kbGUgMTIgaG91cnNcblxuICBpZiAodXNlMTJIb3Vycykge1xuICAgIGlzUE0gPSBob3VyID49IDEyOyAvLyAtMSBtZWFucyBzaG91bGQgZGlzcGxheSBBTVxuXG4gICAgaG91ciAlPSAxMjtcbiAgfVxuXG4gIHZhciBfUmVhY3QkdXNlTWVtbyA9IFJlYWN0LnVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIGlmICghdXNlMTJIb3Vycykge1xuICAgICAgcmV0dXJuIFtmYWxzZSwgZmFsc2VdO1xuICAgIH1cblxuICAgIHZhciBBTVBNRGlzYWJsZWQgPSBbdHJ1ZSwgdHJ1ZV07XG4gICAgbWVtb3JpemVkUmF3SG91cnMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikge1xuICAgICAgdmFyIGRpc2FibGVkID0gX3JlZi5kaXNhYmxlZCxcbiAgICAgICAgICBob3VyVmFsdWUgPSBfcmVmLnZhbHVlO1xuICAgICAgaWYgKGRpc2FibGVkKSByZXR1cm47XG5cbiAgICAgIGlmIChob3VyVmFsdWUgPj0gMTIpIHtcbiAgICAgICAgQU1QTURpc2FibGVkWzFdID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBBTVBNRGlzYWJsZWRbMF0gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQU1QTURpc2FibGVkO1xuICB9LCBbdXNlMTJIb3VycywgbWVtb3JpemVkUmF3SG91cnNdKSxcbiAgICAgIF9SZWFjdCR1c2VNZW1vMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VNZW1vLCAyKSxcbiAgICAgIEFNRGlzYWJsZWQgPSBfUmVhY3QkdXNlTWVtbzJbMF0sXG4gICAgICBQTURpc2FibGVkID0gX1JlYWN0JHVzZU1lbW8yWzFdO1xuXG4gIHZhciBob3VycyA9IFJlYWN0LnVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIGlmICghdXNlMTJIb3VycykgcmV0dXJuIG1lbW9yaXplZFJhd0hvdXJzO1xuICAgIHJldHVybiBtZW1vcml6ZWRSYXdIb3Vycy5maWx0ZXIoaXNQTSA/IGZ1bmN0aW9uIChob3VyTWV0YSkge1xuICAgICAgcmV0dXJuIGhvdXJNZXRhLnZhbHVlID49IDEyO1xuICAgIH0gOiBmdW5jdGlvbiAoaG91ck1ldGEpIHtcbiAgICAgIHJldHVybiBob3VyTWV0YS52YWx1ZSA8IDEyO1xuICAgIH0pLm1hcChmdW5jdGlvbiAoaG91ck1ldGEpIHtcbiAgICAgIHZhciBob3VyVmFsdWUgPSBob3VyTWV0YS52YWx1ZSAlIDEyO1xuICAgICAgdmFyIGhvdXJMYWJlbCA9IGhvdXJWYWx1ZSA9PT0gMCA/ICcxMicgOiBsZWZ0UGFkKGhvdXJWYWx1ZSwgMik7XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBob3VyTWV0YSksIHt9LCB7XG4gICAgICAgIGxhYmVsOiBob3VyTGFiZWwsXG4gICAgICAgIHZhbHVlOiBob3VyVmFsdWVcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbdXNlMTJIb3VycywgaXNQTSwgbWVtb3JpemVkUmF3SG91cnNdKTtcbiAgdmFyIG1pbnV0ZXMgPSBnZW5lcmF0ZVVuaXRzKDAsIDU5LCBtaW51dGVTdGVwLCBkaXNhYmxlZE1pbnV0ZXMgJiYgZGlzYWJsZWRNaW51dGVzKG9yaWdpbkhvdXIpKTtcbiAgdmFyIHNlY29uZHMgPSBnZW5lcmF0ZVVuaXRzKDAsIDU5LCBzZWNvbmRTdGVwLCBkaXNhYmxlZFNlY29uZHMgJiYgZGlzYWJsZWRTZWNvbmRzKG9yaWdpbkhvdXIsIG1pbnV0ZSkpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09IE9wZXJhdGlvbnMgPT09PT09PT09PT09PT09PT09PT09PVxuXG4gIG9wZXJhdGlvblJlZi5jdXJyZW50ID0ge1xuICAgIG9uVXBEb3duOiBmdW5jdGlvbiBvblVwRG93bihkaWZmKSB7XG4gICAgICB2YXIgY29sdW1uID0gY29sdW1uc1thY3RpdmVDb2x1bW5JbmRleF07XG5cbiAgICAgIGlmIChjb2x1bW4pIHtcbiAgICAgICAgdmFyIHZhbHVlSW5kZXggPSBjb2x1bW4udW5pdHMuZmluZEluZGV4KGZ1bmN0aW9uICh1bml0KSB7XG4gICAgICAgICAgcmV0dXJuIHVuaXQudmFsdWUgPT09IGNvbHVtbi52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB1bml0TGVuID0gY29sdW1uLnVuaXRzLmxlbmd0aDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHVuaXRMZW47IGkgKz0gMSkge1xuICAgICAgICAgIHZhciBuZXh0VW5pdCA9IGNvbHVtbi51bml0c1sodmFsdWVJbmRleCArIGRpZmYgKiBpICsgdW5pdExlbikgJSB1bml0TGVuXTtcblxuICAgICAgICAgIGlmIChuZXh0VW5pdC5kaXNhYmxlZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29sdW1uLm9uU2VsZWN0KG5leHRVbml0LnZhbHVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IFJlbmRlciA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBhZGRDb2x1bW5Ob2RlKGNvbmRpdGlvbiwgbm9kZSwgY29sdW1uVmFsdWUsIHVuaXRzLCBvbkNvbHVtblNlbGVjdCkge1xuICAgIGlmIChjb25kaXRpb24gIT09IGZhbHNlKSB7XG4gICAgICBjb2x1bW5zLnB1c2goe1xuICAgICAgICBub2RlOiAvKiNfX1BVUkVfXyovUmVhY3QuY2xvbmVFbGVtZW50KG5vZGUsIHtcbiAgICAgICAgICBwcmVmaXhDbHM6IGNvbHVtblByZWZpeENscyxcbiAgICAgICAgICB2YWx1ZTogY29sdW1uVmFsdWUsXG4gICAgICAgICAgYWN0aXZlOiBhY3RpdmVDb2x1bW5JbmRleCA9PT0gY29sdW1ucy5sZW5ndGgsXG4gICAgICAgICAgb25TZWxlY3Q6IG9uQ29sdW1uU2VsZWN0LFxuICAgICAgICAgIHVuaXRzOiB1bml0cyxcbiAgICAgICAgICBoaWRlRGlzYWJsZWRPcHRpb25zOiBoaWRlRGlzYWJsZWRPcHRpb25zXG4gICAgICAgIH0pLFxuICAgICAgICBvblNlbGVjdDogb25Db2x1bW5TZWxlY3QsXG4gICAgICAgIHZhbHVlOiBjb2x1bW5WYWx1ZSxcbiAgICAgICAgdW5pdHM6IHVuaXRzXG4gICAgICB9KTtcbiAgICB9XG4gIH0gLy8gSG91clxuXG5cbiAgYWRkQ29sdW1uTm9kZShzaG93SG91ciwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGltZVVuaXRDb2x1bW4sIHtcbiAgICBrZXk6IFwiaG91clwiXG4gIH0pLCBob3VyLCBob3VycywgZnVuY3Rpb24gKG51bSkge1xuICAgIG9uU2VsZWN0KHNldFRpbWUoaXNQTSwgbnVtLCBtaW51dGUsIHNlY29uZCksICdtb3VzZScpO1xuICB9KTsgLy8gTWludXRlXG5cbiAgYWRkQ29sdW1uTm9kZShzaG93TWludXRlLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUaW1lVW5pdENvbHVtbiwge1xuICAgIGtleTogXCJtaW51dGVcIlxuICB9KSwgbWludXRlLCBtaW51dGVzLCBmdW5jdGlvbiAobnVtKSB7XG4gICAgb25TZWxlY3Qoc2V0VGltZShpc1BNLCBob3VyLCBudW0sIHNlY29uZCksICdtb3VzZScpO1xuICB9KTsgLy8gU2Vjb25kXG5cbiAgYWRkQ29sdW1uTm9kZShzaG93U2Vjb25kLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUaW1lVW5pdENvbHVtbiwge1xuICAgIGtleTogXCJzZWNvbmRcIlxuICB9KSwgc2Vjb25kLCBzZWNvbmRzLCBmdW5jdGlvbiAobnVtKSB7XG4gICAgb25TZWxlY3Qoc2V0VGltZShpc1BNLCBob3VyLCBtaW51dGUsIG51bSksICdtb3VzZScpO1xuICB9KTsgLy8gMTIgSG91cnNcblxuICB2YXIgUE1JbmRleCA9IC0xO1xuXG4gIGlmICh0eXBlb2YgaXNQTSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgUE1JbmRleCA9IGlzUE0gPyAxIDogMDtcbiAgfVxuXG4gIGFkZENvbHVtbk5vZGUodXNlMTJIb3VycyA9PT0gdHJ1ZSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGltZVVuaXRDb2x1bW4sIHtcbiAgICBrZXk6IFwiMTJob3Vyc1wiXG4gIH0pLCBQTUluZGV4LCBbe1xuICAgIGxhYmVsOiAnQU0nLFxuICAgIHZhbHVlOiAwLFxuICAgIGRpc2FibGVkOiBBTURpc2FibGVkXG4gIH0sIHtcbiAgICBsYWJlbDogJ1BNJyxcbiAgICB2YWx1ZTogMSxcbiAgICBkaXNhYmxlZDogUE1EaXNhYmxlZFxuICB9XSwgZnVuY3Rpb24gKG51bSkge1xuICAgIG9uU2VsZWN0KHNldFRpbWUoISFudW0sIGhvdXIsIG1pbnV0ZSwgc2Vjb25kKSwgJ21vdXNlJyk7XG4gIH0pO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogY29udGVudFByZWZpeENsc1xuICB9LCBjb2x1bW5zLm1hcChmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICB2YXIgbm9kZSA9IF9yZWYyLm5vZGU7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH0pKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVGltZUJvZHk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEhlYWRlciBmcm9tICcuLi9IZWFkZXInO1xuaW1wb3J0IFBhbmVsQ29udGV4dCBmcm9tICcuLi8uLi9QYW5lbENvbnRleHQnO1xuaW1wb3J0IHsgZm9ybWF0VmFsdWUgfSBmcm9tICcuLi8uLi91dGlscy9kYXRlVXRpbCc7XG5cbmZ1bmN0aW9uIFRpbWVIZWFkZXIocHJvcHMpIHtcbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChQYW5lbENvbnRleHQpLFxuICAgICAgaGlkZUhlYWRlciA9IF9SZWFjdCR1c2VDb250ZXh0LmhpZGVIZWFkZXI7XG5cbiAgaWYgKGhpZGVIZWFkZXIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBnZW5lcmF0ZUNvbmZpZyA9IHByb3BzLmdlbmVyYXRlQ29uZmlnLFxuICAgICAgbG9jYWxlID0gcHJvcHMubG9jYWxlLFxuICAgICAgdmFsdWUgPSBwcm9wcy52YWx1ZSxcbiAgICAgIGZvcm1hdCA9IHByb3BzLmZvcm1hdDtcbiAgdmFyIGhlYWRlclByZWZpeENscyA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaGVhZGVyXCIpO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSGVhZGVyLCB7XG4gICAgcHJlZml4Q2xzOiBoZWFkZXJQcmVmaXhDbHNcbiAgfSwgdmFsdWUgPyBmb3JtYXRWYWx1ZSh2YWx1ZSwge1xuICAgIGxvY2FsZTogbG9jYWxlLFxuICAgIGZvcm1hdDogZm9ybWF0LFxuICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZ1xuICB9KSA6IFwiXFx4QTBcIik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpbWVIZWFkZXI7IiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJlZiwgdXNlTGF5b3V0RWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBzY3JvbGxUbywgd2FpdEVsZW1lbnRSZWFkeSB9IGZyb20gJy4uLy4uL3V0aWxzL3VpVXRpbCc7XG5pbXBvcnQgUGFuZWxDb250ZXh0IGZyb20gJy4uLy4uL1BhbmVsQ29udGV4dCc7XG5cbmZ1bmN0aW9uIFRpbWVVbml0Q29sdW1uKHByb3BzKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICB1bml0cyA9IHByb3BzLnVuaXRzLFxuICAgICAgb25TZWxlY3QgPSBwcm9wcy5vblNlbGVjdCxcbiAgICAgIHZhbHVlID0gcHJvcHMudmFsdWUsXG4gICAgICBhY3RpdmUgPSBwcm9wcy5hY3RpdmUsXG4gICAgICBoaWRlRGlzYWJsZWRPcHRpb25zID0gcHJvcHMuaGlkZURpc2FibGVkT3B0aW9ucztcbiAgdmFyIGNlbGxQcmVmaXhDbHMgPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWNlbGxcIik7XG5cbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChQYW5lbENvbnRleHQpLFxuICAgICAgb3BlbiA9IF9SZWFjdCR1c2VDb250ZXh0Lm9wZW47XG5cbiAgdmFyIHVsUmVmID0gdXNlUmVmKG51bGwpO1xuICB2YXIgbGlSZWZzID0gdXNlUmVmKG5ldyBNYXAoKSk7XG4gIHZhciBzY3JvbGxSZWYgPSB1c2VSZWYoKTsgLy8gYHVzZUxheW91dEVmZmVjdGAgaGVyZSB0byBhdm9pZCBibGluayBieSBkdXJhdGlvbiBpcyAwXG5cbiAgdXNlTGF5b3V0RWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGkgPSBsaVJlZnMuY3VycmVudC5nZXQodmFsdWUpO1xuXG4gICAgaWYgKGxpICYmIG9wZW4gIT09IGZhbHNlKSB7XG4gICAgICBzY3JvbGxUbyh1bFJlZi5jdXJyZW50LCBsaS5vZmZzZXRUb3AsIDEyMCk7XG4gICAgfVxuICB9LCBbdmFsdWVdKTtcbiAgdXNlTGF5b3V0RWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAob3Blbikge1xuICAgICAgdmFyIGxpID0gbGlSZWZzLmN1cnJlbnQuZ2V0KHZhbHVlKTtcblxuICAgICAgaWYgKGxpKSB7XG4gICAgICAgIHNjcm9sbFJlZi5jdXJyZW50ID0gd2FpdEVsZW1lbnRSZWFkeShsaSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNjcm9sbFRvKHVsUmVmLmN1cnJlbnQsIGxpLm9mZnNldFRvcCwgMCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3Njcm9sbFJlZiRjdXJyZW50O1xuXG4gICAgICAoX3Njcm9sbFJlZiRjdXJyZW50ID0gc2Nyb2xsUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9zY3JvbGxSZWYkY3VycmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Njcm9sbFJlZiRjdXJyZW50LmNhbGwoc2Nyb2xsUmVmKTtcbiAgICB9O1xuICB9LCBbb3Blbl0pO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCB7XG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItY29sdW1uXCIpLCBfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItY29sdW1uLWFjdGl2ZVwiKSwgYWN0aXZlKSksXG4gICAgcmVmOiB1bFJlZixcbiAgICBzdHlsZToge1xuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZSdcbiAgICB9XG4gIH0sIHVuaXRzLm1hcChmdW5jdGlvbiAodW5pdCkge1xuICAgIHZhciBfY2xhc3NOYW1lczI7XG5cbiAgICBpZiAoaGlkZURpc2FibGVkT3B0aW9ucyAmJiB1bml0LmRpc2FibGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7XG4gICAgICBrZXk6IHVuaXQudmFsdWUsXG4gICAgICByZWY6IGZ1bmN0aW9uIHJlZihlbGVtZW50KSB7XG4gICAgICAgIGxpUmVmcy5jdXJyZW50LnNldCh1bml0LnZhbHVlLCBlbGVtZW50KTtcbiAgICAgIH0sXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoY2VsbFByZWZpeENscywgKF9jbGFzc05hbWVzMiA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMyLCBcIlwiLmNvbmNhdChjZWxsUHJlZml4Q2xzLCBcIi1kaXNhYmxlZFwiKSwgdW5pdC5kaXNhYmxlZCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lczIsIFwiXCIuY29uY2F0KGNlbGxQcmVmaXhDbHMsIFwiLXNlbGVjdGVkXCIpLCB2YWx1ZSA9PT0gdW5pdC52YWx1ZSksIF9jbGFzc05hbWVzMikpLFxuICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgaWYgKHVuaXQuZGlzYWJsZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBvblNlbGVjdCh1bml0LnZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KGNlbGxQcmVmaXhDbHMsIFwiLWlubmVyXCIpXG4gICAgfSwgdW5pdC5sYWJlbCkpO1xuICB9KSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpbWVVbml0Q29sdW1uOyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgVGltZUhlYWRlciBmcm9tICcuL1RpbWVIZWFkZXInO1xuaW1wb3J0IFRpbWVCb2R5IGZyb20gJy4vVGltZUJvZHknO1xuaW1wb3J0IHsgY3JlYXRlS2V5RG93bkhhbmRsZXIgfSBmcm9tICcuLi8uLi91dGlscy91aVV0aWwnO1xuXG52YXIgY291bnRCb29sZWFuID0gZnVuY3Rpb24gY291bnRCb29sZWFuKGJvb2xMaXN0KSB7XG4gIHJldHVybiBib29sTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGJvb2wpIHtcbiAgICByZXR1cm4gYm9vbCAhPT0gZmFsc2U7XG4gIH0pLmxlbmd0aDtcbn07XG5cbmZ1bmN0aW9uIFRpbWVQYW5lbChwcm9wcykge1xuICB2YXIgZ2VuZXJhdGVDb25maWcgPSBwcm9wcy5nZW5lcmF0ZUNvbmZpZyxcbiAgICAgIF9wcm9wcyRmb3JtYXQgPSBwcm9wcy5mb3JtYXQsXG4gICAgICBmb3JtYXQgPSBfcHJvcHMkZm9ybWF0ID09PSB2b2lkIDAgPyAnSEg6bW06c3MnIDogX3Byb3BzJGZvcm1hdCxcbiAgICAgIHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIGFjdGl2ZSA9IHByb3BzLmFjdGl2ZSxcbiAgICAgIG9wZXJhdGlvblJlZiA9IHByb3BzLm9wZXJhdGlvblJlZixcbiAgICAgIHNob3dIb3VyID0gcHJvcHMuc2hvd0hvdXIsXG4gICAgICBzaG93TWludXRlID0gcHJvcHMuc2hvd01pbnV0ZSxcbiAgICAgIHNob3dTZWNvbmQgPSBwcm9wcy5zaG93U2Vjb25kLFxuICAgICAgX3Byb3BzJHVzZTEySG91cnMgPSBwcm9wcy51c2UxMkhvdXJzLFxuICAgICAgdXNlMTJIb3VycyA9IF9wcm9wcyR1c2UxMkhvdXJzID09PSB2b2lkIDAgPyBmYWxzZSA6IF9wcm9wcyR1c2UxMkhvdXJzLFxuICAgICAgb25TZWxlY3QgPSBwcm9wcy5vblNlbGVjdCxcbiAgICAgIHZhbHVlID0gcHJvcHMudmFsdWU7XG4gIHZhciBwYW5lbFByZWZpeENscyA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItdGltZS1wYW5lbFwiKTtcbiAgdmFyIGJvZHlPcGVyYXRpb25SZWYgPSBSZWFjdC51c2VSZWYoKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT0gS2V5Ym9hcmQgPT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgX1JlYWN0JHVzZVN0YXRlID0gUmVhY3QudXNlU3RhdGUoLTEpLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksXG4gICAgICBhY3RpdmVDb2x1bW5JbmRleCA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRBY3RpdmVDb2x1bW5JbmRleCA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgdmFyIGNvbHVtbnNDb3VudCA9IGNvdW50Qm9vbGVhbihbc2hvd0hvdXIsIHNob3dNaW51dGUsIHNob3dTZWNvbmQsIHVzZTEySG91cnNdKTtcbiAgb3BlcmF0aW9uUmVmLmN1cnJlbnQgPSB7XG4gICAgb25LZXlEb3duOiBmdW5jdGlvbiBvbktleURvd24oZXZlbnQpIHtcbiAgICAgIHJldHVybiBjcmVhdGVLZXlEb3duSGFuZGxlcihldmVudCwge1xuICAgICAgICBvbkxlZnRSaWdodDogZnVuY3Rpb24gb25MZWZ0UmlnaHQoZGlmZikge1xuICAgICAgICAgIHNldEFjdGl2ZUNvbHVtbkluZGV4KChhY3RpdmVDb2x1bW5JbmRleCArIGRpZmYgKyBjb2x1bW5zQ291bnQpICUgY29sdW1uc0NvdW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25VcERvd246IGZ1bmN0aW9uIG9uVXBEb3duKGRpZmYpIHtcbiAgICAgICAgICBpZiAoYWN0aXZlQ29sdW1uSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICBzZXRBY3RpdmVDb2x1bW5JbmRleCgwKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGJvZHlPcGVyYXRpb25SZWYuY3VycmVudCkge1xuICAgICAgICAgICAgYm9keU9wZXJhdGlvblJlZi5jdXJyZW50Lm9uVXBEb3duKGRpZmYpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcigpIHtcbiAgICAgICAgICBvblNlbGVjdCh2YWx1ZSB8fCBnZW5lcmF0ZUNvbmZpZy5nZXROb3coKSwgJ2tleScpO1xuICAgICAgICAgIHNldEFjdGl2ZUNvbHVtbkluZGV4KC0xKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBvbkJsdXI6IGZ1bmN0aW9uIG9uQmx1cigpIHtcbiAgICAgIHNldEFjdGl2ZUNvbHVtbkluZGV4KC0xKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKHBhbmVsUHJlZml4Q2xzLCBfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KHBhbmVsUHJlZml4Q2xzLCBcIi1hY3RpdmVcIiksIGFjdGl2ZSkpXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRpbWVIZWFkZXIsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIGZvcm1hdDogZm9ybWF0LFxuICAgIHByZWZpeENsczogcHJlZml4Q2xzXG4gIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGltZUJvZHksIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgIGFjdGl2ZUNvbHVtbkluZGV4OiBhY3RpdmVDb2x1bW5JbmRleCxcbiAgICBvcGVyYXRpb25SZWY6IGJvZHlPcGVyYXRpb25SZWZcbiAgfSkpKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVGltZVBhbmVsOyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IERhdGVQYW5lbCBmcm9tICcuLi9EYXRlUGFuZWwnO1xuaW1wb3J0IHsgaXNTYW1lV2VlayB9IGZyb20gJy4uLy4uL3V0aWxzL2RhdGVVdGlsJztcblxuZnVuY3Rpb24gV2Vla1BhbmVsKHByb3BzKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBnZW5lcmF0ZUNvbmZpZyA9IHByb3BzLmdlbmVyYXRlQ29uZmlnLFxuICAgICAgbG9jYWxlID0gcHJvcHMubG9jYWxlLFxuICAgICAgdmFsdWUgPSBwcm9wcy52YWx1ZTsgLy8gUmVuZGVyIGFkZGl0aW9uYWwgY29sdW1uXG5cbiAgdmFyIGNlbGxQcmVmaXhDbHMgPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWNlbGxcIik7XG5cbiAgdmFyIHByZWZpeENvbHVtbiA9IGZ1bmN0aW9uIHByZWZpeENvbHVtbihkYXRlKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidGRcIiwge1xuICAgICAga2V5OiBcIndlZWtcIixcbiAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhjZWxsUHJlZml4Q2xzLCBcIlwiLmNvbmNhdChjZWxsUHJlZml4Q2xzLCBcIi13ZWVrXCIpKVxuICAgIH0sIGdlbmVyYXRlQ29uZmlnLmxvY2FsZS5nZXRXZWVrKGxvY2FsZS5sb2NhbGUsIGRhdGUpKTtcbiAgfTsgLy8gQWRkIHJvdyBjbGFzc05hbWVcblxuXG4gIHZhciByb3dQcmVmaXhDbHMgPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXdlZWstcGFuZWwtcm93XCIpO1xuXG4gIHZhciByb3dDbGFzc05hbWUgPSBmdW5jdGlvbiByb3dDbGFzc05hbWUoZGF0ZSkge1xuICAgIHJldHVybiBjbGFzc05hbWVzKHJvd1ByZWZpeENscywgX2RlZmluZVByb3BlcnR5KHt9LCBcIlwiLmNvbmNhdChyb3dQcmVmaXhDbHMsIFwiLXNlbGVjdGVkXCIpLCBpc1NhbWVXZWVrKGdlbmVyYXRlQ29uZmlnLCBsb2NhbGUubG9jYWxlLCB2YWx1ZSwgZGF0ZSkpKTtcbiAgfTtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRGF0ZVBhbmVsLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICBwYW5lbE5hbWU6IFwid2Vla1wiLFxuICAgIHByZWZpeENvbHVtbjogcHJlZml4Q29sdW1uLFxuICAgIHJvd0NsYXNzTmFtZTogcm93Q2xhc3NOYW1lLFxuICAgIGtleWJvYXJkQ29uZmlnOiB7XG4gICAgICBvbkxlZnRSaWdodDogbnVsbFxuICAgIH1cbiAgfSkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBXZWVrUGFuZWw7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBZRUFSX0RFQ0FERV9DT1VOVCB9IGZyb20gJy4nO1xuaW1wb3J0IHVzZUNlbGxDbGFzc05hbWUgZnJvbSAnLi4vLi4vaG9va3MvdXNlQ2VsbENsYXNzTmFtZSc7XG5pbXBvcnQgeyBmb3JtYXRWYWx1ZSwgaXNTYW1lWWVhciB9IGZyb20gJy4uLy4uL3V0aWxzL2RhdGVVdGlsJztcbmltcG9ydCBSYW5nZUNvbnRleHQgZnJvbSAnLi4vLi4vUmFuZ2VDb250ZXh0JztcbmltcG9ydCBQYW5lbEJvZHkgZnJvbSAnLi4vUGFuZWxCb2R5JztcbmV4cG9ydCB2YXIgWUVBUl9DT0xfQ09VTlQgPSAzO1xudmFyIFlFQVJfUk9XX0NPVU5UID0gNDtcblxuZnVuY3Rpb24gWWVhckJvZHkocHJvcHMpIHtcbiAgdmFyIHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIHZhbHVlID0gcHJvcHMudmFsdWUsXG4gICAgICB2aWV3RGF0ZSA9IHByb3BzLnZpZXdEYXRlLFxuICAgICAgbG9jYWxlID0gcHJvcHMubG9jYWxlLFxuICAgICAgZ2VuZXJhdGVDb25maWcgPSBwcm9wcy5nZW5lcmF0ZUNvbmZpZztcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFJhbmdlQ29udGV4dCksXG4gICAgICByYW5nZWRWYWx1ZSA9IF9SZWFjdCR1c2VDb250ZXh0LnJhbmdlZFZhbHVlLFxuICAgICAgaG92ZXJSYW5nZWRWYWx1ZSA9IF9SZWFjdCR1c2VDb250ZXh0LmhvdmVyUmFuZ2VkVmFsdWU7XG5cbiAgdmFyIHllYXJQcmVmaXhDbHMgPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWNlbGxcIik7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gWWVhciA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIHllYXJOdW1iZXIgPSBnZW5lcmF0ZUNvbmZpZy5nZXRZZWFyKHZpZXdEYXRlKTtcbiAgdmFyIHN0YXJ0WWVhciA9IE1hdGguZmxvb3IoeWVhck51bWJlciAvIFlFQVJfREVDQURFX0NPVU5UKSAqIFlFQVJfREVDQURFX0NPVU5UO1xuICB2YXIgZW5kWWVhciA9IHN0YXJ0WWVhciArIFlFQVJfREVDQURFX0NPVU5UIC0gMTtcbiAgdmFyIGJhc2VZZWFyID0gZ2VuZXJhdGVDb25maWcuc2V0WWVhcih2aWV3RGF0ZSwgc3RhcnRZZWFyIC0gTWF0aC5jZWlsKChZRUFSX0NPTF9DT1VOVCAqIFlFQVJfUk9XX0NPVU5UIC0gWUVBUl9ERUNBREVfQ09VTlQpIC8gMikpO1xuXG4gIHZhciBpc0luVmlldyA9IGZ1bmN0aW9uIGlzSW5WaWV3KGRhdGUpIHtcbiAgICB2YXIgY3VycmVudFllYXJOdW1iZXIgPSBnZW5lcmF0ZUNvbmZpZy5nZXRZZWFyKGRhdGUpO1xuICAgIHJldHVybiBzdGFydFllYXIgPD0gY3VycmVudFllYXJOdW1iZXIgJiYgY3VycmVudFllYXJOdW1iZXIgPD0gZW5kWWVhcjtcbiAgfTtcblxuICB2YXIgZ2V0Q2VsbENsYXNzTmFtZSA9IHVzZUNlbGxDbGFzc05hbWUoe1xuICAgIGNlbGxQcmVmaXhDbHM6IHllYXJQcmVmaXhDbHMsXG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGdlbmVyYXRlQ29uZmlnOiBnZW5lcmF0ZUNvbmZpZyxcbiAgICByYW5nZWRWYWx1ZTogcmFuZ2VkVmFsdWUsXG4gICAgaG92ZXJSYW5nZWRWYWx1ZTogaG92ZXJSYW5nZWRWYWx1ZSxcbiAgICBpc1NhbWVDZWxsOiBmdW5jdGlvbiBpc1NhbWVDZWxsKGN1cnJlbnQsIHRhcmdldCkge1xuICAgICAgcmV0dXJuIGlzU2FtZVllYXIoZ2VuZXJhdGVDb25maWcsIGN1cnJlbnQsIHRhcmdldCk7XG4gICAgfSxcbiAgICBpc0luVmlldzogaXNJblZpZXcsXG4gICAgb2Zmc2V0Q2VsbDogZnVuY3Rpb24gb2Zmc2V0Q2VsbChkYXRlLCBvZmZzZXQpIHtcbiAgICAgIHJldHVybiBnZW5lcmF0ZUNvbmZpZy5hZGRZZWFyKGRhdGUsIG9mZnNldCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBhbmVsQm9keSwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgcm93TnVtOiBZRUFSX1JPV19DT1VOVCxcbiAgICBjb2xOdW06IFlFQVJfQ09MX0NPVU5ULFxuICAgIGJhc2VEYXRlOiBiYXNlWWVhcixcbiAgICBnZXRDZWxsVGV4dDogZ2VuZXJhdGVDb25maWcuZ2V0WWVhcixcbiAgICBnZXRDZWxsQ2xhc3NOYW1lOiBnZXRDZWxsQ2xhc3NOYW1lLFxuICAgIGdldENlbGxEYXRlOiBnZW5lcmF0ZUNvbmZpZy5hZGRZZWFyLFxuICAgIHRpdGxlQ2VsbDogZnVuY3Rpb24gdGl0bGVDZWxsKGRhdGUpIHtcbiAgICAgIHJldHVybiBmb3JtYXRWYWx1ZShkYXRlLCB7XG4gICAgICAgIGxvY2FsZTogbG9jYWxlLFxuICAgICAgICBmb3JtYXQ6ICdZWVlZJyxcbiAgICAgICAgZ2VuZXJhdGVDb25maWc6IGdlbmVyYXRlQ29uZmlnXG4gICAgICB9KTtcbiAgICB9XG4gIH0pKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgWWVhckJvZHk7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgSGVhZGVyIGZyb20gJy4uL0hlYWRlcic7XG5pbXBvcnQgeyBZRUFSX0RFQ0FERV9DT1VOVCB9IGZyb20gJy4nO1xuaW1wb3J0IFBhbmVsQ29udGV4dCBmcm9tICcuLi8uLi9QYW5lbENvbnRleHQnO1xuXG5mdW5jdGlvbiBZZWFySGVhZGVyKHByb3BzKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBnZW5lcmF0ZUNvbmZpZyA9IHByb3BzLmdlbmVyYXRlQ29uZmlnLFxuICAgICAgdmlld0RhdGUgPSBwcm9wcy52aWV3RGF0ZSxcbiAgICAgIG9uUHJldkRlY2FkZSA9IHByb3BzLm9uUHJldkRlY2FkZSxcbiAgICAgIG9uTmV4dERlY2FkZSA9IHByb3BzLm9uTmV4dERlY2FkZSxcbiAgICAgIG9uRGVjYWRlQ2xpY2sgPSBwcm9wcy5vbkRlY2FkZUNsaWNrO1xuXG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUGFuZWxDb250ZXh0KSxcbiAgICAgIGhpZGVIZWFkZXIgPSBfUmVhY3QkdXNlQ29udGV4dC5oaWRlSGVhZGVyO1xuXG4gIGlmIChoaWRlSGVhZGVyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgaGVhZGVyUHJlZml4Q2xzID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1oZWFkZXJcIik7XG4gIHZhciB5ZWFyTnVtYmVyID0gZ2VuZXJhdGVDb25maWcuZ2V0WWVhcih2aWV3RGF0ZSk7XG4gIHZhciBzdGFydFllYXIgPSBNYXRoLmZsb29yKHllYXJOdW1iZXIgLyBZRUFSX0RFQ0FERV9DT1VOVCkgKiBZRUFSX0RFQ0FERV9DT1VOVDtcbiAgdmFyIGVuZFllYXIgPSBzdGFydFllYXIgKyBZRUFSX0RFQ0FERV9DT1VOVCAtIDE7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChIZWFkZXIsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHByZWZpeENsczogaGVhZGVyUHJlZml4Q2xzLFxuICAgIG9uU3VwZXJQcmV2OiBvblByZXZEZWNhZGUsXG4gICAgb25TdXBlck5leHQ6IG9uTmV4dERlY2FkZVxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgb25DbGljazogb25EZWNhZGVDbGljayxcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItZGVjYWRlLWJ0blwiKVxuICB9LCBzdGFydFllYXIsIFwiLVwiLCBlbmRZZWFyKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFllYXJIZWFkZXI7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgWWVhckhlYWRlciBmcm9tICcuL1llYXJIZWFkZXInO1xuaW1wb3J0IFllYXJCb2R5LCB7IFlFQVJfQ09MX0NPVU5UIH0gZnJvbSAnLi9ZZWFyQm9keSc7XG5pbXBvcnQgeyBjcmVhdGVLZXlEb3duSGFuZGxlciB9IGZyb20gJy4uLy4uL3V0aWxzL3VpVXRpbCc7XG5leHBvcnQgdmFyIFlFQVJfREVDQURFX0NPVU5UID0gMTA7XG5cbmZ1bmN0aW9uIFllYXJQYW5lbChwcm9wcykge1xuICB2YXIgcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzLFxuICAgICAgb3BlcmF0aW9uUmVmID0gcHJvcHMub3BlcmF0aW9uUmVmLFxuICAgICAgb25WaWV3RGF0ZUNoYW5nZSA9IHByb3BzLm9uVmlld0RhdGVDaGFuZ2UsXG4gICAgICBnZW5lcmF0ZUNvbmZpZyA9IHByb3BzLmdlbmVyYXRlQ29uZmlnLFxuICAgICAgdmFsdWUgPSBwcm9wcy52YWx1ZSxcbiAgICAgIHZpZXdEYXRlID0gcHJvcHMudmlld0RhdGUsXG4gICAgICBzb3VyY2VNb2RlID0gcHJvcHMuc291cmNlTW9kZSxcbiAgICAgIF9vblNlbGVjdCA9IHByb3BzLm9uU2VsZWN0LFxuICAgICAgb25QYW5lbENoYW5nZSA9IHByb3BzLm9uUGFuZWxDaGFuZ2U7XG4gIHZhciBwYW5lbFByZWZpeENscyA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCIteWVhci1wYW5lbFwiKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT0gS2V5Ym9hcmQgPT09PT09PT09PT09PT09PT09PT09PT1cblxuICBvcGVyYXRpb25SZWYuY3VycmVudCA9IHtcbiAgICBvbktleURvd246IGZ1bmN0aW9uIG9uS2V5RG93bihldmVudCkge1xuICAgICAgcmV0dXJuIGNyZWF0ZUtleURvd25IYW5kbGVyKGV2ZW50LCB7XG4gICAgICAgIG9uTGVmdFJpZ2h0OiBmdW5jdGlvbiBvbkxlZnRSaWdodChkaWZmKSB7XG4gICAgICAgICAgX29uU2VsZWN0KGdlbmVyYXRlQ29uZmlnLmFkZFllYXIodmFsdWUgfHwgdmlld0RhdGUsIGRpZmYpLCAna2V5Jyk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ3RybExlZnRSaWdodDogZnVuY3Rpb24gb25DdHJsTGVmdFJpZ2h0KGRpZmYpIHtcbiAgICAgICAgICBfb25TZWxlY3QoZ2VuZXJhdGVDb25maWcuYWRkWWVhcih2YWx1ZSB8fCB2aWV3RGF0ZSwgZGlmZiAqIFlFQVJfREVDQURFX0NPVU5UKSwgJ2tleScpO1xuICAgICAgICB9LFxuICAgICAgICBvblVwRG93bjogZnVuY3Rpb24gb25VcERvd24oZGlmZikge1xuICAgICAgICAgIF9vblNlbGVjdChnZW5lcmF0ZUNvbmZpZy5hZGRZZWFyKHZhbHVlIHx8IHZpZXdEYXRlLCBkaWZmICogWUVBUl9DT0xfQ09VTlQpLCAna2V5Jyk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoKSB7XG4gICAgICAgICAgb25QYW5lbENoYW5nZShzb3VyY2VNb2RlID09PSAnZGF0ZScgPyAnZGF0ZScgOiAnbW9udGgnLCB2YWx1ZSB8fCB2aWV3RGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTsgLy8gPT09PT09PT09PT09PT09PT09PT0gVmlldyBPcGVyYXRpb24gPT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgb25EZWNhZGVDaGFuZ2UgPSBmdW5jdGlvbiBvbkRlY2FkZUNoYW5nZShkaWZmKSB7XG4gICAgdmFyIG5ld0RhdGUgPSBnZW5lcmF0ZUNvbmZpZy5hZGRZZWFyKHZpZXdEYXRlLCBkaWZmICogMTApO1xuICAgIG9uVmlld0RhdGVDaGFuZ2UobmV3RGF0ZSk7XG4gICAgb25QYW5lbENoYW5nZShudWxsLCBuZXdEYXRlKTtcbiAgfTtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogcGFuZWxQcmVmaXhDbHNcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoWWVhckhlYWRlciwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgb25QcmV2RGVjYWRlOiBmdW5jdGlvbiBvblByZXZEZWNhZGUoKSB7XG4gICAgICBvbkRlY2FkZUNoYW5nZSgtMSk7XG4gICAgfSxcbiAgICBvbk5leHREZWNhZGU6IGZ1bmN0aW9uIG9uTmV4dERlY2FkZSgpIHtcbiAgICAgIG9uRGVjYWRlQ2hhbmdlKDEpO1xuICAgIH0sXG4gICAgb25EZWNhZGVDbGljazogZnVuY3Rpb24gb25EZWNhZGVDbGljaygpIHtcbiAgICAgIG9uUGFuZWxDaGFuZ2UoJ2RlY2FkZScsIHZpZXdEYXRlKTtcbiAgICB9XG4gIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoWWVhckJvZHksIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgIG9uU2VsZWN0OiBmdW5jdGlvbiBvblNlbGVjdChkYXRlKSB7XG4gICAgICBvblBhbmVsQ2hhbmdlKHNvdXJjZU1vZGUgPT09ICdkYXRlJyA/ICdkYXRlJyA6ICdtb250aCcsIGRhdGUpO1xuXG4gICAgICBfb25TZWxlY3QoZGF0ZSwgJ21vdXNlJyk7XG4gICAgfVxuICB9KSkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBZZWFyUGFuZWw7IiwiaW1wb3J0IHsgREVDQURFX1VOSVRfRElGRiB9IGZyb20gJy4uL3BhbmVscy9EZWNhZGVQYW5lbC9pbmRleCc7XG5leHBvcnQgdmFyIFdFRUtfREFZX0NPVU5UID0gNztcbmV4cG9ydCBmdW5jdGlvbiBpc051bGxFcXVhbCh2YWx1ZTEsIHZhbHVlMikge1xuICBpZiAoIXZhbHVlMSAmJiAhdmFsdWUyKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAoIXZhbHVlMSB8fCAhdmFsdWUyKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1NhbWVEZWNhZGUoZ2VuZXJhdGVDb25maWcsIGRlY2FkZTEsIGRlY2FkZTIpIHtcbiAgdmFyIGVxdWFsID0gaXNOdWxsRXF1YWwoZGVjYWRlMSwgZGVjYWRlMik7XG5cbiAgaWYgKHR5cGVvZiBlcXVhbCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIGVxdWFsO1xuICB9XG5cbiAgdmFyIG51bTEgPSBNYXRoLmZsb29yKGdlbmVyYXRlQ29uZmlnLmdldFllYXIoZGVjYWRlMSkgLyAxMCk7XG4gIHZhciBudW0yID0gTWF0aC5mbG9vcihnZW5lcmF0ZUNvbmZpZy5nZXRZZWFyKGRlY2FkZTIpIC8gMTApO1xuICByZXR1cm4gbnVtMSA9PT0gbnVtMjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1NhbWVZZWFyKGdlbmVyYXRlQ29uZmlnLCB5ZWFyMSwgeWVhcjIpIHtcbiAgdmFyIGVxdWFsID0gaXNOdWxsRXF1YWwoeWVhcjEsIHllYXIyKTtcblxuICBpZiAodHlwZW9mIGVxdWFsID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gZXF1YWw7XG4gIH1cblxuICByZXR1cm4gZ2VuZXJhdGVDb25maWcuZ2V0WWVhcih5ZWFyMSkgPT09IGdlbmVyYXRlQ29uZmlnLmdldFllYXIoeWVhcjIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFF1YXJ0ZXIoZ2VuZXJhdGVDb25maWcsIGRhdGUpIHtcbiAgdmFyIHF1b3RhID0gTWF0aC5mbG9vcihnZW5lcmF0ZUNvbmZpZy5nZXRNb250aChkYXRlKSAvIDMpO1xuICByZXR1cm4gcXVvdGEgKyAxO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU2FtZVF1YXJ0ZXIoZ2VuZXJhdGVDb25maWcsIHF1YXJ0ZXIxLCBxdWFydGVyMikge1xuICB2YXIgZXF1YWwgPSBpc051bGxFcXVhbChxdWFydGVyMSwgcXVhcnRlcjIpO1xuXG4gIGlmICh0eXBlb2YgZXF1YWwgPT09ICdib29sZWFuJykge1xuICAgIHJldHVybiBlcXVhbDtcbiAgfVxuXG4gIHJldHVybiBpc1NhbWVZZWFyKGdlbmVyYXRlQ29uZmlnLCBxdWFydGVyMSwgcXVhcnRlcjIpICYmIGdldFF1YXJ0ZXIoZ2VuZXJhdGVDb25maWcsIHF1YXJ0ZXIxKSA9PT0gZ2V0UXVhcnRlcihnZW5lcmF0ZUNvbmZpZywgcXVhcnRlcjIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU2FtZU1vbnRoKGdlbmVyYXRlQ29uZmlnLCBtb250aDEsIG1vbnRoMikge1xuICB2YXIgZXF1YWwgPSBpc051bGxFcXVhbChtb250aDEsIG1vbnRoMik7XG5cbiAgaWYgKHR5cGVvZiBlcXVhbCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIGVxdWFsO1xuICB9XG5cbiAgcmV0dXJuIGlzU2FtZVllYXIoZ2VuZXJhdGVDb25maWcsIG1vbnRoMSwgbW9udGgyKSAmJiBnZW5lcmF0ZUNvbmZpZy5nZXRNb250aChtb250aDEpID09PSBnZW5lcmF0ZUNvbmZpZy5nZXRNb250aChtb250aDIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU2FtZURhdGUoZ2VuZXJhdGVDb25maWcsIGRhdGUxLCBkYXRlMikge1xuICB2YXIgZXF1YWwgPSBpc051bGxFcXVhbChkYXRlMSwgZGF0ZTIpO1xuXG4gIGlmICh0eXBlb2YgZXF1YWwgPT09ICdib29sZWFuJykge1xuICAgIHJldHVybiBlcXVhbDtcbiAgfVxuXG4gIHJldHVybiBnZW5lcmF0ZUNvbmZpZy5nZXRZZWFyKGRhdGUxKSA9PT0gZ2VuZXJhdGVDb25maWcuZ2V0WWVhcihkYXRlMikgJiYgZ2VuZXJhdGVDb25maWcuZ2V0TW9udGgoZGF0ZTEpID09PSBnZW5lcmF0ZUNvbmZpZy5nZXRNb250aChkYXRlMikgJiYgZ2VuZXJhdGVDb25maWcuZ2V0RGF0ZShkYXRlMSkgPT09IGdlbmVyYXRlQ29uZmlnLmdldERhdGUoZGF0ZTIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU2FtZVRpbWUoZ2VuZXJhdGVDb25maWcsIHRpbWUxLCB0aW1lMikge1xuICB2YXIgZXF1YWwgPSBpc051bGxFcXVhbCh0aW1lMSwgdGltZTIpO1xuXG4gIGlmICh0eXBlb2YgZXF1YWwgPT09ICdib29sZWFuJykge1xuICAgIHJldHVybiBlcXVhbDtcbiAgfVxuXG4gIHJldHVybiBnZW5lcmF0ZUNvbmZpZy5nZXRIb3VyKHRpbWUxKSA9PT0gZ2VuZXJhdGVDb25maWcuZ2V0SG91cih0aW1lMikgJiYgZ2VuZXJhdGVDb25maWcuZ2V0TWludXRlKHRpbWUxKSA9PT0gZ2VuZXJhdGVDb25maWcuZ2V0TWludXRlKHRpbWUyKSAmJiBnZW5lcmF0ZUNvbmZpZy5nZXRTZWNvbmQodGltZTEpID09PSBnZW5lcmF0ZUNvbmZpZy5nZXRTZWNvbmQodGltZTIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU2FtZVdlZWsoZ2VuZXJhdGVDb25maWcsIGxvY2FsZSwgZGF0ZTEsIGRhdGUyKSB7XG4gIHZhciBlcXVhbCA9IGlzTnVsbEVxdWFsKGRhdGUxLCBkYXRlMik7XG5cbiAgaWYgKHR5cGVvZiBlcXVhbCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIGVxdWFsO1xuICB9XG5cbiAgcmV0dXJuIGdlbmVyYXRlQ29uZmlnLmxvY2FsZS5nZXRXZWVrKGxvY2FsZSwgZGF0ZTEpID09PSBnZW5lcmF0ZUNvbmZpZy5sb2NhbGUuZ2V0V2Vlayhsb2NhbGUsIGRhdGUyKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsKGdlbmVyYXRlQ29uZmlnLCB2YWx1ZTEsIHZhbHVlMikge1xuICByZXR1cm4gaXNTYW1lRGF0ZShnZW5lcmF0ZUNvbmZpZywgdmFsdWUxLCB2YWx1ZTIpICYmIGlzU2FtZVRpbWUoZ2VuZXJhdGVDb25maWcsIHZhbHVlMSwgdmFsdWUyKTtcbn1cbi8qKiBCZXR3ZWVuIGluIGRhdGUgYnV0IG5vdCBlcXVhbCBvZiBkYXRlICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0luUmFuZ2UoZ2VuZXJhdGVDb25maWcsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgY3VycmVudCkge1xuICBpZiAoIXN0YXJ0RGF0ZSB8fCAhZW5kRGF0ZSB8fCAhY3VycmVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiAhaXNTYW1lRGF0ZShnZW5lcmF0ZUNvbmZpZywgc3RhcnREYXRlLCBjdXJyZW50KSAmJiAhaXNTYW1lRGF0ZShnZW5lcmF0ZUNvbmZpZywgZW5kRGF0ZSwgY3VycmVudCkgJiYgZ2VuZXJhdGVDb25maWcuaXNBZnRlcihjdXJyZW50LCBzdGFydERhdGUpICYmIGdlbmVyYXRlQ29uZmlnLmlzQWZ0ZXIoZW5kRGF0ZSwgY3VycmVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0V2Vla1N0YXJ0RGF0ZShsb2NhbGUsIGdlbmVyYXRlQ29uZmlnLCB2YWx1ZSkge1xuICB2YXIgd2Vla0ZpcnN0RGF5ID0gZ2VuZXJhdGVDb25maWcubG9jYWxlLmdldFdlZWtGaXJzdERheShsb2NhbGUpO1xuICB2YXIgbW9udGhTdGFydERhdGUgPSBnZW5lcmF0ZUNvbmZpZy5zZXREYXRlKHZhbHVlLCAxKTtcbiAgdmFyIHN0YXJ0RGF0ZVdlZWtEYXkgPSBnZW5lcmF0ZUNvbmZpZy5nZXRXZWVrRGF5KG1vbnRoU3RhcnREYXRlKTtcbiAgdmFyIGFsaWduU3RhcnREYXRlID0gZ2VuZXJhdGVDb25maWcuYWRkRGF0ZShtb250aFN0YXJ0RGF0ZSwgd2Vla0ZpcnN0RGF5IC0gc3RhcnREYXRlV2Vla0RheSk7XG5cbiAgaWYgKGdlbmVyYXRlQ29uZmlnLmdldE1vbnRoKGFsaWduU3RhcnREYXRlKSA9PT0gZ2VuZXJhdGVDb25maWcuZ2V0TW9udGgodmFsdWUpICYmIGdlbmVyYXRlQ29uZmlnLmdldERhdGUoYWxpZ25TdGFydERhdGUpID4gMSkge1xuICAgIGFsaWduU3RhcnREYXRlID0gZ2VuZXJhdGVDb25maWcuYWRkRGF0ZShhbGlnblN0YXJ0RGF0ZSwgLTcpO1xuICB9XG5cbiAgcmV0dXJuIGFsaWduU3RhcnREYXRlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldENsb3NpbmdWaWV3RGF0ZSh2aWV3RGF0ZSwgcGlja2VyLCBnZW5lcmF0ZUNvbmZpZykge1xuICB2YXIgb2Zmc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAxO1xuXG4gIHN3aXRjaCAocGlja2VyKSB7XG4gICAgY2FzZSAneWVhcic6XG4gICAgICByZXR1cm4gZ2VuZXJhdGVDb25maWcuYWRkWWVhcih2aWV3RGF0ZSwgb2Zmc2V0ICogMTApO1xuXG4gICAgY2FzZSAncXVhcnRlcic6XG4gICAgY2FzZSAnbW9udGgnOlxuICAgICAgcmV0dXJuIGdlbmVyYXRlQ29uZmlnLmFkZFllYXIodmlld0RhdGUsIG9mZnNldCk7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGdlbmVyYXRlQ29uZmlnLmFkZE1vbnRoKHZpZXdEYXRlLCBvZmZzZXQpO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsdWUsIF9yZWYpIHtcbiAgdmFyIGdlbmVyYXRlQ29uZmlnID0gX3JlZi5nZW5lcmF0ZUNvbmZpZyxcbiAgICAgIGxvY2FsZSA9IF9yZWYubG9jYWxlLFxuICAgICAgZm9ybWF0ID0gX3JlZi5mb3JtYXQ7XG4gIHJldHVybiB0eXBlb2YgZm9ybWF0ID09PSAnZnVuY3Rpb24nID8gZm9ybWF0KHZhbHVlKSA6IGdlbmVyYXRlQ29uZmlnLmxvY2FsZS5mb3JtYXQobG9jYWxlLmxvY2FsZSwgdmFsdWUsIGZvcm1hdCk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VWYWx1ZSh2YWx1ZSwgX3JlZjIpIHtcbiAgdmFyIGdlbmVyYXRlQ29uZmlnID0gX3JlZjIuZ2VuZXJhdGVDb25maWcsXG4gICAgICBsb2NhbGUgPSBfcmVmMi5sb2NhbGUsXG4gICAgICBmb3JtYXRMaXN0ID0gX3JlZjIuZm9ybWF0TGlzdDtcblxuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiBmb3JtYXRMaXN0WzBdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gZ2VuZXJhdGVDb25maWcubG9jYWxlLnBhcnNlKGxvY2FsZS5sb2NhbGUsIHZhbHVlLCBmb3JtYXRMaXN0KTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDZWxsRGF0ZURpc2FibGVkKF9yZWYzKSB7XG4gIHZhciBjZWxsRGF0ZSA9IF9yZWYzLmNlbGxEYXRlLFxuICAgICAgbW9kZSA9IF9yZWYzLm1vZGUsXG4gICAgICBkaXNhYmxlZERhdGUgPSBfcmVmMy5kaXNhYmxlZERhdGUsXG4gICAgICBnZW5lcmF0ZUNvbmZpZyA9IF9yZWYzLmdlbmVyYXRlQ29uZmlnO1xuICBpZiAoIWRpc2FibGVkRGF0ZSkgcmV0dXJuIGZhbHNlOyAvLyBXaGV0aGVyIGNlbGxEYXRlIGlzIGRpc2FibGVkIGluIHJhbmdlXG5cbiAgdmFyIGdldERpc2FibGVkRnJvbVJhbmdlID0gZnVuY3Rpb24gZ2V0RGlzYWJsZWRGcm9tUmFuZ2UoY3VycmVudE1vZGUsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgY3VycmVudCA9IHN0YXJ0O1xuXG4gICAgd2hpbGUgKGN1cnJlbnQgPD0gZW5kKSB7XG4gICAgICB2YXIgZGF0ZSA9IHZvaWQgMDtcblxuICAgICAgc3dpdGNoIChjdXJyZW50TW9kZSkge1xuICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkYXRlID0gZ2VuZXJhdGVDb25maWcuc2V0RGF0ZShjZWxsRGF0ZSwgY3VycmVudCk7XG5cbiAgICAgICAgICAgIGlmICghZGlzYWJsZWREYXRlKGRhdGUpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkYXRlID0gZ2VuZXJhdGVDb25maWcuc2V0TW9udGgoY2VsbERhdGUsIGN1cnJlbnQpO1xuXG4gICAgICAgICAgICBpZiAoIWdldENlbGxEYXRlRGlzYWJsZWQoe1xuICAgICAgICAgICAgICBjZWxsRGF0ZTogZGF0ZSxcbiAgICAgICAgICAgICAgbW9kZTogJ21vbnRoJyxcbiAgICAgICAgICAgICAgZ2VuZXJhdGVDb25maWc6IGdlbmVyYXRlQ29uZmlnLFxuICAgICAgICAgICAgICBkaXNhYmxlZERhdGU6IGRpc2FibGVkRGF0ZVxuICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAneWVhcic6XG4gICAgICAgICAge1xuICAgICAgICAgICAgZGF0ZSA9IGdlbmVyYXRlQ29uZmlnLnNldFllYXIoY2VsbERhdGUsIGN1cnJlbnQpO1xuXG4gICAgICAgICAgICBpZiAoIWdldENlbGxEYXRlRGlzYWJsZWQoe1xuICAgICAgICAgICAgICBjZWxsRGF0ZTogZGF0ZSxcbiAgICAgICAgICAgICAgbW9kZTogJ3llYXInLFxuICAgICAgICAgICAgICBnZW5lcmF0ZUNvbmZpZzogZ2VuZXJhdGVDb25maWcsXG4gICAgICAgICAgICAgIGRpc2FibGVkRGF0ZTogZGlzYWJsZWREYXRlXG4gICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY3VycmVudCArPSAxO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIHN3aXRjaCAobW9kZSkge1xuICAgIGNhc2UgJ2RhdGUnOlxuICAgIGNhc2UgJ3dlZWsnOlxuICAgICAge1xuICAgICAgICByZXR1cm4gZGlzYWJsZWREYXRlKGNlbGxEYXRlKTtcbiAgICAgIH1cblxuICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgIHtcbiAgICAgICAgdmFyIHN0YXJ0RGF0ZSA9IDE7XG4gICAgICAgIHZhciBlbmREYXRlID0gZ2VuZXJhdGVDb25maWcuZ2V0RGF0ZShnZW5lcmF0ZUNvbmZpZy5nZXRFbmREYXRlKGNlbGxEYXRlKSk7XG4gICAgICAgIHJldHVybiBnZXREaXNhYmxlZEZyb21SYW5nZSgnZGF0ZScsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG4gICAgICB9XG5cbiAgICBjYXNlICdxdWFydGVyJzpcbiAgICAgIHtcbiAgICAgICAgdmFyIHN0YXJ0TW9udGggPSBNYXRoLmZsb29yKGdlbmVyYXRlQ29uZmlnLmdldE1vbnRoKGNlbGxEYXRlKSAvIDMpICogMztcbiAgICAgICAgdmFyIGVuZE1vbnRoID0gc3RhcnRNb250aCArIDI7XG4gICAgICAgIHJldHVybiBnZXREaXNhYmxlZEZyb21SYW5nZSgnbW9udGgnLCBzdGFydE1vbnRoLCBlbmRNb250aCk7XG4gICAgICB9XG5cbiAgICBjYXNlICd5ZWFyJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2FibGVkRnJvbVJhbmdlKCdtb250aCcsIDAsIDExKTtcbiAgICAgIH1cblxuICAgIGNhc2UgJ2RlY2FkZSc6XG4gICAgICB7XG4gICAgICAgIHZhciB5ZWFyID0gZ2VuZXJhdGVDb25maWcuZ2V0WWVhcihjZWxsRGF0ZSk7XG4gICAgICAgIHZhciBzdGFydFllYXIgPSBNYXRoLmZsb29yKHllYXIgLyBERUNBREVfVU5JVF9ESUZGKSAqIERFQ0FERV9VTklUX0RJRkY7XG4gICAgICAgIHZhciBlbmRZZWFyID0gc3RhcnRZZWFyICsgREVDQURFX1VOSVRfRElGRiAtIDE7XG4gICAgICAgIHJldHVybiBnZXREaXNhYmxlZEZyb21SYW5nZSgneWVhcicsIHN0YXJ0WWVhciwgZW5kWWVhcik7XG4gICAgICB9XG4gIH1cbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRFeHRyYUZvb3RlcihwcmVmaXhDbHMsIG1vZGUsIHJlbmRlckV4dHJhRm9vdGVyKSB7XG4gIGlmICghcmVuZGVyRXh0cmFGb290ZXIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWZvb3Rlci1leHRyYVwiKVxuICB9LCByZW5kZXJFeHRyYUZvb3Rlcihtb2RlKSk7XG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0UmFuZ2VzKF9yZWYpIHtcbiAgdmFyIHByZWZpeENscyA9IF9yZWYucHJlZml4Q2xzLFxuICAgICAgX3JlZiRyYW5nZUxpc3QgPSBfcmVmLnJhbmdlTGlzdCxcbiAgICAgIHJhbmdlTGlzdCA9IF9yZWYkcmFuZ2VMaXN0ID09PSB2b2lkIDAgPyBbXSA6IF9yZWYkcmFuZ2VMaXN0LFxuICAgICAgX3JlZiRjb21wb25lbnRzID0gX3JlZi5jb21wb25lbnRzLFxuICAgICAgY29tcG9uZW50cyA9IF9yZWYkY29tcG9uZW50cyA9PT0gdm9pZCAwID8ge30gOiBfcmVmJGNvbXBvbmVudHMsXG4gICAgICBuZWVkQ29uZmlybUJ1dHRvbiA9IF9yZWYubmVlZENvbmZpcm1CdXR0b24sXG4gICAgICBvbk5vdyA9IF9yZWYub25Ob3csXG4gICAgICBvbk9rID0gX3JlZi5vbk9rLFxuICAgICAgb2tEaXNhYmxlZCA9IF9yZWYub2tEaXNhYmxlZCxcbiAgICAgIHNob3dOb3cgPSBfcmVmLnNob3dOb3csXG4gICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZTtcbiAgdmFyIHByZXNldE5vZGU7XG4gIHZhciBva05vZGU7XG5cbiAgaWYgKHJhbmdlTGlzdC5sZW5ndGgpIHtcbiAgICB2YXIgSXRlbSA9IGNvbXBvbmVudHMucmFuZ2VJdGVtIHx8ICdzcGFuJztcbiAgICBwcmVzZXROb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIHJhbmdlTGlzdC5tYXAoZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgICB2YXIgbGFiZWwgPSBfcmVmMi5sYWJlbCxcbiAgICAgICAgICBvbkNsaWNrID0gX3JlZjIub25DbGljayxcbiAgICAgICAgICBvbk1vdXNlRW50ZXIgPSBfcmVmMi5vbk1vdXNlRW50ZXIsXG4gICAgICAgICAgb25Nb3VzZUxlYXZlID0gX3JlZjIub25Nb3VzZUxlYXZlO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwibGlcIiwge1xuICAgICAgICBrZXk6IGxhYmVsLFxuICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItcHJlc2V0XCIpXG4gICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJdGVtLCB7XG4gICAgICAgIG9uQ2xpY2s6IG9uQ2xpY2ssXG4gICAgICAgIG9uTW91c2VFbnRlcjogb25Nb3VzZUVudGVyLFxuICAgICAgICBvbk1vdXNlTGVhdmU6IG9uTW91c2VMZWF2ZVxuICAgICAgfSwgbGFiZWwpKTtcbiAgICB9KSk7XG4gIH1cblxuICBpZiAobmVlZENvbmZpcm1CdXR0b24pIHtcbiAgICB2YXIgQnV0dG9uID0gY29tcG9uZW50cy5idXR0b24gfHwgJ2J1dHRvbic7XG5cbiAgICBpZiAob25Ob3cgJiYgIXByZXNldE5vZGUgJiYgc2hvd05vdyAhPT0gZmFsc2UpIHtcbiAgICAgIHByZXNldE5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxpXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW5vd1wiKVxuICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJhXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW5vdy1idG5cIiksXG4gICAgICAgIG9uQ2xpY2s6IG9uTm93XG4gICAgICB9LCBsb2NhbGUubm93KSk7XG4gICAgfVxuXG4gICAgb2tOb2RlID0gbmVlZENvbmZpcm1CdXR0b24gJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItb2tcIilcbiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHtcbiAgICAgIGRpc2FibGVkOiBva0Rpc2FibGVkLFxuICAgICAgb25DbGljazogb25Pa1xuICAgIH0sIGxvY2FsZS5vaykpO1xuICB9XG5cbiAgaWYgKCFwcmVzZXROb2RlICYmICFva05vZGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInVsXCIsIHtcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItcmFuZ2VzXCIpXG4gIH0sIHByZXNldE5vZGUsIG9rTm9kZSk7XG59IiwiZXhwb3J0IGZ1bmN0aW9uIGxlZnRQYWQoc3RyLCBsZW5ndGgpIHtcbiAgdmFyIGZpbGwgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICcwJztcbiAgdmFyIGN1cnJlbnQgPSBTdHJpbmcoc3RyKTtcblxuICB3aGlsZSAoY3VycmVudC5sZW5ndGggPCBsZW5ndGgpIHtcbiAgICBjdXJyZW50ID0gXCJcIi5jb25jYXQoZmlsbCkuY29uY2F0KHN0cik7XG4gIH1cblxuICByZXR1cm4gY3VycmVudDtcbn1cbmV4cG9ydCB2YXIgdHVwbGUgPSBmdW5jdGlvbiB0dXBsZSgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBhcmdzO1xufTtcbmV4cG9ydCBmdW5jdGlvbiB0b0FycmF5KHZhbCkge1xuICBpZiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbCA6IFt2YWxdO1xufVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RGF0YU9yQXJpYVByb3BzKHByb3BzKSB7XG4gIHZhciByZXRQcm9wcyA9IHt9O1xuICBPYmplY3Qua2V5cyhwcm9wcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKChrZXkuc3Vic3RyKDAsIDUpID09PSAnZGF0YS0nIHx8IGtleS5zdWJzdHIoMCwgNSkgPT09ICdhcmlhLScgfHwga2V5ID09PSAncm9sZScgfHwga2V5ID09PSAnbmFtZScpICYmIGtleS5zdWJzdHIoMCwgNykgIT09ICdkYXRhLV9fJykge1xuICAgICAgcmV0UHJvcHNba2V5XSA9IHByb3BzW2tleV07XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJldFByb3BzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlKHZhbHVlcywgaW5kZXgpIHtcbiAgcmV0dXJuIHZhbHVlcyA/IHZhbHVlc1tpbmRleF0gOiBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVZhbHVlcyh2YWx1ZXMsIHZhbHVlLCBpbmRleCkge1xuICB2YXIgbmV3VmFsdWVzID0gW2dldFZhbHVlKHZhbHVlcywgMCksIGdldFZhbHVlKHZhbHVlcywgMSldO1xuICBuZXdWYWx1ZXNbaW5kZXhdID0gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nID8gdmFsdWUobmV3VmFsdWVzW2luZGV4XSkgOiB2YWx1ZTtcblxuICBpZiAoIW5ld1ZhbHVlc1swXSAmJiAhbmV3VmFsdWVzWzFdKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gbmV3VmFsdWVzO1xufSIsImV4cG9ydCBmdW5jdGlvbiBzZXRUaW1lKGdlbmVyYXRlQ29uZmlnLCBkYXRlLCBob3VyLCBtaW51dGUsIHNlY29uZCkge1xuICB2YXIgbmV4dFRpbWUgPSBnZW5lcmF0ZUNvbmZpZy5zZXRIb3VyKGRhdGUsIGhvdXIpO1xuICBuZXh0VGltZSA9IGdlbmVyYXRlQ29uZmlnLnNldE1pbnV0ZShuZXh0VGltZSwgbWludXRlKTtcbiAgbmV4dFRpbWUgPSBnZW5lcmF0ZUNvbmZpZy5zZXRTZWNvbmQobmV4dFRpbWUsIHNlY29uZCk7XG4gIHJldHVybiBuZXh0VGltZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXREYXRlVGltZShnZW5lcmF0ZUNvbmZpZywgZGF0ZSwgZGVmYXVsdERhdGUpIHtcbiAgaWYgKCFkZWZhdWx0RGF0ZSkge1xuICAgIHJldHVybiBkYXRlO1xuICB9XG5cbiAgdmFyIG5ld0RhdGUgPSBkYXRlO1xuICBuZXdEYXRlID0gZ2VuZXJhdGVDb25maWcuc2V0SG91cihuZXdEYXRlLCBnZW5lcmF0ZUNvbmZpZy5nZXRIb3VyKGRlZmF1bHREYXRlKSk7XG4gIG5ld0RhdGUgPSBnZW5lcmF0ZUNvbmZpZy5zZXRNaW51dGUobmV3RGF0ZSwgZ2VuZXJhdGVDb25maWcuZ2V0TWludXRlKGRlZmF1bHREYXRlKSk7XG4gIG5ld0RhdGUgPSBnZW5lcmF0ZUNvbmZpZy5zZXRTZWNvbmQobmV3RGF0ZSwgZ2VuZXJhdGVDb25maWcuZ2V0U2Vjb25kKGRlZmF1bHREYXRlKSk7XG4gIHJldHVybiBuZXdEYXRlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldExvd2VyQm91bmRUaW1lKGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBob3VyU3RlcCwgbWludXRlU3RlcCwgc2Vjb25kU3RlcCkge1xuICB2YXIgbG93ZXJCb3VuZEhvdXIgPSBNYXRoLmZsb29yKGhvdXIgLyBob3VyU3RlcCkgKiBob3VyU3RlcDtcblxuICBpZiAobG93ZXJCb3VuZEhvdXIgPCBob3VyKSB7XG4gICAgcmV0dXJuIFtsb3dlckJvdW5kSG91ciwgNjAgLSBtaW51dGVTdGVwLCA2MCAtIHNlY29uZFN0ZXBdO1xuICB9XG5cbiAgdmFyIGxvd2VyQm91bmRNaW51dGUgPSBNYXRoLmZsb29yKG1pbnV0ZSAvIG1pbnV0ZVN0ZXApICogbWludXRlU3RlcDtcblxuICBpZiAobG93ZXJCb3VuZE1pbnV0ZSA8IG1pbnV0ZSkge1xuICAgIHJldHVybiBbbG93ZXJCb3VuZEhvdXIsIGxvd2VyQm91bmRNaW51dGUsIDYwIC0gc2Vjb25kU3RlcF07XG4gIH1cblxuICB2YXIgbG93ZXJCb3VuZFNlY29uZCA9IE1hdGguZmxvb3Ioc2Vjb25kIC8gc2Vjb25kU3RlcCkgKiBzZWNvbmRTdGVwO1xuICByZXR1cm4gW2xvd2VyQm91bmRIb3VyLCBsb3dlckJvdW5kTWludXRlLCBsb3dlckJvdW5kU2Vjb25kXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXN0RGF5KGdlbmVyYXRlQ29uZmlnLCBkYXRlKSB7XG4gIHZhciB5ZWFyID0gZ2VuZXJhdGVDb25maWcuZ2V0WWVhcihkYXRlKTtcbiAgdmFyIG1vbnRoID0gZ2VuZXJhdGVDb25maWcuZ2V0TW9udGgoZGF0ZSkgKyAxO1xuICB2YXIgZW5kRGF0ZSA9IGdlbmVyYXRlQ29uZmlnLmdldEVuZERhdGUoZ2VuZXJhdGVDb25maWcuZ2V0Rml4ZWREYXRlKFwiXCIuY29uY2F0KHllYXIsIFwiLVwiKS5jb25jYXQobW9udGgsIFwiLTAxXCIpKSk7XG4gIHZhciBsYXN0RGF5ID0gZ2VuZXJhdGVDb25maWcuZ2V0RGF0ZShlbmREYXRlKTtcbiAgdmFyIG1vbnRoU2hvdyA9IG1vbnRoIDwgMTAgPyBcIjBcIi5jb25jYXQobW9udGgpIDogXCJcIi5jb25jYXQobW9udGgpO1xuICByZXR1cm4gXCJcIi5jb25jYXQoeWVhciwgXCItXCIpLmNvbmNhdChtb250aFNob3csIFwiLVwiKS5jb25jYXQobGFzdERheSk7XG59IiwiaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXlcIjtcbmltcG9ydCBLZXlDb2RlIGZyb20gXCJyYy11dGlsL2VzL0tleUNvZGVcIjtcbmltcG9ydCByYWYgZnJvbSBcInJjLXV0aWwvZXMvcmFmXCI7XG5pbXBvcnQgaXNWaXNpYmxlIGZyb20gXCJyYy11dGlsL2VzL0RvbS9pc1Zpc2libGVcIjtcbnZhciBzY3JvbGxJZHMgPSBuZXcgTWFwKCk7XG4vKiogVHJpZ2dlciB3aGVuIGVsZW1lbnQgaXMgdmlzaWJsZSBpbiB2aWV3ICovXG5cbmV4cG9ydCBmdW5jdGlvbiB3YWl0RWxlbWVudFJlYWR5KGVsZW1lbnQsIGNhbGxiYWNrKSB7XG4gIHZhciBpZDtcblxuICBmdW5jdGlvbiB0cnlPck5leHRGcmFtZSgpIHtcbiAgICBpZiAoaXNWaXNpYmxlKGVsZW1lbnQpKSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZCA9IHJhZihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyeU9yTmV4dEZyYW1lKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICB0cnlPck5leHRGcmFtZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJhZi5jYW5jZWwoaWQpO1xuICB9O1xufVxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjcm9sbFRvKGVsZW1lbnQsIHRvLCBkdXJhdGlvbikge1xuICBpZiAoc2Nyb2xsSWRzLmdldChlbGVtZW50KSkge1xuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHNjcm9sbElkcy5nZXQoZWxlbWVudCkpO1xuICB9IC8vIGp1bXAgdG8gdGFyZ2V0IGlmIGR1cmF0aW9uIHplcm9cblxuXG4gIGlmIChkdXJhdGlvbiA8PSAwKSB7XG4gICAgc2Nyb2xsSWRzLnNldChlbGVtZW50LCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSB0bztcbiAgICB9KSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGRpZmZlcmVuY2UgPSB0byAtIGVsZW1lbnQuc2Nyb2xsVG9wO1xuICB2YXIgcGVyVGljayA9IGRpZmZlcmVuY2UgLyBkdXJhdGlvbiAqIDEwO1xuICBzY3JvbGxJZHMuc2V0KGVsZW1lbnQsIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgZWxlbWVudC5zY3JvbGxUb3AgKz0gcGVyVGljaztcblxuICAgIGlmIChlbGVtZW50LnNjcm9sbFRvcCAhPT0gdG8pIHtcbiAgICAgIHNjcm9sbFRvKGVsZW1lbnQsIHRvLCBkdXJhdGlvbiAtIDEwKTtcbiAgICB9XG4gIH0pKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVLZXlEb3duSGFuZGxlcihldmVudCwgX3JlZikge1xuICB2YXIgb25MZWZ0UmlnaHQgPSBfcmVmLm9uTGVmdFJpZ2h0LFxuICAgICAgb25DdHJsTGVmdFJpZ2h0ID0gX3JlZi5vbkN0cmxMZWZ0UmlnaHQsXG4gICAgICBvblVwRG93biA9IF9yZWYub25VcERvd24sXG4gICAgICBvblBhZ2VVcERvd24gPSBfcmVmLm9uUGFnZVVwRG93bixcbiAgICAgIG9uRW50ZXIgPSBfcmVmLm9uRW50ZXI7XG4gIHZhciB3aGljaCA9IGV2ZW50LndoaWNoLFxuICAgICAgY3RybEtleSA9IGV2ZW50LmN0cmxLZXksXG4gICAgICBtZXRhS2V5ID0gZXZlbnQubWV0YUtleTtcblxuICBzd2l0Y2ggKHdoaWNoKSB7XG4gICAgY2FzZSBLZXlDb2RlLkxFRlQ6XG4gICAgICBpZiAoY3RybEtleSB8fCBtZXRhS2V5KSB7XG4gICAgICAgIGlmIChvbkN0cmxMZWZ0UmlnaHQpIHtcbiAgICAgICAgICBvbkN0cmxMZWZ0UmlnaHQoLTEpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG9uTGVmdFJpZ2h0KSB7XG4gICAgICAgIG9uTGVmdFJpZ2h0KC0xKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBLZXlDb2RlLlJJR0hUOlxuICAgICAgaWYgKGN0cmxLZXkgfHwgbWV0YUtleSkge1xuICAgICAgICBpZiAob25DdHJsTGVmdFJpZ2h0KSB7XG4gICAgICAgICAgb25DdHJsTGVmdFJpZ2h0KDEpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG9uTGVmdFJpZ2h0KSB7XG4gICAgICAgIG9uTGVmdFJpZ2h0KDEpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIEtleUNvZGUuVVA6XG4gICAgICBpZiAob25VcERvd24pIHtcbiAgICAgICAgb25VcERvd24oLTEpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIEtleUNvZGUuRE9XTjpcbiAgICAgIGlmIChvblVwRG93bikge1xuICAgICAgICBvblVwRG93bigxKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBLZXlDb2RlLlBBR0VfVVA6XG4gICAgICBpZiAob25QYWdlVXBEb3duKSB7XG4gICAgICAgIG9uUGFnZVVwRG93bigtMSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblxuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgS2V5Q29kZS5QQUdFX0RPV046XG4gICAgICBpZiAob25QYWdlVXBEb3duKSB7XG4gICAgICAgIG9uUGFnZVVwRG93bigxKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBLZXlDb2RlLkVOVEVSOlxuICAgICAgaWYgKG9uRW50ZXIpIHtcbiAgICAgICAgb25FbnRlcigpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cblxuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59IC8vID09PT09PT09PT09PT09PT09PT09PSBGb3JtYXQgPT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0Rm9ybWF0KGZvcm1hdCwgcGlja2VyLCBzaG93VGltZSwgdXNlMTJIb3Vycykge1xuICB2YXIgbWVyZ2VkRm9ybWF0ID0gZm9ybWF0O1xuXG4gIGlmICghbWVyZ2VkRm9ybWF0KSB7XG4gICAgc3dpdGNoIChwaWNrZXIpIHtcbiAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICBtZXJnZWRGb3JtYXQgPSB1c2UxMkhvdXJzID8gJ2hoOm1tOnNzIGEnIDogJ0hIOm1tOnNzJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgICBtZXJnZWRGb3JtYXQgPSAnZ2dnZy13byc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdtb250aCc6XG4gICAgICAgIG1lcmdlZEZvcm1hdCA9ICdZWVlZLU1NJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3F1YXJ0ZXInOlxuICAgICAgICBtZXJnZWRGb3JtYXQgPSAnWVlZWS1bUV1RJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICBtZXJnZWRGb3JtYXQgPSAnWVlZWSc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBtZXJnZWRGb3JtYXQgPSBzaG93VGltZSA/ICdZWVlZLU1NLUREIEhIOm1tOnNzJyA6ICdZWVlZLU1NLUREJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbWVyZ2VkRm9ybWF0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldElucHV0U2l6ZShwaWNrZXIsIGZvcm1hdCwgZ2VuZXJhdGVDb25maWcpIHtcbiAgdmFyIGRlZmF1bHRTaXplID0gcGlja2VyID09PSAndGltZScgPyA4IDogMTA7XG4gIHZhciBsZW5ndGggPSB0eXBlb2YgZm9ybWF0ID09PSAnZnVuY3Rpb24nID8gZm9ybWF0KGdlbmVyYXRlQ29uZmlnLmdldE5vdygpKS5sZW5ndGggOiBmb3JtYXQubGVuZ3RoO1xuICByZXR1cm4gTWF0aC5tYXgoZGVmYXVsdFNpemUsIGxlbmd0aCkgKyAyO1xufVxudmFyIGdsb2JhbENsaWNrRnVuYyA9IG51bGw7XG52YXIgY2xpY2tDYWxsYmFja3MgPSBuZXcgU2V0KCk7XG5leHBvcnQgZnVuY3Rpb24gYWRkR2xvYmFsTW91c2VEb3duRXZlbnQoY2FsbGJhY2spIHtcbiAgaWYgKCFnbG9iYWxDbGlja0Z1bmMgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICBnbG9iYWxDbGlja0Z1bmMgPSBmdW5jdGlvbiBnbG9iYWxDbGlja0Z1bmMoZSkge1xuICAgICAgLy8gQ2xvbmUgYSBuZXcgbGlzdCB0byBhdm9pZCByZXBlYXQgdHJpZ2dlciBldmVudHNcbiAgICAgIF90b0NvbnN1bWFibGVBcnJheShjbGlja0NhbGxiYWNrcykuZm9yRWFjaChmdW5jdGlvbiAocXVldWVGdW5jKSB7XG4gICAgICAgIHF1ZXVlRnVuYyhlKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZ2xvYmFsQ2xpY2tGdW5jKTtcbiAgfVxuXG4gIGNsaWNrQ2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgY2xpY2tDYWxsYmFja3MuZGVsZXRlKGNhbGxiYWNrKTtcblxuICAgIGlmIChjbGlja0NhbGxiYWNrcy5zaXplID09PSAwKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZ2xvYmFsQ2xpY2tGdW5jKTtcbiAgICAgIGdsb2JhbENsaWNrRnVuYyA9IG51bGw7XG4gICAgfVxuICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhcmdldEZyb21FdmVudChlKSB7XG4gIHZhciB0YXJnZXQgPSBlLnRhcmdldDsgLy8gZ2V0IHRhcmdldCBpZiBpbiBzaGFkb3cgZG9tXG5cbiAgaWYgKGUuY29tcG9zZWQgJiYgdGFyZ2V0LnNoYWRvd1Jvb3QpIHtcbiAgICB2YXIgX2UkY29tcG9zZWRQYXRoO1xuXG4gICAgcmV0dXJuICgoX2UkY29tcG9zZWRQYXRoID0gZS5jb21wb3NlZFBhdGgpID09PSBudWxsIHx8IF9lJGNvbXBvc2VkUGF0aCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UkY29tcG9zZWRQYXRoLmNhbGwoZSlbMF0pIHx8IHRhcmdldDtcbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59IC8vID09PT09PT09PT09PT09PT09PT09PT0gTW9kZSA9PT09PT09PT09PT09PT09PT09PT09XG5cbnZhciBnZXRZZWFyTmV4dE1vZGUgPSBmdW5jdGlvbiBnZXRZZWFyTmV4dE1vZGUobmV4dCkge1xuICBpZiAobmV4dCA9PT0gJ21vbnRoJyB8fCBuZXh0ID09PSAnZGF0ZScpIHtcbiAgICByZXR1cm4gJ3llYXInO1xuICB9XG5cbiAgcmV0dXJuIG5leHQ7XG59O1xuXG52YXIgZ2V0TW9udGhOZXh0TW9kZSA9IGZ1bmN0aW9uIGdldE1vbnRoTmV4dE1vZGUobmV4dCkge1xuICBpZiAobmV4dCA9PT0gJ2RhdGUnKSB7XG4gICAgcmV0dXJuICdtb250aCc7XG4gIH1cblxuICByZXR1cm4gbmV4dDtcbn07XG5cbnZhciBnZXRRdWFydGVyTmV4dE1vZGUgPSBmdW5jdGlvbiBnZXRRdWFydGVyTmV4dE1vZGUobmV4dCkge1xuICBpZiAobmV4dCA9PT0gJ21vbnRoJyB8fCBuZXh0ID09PSAnZGF0ZScpIHtcbiAgICByZXR1cm4gJ3F1YXJ0ZXInO1xuICB9XG5cbiAgcmV0dXJuIG5leHQ7XG59O1xuXG52YXIgZ2V0V2Vla05leHRNb2RlID0gZnVuY3Rpb24gZ2V0V2Vla05leHRNb2RlKG5leHQpIHtcbiAgaWYgKG5leHQgPT09ICdkYXRlJykge1xuICAgIHJldHVybiAnd2Vlayc7XG4gIH1cblxuICByZXR1cm4gbmV4dDtcbn07XG5cbmV4cG9ydCB2YXIgUGlja2VyTW9kZU1hcCA9IHtcbiAgeWVhcjogZ2V0WWVhck5leHRNb2RlLFxuICBtb250aDogZ2V0TW9udGhOZXh0TW9kZSxcbiAgcXVhcnRlcjogZ2V0UXVhcnRlck5leHRNb2RlLFxuICB3ZWVrOiBnZXRXZWVrTmV4dE1vZGUsXG4gIHRpbWU6IG51bGwsXG4gIGRhdGU6IG51bGxcbn07XG5leHBvcnQgZnVuY3Rpb24gZWxlbWVudHNDb250YWlucyhlbGVtZW50cywgdGFyZ2V0KSB7XG4gIHJldHVybiBlbGVtZW50cy5zb21lKGZ1bmN0aW9uIChlbGUpIHtcbiAgICByZXR1cm4gZWxlICYmIGVsZS5jb250YWlucyh0YXJnZXQpO1xuICB9KTtcbn0iXSwic291cmNlUm9vdCI6IiJ9